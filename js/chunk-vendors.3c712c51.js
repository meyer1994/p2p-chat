(self["webpackChunkp2p_chat"]=self["webpackChunkp2p_chat"]||[]).push([[998],{9662:function(t,e,r){var n=r(614),i=r(6330),s=TypeError;t.exports=function(t){if(n(t))return t;throw s(i(t)+" is not a function")}},6077:function(t,e,r){var n=r(614),i=String,s=TypeError;t.exports=function(t){if("object"==typeof t||n(t))return t;throw s("Can't set "+i(t)+" as a prototype")}},1223:function(t,e,r){var n=r(5112),i=r(30),s=r(3070).f,o=n("unscopables"),a=Array.prototype;void 0==a[o]&&s(a,o,{configurable:!0,value:i(null)}),t.exports=function(t){a[o][t]=!0}},9670:function(t,e,r){var n=r(111),i=String,s=TypeError;t.exports=function(t){if(n(t))return t;throw s(i(t)+" is not an object")}},4019:function(t){t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},260:function(t,e,r){"use strict";var n,i,s,o=r(4019),a=r(9781),c=r(7854),u=r(614),l=r(111),h=r(2597),d=r(648),f=r(6330),p=r(8880),g=r(8052),y=r(3070).f,m=r(7976),w=r(9518),v=r(7674),E=r(5112),b=r(9711),S=c.Int8Array,_=S&&S.prototype,R=c.Uint8ClampedArray,I=R&&R.prototype,C=S&&w(S),A=_&&w(_),T=Object.prototype,k=c.TypeError,P=E("toStringTag"),N=b("TYPED_ARRAY_TAG"),L=b("TYPED_ARRAY_CONSTRUCTOR"),D=o&&!!v&&"Opera"!==d(c.opera),O=!1,B={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},x={BigInt64Array:8,BigUint64Array:8},U=function(t){if(!l(t))return!1;var e=d(t);return"DataView"===e||h(B,e)||h(x,e)},M=function(t){if(!l(t))return!1;var e=d(t);return h(B,e)||h(x,e)},V=function(t){if(M(t))return t;throw k("Target is not a typed array")},K=function(t){if(u(t)&&(!v||m(C,t)))return t;throw k(f(t)+" is not a typed array constructor")},F=function(t,e,r,n){if(a){if(r)for(var i in B){var s=c[i];if(s&&h(s.prototype,t))try{delete s.prototype[t]}catch(o){try{s.prototype[t]=e}catch(u){}}}A[t]&&!r||g(A,t,r?e:D&&_[t]||e,n)}},j=function(t,e,r){var n,i;if(a){if(v){if(r)for(n in B)if(i=c[n],i&&h(i,t))try{delete i[t]}catch(s){}if(C[t]&&!r)return;try{return g(C,t,r?e:D&&C[t]||e)}catch(s){}}for(n in B)i=c[n],!i||i[t]&&!r||g(i,t,e)}};for(n in B)i=c[n],s=i&&i.prototype,s?p(s,L,i):D=!1;for(n in x)i=c[n],s=i&&i.prototype,s&&p(s,L,i);if((!D||!u(C)||C===Function.prototype)&&(C=function(){throw k("Incorrect invocation")},D))for(n in B)c[n]&&v(c[n],C);if((!D||!A||A===T)&&(A=C.prototype,D))for(n in B)c[n]&&v(c[n].prototype,A);if(D&&w(I)!==A&&v(I,A),a&&!h(A,P))for(n in O=!0,y(A,P,{get:function(){return l(this)?this[N]:void 0}}),B)c[n]&&p(c[n],N,n);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:D,TYPED_ARRAY_CONSTRUCTOR:L,TYPED_ARRAY_TAG:O&&N,aTypedArray:V,aTypedArrayConstructor:K,exportTypedArrayMethod:F,exportTypedArrayStaticMethod:j,isView:U,isTypedArray:M,TypedArray:C,TypedArrayPrototype:A}},1318:function(t,e,r){var n=r(5656),i=r(1400),s=r(6244),o=function(t){return function(e,r,o){var a,c=n(e),u=s(c),l=i(o,u);if(t&&r!=r){while(u>l)if(a=c[l++],a!=a)return!0}else for(;u>l;l++)if((t||l in c)&&c[l]===r)return t||l||0;return!t&&-1}};t.exports={includes:o(!0),indexOf:o(!1)}},206:function(t,e,r){var n=r(1702);t.exports=n([].slice)},4326:function(t,e,r){var n=r(1702),i=n({}.toString),s=n("".slice);t.exports=function(t){return s(i(t),8,-1)}},648:function(t,e,r){var n=r(1694),i=r(614),s=r(4326),o=r(5112),a=o("toStringTag"),c=Object,u="Arguments"==s(function(){return arguments}()),l=function(t,e){try{return t[e]}catch(r){}};t.exports=n?s:function(t){var e,r,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=l(e=c(t),a))?r:u?s(e):"Object"==(n=s(e))&&i(e.callee)?"Arguments":n}},7741:function(t,e,r){var n=r(1702),i=Error,s=n("".replace),o=function(t){return String(i(t).stack)}("zxcasd"),a=/\n\s*at [^:]*:[^\n]*/,c=a.test(o);t.exports=function(t,e){if(c&&"string"==typeof t&&!i.prepareStackTrace)while(e--)t=s(t,a,"");return t}},9920:function(t,e,r){var n=r(2597),i=r(3887),s=r(1236),o=r(3070);t.exports=function(t,e,r){for(var a=i(e),c=o.f,u=s.f,l=0;l<a.length;l++){var h=a[l];n(t,h)||r&&n(r,h)||c(t,h,u(e,h))}}},8544:function(t,e,r){var n=r(7293);t.exports=!n((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},8880:function(t,e,r){var n=r(9781),i=r(3070),s=r(9114);t.exports=n?function(t,e,r){return i.f(t,e,s(1,r))}:function(t,e,r){return t[e]=r,t}},9114:function(t){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},8052:function(t,e,r){var n=r(614),i=r(3070),s=r(6339),o=r(3072);t.exports=function(t,e,r,a){a||(a={});var c=a.enumerable,u=void 0!==a.name?a.name:e;return n(r)&&s(r,u,a),a.global?c?t[e]=r:o(e,r):(a.unsafe?t[e]&&(c=!0):delete t[e],c?t[e]=r:i.f(t,e,{value:r,enumerable:!1,configurable:!a.nonConfigurable,writable:!a.nonWritable})),t}},3072:function(t,e,r){var n=r(7854),i=Object.defineProperty;t.exports=function(t,e){try{i(n,t,{value:e,configurable:!0,writable:!0})}catch(r){n[t]=e}return e}},9781:function(t,e,r){var n=r(7293);t.exports=!n((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},317:function(t,e,r){var n=r(7854),i=r(111),s=n.document,o=i(s)&&i(s.createElement);t.exports=function(t){return o?s.createElement(t):{}}},6833:function(t,e,r){var n=r(8113);t.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(n)},5268:function(t,e,r){var n=r(4326),i=r(7854);t.exports="process"==n(i.process)},8113:function(t,e,r){var n=r(5005);t.exports=n("navigator","userAgent")||""},7392:function(t,e,r){var n,i,s=r(7854),o=r(8113),a=s.process,c=s.Deno,u=a&&a.versions||c&&c.version,l=u&&u.v8;l&&(n=l.split("."),i=n[0]>0&&n[0]<4?1:+(n[0]+n[1])),!i&&o&&(n=o.match(/Edge\/(\d+)/),(!n||n[1]>=74)&&(n=o.match(/Chrome\/(\d+)/),n&&(i=+n[1]))),t.exports=i},748:function(t){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2914:function(t,e,r){var n=r(7293),i=r(9114);t.exports=!n((function(){var t=Error("a");return!("stack"in t)||(Object.defineProperty(t,"stack",i(1,7)),7!==t.stack)}))},2109:function(t,e,r){var n=r(7854),i=r(1236).f,s=r(8880),o=r(8052),a=r(3072),c=r(9920),u=r(4705);t.exports=function(t,e){var r,l,h,d,f,p,g=t.target,y=t.global,m=t.stat;if(l=y?n:m?n[g]||a(g,{}):(n[g]||{}).prototype,l)for(h in e){if(f=e[h],t.dontCallGetSet?(p=i(l,h),d=p&&p.value):d=l[h],r=u(y?h:g+(m?".":"#")+h,t.forced),!r&&void 0!==d){if(typeof f==typeof d)continue;c(f,d)}(t.sham||d&&d.sham)&&s(f,"sham",!0),o(l,h,f,t)}}},7293:function(t){t.exports=function(t){try{return!!t()}catch(e){return!0}}},2104:function(t,e,r){var n=r(4374),i=Function.prototype,s=i.apply,o=i.call;t.exports="object"==typeof Reflect&&Reflect.apply||(n?o.bind(s):function(){return o.apply(s,arguments)})},9974:function(t,e,r){var n=r(1702),i=r(9662),s=r(4374),o=n(n.bind);t.exports=function(t,e){return i(t),void 0===e?t:s?o(t,e):function(){return t.apply(e,arguments)}}},4374:function(t,e,r){var n=r(7293);t.exports=!n((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))},6916:function(t,e,r){var n=r(4374),i=Function.prototype.call;t.exports=n?i.bind(i):function(){return i.apply(i,arguments)}},6530:function(t,e,r){var n=r(9781),i=r(2597),s=Function.prototype,o=n&&Object.getOwnPropertyDescriptor,a=i(s,"name"),c=a&&"something"===function(){}.name,u=a&&(!n||n&&o(s,"name").configurable);t.exports={EXISTS:a,PROPER:c,CONFIGURABLE:u}},1702:function(t,e,r){var n=r(4374),i=Function.prototype,s=i.bind,o=i.call,a=n&&s.bind(o,o);t.exports=n?function(t){return t&&a(t)}:function(t){return t&&function(){return o.apply(t,arguments)}}},5005:function(t,e,r){var n=r(7854),i=r(614),s=function(t){return i(t)?t:void 0};t.exports=function(t,e){return arguments.length<2?s(n[t]):n[t]&&n[t][e]}},8173:function(t,e,r){var n=r(9662);t.exports=function(t,e){var r=t[e];return null==r?void 0:n(r)}},7854:function(t,e,r){var n=function(t){return t&&t.Math==Math&&t};t.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof r.g&&r.g)||function(){return this}()||Function("return this")()},2597:function(t,e,r){var n=r(1702),i=r(7908),s=n({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return s(i(t),e)}},3501:function(t){t.exports={}},490:function(t,e,r){var n=r(5005);t.exports=n("document","documentElement")},4664:function(t,e,r){var n=r(9781),i=r(7293),s=r(317);t.exports=!n&&!i((function(){return 7!=Object.defineProperty(s("div"),"a",{get:function(){return 7}}).a}))},8361:function(t,e,r){var n=r(1702),i=r(7293),s=r(4326),o=Object,a=n("".split);t.exports=i((function(){return!o("z").propertyIsEnumerable(0)}))?function(t){return"String"==s(t)?a(t,""):o(t)}:o},9587:function(t,e,r){var n=r(614),i=r(111),s=r(7674);t.exports=function(t,e,r){var o,a;return s&&n(o=e.constructor)&&o!==r&&i(a=o.prototype)&&a!==r.prototype&&s(t,a),t}},2788:function(t,e,r){var n=r(1702),i=r(614),s=r(5465),o=n(Function.toString);i(s.inspectSource)||(s.inspectSource=function(t){return o(t)}),t.exports=s.inspectSource},8340:function(t,e,r){var n=r(111),i=r(8880);t.exports=function(t,e){n(e)&&"cause"in e&&i(t,"cause",e.cause)}},9909:function(t,e,r){var n,i,s,o=r(8536),a=r(7854),c=r(1702),u=r(111),l=r(8880),h=r(2597),d=r(5465),f=r(6200),p=r(3501),g="Object already initialized",y=a.TypeError,m=a.WeakMap,w=function(t){return s(t)?i(t):n(t,{})},v=function(t){return function(e){var r;if(!u(e)||(r=i(e)).type!==t)throw y("Incompatible receiver, "+t+" required");return r}};if(o||d.state){var E=d.state||(d.state=new m),b=c(E.get),S=c(E.has),_=c(E.set);n=function(t,e){if(S(E,t))throw new y(g);return e.facade=t,_(E,t,e),e},i=function(t){return b(E,t)||{}},s=function(t){return S(E,t)}}else{var R=f("state");p[R]=!0,n=function(t,e){if(h(t,R))throw new y(g);return e.facade=t,l(t,R,e),e},i=function(t){return h(t,R)?t[R]:{}},s=function(t){return h(t,R)}}t.exports={set:n,get:i,has:s,enforce:w,getterFor:v}},614:function(t){t.exports=function(t){return"function"==typeof t}},4705:function(t,e,r){var n=r(7293),i=r(614),s=/#|\.prototype\./,o=function(t,e){var r=c[a(t)];return r==l||r!=u&&(i(e)?n(e):!!e)},a=o.normalize=function(t){return String(t).replace(s,".").toLowerCase()},c=o.data={},u=o.NATIVE="N",l=o.POLYFILL="P";t.exports=o},111:function(t,e,r){var n=r(614);t.exports=function(t){return"object"==typeof t?null!==t:n(t)}},1913:function(t){t.exports=!1},2190:function(t,e,r){var n=r(5005),i=r(614),s=r(7976),o=r(3307),a=Object;t.exports=o?function(t){return"symbol"==typeof t}:function(t){var e=n("Symbol");return i(e)&&s(e.prototype,a(t))}},6244:function(t,e,r){var n=r(7466);t.exports=function(t){return n(t.length)}},6339:function(t,e,r){var n=r(7293),i=r(614),s=r(2597),o=r(9781),a=r(6530).CONFIGURABLE,c=r(2788),u=r(9909),l=u.enforce,h=u.get,d=Object.defineProperty,f=o&&!n((function(){return 8!==d((function(){}),"length",{value:8}).length})),p=String(String).split("String"),g=t.exports=function(t,e,r){"Symbol("===String(e).slice(0,7)&&(e="["+String(e).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),r&&r.getter&&(e="get "+e),r&&r.setter&&(e="set "+e),(!s(t,"name")||a&&t.name!==e)&&d(t,"name",{value:e,configurable:!0}),f&&r&&s(r,"arity")&&t.length!==r.arity&&d(t,"length",{value:r.arity});try{r&&s(r,"constructor")&&r.constructor?o&&d(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(i){}var n=l(t);return s(n,"source")||(n.source=p.join("string"==typeof e?e:"")),t};Function.prototype.toString=g((function(){return i(this)&&h(this).source||c(this)}),"toString")},4758:function(t){var e=Math.ceil,r=Math.floor;t.exports=Math.trunc||function(t){var n=+t;return(n>0?r:e)(n)}},133:function(t,e,r){var n=r(7392),i=r(7293);t.exports=!!Object.getOwnPropertySymbols&&!i((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&n&&n<41}))},8536:function(t,e,r){var n=r(7854),i=r(614),s=r(2788),o=n.WeakMap;t.exports=i(o)&&/native code/.test(s(o))},6277:function(t,e,r){var n=r(1340);t.exports=function(t,e){return void 0===t?arguments.length<2?"":e:n(t)}},30:function(t,e,r){var n,i=r(9670),s=r(6048),o=r(748),a=r(3501),c=r(490),u=r(317),l=r(6200),h=">",d="<",f="prototype",p="script",g=l("IE_PROTO"),y=function(){},m=function(t){return d+p+h+t+d+"/"+p+h},w=function(t){t.write(m("")),t.close();var e=t.parentWindow.Object;return t=null,e},v=function(){var t,e=u("iframe"),r="java"+p+":";return e.style.display="none",c.appendChild(e),e.src=String(r),t=e.contentWindow.document,t.open(),t.write(m("document.F=Object")),t.close(),t.F},E=function(){try{n=new ActiveXObject("htmlfile")}catch(e){}E="undefined"!=typeof document?document.domain&&n?w(n):v():w(n);var t=o.length;while(t--)delete E[f][o[t]];return E()};a[g]=!0,t.exports=Object.create||function(t,e){var r;return null!==t?(y[f]=i(t),r=new y,y[f]=null,r[g]=t):r=E(),void 0===e?r:s.f(r,e)}},6048:function(t,e,r){var n=r(9781),i=r(3353),s=r(3070),o=r(9670),a=r(5656),c=r(1956);e.f=n&&!i?Object.defineProperties:function(t,e){o(t);var r,n=a(e),i=c(e),u=i.length,l=0;while(u>l)s.f(t,r=i[l++],n[r]);return t}},3070:function(t,e,r){var n=r(9781),i=r(4664),s=r(3353),o=r(9670),a=r(4948),c=TypeError,u=Object.defineProperty,l=Object.getOwnPropertyDescriptor,h="enumerable",d="configurable",f="writable";e.f=n?s?function(t,e,r){if(o(t),e=a(e),o(r),"function"===typeof t&&"prototype"===e&&"value"in r&&f in r&&!r[f]){var n=l(t,e);n&&n[f]&&(t[e]=r.value,r={configurable:d in r?r[d]:n[d],enumerable:h in r?r[h]:n[h],writable:!1})}return u(t,e,r)}:u:function(t,e,r){if(o(t),e=a(e),o(r),i)try{return u(t,e,r)}catch(n){}if("get"in r||"set"in r)throw c("Accessors not supported");return"value"in r&&(t[e]=r.value),t}},1236:function(t,e,r){var n=r(9781),i=r(6916),s=r(5296),o=r(9114),a=r(5656),c=r(4948),u=r(2597),l=r(4664),h=Object.getOwnPropertyDescriptor;e.f=n?h:function(t,e){if(t=a(t),e=c(e),l)try{return h(t,e)}catch(r){}if(u(t,e))return o(!i(s.f,t,e),t[e])}},8006:function(t,e,r){var n=r(6324),i=r(748),s=i.concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,s)}},5181:function(t,e){e.f=Object.getOwnPropertySymbols},9518:function(t,e,r){var n=r(2597),i=r(614),s=r(7908),o=r(6200),a=r(8544),c=o("IE_PROTO"),u=Object,l=u.prototype;t.exports=a?u.getPrototypeOf:function(t){var e=s(t);if(n(e,c))return e[c];var r=e.constructor;return i(r)&&e instanceof r?r.prototype:e instanceof u?l:null}},7976:function(t,e,r){var n=r(1702);t.exports=n({}.isPrototypeOf)},6324:function(t,e,r){var n=r(1702),i=r(2597),s=r(5656),o=r(1318).indexOf,a=r(3501),c=n([].push);t.exports=function(t,e){var r,n=s(t),u=0,l=[];for(r in n)!i(a,r)&&i(n,r)&&c(l,r);while(e.length>u)i(n,r=e[u++])&&(~o(l,r)||c(l,r));return l}},1956:function(t,e,r){var n=r(6324),i=r(748);t.exports=Object.keys||function(t){return n(t,i)}},5296:function(t,e){"use strict";var r={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,i=n&&!r.call({1:2},1);e.f=i?function(t){var e=n(this,t);return!!e&&e.enumerable}:r},7674:function(t,e,r){var n=r(1702),i=r(9670),s=r(6077);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,r={};try{t=n(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set),t(r,[]),e=r instanceof Array}catch(o){}return function(r,n){return i(r),s(n),e?t(r,n):r.__proto__=n,r}}():void 0)},2140:function(t,e,r){var n=r(6916),i=r(614),s=r(111),o=TypeError;t.exports=function(t,e){var r,a;if("string"===e&&i(r=t.toString)&&!s(a=n(r,t)))return a;if(i(r=t.valueOf)&&!s(a=n(r,t)))return a;if("string"!==e&&i(r=t.toString)&&!s(a=n(r,t)))return a;throw o("Can't convert object to primitive value")}},3887:function(t,e,r){var n=r(5005),i=r(1702),s=r(8006),o=r(5181),a=r(9670),c=i([].concat);t.exports=n("Reflect","ownKeys")||function(t){var e=s.f(a(t)),r=o.f;return r?c(e,r(t)):e}},2626:function(t,e,r){var n=r(3070).f;t.exports=function(t,e,r){r in t||n(t,r,{configurable:!0,get:function(){return e[r]},set:function(t){e[r]=t}})}},4488:function(t){var e=TypeError;t.exports=function(t){if(void 0==t)throw e("Can't call method on "+t);return t}},6200:function(t,e,r){var n=r(2309),i=r(9711),s=n("keys");t.exports=function(t){return s[t]||(s[t]=i(t))}},5465:function(t,e,r){var n=r(7854),i=r(3072),s="__core-js_shared__",o=n[s]||i(s,{});t.exports=o},2309:function(t,e,r){var n=r(1913),i=r(5465);(t.exports=function(t,e){return i[t]||(i[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.23.1",mode:n?"pure":"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.23.1/LICENSE",source:"https://github.com/zloirock/core-js"})},261:function(t,e,r){var n,i,s,o,a=r(7854),c=r(2104),u=r(9974),l=r(614),h=r(2597),d=r(7293),f=r(490),p=r(206),g=r(317),y=r(8053),m=r(6833),w=r(5268),v=a.setImmediate,E=a.clearImmediate,b=a.process,S=a.Dispatch,_=a.Function,R=a.MessageChannel,I=a.String,C=0,A={},T="onreadystatechange";try{n=a.location}catch(D){}var k=function(t){if(h(A,t)){var e=A[t];delete A[t],e()}},P=function(t){return function(){k(t)}},N=function(t){k(t.data)},L=function(t){a.postMessage(I(t),n.protocol+"//"+n.host)};v&&E||(v=function(t){y(arguments.length,1);var e=l(t)?t:_(t),r=p(arguments,1);return A[++C]=function(){c(e,void 0,r)},i(C),C},E=function(t){delete A[t]},w?i=function(t){b.nextTick(P(t))}:S&&S.now?i=function(t){S.now(P(t))}:R&&!m?(s=new R,o=s.port2,s.port1.onmessage=N,i=u(o.postMessage,o)):a.addEventListener&&l(a.postMessage)&&!a.importScripts&&n&&"file:"!==n.protocol&&!d(L)?(i=L,a.addEventListener("message",N,!1)):i=T in g("script")?function(t){f.appendChild(g("script"))[T]=function(){f.removeChild(this),k(t)}}:function(t){setTimeout(P(t),0)}),t.exports={set:v,clear:E}},1400:function(t,e,r){var n=r(9303),i=Math.max,s=Math.min;t.exports=function(t,e){var r=n(t);return r<0?i(r+e,0):s(r,e)}},5656:function(t,e,r){var n=r(8361),i=r(4488);t.exports=function(t){return n(i(t))}},9303:function(t,e,r){var n=r(4758);t.exports=function(t){var e=+t;return e!==e||0===e?0:n(e)}},7466:function(t,e,r){var n=r(9303),i=Math.min;t.exports=function(t){return t>0?i(n(t),9007199254740991):0}},7908:function(t,e,r){var n=r(4488),i=Object;t.exports=function(t){return i(n(t))}},4590:function(t,e,r){var n=r(3002),i=RangeError;t.exports=function(t,e){var r=n(t);if(r%e)throw i("Wrong offset");return r}},3002:function(t,e,r){var n=r(9303),i=RangeError;t.exports=function(t){var e=n(t);if(e<0)throw i("The argument can't be less than 0");return e}},7593:function(t,e,r){var n=r(6916),i=r(111),s=r(2190),o=r(8173),a=r(2140),c=r(5112),u=TypeError,l=c("toPrimitive");t.exports=function(t,e){if(!i(t)||s(t))return t;var r,c=o(t,l);if(c){if(void 0===e&&(e="default"),r=n(c,t,e),!i(r)||s(r))return r;throw u("Can't convert object to primitive value")}return void 0===e&&(e="number"),a(t,e)}},4948:function(t,e,r){var n=r(7593),i=r(2190);t.exports=function(t){var e=n(t,"string");return i(e)?e:e+""}},1694:function(t,e,r){var n=r(5112),i=n("toStringTag"),s={};s[i]="z",t.exports="[object z]"===String(s)},1340:function(t,e,r){var n=r(648),i=String;t.exports=function(t){if("Symbol"===n(t))throw TypeError("Cannot convert a Symbol value to a string");return i(t)}},6330:function(t){var e=String;t.exports=function(t){try{return e(t)}catch(r){return"Object"}}},9711:function(t,e,r){var n=r(1702),i=0,s=Math.random(),o=n(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+o(++i+s,36)}},3307:function(t,e,r){var n=r(133);t.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3353:function(t,e,r){var n=r(9781),i=r(7293);t.exports=n&&i((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},8053:function(t){var e=TypeError;t.exports=function(t,r){if(t<r)throw e("Not enough arguments");return t}},5112:function(t,e,r){var n=r(7854),i=r(2309),s=r(2597),o=r(9711),a=r(133),c=r(3307),u=i("wks"),l=n.Symbol,h=l&&l["for"],d=c?l:l&&l.withoutSetter||o;t.exports=function(t){if(!s(u,t)||!a&&"string"!=typeof u[t]){var e="Symbol."+t;a&&s(l,t)?u[t]=l[t]:u[t]=c&&h?h(e):d(e)}return u[t]}},9191:function(t,e,r){"use strict";var n=r(5005),i=r(2597),s=r(8880),o=r(7976),a=r(7674),c=r(9920),u=r(2626),l=r(9587),h=r(6277),d=r(8340),f=r(7741),p=r(2914),g=r(9781),y=r(1913);t.exports=function(t,e,r,m){var w="stackTraceLimit",v=m?2:1,E=t.split("."),b=E[E.length-1],S=n.apply(null,E);if(S){var _=S.prototype;if(!y&&i(_,"cause")&&delete _.cause,!r)return S;var R=n("Error"),I=e((function(t,e){var r=h(m?e:t,void 0),n=m?new S(t):new S;return void 0!==r&&s(n,"message",r),p&&s(n,"stack",f(n.stack,2)),this&&o(_,this)&&l(n,this,I),arguments.length>v&&d(n,arguments[v]),n}));if(I.prototype=_,"Error"!==b?a?a(I,R):c(I,R,{name:!0}):g&&w in S&&(u(I,S,w),u(I,S,"prepareStackTrace")),c(I,S),!y)try{_.name!==b&&s(_,"name",b),_.constructor=I}catch(C){}return I}}},2262:function(t,e,r){"use strict";var n=r(2109),i=r(7908),s=r(6244),o=r(9303),a=r(1223);n({target:"Array",proto:!0},{at:function(t){var e=i(this),r=s(e),n=o(t),a=n>=0?n:r+n;return a<0||a>=r?void 0:e[a]}}),a("at")},1703:function(t,e,r){var n=r(2109),i=r(7854),s=r(2104),o=r(9191),a="WebAssembly",c=i[a],u=7!==Error("e",{cause:7}).cause,l=function(t,e){var r={};r[t]=o(t,e,u),n({global:!0,constructor:!0,arity:1,forced:u},r)},h=function(t,e){if(c&&c[t]){var r={};r[t]=o(a+"."+t,e,u),n({target:a,stat:!0,constructor:!0,arity:1,forced:u},r)}};l("Error",(function(t){return function(e){return s(t,this,arguments)}})),l("EvalError",(function(t){return function(e){return s(t,this,arguments)}})),l("RangeError",(function(t){return function(e){return s(t,this,arguments)}})),l("ReferenceError",(function(t){return function(e){return s(t,this,arguments)}})),l("SyntaxError",(function(t){return function(e){return s(t,this,arguments)}})),l("TypeError",(function(t){return function(e){return s(t,this,arguments)}})),l("URIError",(function(t){return function(e){return s(t,this,arguments)}})),h("CompileError",(function(t){return function(e){return s(t,this,arguments)}})),h("LinkError",(function(t){return function(e){return s(t,this,arguments)}})),h("RuntimeError",(function(t){return function(e){return s(t,this,arguments)}}))},4506:function(t,e,r){"use strict";var n=r(2109),i=r(1702),s=r(4488),o=r(9303),a=r(1340),c=r(7293),u=i("".charAt),l=c((function(){return"\ud842"!=="𠮷".at(-2)}));n({target:"String",proto:!0,forced:l},{at:function(t){var e=a(s(this)),r=e.length,n=o(t),i=n>=0?n:r+n;return i<0||i>=r?void 0:u(e,i)}})},8675:function(t,e,r){"use strict";var n=r(260),i=r(6244),s=r(9303),o=n.aTypedArray,a=n.exportTypedArrayMethod;a("at",(function(t){var e=o(this),r=i(e),n=s(t),a=n>=0?n:r+n;return a<0||a>=r?void 0:e[a]}))},3462:function(t,e,r){"use strict";var n=r(7854),i=r(6916),s=r(260),o=r(6244),a=r(4590),c=r(7908),u=r(7293),l=n.RangeError,h=n.Int8Array,d=h&&h.prototype,f=d&&d.set,p=s.aTypedArray,g=s.exportTypedArrayMethod,y=!u((function(){var t=new Uint8ClampedArray(2);return i(f,t,{length:1,0:3},1),3!==t[1]})),m=y&&s.NATIVE_ARRAY_BUFFER_VIEWS&&u((function(){var t=new h(2);return t.set(1),t.set("2",1),0!==t[0]||2!==t[1]}));g("set",(function(t){p(this);var e=a(arguments.length>1?arguments[1]:void 0,1),r=c(t);if(y)return i(f,this,r,e);var n=this.length,s=o(r),u=0;if(s+e>n)throw l("Wrong length");while(u<s)this[e+u]=r[u++]}),!y||m)},1091:function(t,e,r){var n=r(2109),i=r(7854),s=r(261).clear;n({global:!0,bind:!0,enumerable:!0,forced:i.clearImmediate!==s},{clearImmediate:s})},4633:function(t,e,r){r(1091),r(2986)},2986:function(t,e,r){var n=r(2109),i=r(7854),s=r(261).set;n({global:!0,bind:!0,enumerable:!0,forced:i.setImmediate!==s},{setImmediate:s})},6764:function(t,e){function r(t){if(t)return n(t)}function n(t){for(var e in r.prototype)t[e]=r.prototype[e];return t}e.Q=r,r.prototype.on=r.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},r.prototype.once=function(t,e){function r(){this.off(t,r),e.apply(this,arguments)}return r.fn=e,this.on(t,r),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r,n=this._callbacks["$"+t];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var i=0;i<n.length;i++)if(r=n[i],r===e||r.fn===e){n.splice(i,1);break}return 0===n.length&&delete this._callbacks["$"+t],this},r.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),r=this._callbacks["$"+t],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(r){r=r.slice(0);n=0;for(var i=r.length;n<i;++n)r[n].apply(this,e)}return this},r.prototype.emitReserved=r.prototype.emit,r.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},r.prototype.hasListeners=function(t){return!!this.listeners(t).length}},2267:function(t,e,r){"use strict";r(8675),r(3462),r(1703),Object.defineProperty(e,"__esModule",{value:!0});var n=r(9763);function i(t,e){return void 0===e&&(e=0),(t[e+0]<<8|t[e+1])<<16>>16}function s(t,e){return void 0===e&&(e=0),(t[e+0]<<8|t[e+1])>>>0}function o(t,e){return void 0===e&&(e=0),(t[e+1]<<8|t[e])<<16>>16}function a(t,e){return void 0===e&&(e=0),(t[e+1]<<8|t[e])>>>0}function c(t,e,r){return void 0===e&&(e=new Uint8Array(2)),void 0===r&&(r=0),e[r+0]=t>>>8,e[r+1]=t>>>0,e}function u(t,e,r){return void 0===e&&(e=new Uint8Array(2)),void 0===r&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e}function l(t,e){return void 0===e&&(e=0),t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}function h(t,e){return void 0===e&&(e=0),(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}function d(t,e){return void 0===e&&(e=0),t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]}function f(t,e){return void 0===e&&(e=0),(t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e])>>>0}function p(t,e,r){return void 0===e&&(e=new Uint8Array(4)),void 0===r&&(r=0),e[r+0]=t>>>24,e[r+1]=t>>>16,e[r+2]=t>>>8,e[r+3]=t>>>0,e}function g(t,e,r){return void 0===e&&(e=new Uint8Array(4)),void 0===r&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e[r+2]=t>>>16,e[r+3]=t>>>24,e}function y(t,e){void 0===e&&(e=0);var r=l(t,e),n=l(t,e+4);return 4294967296*r+n-4294967296*(n>>31)}function m(t,e){void 0===e&&(e=0);var r=h(t,e),n=h(t,e+4);return 4294967296*r+n}function w(t,e){void 0===e&&(e=0);var r=d(t,e),n=d(t,e+4);return 4294967296*n+r-4294967296*(r>>31)}function v(t,e){void 0===e&&(e=0);var r=f(t,e),n=f(t,e+4);return 4294967296*n+r}function E(t,e,r){return void 0===e&&(e=new Uint8Array(8)),void 0===r&&(r=0),p(t/4294967296>>>0,e,r),p(t>>>0,e,r+4),e}function b(t,e,r){return void 0===e&&(e=new Uint8Array(8)),void 0===r&&(r=0),g(t>>>0,e,r),g(t/4294967296>>>0,e,r+4),e}function S(t,e,r){if(void 0===r&&(r=0),t%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var n=0,i=1,s=t/8+r-1;s>=r;s--)n+=e[s]*i,i*=256;return n}function _(t,e,r){if(void 0===r&&(r=0),t%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var n=0,i=1,s=r;s<r+t/8;s++)n+=e[s]*i,i*=256;return n}function R(t,e,r,i){if(void 0===r&&(r=new Uint8Array(t/8)),void 0===i&&(i=0),t%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!n.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var s=1,o=t/8+i-1;o>=i;o--)r[o]=e/s&255,s*=256;return r}function I(t,e,r,i){if(void 0===r&&(r=new Uint8Array(t/8)),void 0===i&&(i=0),t%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!n.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var s=1,o=i;o<i+t/8;o++)r[o]=e/s&255,s*=256;return r}function C(t,e){void 0===e&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e)}function A(t,e){void 0===e&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e,!0)}function T(t,e){void 0===e&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e)}function k(t,e){void 0===e&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e,!0)}function P(t,e,r){void 0===e&&(e=new Uint8Array(4)),void 0===r&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t),e}function N(t,e,r){void 0===e&&(e=new Uint8Array(4)),void 0===r&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t,!0),e}function L(t,e,r){void 0===e&&(e=new Uint8Array(8)),void 0===r&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t),e}function D(t,e,r){void 0===e&&(e=new Uint8Array(8)),void 0===r&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t,!0),e}e.readInt16BE=i,e.readUint16BE=s,e.readInt16LE=o,e.readUint16LE=a,e.writeUint16BE=c,e.writeInt16BE=c,e.writeUint16LE=u,e.writeInt16LE=u,e.readInt32BE=l,e.readUint32BE=h,e.readInt32LE=d,e.readUint32LE=f,e.writeUint32BE=p,e.writeInt32BE=p,e.writeUint32LE=g,e.writeInt32LE=g,e.readInt64BE=y,e.readUint64BE=m,e.readInt64LE=w,e.readUint64LE=v,e.writeUint64BE=E,e.writeInt64BE=E,e.writeUint64LE=b,e.writeInt64LE=b,e.readUintBE=S,e.readUintLE=_,e.writeUintBE=R,e.writeUintLE=I,e.readFloat32BE=C,e.readFloat32LE=A,e.readFloat64BE=T,e.readFloat64LE=k,e.writeFloat32BE=P,e.writeFloat32LE=N,e.writeFloat64BE=L,e.writeFloat64LE=D},3038:function(t,e,r){"use strict";r(1703),r(8675),r(3462),Object.defineProperty(e,"__esModule",{value:!0});var n=r(2267),i=r(5279),s=20;function o(t,e,r){for(var i=1634760805,o=857760878,a=2036477234,c=1797285236,u=r[3]<<24|r[2]<<16|r[1]<<8|r[0],l=r[7]<<24|r[6]<<16|r[5]<<8|r[4],h=r[11]<<24|r[10]<<16|r[9]<<8|r[8],d=r[15]<<24|r[14]<<16|r[13]<<8|r[12],f=r[19]<<24|r[18]<<16|r[17]<<8|r[16],p=r[23]<<24|r[22]<<16|r[21]<<8|r[20],g=r[27]<<24|r[26]<<16|r[25]<<8|r[24],y=r[31]<<24|r[30]<<16|r[29]<<8|r[28],m=e[3]<<24|e[2]<<16|e[1]<<8|e[0],w=e[7]<<24|e[6]<<16|e[5]<<8|e[4],v=e[11]<<24|e[10]<<16|e[9]<<8|e[8],E=e[15]<<24|e[14]<<16|e[13]<<8|e[12],b=i,S=o,_=a,R=c,I=u,C=l,A=h,T=d,k=f,P=p,N=g,L=y,D=m,O=w,B=v,x=E,U=0;U<s;U+=2)b=b+I|0,D^=b,D=D>>>16|D<<16,k=k+D|0,I^=k,I=I>>>20|I<<12,S=S+C|0,O^=S,O=O>>>16|O<<16,P=P+O|0,C^=P,C=C>>>20|C<<12,_=_+A|0,B^=_,B=B>>>16|B<<16,N=N+B|0,A^=N,A=A>>>20|A<<12,R=R+T|0,x^=R,x=x>>>16|x<<16,L=L+x|0,T^=L,T=T>>>20|T<<12,_=_+A|0,B^=_,B=B>>>24|B<<8,N=N+B|0,A^=N,A=A>>>25|A<<7,R=R+T|0,x^=R,x=x>>>24|x<<8,L=L+x|0,T^=L,T=T>>>25|T<<7,S=S+C|0,O^=S,O=O>>>24|O<<8,P=P+O|0,C^=P,C=C>>>25|C<<7,b=b+I|0,D^=b,D=D>>>24|D<<8,k=k+D|0,I^=k,I=I>>>25|I<<7,b=b+C|0,x^=b,x=x>>>16|x<<16,N=N+x|0,C^=N,C=C>>>20|C<<12,S=S+A|0,D^=S,D=D>>>16|D<<16,L=L+D|0,A^=L,A=A>>>20|A<<12,_=_+T|0,O^=_,O=O>>>16|O<<16,k=k+O|0,T^=k,T=T>>>20|T<<12,R=R+I|0,B^=R,B=B>>>16|B<<16,P=P+B|0,I^=P,I=I>>>20|I<<12,_=_+T|0,O^=_,O=O>>>24|O<<8,k=k+O|0,T^=k,T=T>>>25|T<<7,R=R+I|0,B^=R,B=B>>>24|B<<8,P=P+B|0,I^=P,I=I>>>25|I<<7,S=S+A|0,D^=S,D=D>>>24|D<<8,L=L+D|0,A^=L,A=A>>>25|A<<7,b=b+C|0,x^=b,x=x>>>24|x<<8,N=N+x|0,C^=N,C=C>>>25|C<<7;n.writeUint32LE(b+i|0,t,0),n.writeUint32LE(S+o|0,t,4),n.writeUint32LE(_+a|0,t,8),n.writeUint32LE(R+c|0,t,12),n.writeUint32LE(I+u|0,t,16),n.writeUint32LE(C+l|0,t,20),n.writeUint32LE(A+h|0,t,24),n.writeUint32LE(T+d|0,t,28),n.writeUint32LE(k+f|0,t,32),n.writeUint32LE(P+p|0,t,36),n.writeUint32LE(N+g|0,t,40),n.writeUint32LE(L+y|0,t,44),n.writeUint32LE(D+m|0,t,48),n.writeUint32LE(O+w|0,t,52),n.writeUint32LE(B+v|0,t,56),n.writeUint32LE(x+E|0,t,60)}function a(t,e,r,n,s){if(void 0===s&&(s=0),32!==t.length)throw new Error("ChaCha: key size must be 32 bytes");if(n.length<r.length)throw new Error("ChaCha: destination is shorter than source");var a,c;if(0===s){if(8!==e.length&&12!==e.length)throw new Error("ChaCha nonce must be 8 or 12 bytes");a=new Uint8Array(16),c=a.length-e.length,a.set(e,c)}else{if(16!==e.length)throw new Error("ChaCha nonce with counter must be 16 bytes");a=e,c=s}for(var l=new Uint8Array(64),h=0;h<r.length;h+=64){o(l,a,t);for(var d=h;d<h+64&&d<r.length;d++)n[d]=r[d]^l[d-h];u(a,0,c)}return i.wipe(l),0===s&&i.wipe(a),n}function c(t,e,r,n){return void 0===n&&(n=0),i.wipe(r),a(t,e,r,r,n)}function u(t,e,r){var n=1;while(r--)n=n+(255&t[e])|0,t[e]=255&n,n>>>=8,e++;if(n>0)throw new Error("ChaCha: counter overflow")}e.streamXOR=a,e.stream=c},2130:function(t,e,r){"use strict";r(8675),r(3462),r(1703);var n=r(3038),i=r(5910),s=r(5279),o=r(2267),a=r(4501);e.Cv=32,e.WH=12,e.pg=16;var c=new Uint8Array(16),u=function(){function t(t){if(this.nonceLength=e.WH,this.tagLength=e.pg,t.length!==e.Cv)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(t)}return t.prototype.seal=function(t,e,r,i){if(t.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var o=new Uint8Array(16);o.set(t,o.length-t.length);var a=new Uint8Array(32);n.stream(this._key,o,a,4);var c,u=e.length+this.tagLength;if(i){if(i.length!==u)throw new Error("ChaCha20Poly1305: incorrect destination length");c=i}else c=new Uint8Array(u);return n.streamXOR(this._key,o,e,c,4),this._authenticate(c.subarray(c.length-this.tagLength,c.length),a,c.subarray(0,c.length-this.tagLength),r),s.wipe(o),c},t.prototype.open=function(t,e,r,i){if(t.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(e.length<this.tagLength)return null;var o=new Uint8Array(16);o.set(t,o.length-t.length);var c=new Uint8Array(32);n.stream(this._key,o,c,4);var u=new Uint8Array(this.tagLength);if(this._authenticate(u,c,e.subarray(0,e.length-this.tagLength),r),!a.equal(u,e.subarray(e.length-this.tagLength,e.length)))return null;var l,h=e.length-this.tagLength;if(i){if(i.length!==h)throw new Error("ChaCha20Poly1305: incorrect destination length");l=i}else l=new Uint8Array(h);return n.streamXOR(this._key,o,e.subarray(0,e.length-this.tagLength),l,4),s.wipe(o),l},t.prototype.clean=function(){return s.wipe(this._key),this},t.prototype._authenticate=function(t,e,r,n){var a=new i.Poly1305(e);n&&(a.update(n),n.length%16>0&&a.update(c.subarray(n.length%16))),a.update(r),r.length%16>0&&a.update(c.subarray(r.length%16));var u=new Uint8Array(8);n&&o.writeUint64LE(n.length,u),a.update(u),o.writeUint64LE(r.length,u),a.update(u);for(var l=a.digest(),h=0;h<l.length;h++)t[h]=l[h];a.clean(),s.wipe(l),s.wipe(u)},t}();e.OK=u},4501:function(t,e){"use strict";function r(t,e,r){return~(t-1)&e|t-1&r}function n(t,e){return(0|t)-(0|e)-1>>>31&1}function i(t,e){if(t.length!==e.length)return 0;for(var r=0,n=0;n<t.length;n++)r|=t[n]^e[n];return 1&r-1>>>8}function s(t,e){return 0!==t.length&&0!==e.length&&0!==i(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.select=r,e.lessOrEqual=n,e.compare=i,e.equal=s},2270:function(t,e){"use strict";function r(t){return"undefined"!==typeof t.saveState&&"undefined"!==typeof t.restoreState&&"undefined"!==typeof t.cleanSavedState}Object.defineProperty(e,"__esModule",{value:!0}),e.isSerializableHash=r},6711:function(t,e,r){"use strict";r(8675),r(3462),r(1703);var n=r(6702),i=r(5279),s=function(){function t(t,e,r,i){void 0===r&&(r=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=t,this._info=i;var s=n.hmac(this._hash,r,e);this._hmac=new n.HMAC(t,s),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return t.prototype._fillBuffer=function(){this._counter[0]++;var t=this._counter[0];if(0===t)throw new Error("hkdf: cannot expand more");this._hmac.reset(),t>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},t.prototype.expand=function(t){for(var e=new Uint8Array(t),r=0;r<e.length;r++)this._bufpos===this._buffer.length&&this._fillBuffer(),e[r]=this._buffer[this._bufpos++];return e},t.prototype.clean=function(){this._hmac.clean(),i.wipe(this._buffer),i.wipe(this._counter),this._bufpos=0},t}();e.t=s},6702:function(t,e,r){"use strict";r(8675),r(3462),r(1703),Object.defineProperty(e,"__esModule",{value:!0});var n=r(2270),i=r(4501),s=r(5279),o=function(){function t(t,e){this._finished=!1,this._inner=new t,this._outer=new t,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var r=new Uint8Array(this.blockSize);e.length>this.blockSize?this._inner.update(e).finish(r).clean():r.set(e);for(var i=0;i<r.length;i++)r[i]^=54;this._inner.update(r);for(i=0;i<r.length;i++)r[i]^=106;this._outer.update(r),n.isSerializableHash(this._inner)&&n.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),s.wipe(r)}return t.prototype.reset=function(){if(!n.isSerializableHash(this._inner)||!n.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.clean=function(){n.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),n.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},t.prototype.update=function(t){return this._inner.update(t),this},t.prototype.finish=function(t){return this._finished?(this._outer.finish(t),this):(this._inner.finish(t),this._outer.update(t.subarray(0,this.digestLength)).finish(t),this._finished=!0,this)},t.prototype.digest=function(){var t=new Uint8Array(this.digestLength);return this.finish(t),t},t.prototype.saveState=function(){if(!n.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},t.prototype.restoreState=function(t){if(!n.isSerializableHash(this._inner)||!n.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(t),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.cleanSavedState=function(t){if(!n.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(t)},t}();function a(t,e,r){var n=new o(t,e);n.update(r);var i=n.digest();return n.clean(),i}e.HMAC=o,e.hmac=a,e.equal=i.equal},9763:function(t,e){"use strict";function r(t,e){var r=t>>>16&65535,n=65535&t,i=e>>>16&65535,s=65535&e;return n*s+(r*s+n*i<<16>>>0)|0}function n(t,e){return t+e|0}function i(t,e){return t-e|0}function s(t,e){return t<<e|t>>>32-e}function o(t,e){return t<<32-e|t>>>e}function a(t){return"number"===typeof t&&isFinite(t)&&Math.floor(t)===t}Object.defineProperty(e,"__esModule",{value:!0}),e.mul=Math.imul||r,e.add=n,e.sub=i,e.rotl=s,e.rotr=o,e.isInteger=Number.isInteger||a,e.MAX_SAFE_INTEGER=9007199254740991,e.isSafeInteger=function(t){return e.isInteger(t)&&t>=-e.MAX_SAFE_INTEGER&&t<=e.MAX_SAFE_INTEGER}},5910:function(t,e,r){"use strict";r(8675),r(3462),r(1703),Object.defineProperty(e,"__esModule",{value:!0});var n=r(4501),i=r(5279);e.DIGEST_LENGTH=16;var s=function(){function t(t){this.digestLength=e.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var r=t[0]|t[1]<<8;this._r[0]=8191&r;var n=t[2]|t[3]<<8;this._r[1]=8191&(r>>>13|n<<3);var i=t[4]|t[5]<<8;this._r[2]=7939&(n>>>10|i<<6);var s=t[6]|t[7]<<8;this._r[3]=8191&(i>>>7|s<<9);var o=t[8]|t[9]<<8;this._r[4]=255&(s>>>4|o<<12),this._r[5]=o>>>1&8190;var a=t[10]|t[11]<<8;this._r[6]=8191&(o>>>14|a<<2);var c=t[12]|t[13]<<8;this._r[7]=8065&(a>>>11|c<<5);var u=t[14]|t[15]<<8;this._r[8]=8191&(c>>>8|u<<8),this._r[9]=u>>>5&127,this._pad[0]=t[16]|t[17]<<8,this._pad[1]=t[18]|t[19]<<8,this._pad[2]=t[20]|t[21]<<8,this._pad[3]=t[22]|t[23]<<8,this._pad[4]=t[24]|t[25]<<8,this._pad[5]=t[26]|t[27]<<8,this._pad[6]=t[28]|t[29]<<8,this._pad[7]=t[30]|t[31]<<8}return t.prototype._blocks=function(t,e,r){var n=this._fin?0:2048,i=this._h[0],s=this._h[1],o=this._h[2],a=this._h[3],c=this._h[4],u=this._h[5],l=this._h[6],h=this._h[7],d=this._h[8],f=this._h[9],p=this._r[0],g=this._r[1],y=this._r[2],m=this._r[3],w=this._r[4],v=this._r[5],E=this._r[6],b=this._r[7],S=this._r[8],_=this._r[9];while(r>=16){var R=t[e+0]|t[e+1]<<8;i+=8191&R;var I=t[e+2]|t[e+3]<<8;s+=8191&(R>>>13|I<<3);var C=t[e+4]|t[e+5]<<8;o+=8191&(I>>>10|C<<6);var A=t[e+6]|t[e+7]<<8;a+=8191&(C>>>7|A<<9);var T=t[e+8]|t[e+9]<<8;c+=8191&(A>>>4|T<<12),u+=T>>>1&8191;var k=t[e+10]|t[e+11]<<8;l+=8191&(T>>>14|k<<2);var P=t[e+12]|t[e+13]<<8;h+=8191&(k>>>11|P<<5);var N=t[e+14]|t[e+15]<<8;d+=8191&(P>>>8|N<<8),f+=N>>>5|n;var L=0,D=L;D+=i*p,D+=s*(5*_),D+=o*(5*S),D+=a*(5*b),D+=c*(5*E),L=D>>>13,D&=8191,D+=u*(5*v),D+=l*(5*w),D+=h*(5*m),D+=d*(5*y),D+=f*(5*g),L+=D>>>13,D&=8191;var O=L;O+=i*g,O+=s*p,O+=o*(5*_),O+=a*(5*S),O+=c*(5*b),L=O>>>13,O&=8191,O+=u*(5*E),O+=l*(5*v),O+=h*(5*w),O+=d*(5*m),O+=f*(5*y),L+=O>>>13,O&=8191;var B=L;B+=i*y,B+=s*g,B+=o*p,B+=a*(5*_),B+=c*(5*S),L=B>>>13,B&=8191,B+=u*(5*b),B+=l*(5*E),B+=h*(5*v),B+=d*(5*w),B+=f*(5*m),L+=B>>>13,B&=8191;var x=L;x+=i*m,x+=s*y,x+=o*g,x+=a*p,x+=c*(5*_),L=x>>>13,x&=8191,x+=u*(5*S),x+=l*(5*b),x+=h*(5*E),x+=d*(5*v),x+=f*(5*w),L+=x>>>13,x&=8191;var U=L;U+=i*w,U+=s*m,U+=o*y,U+=a*g,U+=c*p,L=U>>>13,U&=8191,U+=u*(5*_),U+=l*(5*S),U+=h*(5*b),U+=d*(5*E),U+=f*(5*v),L+=U>>>13,U&=8191;var M=L;M+=i*v,M+=s*w,M+=o*m,M+=a*y,M+=c*g,L=M>>>13,M&=8191,M+=u*p,M+=l*(5*_),M+=h*(5*S),M+=d*(5*b),M+=f*(5*E),L+=M>>>13,M&=8191;var V=L;V+=i*E,V+=s*v,V+=o*w,V+=a*m,V+=c*y,L=V>>>13,V&=8191,V+=u*g,V+=l*p,V+=h*(5*_),V+=d*(5*S),V+=f*(5*b),L+=V>>>13,V&=8191;var K=L;K+=i*b,K+=s*E,K+=o*v,K+=a*w,K+=c*m,L=K>>>13,K&=8191,K+=u*y,K+=l*g,K+=h*p,K+=d*(5*_),K+=f*(5*S),L+=K>>>13,K&=8191;var F=L;F+=i*S,F+=s*b,F+=o*E,F+=a*v,F+=c*w,L=F>>>13,F&=8191,F+=u*m,F+=l*y,F+=h*g,F+=d*p,F+=f*(5*_),L+=F>>>13,F&=8191;var j=L;j+=i*_,j+=s*S,j+=o*b,j+=a*E,j+=c*v,L=j>>>13,j&=8191,j+=u*w,j+=l*m,j+=h*y,j+=d*g,j+=f*p,L+=j>>>13,j&=8191,L=(L<<2)+L|0,L=L+D|0,D=8191&L,L>>>=13,O+=L,i=D,s=O,o=B,a=x,c=U,u=M,l=V,h=K,d=F,f=j,e+=16,r-=16}this._h[0]=i,this._h[1]=s,this._h[2]=o,this._h[3]=a,this._h[4]=c,this._h[5]=u,this._h[6]=l,this._h[7]=h,this._h[8]=d,this._h[9]=f},t.prototype.finish=function(t,e){void 0===e&&(e=0);var r,n,i,s,o=new Uint16Array(10);if(this._leftover){for(s=this._leftover,this._buffer[s++]=1;s<16;s++)this._buffer[s]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(r=this._h[1]>>>13,this._h[1]&=8191,s=2;s<10;s++)this._h[s]+=r,r=this._h[s]>>>13,this._h[s]&=8191;for(this._h[0]+=5*r,r=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=r,r=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=r,o[0]=this._h[0]+5,r=o[0]>>>13,o[0]&=8191,s=1;s<10;s++)o[s]=this._h[s]+r,r=o[s]>>>13,o[s]&=8191;for(o[9]-=8192,n=(1^r)-1,s=0;s<10;s++)o[s]&=n;for(n=~n,s=0;s<10;s++)this._h[s]=this._h[s]&n|o[s];for(this._h[0]=65535&(this._h[0]|this._h[1]<<13),this._h[1]=65535&(this._h[1]>>>3|this._h[2]<<10),this._h[2]=65535&(this._h[2]>>>6|this._h[3]<<7),this._h[3]=65535&(this._h[3]>>>9|this._h[4]<<4),this._h[4]=65535&(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14),this._h[5]=65535&(this._h[6]>>>2|this._h[7]<<11),this._h[6]=65535&(this._h[7]>>>5|this._h[8]<<8),this._h[7]=65535&(this._h[8]>>>8|this._h[9]<<5),i=this._h[0]+this._pad[0],this._h[0]=65535&i,s=1;s<8;s++)i=(this._h[s]+this._pad[s]|0)+(i>>>16)|0,this._h[s]=65535&i;return t[e+0]=this._h[0]>>>0,t[e+1]=this._h[0]>>>8,t[e+2]=this._h[1]>>>0,t[e+3]=this._h[1]>>>8,t[e+4]=this._h[2]>>>0,t[e+5]=this._h[2]>>>8,t[e+6]=this._h[3]>>>0,t[e+7]=this._h[3]>>>8,t[e+8]=this._h[4]>>>0,t[e+9]=this._h[4]>>>8,t[e+10]=this._h[5]>>>0,t[e+11]=this._h[5]>>>8,t[e+12]=this._h[6]>>>0,t[e+13]=this._h[6]>>>8,t[e+14]=this._h[7]>>>0,t[e+15]=this._h[7]>>>8,this._finished=!0,this},t.prototype.update=function(t){var e,r=0,n=t.length;if(this._leftover){e=16-this._leftover,e>n&&(e=n);for(var i=0;i<e;i++)this._buffer[this._leftover+i]=t[r+i];if(n-=e,r+=e,this._leftover+=e,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(n>=16&&(e=n-n%16,this._blocks(t,r,e),r+=e,n-=e),n){for(i=0;i<n;i++)this._buffer[this._leftover+i]=t[r+i];this._leftover+=n}return this},t.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var t=new Uint8Array(16);return this.finish(t),t},t.prototype.clean=function(){return i.wipe(this._buffer),i.wipe(this._r),i.wipe(this._h),i.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},t}();function o(t,e){var r=new s(t);r.update(e);var n=r.digest();return r.clean(),n}function a(t,r){return t.length===e.DIGEST_LENGTH&&r.length===e.DIGEST_LENGTH&&n.equal(t,r)}e.Poly1305=s,e.oneTimeAuth=o,e.equal=a},1257:function(t,e,r){"use strict";r(1703),Object.defineProperty(e,"__esModule",{value:!0});var n=r(1299),i=r(2267),s=r(5279);function o(t,r){return void 0===r&&(r=e.defaultRandomSource),r.randomBytes(t)}function a(t){void 0===t&&(t=e.defaultRandomSource);var r=o(4,t),n=i.readUint32LE(r);return s.wipe(r),n}e.defaultRandomSource=new n.SystemRandomSource,e.randomBytes=o,e.randomUint32=a;var c="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function u(t,r,n){if(void 0===r&&(r=c),void 0===n&&(n=e.defaultRandomSource),r.length<2)throw new Error("randomString charset is too short");if(r.length>256)throw new Error("randomString charset is too long");var i="",a=r.length,u=256-256%a;while(t>0){for(var l=o(Math.ceil(256*t/u),n),h=0;h<l.length&&t>0;h++){var d=l[h];d<u&&(i+=r.charAt(d%a),t--)}s.wipe(l)}return i}function l(t,r,n){void 0===r&&(r=c),void 0===n&&(n=e.defaultRandomSource);var i=Math.ceil(t/(Math.log(r.length)/Math.LN2));return u(i,r,n)}e.randomString=u,e.randomStringForEntropy=l},169:function(t,e,r){"use strict";r(1703),r(8675),r(3462),Object.defineProperty(e,"__esModule",{value:!0});var n=65536,i=function(){function t(){this.isAvailable=!1,this.isInstantiated=!1;var t="undefined"!==typeof self?self.crypto||self.msCrypto:null;t&&t.getRandomValues&&(this._crypto=t,this.isAvailable=!0,this.isInstantiated=!0)}return t.prototype.randomBytes=function(t){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");for(var e=new Uint8Array(t),r=0;r<e.length;r+=n)this._crypto.getRandomValues(e.subarray(r,r+Math.min(e.length-r,n)));return e},t}();e.BrowserRandomSource=i},9378:function(t,e,r){"use strict";r(1703),r(8675),r(3462),Object.defineProperty(e,"__esModule",{value:!0});var n=r(5279),i=function(){function t(){this.isAvailable=!1,this.isInstantiated=!1;var t=r(5883);t&&t.randomBytes&&(this._crypto=t,this.isAvailable=!0,this.isInstantiated=!0)}return t.prototype.randomBytes=function(t){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");var e=this._crypto.randomBytes(t);if(e.length!==t)throw new Error("NodeRandomSource: got fewer bytes than requested");for(var r=new Uint8Array(t),i=0;i<r.length;i++)r[i]=e[i];return n.wipe(e),r},t}();e.NodeRandomSource=i},1299:function(t,e,r){"use strict";r(1703),Object.defineProperty(e,"__esModule",{value:!0});var n=r(169),i=r(9378),s=function(){function t(){return this.isAvailable=!1,this.name="",this._source=new n.BrowserRandomSource,this._source.isAvailable?(this.isAvailable=!0,void(this.name="Browser")):(this._source=new i.NodeRandomSource,this._source.isAvailable?(this.isAvailable=!0,void(this.name="Node")):void 0)}return t.prototype.randomBytes=function(t){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(t)},t}();e.SystemRandomSource=s},4185:function(t,e,r){"use strict";r(8675),r(3462),r(1703);var n=r(2267),i=r(5279);e.k=32,e.cn=64;var s=function(){function t(){this.digestLength=e.k,this.blockSize=e.cn,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return t.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},t.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},t.prototype.clean=function(){i.wipe(this._buffer),i.wipe(this._temp),this.reset()},t.prototype.update=function(t,e){if(void 0===e&&(e=t.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var r=0;if(this._bytesHashed+=e,this._bufferLength>0){while(this._bufferLength<this.blockSize&&e>0)this._buffer[this._bufferLength++]=t[r++],e--;this._bufferLength===this.blockSize&&(a(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}e>=this.blockSize&&(r=a(this._temp,this._state,t,r,e),e%=this.blockSize);while(e>0)this._buffer[this._bufferLength++]=t[r++],e--;return this},t.prototype.finish=function(t){if(!this._finished){var e=this._bytesHashed,r=this._bufferLength,i=e/536870912|0,s=e<<3,o=e%64<56?64:128;this._buffer[r]=128;for(var c=r+1;c<o-8;c++)this._buffer[c]=0;n.writeUint32BE(i,this._buffer,o-8),n.writeUint32BE(s,this._buffer,o-4),a(this._temp,this._state,this._buffer,0,o),this._finished=!0}for(c=0;c<this.digestLength/4;c++)n.writeUint32BE(this._state[c],t,4*c);return this},t.prototype.digest=function(){var t=new Uint8Array(this.digestLength);return this.finish(t),t},t.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},t.prototype.restoreState=function(t){return this._state.set(t.state),this._bufferLength=t.bufferLength,t.buffer&&this._buffer.set(t.buffer),this._bytesHashed=t.bytesHashed,this._finished=!1,this},t.prototype.cleanSavedState=function(t){i.wipe(t.state),t.buffer&&i.wipe(t.buffer),t.bufferLength=0,t.bytesHashed=0},t}();e.mE=s;var o=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function a(t,e,r,i,s){while(s>=64){for(var a=e[0],c=e[1],u=e[2],l=e[3],h=e[4],d=e[5],f=e[6],p=e[7],g=0;g<16;g++){var y=i+4*g;t[g]=n.readUint32BE(r,y)}for(g=16;g<64;g++){var m=t[g-2],w=(m>>>17|m<<15)^(m>>>19|m<<13)^m>>>10;m=t[g-15];var v=(m>>>7|m<<25)^(m>>>18|m<<14)^m>>>3;t[g]=(w+t[g-7]|0)+(v+t[g-16]|0)}for(g=0;g<64;g++){w=(((h>>>6|h<<26)^(h>>>11|h<<21)^(h>>>25|h<<7))+(h&d^~h&f)|0)+(p+(o[g]+t[g]|0)|0)|0,v=((a>>>2|a<<30)^(a>>>13|a<<19)^(a>>>22|a<<10))+(a&c^a&u^c&u)|0;p=f,f=d,d=h,h=l+w|0,l=u,u=c,c=a,a=w+v|0}e[0]+=a,e[1]+=c,e[2]+=u,e[3]+=l,e[4]+=h,e[5]+=d,e[6]+=f,e[7]+=p,i+=64,s-=64}return i}function c(t){var e=new s;e.update(t);var r=e.digest();return e.clean(),r}e.vp=c},5279:function(t,e){"use strict";function r(t){for(var e=0;e<t.length;e++)t[e]=0;return t}Object.defineProperty(e,"__esModule",{value:!0}),e.wipe=r},2982:function(t,e,r){"use strict";r(8675),r(3462),r(1703);var n=r(1257),i=r(5279);function s(t){var e=new Float64Array(16);if(t)for(var r=0;r<t.length;r++)e[r]=t[r];return e}e.kz=32,e.KS=32;var o=new Uint8Array(32);o[0]=9;var a=s([56129,1]);function c(t){for(var e=1,r=0;r<16;r++){var n=t[r]+e+65535;e=Math.floor(n/65536),t[r]=n-65536*e}t[0]+=e-1+37*(e-1)}function u(t,e,r){for(var n=~(r-1),i=0;i<16;i++){var s=n&(t[i]^e[i]);t[i]^=s,e[i]^=s}}function l(t,e){for(var r=s(),n=s(),i=0;i<16;i++)n[i]=e[i];c(n),c(n),c(n);for(var o=0;o<2;o++){r[0]=n[0]-65517;for(i=1;i<15;i++)r[i]=n[i]-65535-(r[i-1]>>16&1),r[i-1]&=65535;r[15]=n[15]-32767-(r[14]>>16&1);var a=r[15]>>16&1;r[14]&=65535,u(n,r,1-a)}for(i=0;i<16;i++)t[2*i]=255&n[i],t[2*i+1]=n[i]>>8}function h(t,e){for(var r=0;r<16;r++)t[r]=e[2*r]+(e[2*r+1]<<8);t[15]&=32767}function d(t,e,r){for(var n=0;n<16;n++)t[n]=e[n]+r[n]}function f(t,e,r){for(var n=0;n<16;n++)t[n]=e[n]-r[n]}function p(t,e,r){var n,i,s=0,o=0,a=0,c=0,u=0,l=0,h=0,d=0,f=0,p=0,g=0,y=0,m=0,w=0,v=0,E=0,b=0,S=0,_=0,R=0,I=0,C=0,A=0,T=0,k=0,P=0,N=0,L=0,D=0,O=0,B=0,x=r[0],U=r[1],M=r[2],V=r[3],K=r[4],F=r[5],j=r[6],q=r[7],H=r[8],G=r[9],z=r[10],$=r[11],W=r[12],Y=r[13],Q=r[14],X=r[15];n=e[0],s+=n*x,o+=n*U,a+=n*M,c+=n*V,u+=n*K,l+=n*F,h+=n*j,d+=n*q,f+=n*H,p+=n*G,g+=n*z,y+=n*$,m+=n*W,w+=n*Y,v+=n*Q,E+=n*X,n=e[1],o+=n*x,a+=n*U,c+=n*M,u+=n*V,l+=n*K,h+=n*F,d+=n*j,f+=n*q,p+=n*H,g+=n*G,y+=n*z,m+=n*$,w+=n*W,v+=n*Y,E+=n*Q,b+=n*X,n=e[2],a+=n*x,c+=n*U,u+=n*M,l+=n*V,h+=n*K,d+=n*F,f+=n*j,p+=n*q,g+=n*H,y+=n*G,m+=n*z,w+=n*$,v+=n*W,E+=n*Y,b+=n*Q,S+=n*X,n=e[3],c+=n*x,u+=n*U,l+=n*M,h+=n*V,d+=n*K,f+=n*F,p+=n*j,g+=n*q,y+=n*H,m+=n*G,w+=n*z,v+=n*$,E+=n*W,b+=n*Y,S+=n*Q,_+=n*X,n=e[4],u+=n*x,l+=n*U,h+=n*M,d+=n*V,f+=n*K,p+=n*F,g+=n*j,y+=n*q,m+=n*H,w+=n*G,v+=n*z,E+=n*$,b+=n*W,S+=n*Y,_+=n*Q,R+=n*X,n=e[5],l+=n*x,h+=n*U,d+=n*M,f+=n*V,p+=n*K,g+=n*F,y+=n*j,m+=n*q,w+=n*H,v+=n*G,E+=n*z,b+=n*$,S+=n*W,_+=n*Y,R+=n*Q,I+=n*X,n=e[6],h+=n*x,d+=n*U,f+=n*M,p+=n*V,g+=n*K,y+=n*F,m+=n*j,w+=n*q,v+=n*H,E+=n*G,b+=n*z,S+=n*$,_+=n*W,R+=n*Y,I+=n*Q,C+=n*X,n=e[7],d+=n*x,f+=n*U,p+=n*M,g+=n*V,y+=n*K,m+=n*F,w+=n*j,v+=n*q,E+=n*H,b+=n*G,S+=n*z,_+=n*$,R+=n*W,I+=n*Y,C+=n*Q,A+=n*X,n=e[8],f+=n*x,p+=n*U,g+=n*M,y+=n*V,m+=n*K,w+=n*F,v+=n*j,E+=n*q,b+=n*H,S+=n*G,_+=n*z,R+=n*$,I+=n*W,C+=n*Y,A+=n*Q,T+=n*X,n=e[9],p+=n*x,g+=n*U,y+=n*M,m+=n*V,w+=n*K,v+=n*F,E+=n*j,b+=n*q,S+=n*H,_+=n*G,R+=n*z,I+=n*$,C+=n*W,A+=n*Y,T+=n*Q,k+=n*X,n=e[10],g+=n*x,y+=n*U,m+=n*M,w+=n*V,v+=n*K,E+=n*F,b+=n*j,S+=n*q,_+=n*H,R+=n*G,I+=n*z,C+=n*$,A+=n*W,T+=n*Y,k+=n*Q,P+=n*X,n=e[11],y+=n*x,m+=n*U,w+=n*M,v+=n*V,E+=n*K,b+=n*F,S+=n*j,_+=n*q,R+=n*H,I+=n*G,C+=n*z,A+=n*$,T+=n*W,k+=n*Y,P+=n*Q,N+=n*X,n=e[12],m+=n*x,w+=n*U,v+=n*M,E+=n*V,b+=n*K,S+=n*F,_+=n*j,R+=n*q,I+=n*H,C+=n*G,A+=n*z,T+=n*$,k+=n*W,P+=n*Y,N+=n*Q,L+=n*X,n=e[13],w+=n*x,v+=n*U,E+=n*M,b+=n*V,S+=n*K,_+=n*F,R+=n*j,I+=n*q,C+=n*H,A+=n*G,T+=n*z,k+=n*$,P+=n*W,N+=n*Y,L+=n*Q,D+=n*X,n=e[14],v+=n*x,E+=n*U,b+=n*M,S+=n*V,_+=n*K,R+=n*F,I+=n*j,C+=n*q,A+=n*H,T+=n*G,k+=n*z,P+=n*$,N+=n*W,L+=n*Y,D+=n*Q,O+=n*X,n=e[15],E+=n*x,b+=n*U,S+=n*M,_+=n*V,R+=n*K,I+=n*F,C+=n*j,A+=n*q,T+=n*H,k+=n*G,P+=n*z,N+=n*$,L+=n*W,D+=n*Y,O+=n*Q,B+=n*X,s+=38*b,o+=38*S,a+=38*_,c+=38*R,u+=38*I,l+=38*C,h+=38*A,d+=38*T,f+=38*k,p+=38*P,g+=38*N,y+=38*L,m+=38*D,w+=38*O,v+=38*B,i=1,n=s+i+65535,i=Math.floor(n/65536),s=n-65536*i,n=o+i+65535,i=Math.floor(n/65536),o=n-65536*i,n=a+i+65535,i=Math.floor(n/65536),a=n-65536*i,n=c+i+65535,i=Math.floor(n/65536),c=n-65536*i,n=u+i+65535,i=Math.floor(n/65536),u=n-65536*i,n=l+i+65535,i=Math.floor(n/65536),l=n-65536*i,n=h+i+65535,i=Math.floor(n/65536),h=n-65536*i,n=d+i+65535,i=Math.floor(n/65536),d=n-65536*i,n=f+i+65535,i=Math.floor(n/65536),f=n-65536*i,n=p+i+65535,i=Math.floor(n/65536),p=n-65536*i,n=g+i+65535,i=Math.floor(n/65536),g=n-65536*i,n=y+i+65535,i=Math.floor(n/65536),y=n-65536*i,n=m+i+65535,i=Math.floor(n/65536),m=n-65536*i,n=w+i+65535,i=Math.floor(n/65536),w=n-65536*i,n=v+i+65535,i=Math.floor(n/65536),v=n-65536*i,n=E+i+65535,i=Math.floor(n/65536),E=n-65536*i,s+=i-1+37*(i-1),i=1,n=s+i+65535,i=Math.floor(n/65536),s=n-65536*i,n=o+i+65535,i=Math.floor(n/65536),o=n-65536*i,n=a+i+65535,i=Math.floor(n/65536),a=n-65536*i,n=c+i+65535,i=Math.floor(n/65536),c=n-65536*i,n=u+i+65535,i=Math.floor(n/65536),u=n-65536*i,n=l+i+65535,i=Math.floor(n/65536),l=n-65536*i,n=h+i+65535,i=Math.floor(n/65536),h=n-65536*i,n=d+i+65535,i=Math.floor(n/65536),d=n-65536*i,n=f+i+65535,i=Math.floor(n/65536),f=n-65536*i,n=p+i+65535,i=Math.floor(n/65536),p=n-65536*i,n=g+i+65535,i=Math.floor(n/65536),g=n-65536*i,n=y+i+65535,i=Math.floor(n/65536),y=n-65536*i,n=m+i+65535,i=Math.floor(n/65536),m=n-65536*i,n=w+i+65535,i=Math.floor(n/65536),w=n-65536*i,n=v+i+65535,i=Math.floor(n/65536),v=n-65536*i,n=E+i+65535,i=Math.floor(n/65536),E=n-65536*i,s+=i-1+37*(i-1),t[0]=s,t[1]=o,t[2]=a,t[3]=c,t[4]=u,t[5]=l,t[6]=h,t[7]=d,t[8]=f,t[9]=p,t[10]=g,t[11]=y,t[12]=m,t[13]=w,t[14]=v,t[15]=E}function g(t,e){p(t,e,e)}function y(t,e){for(var r=s(),n=0;n<16;n++)r[n]=e[n];for(n=253;n>=0;n--)g(r,r),2!==n&&4!==n&&p(r,r,e);for(n=0;n<16;n++)t[n]=r[n]}function m(t,e){for(var r=new Uint8Array(32),n=new Float64Array(80),i=s(),o=s(),c=s(),m=s(),w=s(),v=s(),E=0;E<31;E++)r[E]=t[E];r[31]=127&t[31]|64,r[0]&=248,h(n,e);for(E=0;E<16;E++)o[E]=n[E];i[0]=m[0]=1;for(E=254;E>=0;--E){var b=r[E>>>3]>>>(7&E)&1;u(i,o,b),u(c,m,b),d(w,i,c),f(i,i,c),d(c,o,m),f(o,o,m),g(m,w),g(v,i),p(i,c,i),p(c,o,w),d(w,i,c),f(i,i,c),g(o,i),f(c,m,v),p(i,c,a),d(i,i,m),p(c,c,i),p(i,m,v),p(m,o,n),g(o,w),u(i,o,b),u(c,m,b)}for(E=0;E<16;E++)n[E+16]=i[E],n[E+32]=c[E],n[E+48]=o[E],n[E+64]=m[E];var S=n.subarray(32),_=n.subarray(16);y(S,S),p(_,_,S);var R=new Uint8Array(32);return l(R,_),R}function w(t){return m(t,o)}function v(t){if(t.length!==e.KS)throw new Error("x25519: seed must be "+e.KS+" bytes");var r=new Uint8Array(t),n=w(r);return{publicKey:n,secretKey:r}}function E(t){var e=n.randomBytes(32,t),r=v(e);return i.wipe(e),r}function b(t,r,n){if(void 0===n&&(n=!1),t.length!==e.kz)throw new Error("X25519: incorrect secret key length");if(r.length!==e.kz)throw new Error("X25519: incorrect public key length");var i=m(t,r);if(n){for(var s=0,o=0;o<i.length;o++)s|=i[o];if(0===s)throw new Error("X25519: invalid shared key")}return i}e._w=v,e.Au=E,e.gi=b},4870:function(t,e,r){"use strict";r.d(e,{Bj:function(){return s},Fl:function(){return jt},IU:function(){return Tt},Jd:function(){return _},PG:function(){return Rt},SU:function(){return Mt},Um:function(){return bt},WL:function(){return Kt},X$:function(){return A},X3:function(){return At},Xl:function(){return kt},dq:function(){return Ot},iH:function(){return Bt},j:function(){return I},lk:function(){return R},qj:function(){return Et},qq:function(){return v},yT:function(){return Ct}});var n=r(7139);let i;class s{constructor(t=!1){this.active=!0,this.effects=[],this.cleanups=[],!t&&i&&(this.parent=i,this.index=(i.scopes||(i.scopes=[])).push(this)-1)}run(t){if(this.active){const e=i;try{return i=this,t()}finally{i=e}}else 0}on(){i=this}off(){i=this.parent}stop(t){if(this.active){let e,r;for(e=0,r=this.effects.length;e<r;e++)this.effects[e].stop();for(e=0,r=this.cleanups.length;e<r;e++)this.cleanups[e]();if(this.scopes)for(e=0,r=this.scopes.length;e<r;e++)this.scopes[e].stop(!0);if(this.parent&&!t){const t=this.parent.scopes.pop();t&&t!==this&&(this.parent.scopes[this.index]=t,t.index=this.index)}this.active=!1}}}function o(t,e=i){e&&e.active&&e.effects.push(t)}const a=t=>{const e=new Set(t);return e.w=0,e.n=0,e},c=t=>(t.w&p)>0,u=t=>(t.n&p)>0,l=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=p},h=t=>{const{deps:e}=t;if(e.length){let r=0;for(let n=0;n<e.length;n++){const i=e[n];c(i)&&!u(i)?i.delete(t):e[r++]=i,i.w&=~p,i.n&=~p}e.length=r}},d=new WeakMap;let f=0,p=1;const g=30;let y;const m=Symbol(""),w=Symbol("");class v{constructor(t,e=null,r){this.fn=t,this.scheduler=e,this.active=!0,this.deps=[],this.parent=void 0,o(this,r)}run(){if(!this.active)return this.fn();let t=y,e=b;while(t){if(t===this)return;t=t.parent}try{return this.parent=y,y=this,b=!0,p=1<<++f,f<=g?l(this):E(this),this.fn()}finally{f<=g&&h(this),p=1<<--f,y=this.parent,b=e,this.parent=void 0,this.deferStop&&this.stop()}}stop(){y===this?this.deferStop=!0:this.active&&(E(this),this.onStop&&this.onStop(),this.active=!1)}}function E(t){const{deps:e}=t;if(e.length){for(let r=0;r<e.length;r++)e[r].delete(t);e.length=0}}let b=!0;const S=[];function _(){S.push(b),b=!1}function R(){const t=S.pop();b=void 0===t||t}function I(t,e,r){if(b&&y){let e=d.get(t);e||d.set(t,e=new Map);let n=e.get(r);n||e.set(r,n=a());const i=void 0;C(n,i)}}function C(t,e){let r=!1;f<=g?u(t)||(t.n|=p,r=!c(t)):r=!t.has(y),r&&(t.add(y),y.deps.push(t))}function A(t,e,r,i,s,o){const c=d.get(t);if(!c)return;let u=[];if("clear"===e)u=[...c.values()];else if("length"===r&&(0,n.kJ)(t))c.forEach(((t,e)=>{("length"===e||e>=i)&&u.push(t)}));else switch(void 0!==r&&u.push(c.get(r)),e){case"add":(0,n.kJ)(t)?(0,n.S0)(r)&&u.push(c.get("length")):(u.push(c.get(m)),(0,n._N)(t)&&u.push(c.get(w)));break;case"delete":(0,n.kJ)(t)||(u.push(c.get(m)),(0,n._N)(t)&&u.push(c.get(w)));break;case"set":(0,n._N)(t)&&u.push(c.get(m));break}if(1===u.length)u[0]&&T(u[0]);else{const t=[];for(const e of u)e&&t.push(...e);T(a(t))}}function T(t,e){const r=(0,n.kJ)(t)?t:[...t];for(const n of r)n.computed&&k(n,e);for(const n of r)n.computed||k(n,e)}function k(t,e){(t!==y||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const P=(0,n.fY)("__proto__,__v_isRef,__isVue"),N=new Set(Object.getOwnPropertyNames(Symbol).filter((t=>"arguments"!==t&&"caller"!==t)).map((t=>Symbol[t])).filter(n.yk)),L=U(),D=U(!1,!0),O=U(!0),B=x();function x(){const t={};return["includes","indexOf","lastIndexOf"].forEach((e=>{t[e]=function(...t){const r=Tt(this);for(let e=0,i=this.length;e<i;e++)I(r,"get",e+"");const n=r[e](...t);return-1===n||!1===n?r[e](...t.map(Tt)):n}})),["push","pop","shift","unshift","splice"].forEach((e=>{t[e]=function(...t){_();const r=Tt(this)[e].apply(this,t);return R(),r}})),t}function U(t=!1,e=!1){return function(r,i,s){if("__v_isReactive"===i)return!t;if("__v_isReadonly"===i)return t;if("__v_isShallow"===i)return e;if("__v_raw"===i&&s===(t?e?mt:yt:e?gt:pt).get(r))return r;const o=(0,n.kJ)(r);if(!t&&o&&(0,n.RI)(B,i))return Reflect.get(B,i,s);const a=Reflect.get(r,i,s);return((0,n.yk)(i)?N.has(i):P(i))?a:(t||I(r,"get",i),e?a:Ot(a)?o&&(0,n.S0)(i)?a:a.value:(0,n.Kn)(a)?t?St(a):Et(a):a)}}const M=K(),V=K(!0);function K(t=!1){return function(e,r,i,s){let o=e[r];if(It(o)&&Ot(o)&&!Ot(i))return!1;if(!t&&!It(i)&&(Ct(i)||(i=Tt(i),o=Tt(o)),!(0,n.kJ)(e)&&Ot(o)&&!Ot(i)))return o.value=i,!0;const a=(0,n.kJ)(e)&&(0,n.S0)(r)?Number(r)<e.length:(0,n.RI)(e,r),c=Reflect.set(e,r,i,s);return e===Tt(s)&&(a?(0,n.aU)(i,o)&&A(e,"set",r,i,o):A(e,"add",r,i)),c}}function F(t,e){const r=(0,n.RI)(t,e),i=t[e],s=Reflect.deleteProperty(t,e);return s&&r&&A(t,"delete",e,void 0,i),s}function j(t,e){const r=Reflect.has(t,e);return(0,n.yk)(e)&&N.has(e)||I(t,"has",e),r}function q(t){return I(t,"iterate",(0,n.kJ)(t)?"length":m),Reflect.ownKeys(t)}const H={get:L,set:M,deleteProperty:F,has:j,ownKeys:q},G={get:O,set(t,e){return!0},deleteProperty(t,e){return!0}},z=(0,n.l7)({},H,{get:D,set:V}),$=t=>t,W=t=>Reflect.getPrototypeOf(t);function Y(t,e,r=!1,n=!1){t=t["__v_raw"];const i=Tt(t),s=Tt(e);r||(e!==s&&I(i,"get",e),I(i,"get",s));const{has:o}=W(i),a=n?$:r?Nt:Pt;return o.call(i,e)?a(t.get(e)):o.call(i,s)?a(t.get(s)):void(t!==i&&t.get(e))}function Q(t,e=!1){const r=this["__v_raw"],n=Tt(r),i=Tt(t);return e||(t!==i&&I(n,"has",t),I(n,"has",i)),t===i?r.has(t):r.has(t)||r.has(i)}function X(t,e=!1){return t=t["__v_raw"],!e&&I(Tt(t),"iterate",m),Reflect.get(t,"size",t)}function J(t){t=Tt(t);const e=Tt(this),r=W(e),n=r.has.call(e,t);return n||(e.add(t),A(e,"add",t,t)),this}function Z(t,e){e=Tt(e);const r=Tt(this),{has:i,get:s}=W(r);let o=i.call(r,t);o||(t=Tt(t),o=i.call(r,t));const a=s.call(r,t);return r.set(t,e),o?(0,n.aU)(e,a)&&A(r,"set",t,e,a):A(r,"add",t,e),this}function tt(t){const e=Tt(this),{has:r,get:n}=W(e);let i=r.call(e,t);i||(t=Tt(t),i=r.call(e,t));const s=n?n.call(e,t):void 0,o=e.delete(t);return i&&A(e,"delete",t,void 0,s),o}function et(){const t=Tt(this),e=0!==t.size,r=void 0,n=t.clear();return e&&A(t,"clear",void 0,void 0,r),n}function rt(t,e){return function(r,n){const i=this,s=i["__v_raw"],o=Tt(s),a=e?$:t?Nt:Pt;return!t&&I(o,"iterate",m),s.forEach(((t,e)=>r.call(n,a(t),a(e),i)))}}function nt(t,e,r){return function(...i){const s=this["__v_raw"],o=Tt(s),a=(0,n._N)(o),c="entries"===t||t===Symbol.iterator&&a,u="keys"===t&&a,l=s[t](...i),h=r?$:e?Nt:Pt;return!e&&I(o,"iterate",u?w:m),{next(){const{value:t,done:e}=l.next();return e?{value:t,done:e}:{value:c?[h(t[0]),h(t[1])]:h(t),done:e}},[Symbol.iterator](){return this}}}}function it(t){return function(...e){return"delete"!==t&&this}}function st(){const t={get(t){return Y(this,t)},get size(){return X(this)},has:Q,add:J,set:Z,delete:tt,clear:et,forEach:rt(!1,!1)},e={get(t){return Y(this,t,!1,!0)},get size(){return X(this)},has:Q,add:J,set:Z,delete:tt,clear:et,forEach:rt(!1,!0)},r={get(t){return Y(this,t,!0)},get size(){return X(this,!0)},has(t){return Q.call(this,t,!0)},add:it("add"),set:it("set"),delete:it("delete"),clear:it("clear"),forEach:rt(!0,!1)},n={get(t){return Y(this,t,!0,!0)},get size(){return X(this,!0)},has(t){return Q.call(this,t,!0)},add:it("add"),set:it("set"),delete:it("delete"),clear:it("clear"),forEach:rt(!0,!0)},i=["keys","values","entries",Symbol.iterator];return i.forEach((i=>{t[i]=nt(i,!1,!1),r[i]=nt(i,!0,!1),e[i]=nt(i,!1,!0),n[i]=nt(i,!0,!0)})),[t,r,e,n]}const[ot,at,ct,ut]=st();function lt(t,e){const r=e?t?ut:ct:t?at:ot;return(e,i,s)=>"__v_isReactive"===i?!t:"__v_isReadonly"===i?t:"__v_raw"===i?e:Reflect.get((0,n.RI)(r,i)&&i in e?r:e,i,s)}const ht={get:lt(!1,!1)},dt={get:lt(!1,!0)},ft={get:lt(!0,!1)};const pt=new WeakMap,gt=new WeakMap,yt=new WeakMap,mt=new WeakMap;function wt(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function vt(t){return t["__v_skip"]||!Object.isExtensible(t)?0:wt((0,n.W7)(t))}function Et(t){return It(t)?t:_t(t,!1,H,ht,pt)}function bt(t){return _t(t,!1,z,dt,gt)}function St(t){return _t(t,!0,G,ft,yt)}function _t(t,e,r,i,s){if(!(0,n.Kn)(t))return t;if(t["__v_raw"]&&(!e||!t["__v_isReactive"]))return t;const o=s.get(t);if(o)return o;const a=vt(t);if(0===a)return t;const c=new Proxy(t,2===a?i:r);return s.set(t,c),c}function Rt(t){return It(t)?Rt(t["__v_raw"]):!(!t||!t["__v_isReactive"])}function It(t){return!(!t||!t["__v_isReadonly"])}function Ct(t){return!(!t||!t["__v_isShallow"])}function At(t){return Rt(t)||It(t)}function Tt(t){const e=t&&t["__v_raw"];return e?Tt(e):t}function kt(t){return(0,n.Nj)(t,"__v_skip",!0),t}const Pt=t=>(0,n.Kn)(t)?Et(t):t,Nt=t=>(0,n.Kn)(t)?St(t):t;function Lt(t){b&&y&&(t=Tt(t),C(t.dep||(t.dep=a())))}function Dt(t,e){t=Tt(t),t.dep&&T(t.dep)}function Ot(t){return!(!t||!0!==t.__v_isRef)}function Bt(t){return xt(t,!1)}function xt(t,e){return Ot(t)?t:new Ut(t,e)}class Ut{constructor(t,e){this.__v_isShallow=e,this.dep=void 0,this.__v_isRef=!0,this._rawValue=e?t:Tt(t),this._value=e?t:Pt(t)}get value(){return Lt(this),this._value}set value(t){t=this.__v_isShallow?t:Tt(t),(0,n.aU)(t,this._rawValue)&&(this._rawValue=t,this._value=this.__v_isShallow?t:Pt(t),Dt(this,t))}}function Mt(t){return Ot(t)?t.value:t}const Vt={get:(t,e,r)=>Mt(Reflect.get(t,e,r)),set:(t,e,r,n)=>{const i=t[e];return Ot(i)&&!Ot(r)?(i.value=r,!0):Reflect.set(t,e,r,n)}};function Kt(t){return Rt(t)?t:new Proxy(t,Vt)}class Ft{constructor(t,e,r,n){this._setter=e,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new v(t,(()=>{this._dirty||(this._dirty=!0,Dt(this))})),this.effect.computed=this,this.effect.active=this._cacheable=!n,this["__v_isReadonly"]=r}get value(){const t=Tt(this);return Lt(t),!t._dirty&&t._cacheable||(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function jt(t,e,r=!1){let i,s;const o=(0,n.mf)(t);o?(i=t,s=n.dG):(i=t.get,s=t.set);const a=new Ft(i,s,o||!s,r);return a}},3396:function(t,e,r){"use strict";r.d(e,{$d:function(){return o},FN:function(){return ar},Fl:function(){return _r},HY:function(){return ke},Ko:function(){return Ut},P$:function(){return ot},Q6:function(){return dt},U2:function(){return ct},Us:function(){return _e},Wm:function(){return $e},Y8:function(){return nt},_:function(){return ze},bv:function(){return It},f3:function(){return Q},h:function(){return Rr},iD:function(){return Ke},ic:function(){return At},nK:function(){return ht},wg:function(){return Be},wy:function(){return Ot}});r(1703);var n=r(4870),i=r(7139);function s(t,e,r,n){let i;try{i=n?t(...n):t()}catch(s){a(s,e,r)}return i}function o(t,e,r,n){if((0,i.mf)(t)){const o=s(t,e,r,n);return o&&(0,i.tI)(o)&&o.catch((t=>{a(t,e,r)})),o}const c=[];for(let i=0;i<t.length;i++)c.push(o(t[i],e,r,n));return c}function a(t,e,r,n=!0){const i=e?e.vnode:null;if(e){let n=e.parent;const i=e.proxy,o=r;while(n){const e=n.ec;if(e)for(let r=0;r<e.length;r++)if(!1===e[r](t,i,o))return;n=n.parent}const a=e.appContext.config.errorHandler;if(a)return void s(a,null,10,[t,i,o])}c(t,r,i,n)}function c(t,e,r,n=!0){console.error(t)}let u=!1,l=!1;const h=[];let d=0;const f=[];let p=null,g=0;const y=[];let m=null,w=0;const v=Promise.resolve();let E=null,b=null;function S(t){const e=E||v;return t?e.then(this?t.bind(this):t):e}function _(t){let e=d+1,r=h.length;while(e<r){const n=e+r>>>1,i=L(h[n]);i<t?e=n+1:r=n}return e}function R(t){h.length&&h.includes(t,u&&t.allowRecurse?d+1:d)||t===b||(null==t.id?h.push(t):h.splice(_(t.id),0,t),I())}function I(){u||l||(l=!0,E=v.then(D))}function C(t){const e=h.indexOf(t);e>d&&h.splice(e,1)}function A(t,e,r,n){(0,i.kJ)(t)?r.push(...t):e&&e.includes(t,t.allowRecurse?n+1:n)||r.push(t),I()}function T(t){A(t,p,f,g)}function k(t){A(t,m,y,w)}function P(t,e=null){if(f.length){for(b=e,p=[...new Set(f)],f.length=0,g=0;g<p.length;g++)p[g]();p=null,g=0,b=null,P(t,e)}}function N(t){if(P(),y.length){const t=[...new Set(y)];if(y.length=0,m)return void m.push(...t);for(m=t,m.sort(((t,e)=>L(t)-L(e))),w=0;w<m.length;w++)m[w]();m=null,w=0}}const L=t=>null==t.id?1/0:t.id;function D(t){l=!1,u=!0,P(t),h.sort(((t,e)=>L(t)-L(e)));i.dG;try{for(d=0;d<h.length;d++){const t=h[d];t&&!1!==t.active&&s(t,null,14)}}finally{d=0,h.length=0,N(t),u=!1,E=null,(h.length||f.length||y.length)&&D(t)}}new Set;new Map;function O(t,e,...r){if(t.isUnmounted)return;const n=t.vnode.props||i.kT;let s=r;const a=e.startsWith("update:"),c=a&&e.slice(7);if(c&&c in n){const t=`${"modelValue"===c?"model":c}Modifiers`,{number:e,trim:o}=n[t]||i.kT;o&&(s=r.map((t=>t.trim()))),e&&(s=r.map(i.He))}let u;let l=n[u=(0,i.hR)(e)]||n[u=(0,i.hR)((0,i._A)(e))];!l&&a&&(l=n[u=(0,i.hR)((0,i.rs)(e))]),l&&o(l,t,6,s);const h=n[u+"Once"];if(h){if(t.emitted){if(t.emitted[u])return}else t.emitted={};t.emitted[u]=!0,o(h,t,6,s)}}function B(t,e,r=!1){const n=e.emitsCache,s=n.get(t);if(void 0!==s)return s;const o=t.emits;let a={},c=!1;if(!(0,i.mf)(t)){const n=t=>{const r=B(t,e,!0);r&&(c=!0,(0,i.l7)(a,r))};!r&&e.mixins.length&&e.mixins.forEach(n),t.extends&&n(t.extends),t.mixins&&t.mixins.forEach(n)}return o||c?((0,i.kJ)(o)?o.forEach((t=>a[t]=null)):(0,i.l7)(a,o),n.set(t,a),a):(n.set(t,null),null)}function x(t,e){return!(!t||!(0,i.F7)(e))&&(e=e.slice(2).replace(/Once$/,""),(0,i.RI)(t,e[0].toLowerCase()+e.slice(1))||(0,i.RI)(t,(0,i.rs)(e))||(0,i.RI)(t,e))}let U=null,M=null;function V(t){const e=U;return U=t,M=t&&t.type.__scopeId||null,e}function K(t,e=U,r){if(!e)return t;if(t._n)return t;const n=(...r)=>{n._d&&Me(-1);const i=V(e),s=t(...r);return V(i),n._d&&Me(1),s};return n._n=!0,n._c=!0,n._d=!0,n}function F(t){const{type:e,vnode:r,proxy:n,withProxy:s,props:o,propsOptions:[c],slots:u,attrs:l,emit:h,render:d,renderCache:f,data:p,setupState:g,ctx:y,inheritAttrs:m}=t;let w,v;const E=V(t);try{if(4&r.shapeFlag){const t=s||n;w=Je(d.call(t,t,f,o,g,p,y)),v=l}else{const t=e;0,w=Je(t.length>1?t(o,{attrs:l,slots:u,emit:h}):t(o,null)),v=e.props?l:j(l)}}catch(S){De.length=0,a(S,t,1),w=$e(Ne)}let b=w;if(v&&!1!==m){const t=Object.keys(v),{shapeFlag:e}=b;t.length&&7&e&&(c&&t.some(i.tR)&&(v=q(v,c)),b=Qe(b,v))}return r.dirs&&(b=Qe(b),b.dirs=b.dirs?b.dirs.concat(r.dirs):r.dirs),r.transition&&(b.transition=r.transition),w=b,V(E),w}const j=t=>{let e;for(const r in t)("class"===r||"style"===r||(0,i.F7)(r))&&((e||(e={}))[r]=t[r]);return e},q=(t,e)=>{const r={};for(const n in t)(0,i.tR)(n)&&n.slice(9)in e||(r[n]=t[n]);return r};function H(t,e,r){const{props:n,children:i,component:s}=t,{props:o,children:a,patchFlag:c}=e,u=s.emitsOptions;if(e.dirs||e.transition)return!0;if(!(r&&c>=0))return!(!i&&!a||a&&a.$stable)||n!==o&&(n?!o||G(n,o,u):!!o);if(1024&c)return!0;if(16&c)return n?G(n,o,u):!!o;if(8&c){const t=e.dynamicProps;for(let e=0;e<t.length;e++){const r=t[e];if(o[r]!==n[r]&&!x(u,r))return!0}}return!1}function G(t,e,r){const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!0;for(let i=0;i<n.length;i++){const s=n[i];if(e[s]!==t[s]&&!x(r,s))return!0}return!1}function z({vnode:t,parent:e},r){while(e&&e.subTree===t)(t=e.vnode).el=r,e=e.parent}const $=t=>t.__isSuspense;function W(t,e){e&&e.pendingBranch?(0,i.kJ)(t)?e.effects.push(...t):e.effects.push(t):k(t)}function Y(t,e){if(or){let r=or.provides;const n=or.parent&&or.parent.provides;n===r&&(r=or.provides=Object.create(n)),r[t]=e}else 0}function Q(t,e,r=!1){const n=or||U;if(n){const s=null==n.parent?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides;if(s&&t in s)return s[t];if(arguments.length>1)return r&&(0,i.mf)(e)?e.call(n.proxy):e}else 0}const X={};function J(t,e,r){return Z(t,e,r)}function Z(t,e,{immediate:r,deep:a,flush:c,onTrack:u,onTrigger:l}=i.kT){const h=or;let d,f,p=!1,g=!1;if((0,n.dq)(t)?(d=()=>t.value,p=(0,n.yT)(t)):(0,n.PG)(t)?(d=()=>t,a=!0):(0,i.kJ)(t)?(g=!0,p=t.some((t=>(0,n.PG)(t)||(0,n.yT)(t))),d=()=>t.map((t=>(0,n.dq)(t)?t.value:(0,n.PG)(t)?rt(t):(0,i.mf)(t)?s(t,h,2):void 0))):d=(0,i.mf)(t)?e?()=>s(t,h,2):()=>{if(!h||!h.isUnmounted)return f&&f(),o(t,h,3,[y])}:i.dG,e&&a){const t=d;d=()=>rt(t())}let y=t=>{f=E.onStop=()=>{s(t,h,4)}};if(fr)return y=i.dG,e?r&&o(e,h,3,[d(),g?[]:void 0,y]):d(),i.dG;let m=g?[]:X;const w=()=>{if(E.active)if(e){const t=E.run();(a||p||(g?t.some(((t,e)=>(0,i.aU)(t,m[e]))):(0,i.aU)(t,m)))&&(f&&f(),o(e,h,3,[t,m===X?void 0:m,y]),m=t)}else E.run()};let v;w.allowRecurse=!!e,v="sync"===c?w:"post"===c?()=>Se(w,h&&h.suspense):()=>T(w);const E=new n.qq(d,v);return e?r?w():m=E.run():"post"===c?Se(E.run.bind(E),h&&h.suspense):E.run(),()=>{E.stop(),h&&h.scope&&(0,i.Od)(h.scope.effects,E)}}function tt(t,e,r){const n=this.proxy,s=(0,i.HD)(t)?t.includes(".")?et(n,t):()=>n[t]:t.bind(n,n);let o;(0,i.mf)(e)?o=e:(o=e.handler,r=e);const a=or;cr(this);const c=Z(s,o.bind(n),r);return a?cr(a):ur(),c}function et(t,e){const r=e.split(".");return()=>{let e=t;for(let t=0;t<r.length&&e;t++)e=e[r[t]];return e}}function rt(t,e){if(!(0,i.Kn)(t)||t["__v_skip"])return t;if(e=e||new Set,e.has(t))return t;if(e.add(t),(0,n.dq)(t))rt(t.value,e);else if((0,i.kJ)(t))for(let r=0;r<t.length;r++)rt(t[r],e);else if((0,i.DM)(t)||(0,i._N)(t))t.forEach((t=>{rt(t,e)}));else if((0,i.PO)(t))for(const r in t)rt(t[r],e);return t}function nt(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return It((()=>{t.isMounted=!0})),Tt((()=>{t.isUnmounting=!0})),t}const it=[Function,Array],st={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:it,onEnter:it,onAfterEnter:it,onEnterCancelled:it,onBeforeLeave:it,onLeave:it,onAfterLeave:it,onLeaveCancelled:it,onBeforeAppear:it,onAppear:it,onAfterAppear:it,onAppearCancelled:it},setup(t,{slots:e}){const r=ar(),i=nt();let s;return()=>{const o=e.default&&dt(e.default(),!0);if(!o||!o.length)return;let a=o[0];if(o.length>1){let t=!1;for(const e of o)if(e.type!==Ne){0,a=e,t=!0;break}}const c=(0,n.IU)(t),{mode:u}=c;if(i.isLeaving)return ut(a);const l=lt(a);if(!l)return ut(a);const h=ct(l,c,i,r);ht(l,h);const d=r.subTree,f=d&&lt(d);let p=!1;const{getTransitionKey:g}=l.type;if(g){const t=g();void 0===s?s=t:t!==s&&(s=t,p=!0)}if(f&&f.type!==Ne&&(!je(l,f)||p)){const t=ct(f,c,i,r);if(ht(f,t),"out-in"===u)return i.isLeaving=!0,t.afterLeave=()=>{i.isLeaving=!1,r.update()},ut(a);"in-out"===u&&l.type!==Ne&&(t.delayLeave=(t,e,r)=>{const n=at(i,f);n[String(f.key)]=f,t._leaveCb=()=>{e(),t._leaveCb=void 0,delete h.delayedLeave},h.delayedLeave=r})}return a}}},ot=st;function at(t,e){const{leavingVNodes:r}=t;let n=r.get(e.type);return n||(n=Object.create(null),r.set(e.type,n)),n}function ct(t,e,r,n){const{appear:s,mode:a,persisted:c=!1,onBeforeEnter:u,onEnter:l,onAfterEnter:h,onEnterCancelled:d,onBeforeLeave:f,onLeave:p,onAfterLeave:g,onLeaveCancelled:y,onBeforeAppear:m,onAppear:w,onAfterAppear:v,onAppearCancelled:E}=e,b=String(t.key),S=at(r,t),_=(t,e)=>{t&&o(t,n,9,e)},R=(t,e)=>{const r=e[1];_(t,e),(0,i.kJ)(t)?t.every((t=>t.length<=1))&&r():t.length<=1&&r()},I={mode:a,persisted:c,beforeEnter(e){let n=u;if(!r.isMounted){if(!s)return;n=m||u}e._leaveCb&&e._leaveCb(!0);const i=S[b];i&&je(t,i)&&i.el._leaveCb&&i.el._leaveCb(),_(n,[e])},enter(t){let e=l,n=h,i=d;if(!r.isMounted){if(!s)return;e=w||l,n=v||h,i=E||d}let o=!1;const a=t._enterCb=e=>{o||(o=!0,_(e?i:n,[t]),I.delayedLeave&&I.delayedLeave(),t._enterCb=void 0)};e?R(e,[t,a]):a()},leave(e,n){const i=String(t.key);if(e._enterCb&&e._enterCb(!0),r.isUnmounting)return n();_(f,[e]);let s=!1;const o=e._leaveCb=r=>{s||(s=!0,n(),_(r?y:g,[e]),e._leaveCb=void 0,S[i]===t&&delete S[i])};S[i]=t,p?R(p,[e,o]):o()},clone(t){return ct(t,e,r,n)}};return I}function ut(t){if(pt(t))return t=Qe(t),t.children=null,t}function lt(t){return pt(t)?t.children?t.children[0]:void 0:t}function ht(t,e){6&t.shapeFlag&&t.component?ht(t.component.subTree,e):128&t.shapeFlag?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function dt(t,e=!1,r){let n=[],i=0;for(let s=0;s<t.length;s++){let o=t[s];const a=null==r?o.key:String(r)+String(null!=o.key?o.key:s);o.type===ke?(128&o.patchFlag&&i++,n=n.concat(dt(o.children,e,a))):(e||o.type!==Ne)&&n.push(null!=a?Qe(o,{key:a}):o)}if(i>1)for(let s=0;s<n.length;s++)n[s].patchFlag=-2;return n}const ft=t=>!!t.type.__asyncLoader;const pt=t=>t.type.__isKeepAlive;RegExp,RegExp;function gt(t,e){return(0,i.kJ)(t)?t.some((t=>gt(t,e))):(0,i.HD)(t)?t.split(",").includes(e):!!t.test&&t.test(e)}function yt(t,e){wt(t,"a",e)}function mt(t,e){wt(t,"da",e)}function wt(t,e,r=or){const n=t.__wdc||(t.__wdc=()=>{let e=r;while(e){if(e.isDeactivated)return;e=e.parent}return t()});if(St(e,n,r),r){let t=r.parent;while(t&&t.parent)pt(t.parent.vnode)&&vt(n,e,r,t),t=t.parent}}function vt(t,e,r,n){const s=St(e,t,n,!0);kt((()=>{(0,i.Od)(n[e],s)}),r)}function Et(t){let e=t.shapeFlag;256&e&&(e-=256),512&e&&(e-=512),t.shapeFlag=e}function bt(t){return 128&t.shapeFlag?t.ssContent:t}function St(t,e,r=or,i=!1){if(r){const s=r[t]||(r[t]=[]),a=e.__weh||(e.__weh=(...i)=>{if(r.isUnmounted)return;(0,n.Jd)(),cr(r);const s=o(e,r,t,i);return ur(),(0,n.lk)(),s});return i?s.unshift(a):s.push(a),a}}const _t=t=>(e,r=or)=>(!fr||"sp"===t)&&St(t,e,r),Rt=_t("bm"),It=_t("m"),Ct=_t("bu"),At=_t("u"),Tt=_t("bum"),kt=_t("um"),Pt=_t("sp"),Nt=_t("rtg"),Lt=_t("rtc");function Dt(t,e=or){St("ec",t,e)}function Ot(t,e){const r=U;if(null===r)return t;const n=Er(r)||r.proxy,s=t.dirs||(t.dirs=[]);for(let o=0;o<e.length;o++){let[t,r,a,c=i.kT]=e[o];(0,i.mf)(t)&&(t={mounted:t,updated:t}),t.deep&&rt(r),s.push({dir:t,instance:n,value:r,oldValue:void 0,arg:a,modifiers:c})}return t}function Bt(t,e,r,i){const s=t.dirs,a=e&&e.dirs;for(let c=0;c<s.length;c++){const u=s[c];a&&(u.oldValue=a[c].value);let l=u.dir[i];l&&((0,n.Jd)(),o(l,r,8,[t.el,u,t,e]),(0,n.lk)())}}const xt=Symbol();function Ut(t,e,r,n){let s;const o=r&&r[n];if((0,i.kJ)(t)||(0,i.HD)(t)){s=new Array(t.length);for(let r=0,n=t.length;r<n;r++)s[r]=e(t[r],r,void 0,o&&o[r])}else if("number"===typeof t){0,s=new Array(t);for(let r=0;r<t;r++)s[r]=e(r+1,r,void 0,o&&o[r])}else if((0,i.Kn)(t))if(t[Symbol.iterator])s=Array.from(t,((t,r)=>e(t,r,void 0,o&&o[r])));else{const r=Object.keys(t);s=new Array(r.length);for(let n=0,i=r.length;n<i;n++){const i=r[n];s[n]=e(t[i],i,n,o&&o[n])}}else s=[];return r&&(r[n]=s),s}const Mt=t=>t?lr(t)?Er(t)||t.proxy:Mt(t.parent):null,Vt=(0,i.l7)(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Mt(t.parent),$root:t=>Mt(t.root),$emit:t=>t.emit,$options:t=>zt(t),$forceUpdate:t=>t.f||(t.f=()=>R(t.update)),$nextTick:t=>t.n||(t.n=S.bind(t.proxy)),$watch:t=>tt.bind(t)}),Kt={get({_:t},e){const{ctx:r,setupState:s,data:o,props:a,accessCache:c,type:u,appContext:l}=t;let h;if("$"!==e[0]){const n=c[e];if(void 0!==n)switch(n){case 1:return s[e];case 2:return o[e];case 4:return r[e];case 3:return a[e]}else{if(s!==i.kT&&(0,i.RI)(s,e))return c[e]=1,s[e];if(o!==i.kT&&(0,i.RI)(o,e))return c[e]=2,o[e];if((h=t.propsOptions[0])&&(0,i.RI)(h,e))return c[e]=3,a[e];if(r!==i.kT&&(0,i.RI)(r,e))return c[e]=4,r[e];Ft&&(c[e]=0)}}const d=Vt[e];let f,p;return d?("$attrs"===e&&(0,n.j)(t,"get",e),d(t)):(f=u.__cssModules)&&(f=f[e])?f:r!==i.kT&&(0,i.RI)(r,e)?(c[e]=4,r[e]):(p=l.config.globalProperties,(0,i.RI)(p,e)?p[e]:void 0)},set({_:t},e,r){const{data:n,setupState:s,ctx:o}=t;return s!==i.kT&&(0,i.RI)(s,e)?(s[e]=r,!0):n!==i.kT&&(0,i.RI)(n,e)?(n[e]=r,!0):!(0,i.RI)(t.props,e)&&(("$"!==e[0]||!(e.slice(1)in t))&&(o[e]=r,!0))},has({_:{data:t,setupState:e,accessCache:r,ctx:n,appContext:s,propsOptions:o}},a){let c;return!!r[a]||t!==i.kT&&(0,i.RI)(t,a)||e!==i.kT&&(0,i.RI)(e,a)||(c=o[0])&&(0,i.RI)(c,a)||(0,i.RI)(n,a)||(0,i.RI)(Vt,a)||(0,i.RI)(s.config.globalProperties,a)},defineProperty(t,e,r){return null!=r.get?t._.accessCache[e]=0:(0,i.RI)(r,"value")&&this.set(t,e,r.value,null),Reflect.defineProperty(t,e,r)}};let Ft=!0;function jt(t){const e=zt(t),r=t.proxy,s=t.ctx;Ft=!1,e.beforeCreate&&Ht(e.beforeCreate,t,"bc");const{data:o,computed:a,methods:c,watch:u,provide:l,inject:h,created:d,beforeMount:f,mounted:p,beforeUpdate:g,updated:y,activated:m,deactivated:w,beforeDestroy:v,beforeUnmount:E,destroyed:b,unmounted:S,render:_,renderTracked:R,renderTriggered:I,errorCaptured:C,serverPrefetch:A,expose:T,inheritAttrs:k,components:P,directives:N,filters:L}=e,D=null;if(h&&qt(h,s,D,t.appContext.config.unwrapInjectedRef),c)for(const n in c){const t=c[n];(0,i.mf)(t)&&(s[n]=t.bind(r))}if(o){0;const e=o.call(r,r);0,(0,i.Kn)(e)&&(t.data=(0,n.qj)(e))}if(Ft=!0,a)for(const n in a){const t=a[n],e=(0,i.mf)(t)?t.bind(r,r):(0,i.mf)(t.get)?t.get.bind(r,r):i.dG;0;const o=!(0,i.mf)(t)&&(0,i.mf)(t.set)?t.set.bind(r):i.dG,c=_r({get:e,set:o});Object.defineProperty(s,n,{enumerable:!0,configurable:!0,get:()=>c.value,set:t=>c.value=t})}if(u)for(const n in u)Gt(u[n],s,r,n);if(l){const t=(0,i.mf)(l)?l.call(r):l;Reflect.ownKeys(t).forEach((e=>{Y(e,t[e])}))}function O(t,e){(0,i.kJ)(e)?e.forEach((e=>t(e.bind(r)))):e&&t(e.bind(r))}if(d&&Ht(d,t,"c"),O(Rt,f),O(It,p),O(Ct,g),O(At,y),O(yt,m),O(mt,w),O(Dt,C),O(Lt,R),O(Nt,I),O(Tt,E),O(kt,S),O(Pt,A),(0,i.kJ)(T))if(T.length){const e=t.exposed||(t.exposed={});T.forEach((t=>{Object.defineProperty(e,t,{get:()=>r[t],set:e=>r[t]=e})}))}else t.exposed||(t.exposed={});_&&t.render===i.dG&&(t.render=_),null!=k&&(t.inheritAttrs=k),P&&(t.components=P),N&&(t.directives=N)}function qt(t,e,r=i.dG,s=!1){(0,i.kJ)(t)&&(t=Xt(t));for(const o in t){const r=t[o];let a;a=(0,i.Kn)(r)?"default"in r?Q(r.from||o,r.default,!0):Q(r.from||o):Q(r),(0,n.dq)(a)&&s?Object.defineProperty(e,o,{enumerable:!0,configurable:!0,get:()=>a.value,set:t=>a.value=t}):e[o]=a}}function Ht(t,e,r){o((0,i.kJ)(t)?t.map((t=>t.bind(e.proxy))):t.bind(e.proxy),e,r)}function Gt(t,e,r,n){const s=n.includes(".")?et(r,n):()=>r[n];if((0,i.HD)(t)){const r=e[t];(0,i.mf)(r)&&J(s,r)}else if((0,i.mf)(t))J(s,t.bind(r));else if((0,i.Kn)(t))if((0,i.kJ)(t))t.forEach((t=>Gt(t,e,r,n)));else{const n=(0,i.mf)(t.handler)?t.handler.bind(r):e[t.handler];(0,i.mf)(n)&&J(s,n,t)}else 0}function zt(t){const e=t.type,{mixins:r,extends:n}=e,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=t.appContext,a=s.get(e);let c;return a?c=a:i.length||r||n?(c={},i.length&&i.forEach((t=>$t(c,t,o,!0))),$t(c,e,o)):c=e,s.set(e,c),c}function $t(t,e,r,n=!1){const{mixins:i,extends:s}=e;s&&$t(t,s,r,!0),i&&i.forEach((e=>$t(t,e,r,!0)));for(const o in e)if(n&&"expose"===o);else{const n=Wt[o]||r&&r[o];t[o]=n?n(t[o],e[o]):e[o]}return t}const Wt={data:Yt,props:Zt,emits:Zt,methods:Zt,computed:Zt,beforeCreate:Jt,created:Jt,beforeMount:Jt,mounted:Jt,beforeUpdate:Jt,updated:Jt,beforeDestroy:Jt,beforeUnmount:Jt,destroyed:Jt,unmounted:Jt,activated:Jt,deactivated:Jt,errorCaptured:Jt,serverPrefetch:Jt,components:Zt,directives:Zt,watch:te,provide:Yt,inject:Qt};function Yt(t,e){return e?t?function(){return(0,i.l7)((0,i.mf)(t)?t.call(this,this):t,(0,i.mf)(e)?e.call(this,this):e)}:e:t}function Qt(t,e){return Zt(Xt(t),Xt(e))}function Xt(t){if((0,i.kJ)(t)){const e={};for(let r=0;r<t.length;r++)e[t[r]]=t[r];return e}return t}function Jt(t,e){return t?[...new Set([].concat(t,e))]:e}function Zt(t,e){return t?(0,i.l7)((0,i.l7)(Object.create(null),t),e):e}function te(t,e){if(!t)return e;if(!e)return t;const r=(0,i.l7)(Object.create(null),t);for(const n in e)r[n]=Jt(t[n],e[n]);return r}function ee(t,e,r,s=!1){const o={},a={};(0,i.Nj)(a,qe,1),t.propsDefaults=Object.create(null),ne(t,e,o,a);for(const n in t.propsOptions[0])n in o||(o[n]=void 0);r?t.props=s?o:(0,n.Um)(o):t.type.props?t.props=o:t.props=a,t.attrs=a}function re(t,e,r,s){const{props:o,attrs:a,vnode:{patchFlag:c}}=t,u=(0,n.IU)(o),[l]=t.propsOptions;let h=!1;if(!(s||c>0)||16&c){let n;ne(t,e,o,a)&&(h=!0);for(const s in u)e&&((0,i.RI)(e,s)||(n=(0,i.rs)(s))!==s&&(0,i.RI)(e,n))||(l?!r||void 0===r[s]&&void 0===r[n]||(o[s]=ie(l,u,s,void 0,t,!0)):delete o[s]);if(a!==u)for(const t in a)e&&(0,i.RI)(e,t)||(delete a[t],h=!0)}else if(8&c){const r=t.vnode.dynamicProps;for(let n=0;n<r.length;n++){let s=r[n];if(x(t.emitsOptions,s))continue;const c=e[s];if(l)if((0,i.RI)(a,s))c!==a[s]&&(a[s]=c,h=!0);else{const e=(0,i._A)(s);o[e]=ie(l,u,e,c,t,!1)}else c!==a[s]&&(a[s]=c,h=!0)}}h&&(0,n.X$)(t,"set","$attrs")}function ne(t,e,r,s){const[o,a]=t.propsOptions;let c,u=!1;if(e)for(let n in e){if((0,i.Gg)(n))continue;const l=e[n];let h;o&&(0,i.RI)(o,h=(0,i._A)(n))?a&&a.includes(h)?(c||(c={}))[h]=l:r[h]=l:x(t.emitsOptions,n)||n in s&&l===s[n]||(s[n]=l,u=!0)}if(a){const e=(0,n.IU)(r),s=c||i.kT;for(let n=0;n<a.length;n++){const c=a[n];r[c]=ie(o,e,c,s[c],t,!(0,i.RI)(s,c))}}return u}function ie(t,e,r,n,s,o){const a=t[r];if(null!=a){const t=(0,i.RI)(a,"default");if(t&&void 0===n){const t=a.default;if(a.type!==Function&&(0,i.mf)(t)){const{propsDefaults:i}=s;r in i?n=i[r]:(cr(s),n=i[r]=t.call(null,e),ur())}else n=t}a[0]&&(o&&!t?n=!1:!a[1]||""!==n&&n!==(0,i.rs)(r)||(n=!0))}return n}function se(t,e,r=!1){const n=e.propsCache,s=n.get(t);if(s)return s;const o=t.props,a={},c=[];let u=!1;if(!(0,i.mf)(t)){const n=t=>{u=!0;const[r,n]=se(t,e,!0);(0,i.l7)(a,r),n&&c.push(...n)};!r&&e.mixins.length&&e.mixins.forEach(n),t.extends&&n(t.extends),t.mixins&&t.mixins.forEach(n)}if(!o&&!u)return n.set(t,i.Z6),i.Z6;if((0,i.kJ)(o))for(let h=0;h<o.length;h++){0;const t=(0,i._A)(o[h]);oe(t)&&(a[t]=i.kT)}else if(o){0;for(const t in o){const e=(0,i._A)(t);if(oe(e)){const r=o[t],n=a[e]=(0,i.kJ)(r)||(0,i.mf)(r)?{type:r}:r;if(n){const t=ue(Boolean,n.type),r=ue(String,n.type);n[0]=t>-1,n[1]=r<0||t<r,(t>-1||(0,i.RI)(n,"default"))&&c.push(e)}}}}const l=[a,c];return n.set(t,l),l}function oe(t){return"$"!==t[0]}function ae(t){const e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:null===t?"null":""}function ce(t,e){return ae(t)===ae(e)}function ue(t,e){return(0,i.kJ)(e)?e.findIndex((e=>ce(e,t))):(0,i.mf)(e)&&ce(e,t)?0:-1}const le=t=>"_"===t[0]||"$stable"===t,he=t=>(0,i.kJ)(t)?t.map(Je):[Je(t)],de=(t,e,r)=>{if(e._n)return e;const n=K(((...t)=>he(e(...t))),r);return n._c=!1,n},fe=(t,e,r)=>{const n=t._ctx;for(const s in t){if(le(s))continue;const r=t[s];if((0,i.mf)(r))e[s]=de(s,r,n);else if(null!=r){0;const t=he(r);e[s]=()=>t}}},pe=(t,e)=>{const r=he(e);t.slots.default=()=>r},ge=(t,e)=>{if(32&t.vnode.shapeFlag){const r=e._;r?(t.slots=(0,n.IU)(e),(0,i.Nj)(e,"_",r)):fe(e,t.slots={})}else t.slots={},e&&pe(t,e);(0,i.Nj)(t.slots,qe,1)},ye=(t,e,r)=>{const{vnode:n,slots:s}=t;let o=!0,a=i.kT;if(32&n.shapeFlag){const t=e._;t?r&&1===t?o=!1:((0,i.l7)(s,e),r||1!==t||delete s._):(o=!e.$stable,fe(e,s)),a=e}else e&&(pe(t,e),a={default:1});if(o)for(const i in s)le(i)||i in a||delete s[i]};function me(){return{app:null,config:{isNativeTag:i.NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let we=0;function ve(t,e){return function(r,n=null){(0,i.mf)(r)||(r=Object.assign({},r)),null==n||(0,i.Kn)(n)||(n=null);const s=me(),o=new Set;let a=!1;const c=s.app={_uid:we++,_component:r,_props:n,_container:null,_context:s,_instance:null,version:Ir,get config(){return s.config},set config(t){0},use(t,...e){return o.has(t)||(t&&(0,i.mf)(t.install)?(o.add(t),t.install(c,...e)):(0,i.mf)(t)&&(o.add(t),t(c,...e))),c},mixin(t){return s.mixins.includes(t)||s.mixins.push(t),c},component(t,e){return e?(s.components[t]=e,c):s.components[t]},directive(t,e){return e?(s.directives[t]=e,c):s.directives[t]},mount(i,o,u){if(!a){0;const l=$e(r,n);return l.appContext=s,o&&e?e(l,i):t(l,i,u),a=!0,c._container=i,i.__vue_app__=c,Er(l.component)||l.component.proxy}},unmount(){a&&(t(null,c._container),delete c._container.__vue_app__)},provide(t,e){return s.provides[t]=e,c}};return c}}function Ee(t,e,r,o,a=!1){if((0,i.kJ)(t))return void t.forEach(((t,n)=>Ee(t,e&&((0,i.kJ)(e)?e[n]:e),r,o,a)));if(ft(o)&&!a)return;const c=4&o.shapeFlag?Er(o.component)||o.component.proxy:o.el,u=a?null:c,{i:l,r:h}=t;const d=e&&e.r,f=l.refs===i.kT?l.refs={}:l.refs,p=l.setupState;if(null!=d&&d!==h&&((0,i.HD)(d)?(f[d]=null,(0,i.RI)(p,d)&&(p[d]=null)):(0,n.dq)(d)&&(d.value=null)),(0,i.mf)(h))s(h,l,12,[u,f]);else{const e=(0,i.HD)(h),s=(0,n.dq)(h);if(e||s){const n=()=>{if(t.f){const r=e?f[h]:h.value;a?(0,i.kJ)(r)&&(0,i.Od)(r,c):(0,i.kJ)(r)?r.includes(c)||r.push(c):e?(f[h]=[c],(0,i.RI)(p,h)&&(p[h]=f[h])):(h.value=[c],t.k&&(f[t.k]=h.value))}else e?(f[h]=u,(0,i.RI)(p,h)&&(p[h]=u)):s&&(h.value=u,t.k&&(f[t.k]=u))};u?(n.id=-1,Se(n,r)):n()}else 0}}function be(){}const Se=W;function _e(t){return Re(t)}function Re(t,e){be();const r=(0,i.E9)();r.__VUE__=!0;const{insert:s,remove:o,patchProp:a,createElement:c,createText:u,createComment:l,setText:h,setElementText:d,parentNode:f,nextSibling:p,setScopeId:g=i.dG,cloneNode:y,insertStaticContent:m}=t,w=(t,e,r,n=null,i=null,s=null,o=!1,a=null,c=!!e.dynamicChildren)=>{if(t===e)return;t&&!je(t,e)&&(n=Z(t),W(t,i,s,!0),t=null),-2===e.patchFlag&&(c=!1,e.dynamicChildren=null);const{type:u,ref:l,shapeFlag:h}=e;switch(u){case Pe:v(t,e,r,n);break;case Ne:E(t,e,r,n);break;case Le:null==t&&b(e,r,n,o);break;case ke:B(t,e,r,n,i,s,o,a,c);break;default:1&h?I(t,e,r,n,i,s,o,a,c):6&h?x(t,e,r,n,i,s,o,a,c):(64&h||128&h)&&u.process(t,e,r,n,i,s,o,a,c,et)}null!=l&&i&&Ee(l,t&&t.ref,s,e||t,!e)},v=(t,e,r,n)=>{if(null==t)s(e.el=u(e.children),r,n);else{const r=e.el=t.el;e.children!==t.children&&h(r,e.children)}},E=(t,e,r,n)=>{null==t?s(e.el=l(e.children||""),r,n):e.el=t.el},b=(t,e,r,n)=>{[t.el,t.anchor]=m(t.children,e,r,n,t.el,t.anchor)},S=({el:t,anchor:e},r,n)=>{let i;while(t&&t!==e)i=p(t),s(t,r,n),t=i;s(e,r,n)},_=({el:t,anchor:e})=>{let r;while(t&&t!==e)r=p(t),o(t),t=r;o(e)},I=(t,e,r,n,i,s,o,a,c)=>{o=o||"svg"===e.type,null==t?A(e,r,n,i,s,o,a,c):L(t,e,i,s,o,a,c)},A=(t,e,r,n,o,u,l,h)=>{let f,p;const{type:g,props:m,shapeFlag:w,transition:v,patchFlag:E,dirs:b}=t;if(t.el&&void 0!==y&&-1===E)f=t.el=y(t.el);else{if(f=t.el=c(t.type,u,m&&m.is,m),8&w?d(f,t.children):16&w&&k(t.children,f,null,n,o,u&&"foreignObject"!==g,l,h),b&&Bt(t,null,n,"created"),m){for(const e in m)"value"===e||(0,i.Gg)(e)||a(f,e,null,m[e],u,t.children,n,o,J);"value"in m&&a(f,"value",null,m.value),(p=m.onVnodeBeforeMount)&&rr(p,n,t)}T(f,t,t.scopeId,l,n)}b&&Bt(t,null,n,"beforeMount");const S=(!o||o&&!o.pendingBranch)&&v&&!v.persisted;S&&v.beforeEnter(f),s(f,e,r),((p=m&&m.onVnodeMounted)||S||b)&&Se((()=>{p&&rr(p,n,t),S&&v.enter(f),b&&Bt(t,null,n,"mounted")}),o)},T=(t,e,r,n,i)=>{if(r&&g(t,r),n)for(let s=0;s<n.length;s++)g(t,n[s]);if(i){let r=i.subTree;if(e===r){const e=i.vnode;T(t,e,e.scopeId,e.slotScopeIds,i.parent)}}},k=(t,e,r,n,i,s,o,a,c=0)=>{for(let u=c;u<t.length;u++){const c=t[u]=a?Ze(t[u]):Je(t[u]);w(null,c,e,r,n,i,s,o,a)}},L=(t,e,r,n,s,o,c)=>{const u=e.el=t.el;let{patchFlag:l,dynamicChildren:h,dirs:f}=e;l|=16&t.patchFlag;const p=t.props||i.kT,g=e.props||i.kT;let y;r&&Ie(r,!1),(y=g.onVnodeBeforeUpdate)&&rr(y,r,e,t),f&&Bt(e,t,r,"beforeUpdate"),r&&Ie(r,!0);const m=s&&"foreignObject"!==e.type;if(h?D(t.dynamicChildren,h,u,r,n,m,o):c||j(t,e,u,null,r,n,m,o,!1),l>0){if(16&l)O(u,e,p,g,r,n,s);else if(2&l&&p.class!==g.class&&a(u,"class",null,g.class,s),4&l&&a(u,"style",p.style,g.style,s),8&l){const i=e.dynamicProps;for(let e=0;e<i.length;e++){const o=i[e],c=p[o],l=g[o];l===c&&"value"!==o||a(u,o,c,l,s,t.children,r,n,J)}}1&l&&t.children!==e.children&&d(u,e.children)}else c||null!=h||O(u,e,p,g,r,n,s);((y=g.onVnodeUpdated)||f)&&Se((()=>{y&&rr(y,r,e,t),f&&Bt(e,t,r,"updated")}),n)},D=(t,e,r,n,i,s,o)=>{for(let a=0;a<e.length;a++){const c=t[a],u=e[a],l=c.el&&(c.type===ke||!je(c,u)||70&c.shapeFlag)?f(c.el):r;w(c,u,l,null,n,i,s,o,!0)}},O=(t,e,r,n,s,o,c)=>{if(r!==n){for(const u in n){if((0,i.Gg)(u))continue;const l=n[u],h=r[u];l!==h&&"value"!==u&&a(t,u,h,l,c,e.children,s,o,J)}if(r!==i.kT)for(const u in r)(0,i.Gg)(u)||u in n||a(t,u,r[u],null,c,e.children,s,o,J);"value"in n&&a(t,"value",r.value,n.value)}},B=(t,e,r,n,i,o,a,c,l)=>{const h=e.el=t?t.el:u(""),d=e.anchor=t?t.anchor:u("");let{patchFlag:f,dynamicChildren:p,slotScopeIds:g}=e;g&&(c=c?c.concat(g):g),null==t?(s(h,r,n),s(d,r,n),k(e.children,r,d,i,o,a,c,l)):f>0&&64&f&&p&&t.dynamicChildren?(D(t.dynamicChildren,p,r,i,o,a,c),(null!=e.key||i&&e===i.subTree)&&Ce(t,e,!0)):j(t,e,r,d,i,o,a,c,l)},x=(t,e,r,n,i,s,o,a,c)=>{e.slotScopeIds=a,null==t?512&e.shapeFlag?i.ctx.activate(e,r,n,o,c):U(e,r,n,i,s,o,c):M(t,e,c)},U=(t,e,r,n,i,s,o)=>{const a=t.component=sr(t,n,i);if(pt(t)&&(a.ctx.renderer=et),pr(a),a.asyncDep){if(i&&i.registerDep(a,V),!t.el){const t=a.subTree=$e(Ne);E(null,t,e,r)}}else V(a,t,e,r,i,s,o)},M=(t,e,r)=>{const n=e.component=t.component;if(H(t,e,r)){if(n.asyncDep&&!n.asyncResolved)return void K(n,e,r);n.next=e,C(n.update),n.update()}else e.el=t.el,n.vnode=e},V=(t,e,r,s,o,a,c)=>{const u=()=>{if(t.isMounted){let e,{next:r,bu:n,u:s,parent:u,vnode:l}=t,h=r;0,Ie(t,!1),r?(r.el=l.el,K(t,r,c)):r=l,n&&(0,i.ir)(n),(e=r.props&&r.props.onVnodeBeforeUpdate)&&rr(e,u,r,l),Ie(t,!0);const d=F(t);0;const p=t.subTree;t.subTree=d,w(p,d,f(p.el),Z(p),t,o,a),r.el=d.el,null===h&&z(t,d.el),s&&Se(s,o),(e=r.props&&r.props.onVnodeUpdated)&&Se((()=>rr(e,u,r,l)),o)}else{let n;const{el:c,props:u}=e,{bm:l,m:h,parent:d}=t,f=ft(e);if(Ie(t,!1),l&&(0,i.ir)(l),!f&&(n=u&&u.onVnodeBeforeMount)&&rr(n,d,e),Ie(t,!0),c&&nt){const r=()=>{t.subTree=F(t),nt(c,t.subTree,t,o,null)};f?e.type.__asyncLoader().then((()=>!t.isUnmounted&&r())):r()}else{0;const n=t.subTree=F(t);0,w(null,n,r,s,t,o,a),e.el=n.el}if(h&&Se(h,o),!f&&(n=u&&u.onVnodeMounted)){const t=e;Se((()=>rr(n,d,t)),o)}(256&e.shapeFlag||d&&ft(d.vnode)&&256&d.vnode.shapeFlag)&&t.a&&Se(t.a,o),t.isMounted=!0,e=r=s=null}},l=t.effect=new n.qq(u,(()=>R(h)),t.scope),h=t.update=()=>l.run();h.id=t.uid,Ie(t,!0),h()},K=(t,e,r)=>{e.component=t;const i=t.vnode.props;t.vnode=e,t.next=null,re(t,e.props,i,r),ye(t,e.children,r),(0,n.Jd)(),P(void 0,t.update),(0,n.lk)()},j=(t,e,r,n,i,s,o,a,c=!1)=>{const u=t&&t.children,l=t?t.shapeFlag:0,h=e.children,{patchFlag:f,shapeFlag:p}=e;if(f>0){if(128&f)return void G(u,h,r,n,i,s,o,a,c);if(256&f)return void q(u,h,r,n,i,s,o,a,c)}8&p?(16&l&&J(u,i,s),h!==u&&d(r,h)):16&l?16&p?G(u,h,r,n,i,s,o,a,c):J(u,i,s,!0):(8&l&&d(r,""),16&p&&k(h,r,n,i,s,o,a,c))},q=(t,e,r,n,s,o,a,c,u)=>{t=t||i.Z6,e=e||i.Z6;const l=t.length,h=e.length,d=Math.min(l,h);let f;for(f=0;f<d;f++){const n=e[f]=u?Ze(e[f]):Je(e[f]);w(t[f],n,r,null,s,o,a,c,u)}l>h?J(t,s,o,!0,!1,d):k(e,r,n,s,o,a,c,u,d)},G=(t,e,r,n,s,o,a,c,u)=>{let l=0;const h=e.length;let d=t.length-1,f=h-1;while(l<=d&&l<=f){const n=t[l],i=e[l]=u?Ze(e[l]):Je(e[l]);if(!je(n,i))break;w(n,i,r,null,s,o,a,c,u),l++}while(l<=d&&l<=f){const n=t[d],i=e[f]=u?Ze(e[f]):Je(e[f]);if(!je(n,i))break;w(n,i,r,null,s,o,a,c,u),d--,f--}if(l>d){if(l<=f){const t=f+1,i=t<h?e[t].el:n;while(l<=f)w(null,e[l]=u?Ze(e[l]):Je(e[l]),r,i,s,o,a,c,u),l++}}else if(l>f)while(l<=d)W(t[l],s,o,!0),l++;else{const p=l,g=l,y=new Map;for(l=g;l<=f;l++){const t=e[l]=u?Ze(e[l]):Je(e[l]);null!=t.key&&y.set(t.key,l)}let m,v=0;const E=f-g+1;let b=!1,S=0;const _=new Array(E);for(l=0;l<E;l++)_[l]=0;for(l=p;l<=d;l++){const n=t[l];if(v>=E){W(n,s,o,!0);continue}let i;if(null!=n.key)i=y.get(n.key);else for(m=g;m<=f;m++)if(0===_[m-g]&&je(n,e[m])){i=m;break}void 0===i?W(n,s,o,!0):(_[i-g]=l+1,i>=S?S=i:b=!0,w(n,e[i],r,null,s,o,a,c,u),v++)}const R=b?Ae(_):i.Z6;for(m=R.length-1,l=E-1;l>=0;l--){const t=g+l,i=e[t],d=t+1<h?e[t+1].el:n;0===_[l]?w(null,i,r,d,s,o,a,c,u):b&&(m<0||l!==R[m]?$(i,r,d,2):m--)}}},$=(t,e,r,n,i=null)=>{const{el:o,type:a,transition:c,children:u,shapeFlag:l}=t;if(6&l)return void $(t.component.subTree,e,r,n);if(128&l)return void t.suspense.move(e,r,n);if(64&l)return void a.move(t,e,r,et);if(a===ke){s(o,e,r);for(let t=0;t<u.length;t++)$(u[t],e,r,n);return void s(t.anchor,e,r)}if(a===Le)return void S(t,e,r);const h=2!==n&&1&l&&c;if(h)if(0===n)c.beforeEnter(o),s(o,e,r),Se((()=>c.enter(o)),i);else{const{leave:t,delayLeave:n,afterLeave:i}=c,a=()=>s(o,e,r),u=()=>{t(o,(()=>{a(),i&&i()}))};n?n(o,a,u):u()}else s(o,e,r)},W=(t,e,r,n=!1,i=!1)=>{const{type:s,props:o,ref:a,children:c,dynamicChildren:u,shapeFlag:l,patchFlag:h,dirs:d}=t;if(null!=a&&Ee(a,null,r,t,!0),256&l)return void e.ctx.deactivate(t);const f=1&l&&d,p=!ft(t);let g;if(p&&(g=o&&o.onVnodeBeforeUnmount)&&rr(g,e,t),6&l)X(t.component,r,n);else{if(128&l)return void t.suspense.unmount(r,n);f&&Bt(t,null,e,"beforeUnmount"),64&l?t.type.remove(t,e,r,i,et,n):u&&(s!==ke||h>0&&64&h)?J(u,e,r,!1,!0):(s===ke&&384&h||!i&&16&l)&&J(c,e,r),n&&Y(t)}(p&&(g=o&&o.onVnodeUnmounted)||f)&&Se((()=>{g&&rr(g,e,t),f&&Bt(t,null,e,"unmounted")}),r)},Y=t=>{const{type:e,el:r,anchor:n,transition:i}=t;if(e===ke)return void Q(r,n);if(e===Le)return void _(t);const s=()=>{o(r),i&&!i.persisted&&i.afterLeave&&i.afterLeave()};if(1&t.shapeFlag&&i&&!i.persisted){const{leave:e,delayLeave:n}=i,o=()=>e(r,s);n?n(t.el,s,o):o()}else s()},Q=(t,e)=>{let r;while(t!==e)r=p(t),o(t),t=r;o(e)},X=(t,e,r)=>{const{bum:n,scope:s,update:o,subTree:a,um:c}=t;n&&(0,i.ir)(n),s.stop(),o&&(o.active=!1,W(a,t,e,r)),c&&Se(c,e),Se((()=>{t.isUnmounted=!0}),e),e&&e.pendingBranch&&!e.isUnmounted&&t.asyncDep&&!t.asyncResolved&&t.suspenseId===e.pendingId&&(e.deps--,0===e.deps&&e.resolve())},J=(t,e,r,n=!1,i=!1,s=0)=>{for(let o=s;o<t.length;o++)W(t[o],e,r,n,i)},Z=t=>6&t.shapeFlag?Z(t.component.subTree):128&t.shapeFlag?t.suspense.next():p(t.anchor||t.el),tt=(t,e,r)=>{null==t?e._vnode&&W(e._vnode,null,null,!0):w(e._vnode||null,t,e,null,null,null,r),N(),e._vnode=t},et={p:w,um:W,m:$,r:Y,mt:U,mc:k,pc:j,pbc:D,n:Z,o:t};let rt,nt;return e&&([rt,nt]=e(et)),{render:tt,hydrate:rt,createApp:ve(tt,rt)}}function Ie({effect:t,update:e},r){t.allowRecurse=e.allowRecurse=r}function Ce(t,e,r=!1){const n=t.children,s=e.children;if((0,i.kJ)(n)&&(0,i.kJ)(s))for(let i=0;i<n.length;i++){const t=n[i];let e=s[i];1&e.shapeFlag&&!e.dynamicChildren&&((e.patchFlag<=0||32===e.patchFlag)&&(e=s[i]=Ze(s[i]),e.el=t.el),r||Ce(t,e))}}function Ae(t){const e=t.slice(),r=[0];let n,i,s,o,a;const c=t.length;for(n=0;n<c;n++){const c=t[n];if(0!==c){if(i=r[r.length-1],t[i]<c){e[n]=i,r.push(n);continue}s=0,o=r.length-1;while(s<o)a=s+o>>1,t[r[a]]<c?s=a+1:o=a;c<t[r[s]]&&(s>0&&(e[n]=r[s-1]),r[s]=n)}}s=r.length,o=r[s-1];while(s-- >0)r[s]=o,o=e[o];return r}const Te=t=>t.__isTeleport;const ke=Symbol(void 0),Pe=Symbol(void 0),Ne=Symbol(void 0),Le=Symbol(void 0),De=[];let Oe=null;function Be(t=!1){De.push(Oe=t?null:[])}function xe(){De.pop(),Oe=De[De.length-1]||null}let Ue=1;function Me(t){Ue+=t}function Ve(t){return t.dynamicChildren=Ue>0?Oe||i.Z6:null,xe(),Ue>0&&Oe&&Oe.push(t),t}function Ke(t,e,r,n,i,s){return Ve(ze(t,e,r,n,i,s,!0))}function Fe(t){return!!t&&!0===t.__v_isVNode}function je(t,e){return t.type===e.type&&t.key===e.key}const qe="__vInternal",He=({key:t})=>null!=t?t:null,Ge=({ref:t,ref_key:e,ref_for:r})=>null!=t?(0,i.HD)(t)||(0,n.dq)(t)||(0,i.mf)(t)?{i:U,r:t,k:e,f:!!r}:t:null;function ze(t,e=null,r=null,n=0,s=null,o=(t===ke?0:1),a=!1,c=!1){const u={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&He(e),ref:e&&Ge(e),scopeId:M,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:n,dynamicProps:s,dynamicChildren:null,appContext:null};return c?(tr(u,r),128&o&&t.normalize(u)):r&&(u.shapeFlag|=(0,i.HD)(r)?8:16),Ue>0&&!a&&Oe&&(u.patchFlag>0||6&o)&&32!==u.patchFlag&&Oe.push(u),u}const $e=We;function We(t,e=null,r=null,s=0,o=null,a=!1){if(t&&t!==xt||(t=Ne),Fe(t)){const n=Qe(t,e,!0);return r&&tr(n,r),Ue>0&&!a&&Oe&&(6&n.shapeFlag?Oe[Oe.indexOf(t)]=n:Oe.push(n)),n.patchFlag|=-2,n}if(Sr(t)&&(t=t.__vccOpts),e){e=Ye(e);let{class:t,style:r}=e;t&&!(0,i.HD)(t)&&(e.class=(0,i.C_)(t)),(0,i.Kn)(r)&&((0,n.X3)(r)&&!(0,i.kJ)(r)&&(r=(0,i.l7)({},r)),e.style=(0,i.j5)(r))}const c=(0,i.HD)(t)?1:$(t)?128:Te(t)?64:(0,i.Kn)(t)?4:(0,i.mf)(t)?2:0;return ze(t,e,r,s,o,c,a,!0)}function Ye(t){return t?(0,n.X3)(t)||qe in t?(0,i.l7)({},t):t:null}function Qe(t,e,r=!1){const{props:n,ref:s,patchFlag:o,children:a}=t,c=e?er(n||{},e):n,u={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&He(c),ref:e&&e.ref?r&&s?(0,i.kJ)(s)?s.concat(Ge(e)):[s,Ge(e)]:Ge(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==ke?-1===o?16:16|o:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Qe(t.ssContent),ssFallback:t.ssFallback&&Qe(t.ssFallback),el:t.el,anchor:t.anchor};return u}function Xe(t=" ",e=0){return $e(Pe,null,t,e)}function Je(t){return null==t||"boolean"===typeof t?$e(Ne):(0,i.kJ)(t)?$e(ke,null,t.slice()):"object"===typeof t?Ze(t):$e(Pe,null,String(t))}function Ze(t){return null===t.el||t.memo?t:Qe(t)}function tr(t,e){let r=0;const{shapeFlag:n}=t;if(null==e)e=null;else if((0,i.kJ)(e))r=16;else if("object"===typeof e){if(65&n){const r=e.default;return void(r&&(r._c&&(r._d=!1),tr(t,r()),r._c&&(r._d=!0)))}{r=32;const n=e._;n||qe in e?3===n&&U&&(1===U.slots._?e._=1:(e._=2,t.patchFlag|=1024)):e._ctx=U}}else(0,i.mf)(e)?(e={default:e,_ctx:U},r=32):(e=String(e),64&n?(r=16,e=[Xe(e)]):r=8);t.children=e,t.shapeFlag|=r}function er(...t){const e={};for(let r=0;r<t.length;r++){const n=t[r];for(const t in n)if("class"===t)e.class!==n.class&&(e.class=(0,i.C_)([e.class,n.class]));else if("style"===t)e.style=(0,i.j5)([e.style,n.style]);else if((0,i.F7)(t)){const r=e[t],s=n[t];!s||r===s||(0,i.kJ)(r)&&r.includes(s)||(e[t]=r?[].concat(r,s):s)}else""!==t&&(e[t]=n[t])}return e}function rr(t,e,r,n=null){o(t,e,7,[r,n])}const nr=me();let ir=0;function sr(t,e,r){const s=t.type,o=(e?e.appContext:t.appContext)||nr,a={uid:ir++,vnode:t,type:s,parent:e,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,scope:new n.Bj(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(o.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:se(s,o),emitsOptions:B(s,o),emit:null,emitted:null,propsDefaults:i.kT,inheritAttrs:s.inheritAttrs,ctx:i.kT,data:i.kT,props:i.kT,attrs:i.kT,slots:i.kT,refs:i.kT,setupState:i.kT,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=e?e.root:a,a.emit=O.bind(null,a),t.ce&&t.ce(a),a}let or=null;const ar=()=>or||U,cr=t=>{or=t,t.scope.on()},ur=()=>{or&&or.scope.off(),or=null};function lr(t){return 4&t.vnode.shapeFlag}let hr,dr,fr=!1;function pr(t,e=!1){fr=e;const{props:r,children:n}=t.vnode,i=lr(t);ee(t,r,i,e),ge(t,n);const s=i?gr(t,e):void 0;return fr=!1,s}function gr(t,e){const r=t.type;t.accessCache=Object.create(null),t.proxy=(0,n.Xl)(new Proxy(t.ctx,Kt));const{setup:o}=r;if(o){const r=t.setupContext=o.length>1?vr(t):null;cr(t),(0,n.Jd)();const c=s(o,t,0,[t.props,r]);if((0,n.lk)(),ur(),(0,i.tI)(c)){if(c.then(ur,ur),e)return c.then((r=>{yr(t,r,e)})).catch((e=>{a(e,t,0)}));t.asyncDep=c}else yr(t,c,e)}else mr(t,e)}function yr(t,e,r){(0,i.mf)(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:(0,i.Kn)(e)&&(t.setupState=(0,n.WL)(e)),mr(t,r)}function mr(t,e,r){const s=t.type;if(!t.render){if(!e&&hr&&!s.render){const e=s.template;if(e){0;const{isCustomElement:r,compilerOptions:n}=t.appContext.config,{delimiters:o,compilerOptions:a}=s,c=(0,i.l7)((0,i.l7)({isCustomElement:r,delimiters:o},n),a);s.render=hr(e,c)}}t.render=s.render||i.dG,dr&&dr(t)}cr(t),(0,n.Jd)(),jt(t),(0,n.lk)(),ur()}function wr(t){return new Proxy(t.attrs,{get(e,r){return(0,n.j)(t,"get","$attrs"),e[r]}})}function vr(t){const e=e=>{t.exposed=e||{}};let r;return{get attrs(){return r||(r=wr(t))},slots:t.slots,emit:t.emit,expose:e}}function Er(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy((0,n.WL)((0,n.Xl)(t.exposed)),{get(e,r){return r in e?e[r]:r in Vt?Vt[r](t):void 0}}))}function br(t,e=!0){return(0,i.mf)(t)?t.displayName||t.name:t.name||e&&t.__name}function Sr(t){return(0,i.mf)(t)&&"__vccOpts"in t}const _r=(t,e)=>(0,n.Fl)(t,e,fr);function Rr(t,e,r){const n=arguments.length;return 2===n?(0,i.Kn)(e)&&!(0,i.kJ)(e)?Fe(e)?$e(t,null,[e]):$e(t,e):$e(t,null,e):(n>3?r=Array.prototype.slice.call(arguments,2):3===n&&Fe(r)&&(r=[r]),$e(t,e,r))}Symbol("");const Ir="3.2.37"},9242:function(t,e,r){"use strict";r.d(e,{iM:function(){return st},nr:function(){return rt},ri:function(){return ut}});var n=r(7139),i=r(3396);r(4870);const s="http://www.w3.org/2000/svg",o="undefined"!==typeof document?document:null,a=o&&o.createElement("template"),c={insert:(t,e,r)=>{e.insertBefore(t,r||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,r,n)=>{const i=e?o.createElementNS(s,t):o.createElement(t,r?{is:r}:void 0);return"select"===t&&n&&null!=n.multiple&&i.setAttribute("multiple",n.multiple),i},createText:t=>o.createTextNode(t),createComment:t=>o.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>o.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},cloneNode(t){const e=t.cloneNode(!0);return"_value"in t&&(e._value=t._value),e},insertStaticContent(t,e,r,n,i,s){const o=r?r.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling)){while(1)if(e.insertBefore(i.cloneNode(!0),r),i===s||!(i=i.nextSibling))break}else{a.innerHTML=n?`<svg>${t}</svg>`:t;const i=a.content;if(n){const t=i.firstChild;while(t.firstChild)i.appendChild(t.firstChild);i.removeChild(t)}e.insertBefore(i,r)}return[o?o.nextSibling:e.firstChild,r?r.previousSibling:e.lastChild]}};function u(t,e,r){const n=t._vtc;n&&(e=(e?[e,...n]:[...n]).join(" ")),null==e?t.removeAttribute("class"):r?t.setAttribute("class",e):t.className=e}function l(t,e,r){const i=t.style,s=(0,n.HD)(r);if(r&&!s){for(const t in r)d(i,t,r[t]);if(e&&!(0,n.HD)(e))for(const t in e)null==r[t]&&d(i,t,"")}else{const n=i.display;s?e!==r&&(i.cssText=r):e&&t.removeAttribute("style"),"_vod"in t&&(i.display=n)}}const h=/\s*!important$/;function d(t,e,r){if((0,n.kJ)(r))r.forEach((r=>d(t,e,r)));else if(null==r&&(r=""),e.startsWith("--"))t.setProperty(e,r);else{const i=g(t,e);h.test(r)?t.setProperty((0,n.rs)(i),r.replace(h,""),"important"):t[i]=r}}const f=["Webkit","Moz","ms"],p={};function g(t,e){const r=p[e];if(r)return r;let i=(0,n._A)(e);if("filter"!==i&&i in t)return p[e]=i;i=(0,n.kC)(i);for(let n=0;n<f.length;n++){const r=f[n]+i;if(r in t)return p[e]=r}return e}const y="http://www.w3.org/1999/xlink";function m(t,e,r,i,s){if(i&&e.startsWith("xlink:"))null==r?t.removeAttributeNS(y,e.slice(6,e.length)):t.setAttributeNS(y,e,r);else{const i=(0,n.Pq)(e);null==r||i&&!(0,n.yA)(r)?t.removeAttribute(e):t.setAttribute(e,i?"":r)}}function w(t,e,r,i,s,o,a){if("innerHTML"===e||"textContent"===e)return i&&a(i,s,o),void(t[e]=null==r?"":r);if("value"===e&&"PROGRESS"!==t.tagName&&!t.tagName.includes("-")){t._value=r;const n=null==r?"":r;return t.value===n&&"OPTION"!==t.tagName||(t.value=n),void(null==r&&t.removeAttribute(e))}let c=!1;if(""===r||null==r){const i=typeof t[e];"boolean"===i?r=(0,n.yA)(r):null==r&&"string"===i?(r="",c=!0):"number"===i&&(r=0,c=!0)}try{t[e]=r}catch(u){0}c&&t.removeAttribute(e)}const[v,E]=(()=>{let t=Date.now,e=!1;if("undefined"!==typeof window){Date.now()>document.createEvent("Event").timeStamp&&(t=performance.now.bind(performance));const r=navigator.userAgent.match(/firefox\/(\d+)/i);e=!!(r&&Number(r[1])<=53)}return[t,e]})();let b=0;const S=Promise.resolve(),_=()=>{b=0},R=()=>b||(S.then(_),b=v());function I(t,e,r,n){t.addEventListener(e,r,n)}function C(t,e,r,n){t.removeEventListener(e,r,n)}function A(t,e,r,n,i=null){const s=t._vei||(t._vei={}),o=s[e];if(n&&o)o.value=n;else{const[r,a]=k(e);if(n){const o=s[e]=P(n,i);I(t,r,o,a)}else o&&(C(t,r,o,a),s[e]=void 0)}}const T=/(?:Once|Passive|Capture)$/;function k(t){let e;if(T.test(t)){let r;e={};while(r=t.match(T))t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[(0,n.rs)(t.slice(2)),e]}function P(t,e){const r=t=>{const n=t.timeStamp||v();(E||n>=r.attached-1)&&(0,i.$d)(N(t,r.value),e,5,[t])};return r.value=t,r.attached=R(),r}function N(t,e){if((0,n.kJ)(e)){const r=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{r.call(t),t._stopped=!0},e.map((t=>e=>!e._stopped&&t&&t(e)))}return e}const L=/^on[a-z]/,D=(t,e,r,i,s=!1,o,a,c,h)=>{"class"===e?u(t,i,s):"style"===e?l(t,r,i):(0,n.F7)(e)?(0,n.tR)(e)||A(t,e,r,i,a):("."===e[0]?(e=e.slice(1),1):"^"===e[0]?(e=e.slice(1),0):O(t,e,i,s))?w(t,e,i,o,a,c,h):("true-value"===e?t._trueValue=i:"false-value"===e&&(t._falseValue=i),m(t,e,i,s))};function O(t,e,r,i){return i?"innerHTML"===e||"textContent"===e||!!(e in t&&L.test(e)&&(0,n.mf)(r)):"spellcheck"!==e&&"draggable"!==e&&"translate"!==e&&("form"!==e&&(("list"!==e||"INPUT"!==t.tagName)&&(("type"!==e||"TEXTAREA"!==t.tagName)&&((!L.test(e)||!(0,n.HD)(r))&&e in t))))}"undefined"!==typeof HTMLElement&&HTMLElement;const B="transition",x="animation",U=(t,{slots:e})=>(0,i.h)(i.P$,F(t),e);U.displayName="Transition";const M={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},V=(U.props=(0,n.l7)({},i.P$.props,M),(t,e=[])=>{(0,n.kJ)(t)?t.forEach((t=>t(...e))):t&&t(...e)}),K=t=>!!t&&((0,n.kJ)(t)?t.some((t=>t.length>1)):t.length>1);function F(t){const e={};for(const n in t)n in M||(e[n]=t[n]);if(!1===t.css)return e;const{name:r="v",type:i,duration:s,enterFromClass:o=`${r}-enter-from`,enterActiveClass:a=`${r}-enter-active`,enterToClass:c=`${r}-enter-to`,appearFromClass:u=o,appearActiveClass:l=a,appearToClass:h=c,leaveFromClass:d=`${r}-leave-from`,leaveActiveClass:f=`${r}-leave-active`,leaveToClass:p=`${r}-leave-to`}=t,g=j(s),y=g&&g[0],m=g&&g[1],{onBeforeEnter:w,onEnter:v,onEnterCancelled:E,onLeave:b,onLeaveCancelled:S,onBeforeAppear:_=w,onAppear:R=v,onAppearCancelled:I=E}=e,C=(t,e,r)=>{G(t,e?h:c),G(t,e?l:a),r&&r()},A=(t,e)=>{t._isLeaving=!1,G(t,d),G(t,p),G(t,f),e&&e()},T=t=>(e,r)=>{const n=t?R:v,s=()=>C(e,t,r);V(n,[e,s]),z((()=>{G(e,t?u:o),H(e,t?h:c),K(n)||W(e,i,y,s)}))};return(0,n.l7)(e,{onBeforeEnter(t){V(w,[t]),H(t,o),H(t,a)},onBeforeAppear(t){V(_,[t]),H(t,u),H(t,l)},onEnter:T(!1),onAppear:T(!0),onLeave(t,e){t._isLeaving=!0;const r=()=>A(t,e);H(t,d),J(),H(t,f),z((()=>{t._isLeaving&&(G(t,d),H(t,p),K(b)||W(t,i,m,r))})),V(b,[t,r])},onEnterCancelled(t){C(t,!1),V(E,[t])},onAppearCancelled(t){C(t,!0),V(I,[t])},onLeaveCancelled(t){A(t),V(S,[t])}})}function j(t){if(null==t)return null;if((0,n.Kn)(t))return[q(t.enter),q(t.leave)];{const e=q(t);return[e,e]}}function q(t){const e=(0,n.He)(t);return e}function H(t,e){e.split(/\s+/).forEach((e=>e&&t.classList.add(e))),(t._vtc||(t._vtc=new Set)).add(e)}function G(t,e){e.split(/\s+/).forEach((e=>e&&t.classList.remove(e)));const{_vtc:r}=t;r&&(r.delete(e),r.size||(t._vtc=void 0))}function z(t){requestAnimationFrame((()=>{requestAnimationFrame(t)}))}let $=0;function W(t,e,r,n){const i=t._endId=++$,s=()=>{i===t._endId&&n()};if(r)return setTimeout(s,r);const{type:o,timeout:a,propCount:c}=Y(t,e);if(!o)return n();const u=o+"end";let l=0;const h=()=>{t.removeEventListener(u,d),s()},d=e=>{e.target===t&&++l>=c&&h()};setTimeout((()=>{l<c&&h()}),a+1),t.addEventListener(u,d)}function Y(t,e){const r=window.getComputedStyle(t),n=t=>(r[t]||"").split(", "),i=n(B+"Delay"),s=n(B+"Duration"),o=Q(i,s),a=n(x+"Delay"),c=n(x+"Duration"),u=Q(a,c);let l=null,h=0,d=0;e===B?o>0&&(l=B,h=o,d=s.length):e===x?u>0&&(l=x,h=u,d=c.length):(h=Math.max(o,u),l=h>0?o>u?B:x:null,d=l?l===B?s.length:c.length:0);const f=l===B&&/\b(transform|all)(,|$)/.test(r[B+"Property"]);return{type:l,timeout:h,propCount:d,hasTransform:f}}function Q(t,e){while(t.length<e.length)t=t.concat(t);return Math.max(...e.map(((e,r)=>X(e)+X(t[r]))))}function X(t){return 1e3*Number(t.slice(0,-1).replace(",","."))}function J(){return document.body.offsetHeight}new WeakMap,new WeakMap;const Z=t=>{const e=t.props["onUpdate:modelValue"]||!1;return(0,n.kJ)(e)?t=>(0,n.ir)(e,t):e};function tt(t){t.target.composing=!0}function et(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const rt={created(t,{modifiers:{lazy:e,trim:r,number:i}},s){t._assign=Z(s);const o=i||s.props&&"number"===s.props.type;I(t,e?"change":"input",(e=>{if(e.target.composing)return;let i=t.value;r&&(i=i.trim()),o&&(i=(0,n.He)(i)),t._assign(i)})),r&&I(t,"change",(()=>{t.value=t.value.trim()})),e||(I(t,"compositionstart",tt),I(t,"compositionend",et),I(t,"change",et))},mounted(t,{value:e}){t.value=null==e?"":e},beforeUpdate(t,{value:e,modifiers:{lazy:r,trim:i,number:s}},o){if(t._assign=Z(o),t.composing)return;if(document.activeElement===t&&"range"!==t.type){if(r)return;if(i&&t.value.trim()===e)return;if((s||"number"===t.type)&&(0,n.He)(t.value)===e)return}const a=null==e?"":e;t.value!==a&&(t.value=a)}};const nt=["ctrl","shift","alt","meta"],it={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&0!==t.button,middle:t=>"button"in t&&1!==t.button,right:t=>"button"in t&&2!==t.button,exact:(t,e)=>nt.some((r=>t[`${r}Key`]&&!e.includes(r)))},st=(t,e)=>(r,...n)=>{for(let t=0;t<e.length;t++){const n=it[e[t]];if(n&&n(r,e))return}return t(r,...n)};const ot=(0,n.l7)({patchProp:D},c);let at;function ct(){return at||(at=(0,i.Us)(ot))}const ut=(...t)=>{const e=ct().createApp(...t);const{mount:r}=e;return e.mount=t=>{const i=lt(t);if(!i)return;const s=e._component;(0,n.mf)(s)||s.render||s.template||(s.template=i.innerHTML),i.innerHTML="";const o=r(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e};function lt(t){if((0,n.HD)(t)){const e=document.querySelector(t);return e}return t}},7139:function(t,e,r){"use strict";function n(t,e){const r=Object.create(null),n=t.split(",");for(let i=0;i<n.length;i++)r[n[i]]=!0;return e?t=>!!r[t.toLowerCase()]:t=>!!r[t]}r.d(e,{C_:function(){return f},DM:function(){return L},E9:function(){return nt},F7:function(){return R},Gg:function(){return H},HD:function(){return B},He:function(){return et},Kn:function(){return U},NO:function(){return S},Nj:function(){return tt},Od:function(){return A},PO:function(){return j},Pq:function(){return a},RI:function(){return k},S0:function(){return q},W7:function(){return F},WV:function(){return g},Z6:function(){return E},_A:function(){return $},_N:function(){return N},aU:function(){return J},dG:function(){return b},e1:function(){return s},fY:function(){return n},hR:function(){return X},hq:function(){return y},ir:function(){return Z},j5:function(){return u},kC:function(){return Q},kJ:function(){return P},kT:function(){return v},l7:function(){return C},mf:function(){return O},rs:function(){return Y},tI:function(){return M},tR:function(){return I},yA:function(){return c},yk:function(){return x},zw:function(){return m}});const i="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt",s=n(i);const o="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",a=n(o);function c(t){return!!t||""===t}function u(t){if(P(t)){const e={};for(let r=0;r<t.length;r++){const n=t[r],i=B(n)?d(n):u(n);if(i)for(const t in i)e[t]=i[t]}return e}return B(t)||U(t)?t:void 0}const l=/;(?![^(]*\))/g,h=/:(.+)/;function d(t){const e={};return t.split(l).forEach((t=>{if(t){const r=t.split(h);r.length>1&&(e[r[0].trim()]=r[1].trim())}})),e}function f(t){let e="";if(B(t))e=t;else if(P(t))for(let r=0;r<t.length;r++){const n=f(t[r]);n&&(e+=n+" ")}else if(U(t))for(const r in t)t[r]&&(e+=r+" ");return e.trim()}function p(t,e){if(t.length!==e.length)return!1;let r=!0;for(let n=0;r&&n<t.length;n++)r=g(t[n],e[n]);return r}function g(t,e){if(t===e)return!0;let r=D(t),n=D(e);if(r||n)return!(!r||!n)&&t.getTime()===e.getTime();if(r=x(t),n=x(e),r||n)return t===e;if(r=P(t),n=P(e),r||n)return!(!r||!n)&&p(t,e);if(r=U(t),n=U(e),r||n){if(!r||!n)return!1;const i=Object.keys(t).length,s=Object.keys(e).length;if(i!==s)return!1;for(const r in t){const n=t.hasOwnProperty(r),i=e.hasOwnProperty(r);if(n&&!i||!n&&i||!g(t[r],e[r]))return!1}}return String(t)===String(e)}function y(t,e){return t.findIndex((t=>g(t,e)))}const m=t=>B(t)?t:null==t?"":P(t)||U(t)&&(t.toString===V||!O(t.toString))?JSON.stringify(t,w,2):String(t),w=(t,e)=>e&&e.__v_isRef?w(t,e.value):N(e)?{[`Map(${e.size})`]:[...e.entries()].reduce(((t,[e,r])=>(t[`${e} =>`]=r,t)),{})}:L(e)?{[`Set(${e.size})`]:[...e.values()]}:!U(e)||P(e)||j(e)?e:String(e),v={},E=[],b=()=>{},S=()=>!1,_=/^on[^a-z]/,R=t=>_.test(t),I=t=>t.startsWith("onUpdate:"),C=Object.assign,A=(t,e)=>{const r=t.indexOf(e);r>-1&&t.splice(r,1)},T=Object.prototype.hasOwnProperty,k=(t,e)=>T.call(t,e),P=Array.isArray,N=t=>"[object Map]"===K(t),L=t=>"[object Set]"===K(t),D=t=>"[object Date]"===K(t),O=t=>"function"===typeof t,B=t=>"string"===typeof t,x=t=>"symbol"===typeof t,U=t=>null!==t&&"object"===typeof t,M=t=>U(t)&&O(t.then)&&O(t.catch),V=Object.prototype.toString,K=t=>V.call(t),F=t=>K(t).slice(8,-1),j=t=>"[object Object]"===K(t),q=t=>B(t)&&"NaN"!==t&&"-"!==t[0]&&""+parseInt(t,10)===t,H=n(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),G=t=>{const e=Object.create(null);return r=>{const n=e[r];return n||(e[r]=t(r))}},z=/-(\w)/g,$=G((t=>t.replace(z,((t,e)=>e?e.toUpperCase():"")))),W=/\B([A-Z])/g,Y=G((t=>t.replace(W,"-$1").toLowerCase())),Q=G((t=>t.charAt(0).toUpperCase()+t.slice(1))),X=G((t=>t?`on${Q(t)}`:"")),J=(t,e)=>!Object.is(t,e),Z=(t,e)=>{for(let r=0;r<t.length;r++)t[r](e)},tt=(t,e,r)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:r})},et=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let rt;const nt=()=>rt||(rt="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof r.g?r.g:{})},4908:function(t){function e(t){const e=new globalThis.AbortController;function r(){e.abort();for(const e of t)e&&e.removeEventListener&&e.removeEventListener("abort",r)}for(const n of t)if(n&&n.addEventListener){if(n.aborted){r();break}n.addEventListener("abort",r)}return e.signal}t.exports=e,t.exports.anySignal=e},7706:function(t){function e(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}t.exports=e,e.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),r=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-r:t+r}return 0|Math.min(t,this.max)},e.prototype.reset=function(){this.attempts=0},e.prototype.setMin=function(t){this.ms=t},e.prototype.setMax=function(t){this.max=t},e.prototype.setJitter=function(t){this.jitter=t}},1271:function(t,e,r){"use strict";r(8675),r(3462),r(1703),e.byteLength=l,e.toByteArray=d,e.fromByteArray=g;for(var n=[],i=[],s="undefined"!==typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,c=o.length;a<c;++a)n[a]=o[a],i[o.charCodeAt(a)]=a;function u(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");-1===r&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function l(t){var e=u(t),r=e[0],n=e[1];return 3*(r+n)/4-n}function h(t,e,r){return 3*(e+r)/4-r}function d(t){var e,r,n=u(t),o=n[0],a=n[1],c=new s(h(t,o,a)),l=0,d=a>0?o-4:o;for(r=0;r<d;r+=4)e=i[t.charCodeAt(r)]<<18|i[t.charCodeAt(r+1)]<<12|i[t.charCodeAt(r+2)]<<6|i[t.charCodeAt(r+3)],c[l++]=e>>16&255,c[l++]=e>>8&255,c[l++]=255&e;return 2===a&&(e=i[t.charCodeAt(r)]<<2|i[t.charCodeAt(r+1)]>>4,c[l++]=255&e),1===a&&(e=i[t.charCodeAt(r)]<<10|i[t.charCodeAt(r+1)]<<4|i[t.charCodeAt(r+2)]>>2,c[l++]=e>>8&255,c[l++]=255&e),c}function f(t){return n[t>>18&63]+n[t>>12&63]+n[t>>6&63]+n[63&t]}function p(t,e,r){for(var n,i=[],s=e;s<r;s+=3)n=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),i.push(f(n));return i.join("")}function g(t){for(var e,r=t.length,i=r%3,s=[],o=16383,a=0,c=r-i;a<c;a+=o)s.push(p(t,a,a+o>c?c:a+o));return 1===i?(e=t[r-1],s.push(n[e>>2]+n[e<<4&63]+"==")):2===i&&(e=(t[r-2]<<8)+t[r-1],s.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"=")),s.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},5361:function(t,e,r){"use strict";
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */r(8675),r(3462),r(1703);var n=r(1271),i=r(7055),s="function"===typeof Symbol&&"function"===typeof Symbol["for"]?Symbol["for"]("nodejs.util.inspect.custom"):null;e.Buffer=u,e.SlowBuffer=E,e.INSPECT_MAX_BYTES=50;var o=2147483647;function a(){try{var t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(r){return!1}}function c(t){if(t>o)throw new RangeError('The value "'+t+'" is invalid for option "size"');var e=new Uint8Array(t);return Object.setPrototypeOf(e,u.prototype),e}function u(t,e,r){if("number"===typeof t){if("string"===typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return f(t)}return l(t,e,r)}function l(t,e,r){if("string"===typeof t)return p(t,e);if(ArrayBuffer.isView(t))return y(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(X(t,ArrayBuffer)||t&&X(t.buffer,ArrayBuffer))return m(t,e,r);if("undefined"!==typeof SharedArrayBuffer&&(X(t,SharedArrayBuffer)||t&&X(t.buffer,SharedArrayBuffer)))return m(t,e,r);if("number"===typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');var n=t.valueOf&&t.valueOf();if(null!=n&&n!==t)return u.from(n,e,r);var i=w(t);if(i)return i;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof t[Symbol.toPrimitive])return u.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function h(t){if("number"!==typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function d(t,e,r){return h(t),t<=0?c(t):void 0!==e?"string"===typeof r?c(t).fill(e,r):c(t).fill(e):c(t)}function f(t){return h(t),c(t<0?0:0|v(t))}function p(t,e){if("string"===typeof e&&""!==e||(e="utf8"),!u.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var r=0|b(t,e),n=c(r),i=n.write(t,e);return i!==r&&(n=n.slice(0,i)),n}function g(t){for(var e=t.length<0?0:0|v(t.length),r=c(e),n=0;n<e;n+=1)r[n]=255&t[n];return r}function y(t){if(X(t,Uint8Array)){var e=new Uint8Array(t);return m(e.buffer,e.byteOffset,e.byteLength)}return g(t)}function m(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');var n;return n=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r),Object.setPrototypeOf(n,u.prototype),n}function w(t){if(u.isBuffer(t)){var e=0|v(t.length),r=c(e);return 0===r.length||t.copy(r,0,0,e),r}return void 0!==t.length?"number"!==typeof t.length||J(t.length)?c(0):g(t):"Buffer"===t.type&&Array.isArray(t.data)?g(t.data):void 0}function v(t){if(t>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|t}function E(t){return+t!=t&&(t=0),u.alloc(+t)}function b(t,e){if(u.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||X(t,ArrayBuffer))return t.byteLength;if("string"!==typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var r=t.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return z(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return Y(t).length;default:if(i)return n?-1:z(t).length;e=(""+e).toLowerCase(),i=!0}}function S(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if(r>>>=0,e>>>=0,r<=e)return"";t||(t="utf8");while(1)switch(t){case"hex":return U(this,e,r);case"utf8":case"utf-8":return L(this,e,r);case"ascii":return B(this,e,r);case"latin1":case"binary":return x(this,e,r);case"base64":return N(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function _(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function R(t,e,r,n,i){if(0===t.length)return-1;if("string"===typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,J(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"===typeof e&&(e=u.from(e,n)),u.isBuffer(e))return 0===e.length?-1:I(t,e,r,n,i);if("number"===typeof e)return e&=255,"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):I(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function I(t,e,r,n,i){var s,o=1,a=t.length,c=e.length;if(void 0!==n&&(n=String(n).toLowerCase(),"ucs2"===n||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;o=2,a/=2,c/=2,r/=2}function u(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(i){var l=-1;for(s=r;s<a;s++)if(u(t,s)===u(e,-1===l?0:s-l)){if(-1===l&&(l=s),s-l+1===c)return l*o}else-1!==l&&(s-=s-l),l=-1}else for(r+c>a&&(r=a-c),s=r;s>=0;s--){for(var h=!0,d=0;d<c;d++)if(u(t,s+d)!==u(e,d)){h=!1;break}if(h)return s}return-1}function C(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;var s=e.length;n>s/2&&(n=s/2);for(var o=0;o<n;++o){var a=parseInt(e.substr(2*o,2),16);if(J(a))return o;t[r+o]=a}return o}function A(t,e,r,n){return Q(z(e,t.length-r),t,r,n)}function T(t,e,r,n){return Q($(e),t,r,n)}function k(t,e,r,n){return Q(Y(e),t,r,n)}function P(t,e,r,n){return Q(W(e,t.length-r),t,r,n)}function N(t,e,r){return 0===e&&r===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,r))}function L(t,e,r){r=Math.min(t.length,r);var n=[],i=e;while(i<r){var s,o,a,c,u=t[i],l=null,h=u>239?4:u>223?3:u>191?2:1;if(i+h<=r)switch(h){case 1:u<128&&(l=u);break;case 2:s=t[i+1],128===(192&s)&&(c=(31&u)<<6|63&s,c>127&&(l=c));break;case 3:s=t[i+1],o=t[i+2],128===(192&s)&&128===(192&o)&&(c=(15&u)<<12|(63&s)<<6|63&o,c>2047&&(c<55296||c>57343)&&(l=c));break;case 4:s=t[i+1],o=t[i+2],a=t[i+3],128===(192&s)&&128===(192&o)&&128===(192&a)&&(c=(15&u)<<18|(63&s)<<12|(63&o)<<6|63&a,c>65535&&c<1114112&&(l=c))}null===l?(l=65533,h=1):l>65535&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|1023&l),n.push(l),i+=h}return O(n)}e.kMaxLength=o,u.TYPED_ARRAY_SUPPORT=a(),u.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),u.poolSize=8192,u.from=function(t,e,r){return l(t,e,r)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array),u.alloc=function(t,e,r){return d(t,e,r)},u.allocUnsafe=function(t){return f(t)},u.allocUnsafeSlow=function(t){return f(t)},u.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==u.prototype},u.compare=function(t,e){if(X(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),X(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;for(var r=t.length,n=e.length,i=0,s=Math.min(r,n);i<s;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=u.allocUnsafe(e),i=0;for(r=0;r<t.length;++r){var s=t[r];if(X(s,Uint8Array))i+s.length>n.length?u.from(s).copy(n,i):Uint8Array.prototype.set.call(n,s,i);else{if(!u.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,i)}i+=s.length}return n},u.byteLength=b,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)_(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)_(this,e,e+3),_(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)_(this,e,e+7),_(this,e+1,e+6),_(this,e+2,e+5),_(this,e+3,e+4);return this},u.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?L(this,0,t):S.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",r=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"},s&&(u.prototype[s]=u.prototype.inspect),u.prototype.compare=function(t,e,r,n,i){if(X(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),!u.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(e>>>=0,r>>>=0,n>>>=0,i>>>=0,this===t)return 0;for(var s=i-n,o=r-e,a=Math.min(s,o),c=this.slice(n,i),l=t.slice(e,r),h=0;h<a;++h)if(c[h]!==l[h]){s=c[h],o=l[h];break}return s<o?-1:o<s?1:0},u.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},u.prototype.indexOf=function(t,e,r){return R(this,t,e,r,!0)},u.prototype.lastIndexOf=function(t,e,r){return R(this,t,e,r,!1)},u.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"===typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var s=!1;;)switch(n){case"hex":return C(this,t,e,r);case"utf8":case"utf-8":return A(this,t,e,r);case"ascii":case"latin1":case"binary":return T(this,t,e,r);case"base64":return k(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,t,e,r);default:if(s)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),s=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var D=4096;function O(t){var e=t.length;if(e<=D)return String.fromCharCode.apply(String,t);var r="",n=0;while(n<e)r+=String.fromCharCode.apply(String,t.slice(n,n+=D));return r}function B(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function x(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function U(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var i="",s=e;s<r;++s)i+=Z[t[s]];return i}function M(t,e,r){for(var n=t.slice(e,r),i="",s=0;s<n.length-1;s+=2)i+=String.fromCharCode(n[s]+256*n[s+1]);return i}function V(t,e,r){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function K(t,e,r,n,i,s){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<s)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function F(t,e,r,n,i,s){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function j(t,e,r,n,s){return e=+e,r>>>=0,s||F(t,e,r,4,34028234663852886e22,-34028234663852886e22),i.write(t,e,r,n,23,4),r+4}function q(t,e,r,n,s){return e=+e,r>>>=0,s||F(t,e,r,8,17976931348623157e292,-17976931348623157e292),i.write(t,e,r,n,52,8),r+8}u.prototype.slice=function(t,e){var r=this.length;t=~~t,e=void 0===e?r:~~e,t<0?(t+=r,t<0&&(t=0)):t>r&&(t=r),e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),e<t&&(e=t);var n=this.subarray(t,e);return Object.setPrototypeOf(n,u.prototype),n},u.prototype.readUintLE=u.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||V(t,e,this.length);var n=this[t],i=1,s=0;while(++s<e&&(i*=256))n+=this[t+s]*i;return n},u.prototype.readUintBE=u.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||V(t,e,this.length);var n=this[t+--e],i=1;while(e>0&&(i*=256))n+=this[t+--e]*i;return n},u.prototype.readUint8=u.prototype.readUInt8=function(t,e){return t>>>=0,e||V(t,1,this.length),this[t]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(t,e){return t>>>=0,e||V(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(t,e){return t>>>=0,e||V(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(t,e){return t>>>=0,e||V(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(t,e){return t>>>=0,e||V(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||V(t,e,this.length);var n=this[t],i=1,s=0;while(++s<e&&(i*=256))n+=this[t+s]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*e)),n},u.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||V(t,e,this.length);var n=e,i=1,s=this[t+--n];while(n>0&&(i*=256))s+=this[t+--n]*i;return i*=128,s>=i&&(s-=Math.pow(2,8*e)),s},u.prototype.readInt8=function(t,e){return t>>>=0,e||V(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){t>>>=0,e||V(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(t,e){t>>>=0,e||V(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(t,e){return t>>>=0,e||V(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return t>>>=0,e||V(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return t>>>=0,e||V(t,4,this.length),i.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return t>>>=0,e||V(t,4,this.length),i.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return t>>>=0,e||V(t,8,this.length),i.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return t>>>=0,e||V(t,8,this.length),i.read(this,t,!1,52,8)},u.prototype.writeUintLE=u.prototype.writeUIntLE=function(t,e,r,n){if(t=+t,e>>>=0,r>>>=0,!n){var i=Math.pow(2,8*r)-1;K(this,t,e,r,i,0)}var s=1,o=0;this[e]=255&t;while(++o<r&&(s*=256))this[e+o]=t/s&255;return e+r},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(t,e,r,n){if(t=+t,e>>>=0,r>>>=0,!n){var i=Math.pow(2,8*r)-1;K(this,t,e,r,i,0)}var s=r-1,o=1;this[e+s]=255&t;while(--s>=0&&(o*=256))this[e+s]=t/o&255;return e+r},u.prototype.writeUint8=u.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,1,255,0),this[e]=255&t,e+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},u.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e>>>=0,!n){var i=Math.pow(2,8*r-1);K(this,t,e,r,i-1,-i)}var s=0,o=1,a=0;this[e]=255&t;while(++s<r&&(o*=256))t<0&&0===a&&0!==this[e+s-1]&&(a=1),this[e+s]=(t/o>>0)-a&255;return e+r},u.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e>>>=0,!n){var i=Math.pow(2,8*r-1);K(this,t,e,r,i-1,-i)}var s=r-1,o=1,a=0;this[e+s]=255&t;while(--s>=0&&(o*=256))t<0&&0===a&&0!==this[e+s+1]&&(a=1),this[e+s]=(t/o>>0)-a&255;return e+r},u.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},u.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},u.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},u.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},u.prototype.writeFloatLE=function(t,e,r){return j(this,t,e,!0,r)},u.prototype.writeFloatBE=function(t,e,r){return j(this,t,e,!1,r)},u.prototype.writeDoubleLE=function(t,e,r){return q(this,t,e,!0,r)},u.prototype.writeDoubleBE=function(t,e,r){return q(this,t,e,!1,r)},u.prototype.copy=function(t,e,r,n){if(!u.isBuffer(t))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var i=n-r;return this===t&&"function"===typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,r,n):Uint8Array.prototype.set.call(t,this.subarray(r,n),e),i},u.prototype.fill=function(t,e,r,n){if("string"===typeof t){if("string"===typeof e?(n=e,e=0,r=this.length):"string"===typeof r&&(n=r,r=this.length),void 0!==n&&"string"!==typeof n)throw new TypeError("encoding must be a string");if("string"===typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===t.length){var i=t.charCodeAt(0);("utf8"===n&&i<128||"latin1"===n)&&(t=i)}}else"number"===typeof t?t&=255:"boolean"===typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var s;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"===typeof t)for(s=e;s<r;++s)this[s]=t;else{var o=u.isBuffer(t)?t:u.from(t,n),a=o.length;if(0===a)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(s=0;s<r-e;++s)this[s+e]=o[s%a]}return this};var H=/[^+/0-9A-Za-z-_]/g;function G(t){if(t=t.split("=")[0],t=t.trim().replace(H,""),t.length<2)return"";while(t.length%4!==0)t+="=";return t}function z(t,e){var r;e=e||1/0;for(var n=t.length,i=null,s=[],o=0;o<n;++o){if(r=t.charCodeAt(o),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&s.push(239,191,189);continue}if(o+1===n){(e-=3)>-1&&s.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&s.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&s.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;s.push(r)}else if(r<2048){if((e-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return s}function $(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}function W(t,e){for(var r,n,i,s=[],o=0;o<t.length;++o){if((e-=2)<0)break;r=t.charCodeAt(o),n=r>>8,i=r%256,s.push(i),s.push(n)}return s}function Y(t){return n.toByteArray(G(t))}function Q(t,e,r,n){for(var i=0;i<n;++i){if(i+r>=e.length||i>=t.length)break;e[i+r]=t[i]}return i}function X(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function J(t){return t!==t}var Z=function(){for(var t="0123456789abcdef",e=new Array(256),r=0;r<16;++r)for(var n=16*r,i=0;i<16;++i)e[n+i]=t[r]+t[i];return e}()},5652:function(t,e,r){function n(){return!("undefined"===typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"===typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!==typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!==typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function i(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;e.splice(1,0,r,"color: inherit");let n=0,i=0;e[0].replace(/%[a-zA-Z%]/g,(t=>{"%%"!==t&&(n++,"%c"===t&&(i=n))})),e.splice(i,0,r)}function s(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch(r){}}function o(){let t;try{t=e.storage.getItem("debug")}catch(r){}return!t&&"undefined"!==typeof process&&"env"in process&&(t={NODE_ENV:"production",BASE_URL:"/p2p-chat/"}.DEBUG),t}function a(){try{return localStorage}catch(t){}}e.formatArgs=i,e.save=s,e.load=o,e.useColors=n,e.storage=a(),e.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.log=console.debug||console.log||(()=>{}),t.exports=r(2940)(e);const{formatters:c}=t.exports;c.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},2940:function(t,e,r){function n(t){function e(t){let e=0;for(let r=0;r<t.length;r++)e=(e<<5)-e+t.charCodeAt(r),e|=0;return n.colors[Math.abs(e)%n.colors.length]}function n(t){let e,r,s,o=null;function a(...t){if(!a.enabled)return;const r=a,i=Number(new Date),s=i-(e||i);r.diff=s,r.prev=e,r.curr=i,e=i,t[0]=n.coerce(t[0]),"string"!==typeof t[0]&&t.unshift("%O");let o=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,((e,i)=>{if("%%"===e)return"%";o++;const s=n.formatters[i];if("function"===typeof s){const n=t[o];e=s.call(r,n),t.splice(o,1),o--}return e})),n.formatArgs.call(r,t);const c=r.log||n.log;c.apply(r,t)}return a.namespace=t,a.useColors=n.useColors(),a.color=n.selectColor(t),a.extend=i,a.destroy=n.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==o?o:(r!==n.namespaces&&(r=n.namespaces,s=n.enabled(t)),s),set:t=>{o=t}}),"function"===typeof n.init&&n.init(a),a}function i(t,e){const r=n(this.namespace+("undefined"===typeof e?":":e)+t);return r.log=this.log,r}function s(t){let e;n.save(t),n.namespaces=t,n.names=[],n.skips=[];const r=("string"===typeof t?t:"").split(/[\s,]+/),i=r.length;for(e=0;e<i;e++)r[e]&&(t=r[e].replace(/\*/g,".*?"),"-"===t[0]?n.skips.push(new RegExp("^"+t.slice(1)+"$")):n.names.push(new RegExp("^"+t+"$")))}function o(){const t=[...n.names.map(c),...n.skips.map(c).map((t=>"-"+t))].join(",");return n.enable(""),t}function a(t){if("*"===t[t.length-1])return!0;let e,r;for(e=0,r=n.skips.length;e<r;e++)if(n.skips[e].test(t))return!1;for(e=0,r=n.names.length;e<r;e++)if(n.names[e].test(t))return!0;return!1}function c(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}function u(t){return t instanceof Error?t.stack||t.message:t}function l(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.debug=n,n.default=n,n.coerce=u,n.disable=o,n.enable=s,n.enabled=a,n.humanize=r(7901),n.destroy=l,Object.keys(t).forEach((e=>{n[e]=t[e]})),n.names=[],n.skips=[],n.formatters={},n.selectColor=e,n.enable(n.load()),n}r(1703),t.exports=n},8592:function(t,e,r){"use strict";r(1703);const n=(t,e)=>Math.floor(Math.random()*(e-t+1)+t),i=()=>{const t=new Error("Delay aborted");return t.name="AbortError",t},s=({clearTimeout:t,setTimeout:e,willResolve:r})=>(n,{value:s,signal:o}={})=>{if(o&&o.aborted)return Promise.reject(i());let a,c,u;const l=t||clearTimeout,h=()=>{l(a),u(i())},d=()=>{o&&o.removeEventListener("abort",h)},f=new Promise(((t,i)=>{c=()=>{d(),r?t(s):i(s)},u=i,a=(e||setTimeout)(c,n)}));return o&&o.addEventListener("abort",h,{once:!0}),f.clear=()=>{l(a),a=null,c()},f},o=t=>{const e=s({...t,willResolve:!0});return e.reject=s({...t,willResolve:!1}),e.range=(t,r,i)=>e(n(t,r),i),e},a=o();a.createWithTimers=o,t.exports=a,t.exports["default"]=a},9998:function(t,e,r){"use strict";function n(t,e){for(const r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function i(t,e,r){if(!t||"string"===typeof t)throw new TypeError("Please pass an Error to err-code");r||(r={}),"object"===typeof e&&(r=e,e=""),e&&(r.code=e);try{return n(t,r)}catch(i){r.message=t.message,r.stack=t.stack;const e=function(){};e.prototype=Object.create(Object.getPrototypeOf(t));const s=n(new e,r);return s}}r(1703),t.exports=i},6856:function(t,e,r){"use strict";r(1703);var n=Object.prototype.hasOwnProperty,i="~";function s(){}function o(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function a(t,e,r,n,s){if("function"!==typeof r)throw new TypeError("The listener must be a function");var a=new o(r,n||t,s),c=i?i+e:e;return t._events[c]?t._events[c].fn?t._events[c]=[t._events[c],a]:t._events[c].push(a):(t._events[c]=a,t._eventsCount++),t}function c(t,e){0===--t._eventsCount?t._events=new s:delete t._events[e]}function u(){this._events=new s,this._eventsCount=0}Object.create&&(s.prototype=Object.create(null),(new s).__proto__||(i=!1)),u.prototype.eventNames=function(){var t,e,r=[];if(0===this._eventsCount)return r;for(e in t=this._events)n.call(t,e)&&r.push(i?e.slice(1):e);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(t)):r},u.prototype.listeners=function(t){var e=i?i+t:t,r=this._events[e];if(!r)return[];if(r.fn)return[r.fn];for(var n=0,s=r.length,o=new Array(s);n<s;n++)o[n]=r[n].fn;return o},u.prototype.listenerCount=function(t){var e=i?i+t:t,r=this._events[e];return r?r.fn?1:r.length:0},u.prototype.emit=function(t,e,r,n,s,o){var a=i?i+t:t;if(!this._events[a])return!1;var c,u,l=this._events[a],h=arguments.length;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),h){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,r),!0;case 4:return l.fn.call(l.context,e,r,n),!0;case 5:return l.fn.call(l.context,e,r,n,s),!0;case 6:return l.fn.call(l.context,e,r,n,s,o),!0}for(u=1,c=new Array(h-1);u<h;u++)c[u-1]=arguments[u];l.fn.apply(l.context,c)}else{var d,f=l.length;for(u=0;u<f;u++)switch(l[u].once&&this.removeListener(t,l[u].fn,void 0,!0),h){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,e);break;case 3:l[u].fn.call(l[u].context,e,r);break;case 4:l[u].fn.call(l[u].context,e,r,n);break;default:if(!c)for(d=1,c=new Array(h-1);d<h;d++)c[d-1]=arguments[d];l[u].fn.apply(l[u].context,c)}}return!0},u.prototype.on=function(t,e,r){return a(this,t,e,r,!1)},u.prototype.once=function(t,e,r){return a(this,t,e,r,!0)},u.prototype.removeListener=function(t,e,r,n){var s=i?i+t:t;if(!this._events[s])return this;if(!e)return c(this,s),this;var o=this._events[s];if(o.fn)o.fn!==e||n&&!o.once||r&&o.context!==r||c(this,s);else{for(var a=0,u=[],l=o.length;a<l;a++)(o[a].fn!==e||n&&!o[a].once||r&&o[a].context!==r)&&u.push(o[a]);u.length?this._events[s]=1===u.length?u[0]:u:c(this,s)}return this},u.prototype.removeAllListeners=function(t){var e;return t?(e=i?i+t:t,this._events[e]&&c(this,e)):(this._events=new s,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=i,u.EventEmitter=u,t.exports=u},3793:function(t,e,r){"use strict";r(1703);var n,i="object"===typeof Reflect?Reflect:null,s=i&&"function"===typeof i.apply?i.apply:function(t,e,r){return Function.prototype.apply.call(t,e,r)};function o(t){console&&console.warn&&console.warn(t)}n=i&&"function"===typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var a=Number.isNaN||function(t){return t!==t};function c(){c.init.call(this)}t.exports=c,t.exports.once=E,c.EventEmitter=c,c.prototype._events=void 0,c.prototype._eventsCount=0,c.prototype._maxListeners=void 0;var u=10;function l(t){if("function"!==typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function h(t){return void 0===t._maxListeners?c.defaultMaxListeners:t._maxListeners}function d(t,e,r,n){var i,s,a;if(l(r),s=t._events,void 0===s?(s=t._events=Object.create(null),t._eventsCount=0):(void 0!==s.newListener&&(t.emit("newListener",e,r.listener?r.listener:r),s=t._events),a=s[e]),void 0===a)a=s[e]=r,++t._eventsCount;else if("function"===typeof a?a=s[e]=n?[r,a]:[a,r]:n?a.unshift(r):a.push(r),i=h(t),i>0&&a.length>i&&!a.warned){a.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=t,c.type=e,c.count=a.length,o(c)}return t}function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=f.bind(n);return i.listener=r,n.wrapFn=i,i}function g(t,e,r){var n=t._events;if(void 0===n)return[];var i=n[e];return void 0===i?[]:"function"===typeof i?r?[i.listener||i]:[i]:r?v(i):m(i,i.length)}function y(t){var e=this._events;if(void 0!==e){var r=e[t];if("function"===typeof r)return 1;if(void 0!==r)return r.length}return 0}function m(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function w(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function v(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function E(t,e){return new Promise((function(r,n){function i(r){t.removeListener(e,s),n(r)}function s(){"function"===typeof t.removeListener&&t.removeListener("error",i),r([].slice.call(arguments))}S(t,e,s,{once:!0}),"error"!==e&&b(t,i,{once:!0})}))}function b(t,e,r){"function"===typeof t.on&&S(t,"error",e,r)}function S(t,e,r,n){if("function"===typeof t.on)n.once?t.once(e,r):t.on(e,r);else{if("function"!==typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function i(s){n.once&&t.removeEventListener(e,i),r(s)}))}}Object.defineProperty(c,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(t){if("number"!==typeof t||t<0||a(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");u=t}}),c.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},c.prototype.setMaxListeners=function(t){if("number"!==typeof t||t<0||a(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},c.prototype.getMaxListeners=function(){return h(this)},c.prototype.emit=function(t){for(var e=[],r=1;r<arguments.length;r++)e.push(arguments[r]);var n="error"===t,i=this._events;if(void 0!==i)n=n&&void 0===i.error;else if(!n)return!1;if(n){var o;if(e.length>0&&(o=e[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=i[t];if(void 0===c)return!1;if("function"===typeof c)s(c,this,e);else{var u=c.length,l=m(c,u);for(r=0;r<u;++r)s(l[r],this,e)}return!0},c.prototype.addListener=function(t,e){return d(this,t,e,!1)},c.prototype.on=c.prototype.addListener,c.prototype.prependListener=function(t,e){return d(this,t,e,!0)},c.prototype.once=function(t,e){return l(e),this.on(t,p(this,t,e)),this},c.prototype.prependOnceListener=function(t,e){return l(e),this.prependListener(t,p(this,t,e)),this},c.prototype.removeListener=function(t,e){var r,n,i,s,o;if(l(e),n=this._events,void 0===n)return this;if(r=n[t],void 0===r)return this;if(r===e||r.listener===e)0===--this._eventsCount?this._events=Object.create(null):(delete n[t],n.removeListener&&this.emit("removeListener",t,r.listener||e));else if("function"!==typeof r){for(i=-1,s=r.length-1;s>=0;s--)if(r[s]===e||r[s].listener===e){o=r[s].listener,i=s;break}if(i<0)return this;0===i?r.shift():w(r,i),1===r.length&&(n[t]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",t,o||e)}return this},c.prototype.off=c.prototype.removeListener,c.prototype.removeAllListeners=function(t){var e,r,n;if(r=this._events,void 0===r)return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[t]&&(0===--this._eventsCount?this._events=Object.create(null):delete r[t]),this;if(0===arguments.length){var i,s=Object.keys(r);for(n=0;n<s.length;++n)i=s[n],"removeListener"!==i&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(e=r[t],"function"===typeof e)this.removeListener(t,e);else if(void 0!==e)for(n=e.length-1;n>=0;n--)this.removeListener(t,e[n]);return this},c.prototype.listeners=function(t){return g(this,t,!0)},c.prototype.rawListeners=function(t){return g(this,t,!1)},c.listenerCount=function(t,e){return"function"===typeof t.listenerCount?t.listenerCount(e):y.call(t,e)},c.prototype.listenerCount=y,c.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}},2771:function(t,e,r){r(1703),t.exports=class{constructor(t){if(!(t>0)||0!==(t-1&t))throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(t),this.mask=t-1,this.top=0,this.btm=0,this.next=null}push(t){return void 0===this.buffer[this.top]&&(this.buffer[this.top]=t,this.top=this.top+1&this.mask,!0)}shift(){const t=this.buffer[this.btm];if(void 0!==t)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,t}peek(){return this.buffer[this.btm]}isEmpty(){return void 0===this.buffer[this.btm]}}},2819:function(t,e,r){const n=r(2771);t.exports=class{constructor(t){this.hwm=t||16,this.head=new n(this.hwm),this.tail=this.head}push(t){if(!this.head.push(t)){const e=this.head;this.head=e.next=new n(2*this.head.buffer.length),this.head.push(t)}}shift(){const t=this.tail.shift();if(void 0===t&&this.tail.next){const t=this.tail.next;return this.tail.next=null,this.tail=t,this.tail.shift()}return t}peek(){return this.tail.peek()}isEmpty(){return this.head.isEmpty()}}},2742:function(t){try{t.exports="undefined"!==typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){t.exports=!1}},8694:function(t,e,r){r(1703),t.exports=function(t){if(!t)throw Error("hashlru must have a max value, of type number, greater than 0");var e=0,r=Object.create(null),n=Object.create(null);function i(i,s){r[i]=s,e++,e>=t&&(e=0,n=r,r=Object.create(null))}return{has:function(t){return void 0!==r[t]||void 0!==n[t]},remove:function(t){void 0!==r[t]&&(r[t]=void 0),void 0!==n[t]&&(n[t]=void 0)},get:function(t){var e=r[t];return void 0!==e?e:void 0!==(e=n[t])?(i(t,e),e):void 0},set:function(t,e){void 0!==r[t]?r[t]=e:i(t,e)},clear:function(){r=Object.create(null),n=Object.create(null)}}}},7055:function(t,e){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
e.read=function(t,e,r,n,i){var s,o,a=8*i-n-1,c=(1<<a)-1,u=c>>1,l=-7,h=r?i-1:0,d=r?-1:1,f=t[e+h];for(h+=d,s=f&(1<<-l)-1,f>>=-l,l+=a;l>0;s=256*s+t[e+h],h+=d,l-=8);for(o=s&(1<<-l)-1,s>>=-l,l+=n;l>0;o=256*o+t[e+h],h+=d,l-=8);if(0===s)s=1-u;else{if(s===c)return o?NaN:1/0*(f?-1:1);o+=Math.pow(2,n),s-=u}return(f?-1:1)*o*Math.pow(2,s-n)},e.write=function(t,e,r,n,i,s){var o,a,c,u=8*s-i-1,l=(1<<u)-1,h=l>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:s-1,p=n?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=l):(o=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-o))<1&&(o--,c*=2),e+=o+h>=1?d/c:d*Math.pow(2,1-h),e*c>=2&&(o++,c/=2),o+h>=l?(a=0,o=l):o+h>=1?(a=(e*c-1)*Math.pow(2,i),o+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),o=0));i>=8;t[r+f]=255&a,f+=p,a/=256,i-=8);for(o=o<<i|a,u+=i;u>0;t[r+f]=255&o,f+=p,o/=256,u-=8);t[r+f-p]|=128*g}},1923:function(t){"function"===typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){if(e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}}},9564:function(t,e,r){r(1703),function(e){"use strict";const r="(0?\\d+|0x[a-f0-9]+)",n={fourOctet:new RegExp(`^${r}\\.${r}\\.${r}\\.${r}$`,"i"),threeOctet:new RegExp(`^${r}\\.${r}\\.${r}$`,"i"),twoOctet:new RegExp(`^${r}\\.${r}$`,"i"),longValue:new RegExp(`^${r}$`,"i")},i=new RegExp("^0[0-7]+$","i"),s=new RegExp("^0x[a-f0-9]+$","i"),o="%[0-9a-z]{1,}",a="(?:[0-9a-f]+::?)+",c={zoneIndex:new RegExp(o,"i"),native:new RegExp(`^(::)?(${a})?([0-9a-f]+)?(::)?(${o})?$`,"i"),deprecatedTransitional:new RegExp(`^(?:::)(${r}\\.${r}\\.${r}\\.${r}(${o})?)$`,"i"),transitional:new RegExp(`^((?:${a})|(?:::)(?:${a})?)${r}\\.${r}\\.${r}\\.${r}(${o})?$`,"i")};function u(t,e){if(t.indexOf("::")!==t.lastIndexOf("::"))return null;let r,n,i=0,s=-1,o=(t.match(c.zoneIndex)||[])[0];o&&(o=o.substring(1),t=t.replace(/%.+$/,""));while((s=t.indexOf(":",s+1))>=0)i++;if("::"===t.substr(0,2)&&i--,"::"===t.substr(-2,2)&&i--,i>e)return null;n=e-i,r=":";while(n--)r+="0:";return t=t.replace("::",r),":"===t[0]&&(t=t.slice(1)),":"===t[t.length-1]&&(t=t.slice(0,-1)),e=function(){const e=t.split(":"),r=[];for(let t=0;t<e.length;t++)r.push(parseInt(e[t],16));return r}(),{parts:e,zoneId:o}}function l(t,e,r,n){if(t.length!==e.length)throw new Error("ipaddr: cannot match CIDR for objects with different lengths");let i,s=0;while(n>0){if(i=r-n,i<0&&(i=0),t[s]>>i!==e[s]>>i)return!1;n-=r,s+=1}return!0}function h(t){if(s.test(t))return parseInt(t,16);if("0"===t[0]&&!isNaN(parseInt(t[1],10))){if(i.test(t))return parseInt(t,8);throw new Error(`ipaddr: cannot parse ${t} as octal`)}return parseInt(t,10)}function d(t,e){while(t.length<e)t=`0${t}`;return t}const f={};f.IPv4=function(){function t(t){if(4!==t.length)throw new Error("ipaddr: ipv4 octet count should be 4");let e,r;for(e=0;e<t.length;e++)if(r=t[e],!(0<=r&&r<=255))throw new Error("ipaddr: ipv4 octet should fit in 8 bits");this.octets=t}return t.prototype.SpecialRanges={unspecified:[[new t([0,0,0,0]),8]],broadcast:[[new t([255,255,255,255]),32]],multicast:[[new t([224,0,0,0]),4]],linkLocal:[[new t([169,254,0,0]),16]],loopback:[[new t([127,0,0,0]),8]],carrierGradeNat:[[new t([100,64,0,0]),10]],private:[[new t([10,0,0,0]),8],[new t([172,16,0,0]),12],[new t([192,168,0,0]),16]],reserved:[[new t([192,0,0,0]),24],[new t([192,0,2,0]),24],[new t([192,88,99,0]),24],[new t([198,51,100,0]),24],[new t([203,0,113,0]),24],[new t([240,0,0,0]),4]]},t.prototype.kind=function(){return"ipv4"},t.prototype.match=function(t,e){let r;if(void 0===e&&(r=t,t=r[0],e=r[1]),"ipv4"!==t.kind())throw new Error("ipaddr: cannot match ipv4 address with non-ipv4 one");return l(this.octets,t.octets,8,e)},t.prototype.prefixLengthFromSubnetMask=function(){let t=0,e=!1;const r={0:8,128:7,192:6,224:5,240:4,248:3,252:2,254:1,255:0};let n,i,s;for(n=3;n>=0;n-=1){if(i=this.octets[n],!(i in r))return null;if(s=r[i],e&&0!==s)return null;8!==s&&(e=!0),t+=s}return 32-t},t.prototype.range=function(){return f.subnetMatch(this,this.SpecialRanges)},t.prototype.toByteArray=function(){return this.octets.slice(0)},t.prototype.toIPv4MappedAddress=function(){return f.IPv6.parse(`::ffff:${this.toString()}`)},t.prototype.toNormalizedString=function(){return this.toString()},t.prototype.toString=function(){return this.octets.join(".")},t}(),f.IPv4.broadcastAddressFromCIDR=function(t){try{const e=this.parseCIDR(t),r=e[0].toByteArray(),n=this.subnetMaskFromPrefixLength(e[1]).toByteArray(),i=[];let s=0;while(s<4)i.push(parseInt(r[s],10)|255^parseInt(n[s],10)),s++;return new this(i)}catch(e){throw new Error("ipaddr: the address does not have IPv4 CIDR format")}},f.IPv4.isIPv4=function(t){return null!==this.parser(t)},f.IPv4.isValid=function(t){try{return new this(this.parser(t)),!0}catch(e){return!1}},f.IPv4.isValidFourPartDecimal=function(t){return!(!f.IPv4.isValid(t)||!t.match(/^(0|[1-9]\d*)(\.(0|[1-9]\d*)){3}$/))},f.IPv4.networkAddressFromCIDR=function(t){let e,r,n,i,s;try{e=this.parseCIDR(t),n=e[0].toByteArray(),s=this.subnetMaskFromPrefixLength(e[1]).toByteArray(),i=[],r=0;while(r<4)i.push(parseInt(n[r],10)&parseInt(s[r],10)),r++;return new this(i)}catch(o){throw new Error("ipaddr: the address does not have IPv4 CIDR format")}},f.IPv4.parse=function(t){const e=this.parser(t);if(null===e)throw new Error("ipaddr: string is not formatted like an IPv4 Address");return new this(e)},f.IPv4.parseCIDR=function(t){let e;if(e=t.match(/^(.+)\/(\d+)$/)){const t=parseInt(e[2]);if(t>=0&&t<=32){const r=[this.parse(e[1]),t];return Object.defineProperty(r,"toString",{value:function(){return this.join("/")}}),r}}throw new Error("ipaddr: string is not formatted like an IPv4 CIDR range")},f.IPv4.parser=function(t){let e,r,i;if(e=t.match(n.fourOctet))return function(){const t=e.slice(1,6),n=[];for(let e=0;e<t.length;e++)r=t[e],n.push(h(r));return n}();if(e=t.match(n.longValue)){if(i=h(e[1]),i>4294967295||i<0)throw new Error("ipaddr: address outside defined range");return function(){const t=[];let e;for(e=0;e<=24;e+=8)t.push(i>>e&255);return t}().reverse()}return(e=t.match(n.twoOctet))?function(){const t=e.slice(1,4),r=[];if(i=h(t[1]),i>16777215||i<0)throw new Error("ipaddr: address outside defined range");return r.push(h(t[0])),r.push(i>>16&255),r.push(i>>8&255),r.push(255&i),r}():(e=t.match(n.threeOctet))?function(){const t=e.slice(1,5),r=[];if(i=h(t[2]),i>65535||i<0)throw new Error("ipaddr: address outside defined range");return r.push(h(t[0])),r.push(h(t[1])),r.push(i>>8&255),r.push(255&i),r}():null},f.IPv4.subnetMaskFromPrefixLength=function(t){if(t=parseInt(t),t<0||t>32)throw new Error("ipaddr: invalid IPv4 prefix length");const e=[0,0,0,0];let r=0;const n=Math.floor(t/8);while(r<n)e[r]=255,r++;return n<4&&(e[n]=Math.pow(2,t%8)-1<<8-t%8),new this(e)},f.IPv6=function(){function t(t,e){let r,n;if(16===t.length)for(this.parts=[],r=0;r<=14;r+=2)this.parts.push(t[r]<<8|t[r+1]);else{if(8!==t.length)throw new Error("ipaddr: ipv6 part count should be 8 or 16");this.parts=t}for(r=0;r<this.parts.length;r++)if(n=this.parts[r],!(0<=n&&n<=65535))throw new Error("ipaddr: ipv6 part should fit in 16 bits");e&&(this.zoneId=e)}return t.prototype.SpecialRanges={unspecified:[new t([0,0,0,0,0,0,0,0]),128],linkLocal:[new t([65152,0,0,0,0,0,0,0]),10],multicast:[new t([65280,0,0,0,0,0,0,0]),8],loopback:[new t([0,0,0,0,0,0,0,1]),128],uniqueLocal:[new t([64512,0,0,0,0,0,0,0]),7],ipv4Mapped:[new t([0,0,0,0,0,65535,0,0]),96],rfc6145:[new t([0,0,0,0,65535,0,0,0]),96],rfc6052:[new t([100,65435,0,0,0,0,0,0]),96],"6to4":[new t([8194,0,0,0,0,0,0,0]),16],teredo:[new t([8193,0,0,0,0,0,0,0]),32],reserved:[[new t([8193,3512,0,0,0,0,0,0]),32]]},t.prototype.isIPv4MappedAddress=function(){return"ipv4Mapped"===this.range()},t.prototype.kind=function(){return"ipv6"},t.prototype.match=function(t,e){let r;if(void 0===e&&(r=t,t=r[0],e=r[1]),"ipv6"!==t.kind())throw new Error("ipaddr: cannot match ipv6 address with non-ipv6 one");return l(this.parts,t.parts,16,e)},t.prototype.prefixLengthFromSubnetMask=function(){let t=0,e=!1;const r={0:16,32768:15,49152:14,57344:13,61440:12,63488:11,64512:10,65024:9,65280:8,65408:7,65472:6,65504:5,65520:4,65528:3,65532:2,65534:1,65535:0};let n,i;for(let s=7;s>=0;s-=1){if(n=this.parts[s],!(n in r))return null;if(i=r[n],e&&0!==i)return null;16!==i&&(e=!0),t+=i}return 128-t},t.prototype.range=function(){return f.subnetMatch(this,this.SpecialRanges)},t.prototype.toByteArray=function(){let t;const e=[],r=this.parts;for(let n=0;n<r.length;n++)t=r[n],e.push(t>>8),e.push(255&t);return e},t.prototype.toFixedLengthString=function(){const t=function(){const t=[];for(let e=0;e<this.parts.length;e++)t.push(d(this.parts[e].toString(16),4));return t}.call(this).join(":");let e="";return this.zoneId&&(e=`%${this.zoneId}`),t+e},t.prototype.toIPv4Address=function(){if(!this.isIPv4MappedAddress())throw new Error("ipaddr: trying to convert a generic ipv6 address to ipv4");const t=this.parts.slice(-2),e=t[0],r=t[1];return new f.IPv4([e>>8,255&e,r>>8,255&r])},t.prototype.toNormalizedString=function(){const t=function(){const t=[];for(let e=0;e<this.parts.length;e++)t.push(this.parts[e].toString(16));return t}.call(this).join(":");let e="";return this.zoneId&&(e=`%${this.zoneId}`),t+e},t.prototype.toRFC5952String=function(){const t=/((^|:)(0(:|$)){2,})/g,e=this.toNormalizedString();let r,n=0,i=-1;while(r=t.exec(e))r[0].length>i&&(n=r.index,i=r[0].length);return i<0?e:`${e.substring(0,n)}::${e.substring(n+i)}`},t.prototype.toString=function(){return this.toNormalizedString().replace(/((^|:)(0(:|$))+)/,"::")},t}(),f.IPv6.broadcastAddressFromCIDR=function(t){try{const e=this.parseCIDR(t),r=e[0].toByteArray(),n=this.subnetMaskFromPrefixLength(e[1]).toByteArray(),i=[];let s=0;while(s<16)i.push(parseInt(r[s],10)|255^parseInt(n[s],10)),s++;return new this(i)}catch(e){throw new Error(`ipaddr: the address does not have IPv6 CIDR format (${e})`)}},f.IPv6.isIPv6=function(t){return null!==this.parser(t)},f.IPv6.isValid=function(t){if("string"===typeof t&&-1===t.indexOf(":"))return!1;try{const e=this.parser(t);return new this(e.parts,e.zoneId),!0}catch(e){return!1}},f.IPv6.networkAddressFromCIDR=function(t){let e,r,n,i,s;try{e=this.parseCIDR(t),n=e[0].toByteArray(),s=this.subnetMaskFromPrefixLength(e[1]).toByteArray(),i=[],r=0;while(r<16)i.push(parseInt(n[r],10)&parseInt(s[r],10)),r++;return new this(i)}catch(o){throw new Error(`ipaddr: the address does not have IPv6 CIDR format (${o})`)}},f.IPv6.parse=function(t){const e=this.parser(t);if(null===e.parts)throw new Error("ipaddr: string is not formatted like an IPv6 Address");return new this(e.parts,e.zoneId)},f.IPv6.parseCIDR=function(t){let e,r,n;if((r=t.match(/^(.+)\/(\d+)$/))&&(e=parseInt(r[2]),e>=0&&e<=128))return n=[this.parse(r[1]),e],Object.defineProperty(n,"toString",{value:function(){return this.join("/")}}),n;throw new Error("ipaddr: string is not formatted like an IPv6 CIDR range")},f.IPv6.parser=function(t){let e,r,n,i,s,o;if(n=t.match(c.deprecatedTransitional))return this.parser(`::ffff:${n[1]}`);if(c.native.test(t))return u(t,8);if((n=t.match(c.transitional))&&(o=n[6]||"",e=u(n[1].slice(0,-1)+o,6),e.parts)){for(s=[parseInt(n[2]),parseInt(n[3]),parseInt(n[4]),parseInt(n[5])],r=0;r<s.length;r++)if(i=s[r],!(0<=i&&i<=255))return null;return e.parts.push(s[0]<<8|s[1]),e.parts.push(s[2]<<8|s[3]),{parts:e.parts,zoneId:e.zoneId}}return null},f.IPv6.subnetMaskFromPrefixLength=function(t){if(t=parseInt(t),t<0||t>128)throw new Error("ipaddr: invalid IPv6 prefix length");const e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];let r=0;const n=Math.floor(t/8);while(r<n)e[r]=255,r++;return n<16&&(e[n]=Math.pow(2,t%8)-1<<8-t%8),new this(e)},f.fromByteArray=function(t){const e=t.length;if(4===e)return new f.IPv4(t);if(16===e)return new f.IPv6(t);throw new Error("ipaddr: the binary input is neither an IPv6 nor IPv4 address")},f.isValid=function(t){return f.IPv6.isValid(t)||f.IPv4.isValid(t)},f.parse=function(t){if(f.IPv6.isValid(t))return f.IPv6.parse(t);if(f.IPv4.isValid(t))return f.IPv4.parse(t);throw new Error("ipaddr: the address has neither IPv6 nor IPv4 format")},f.parseCIDR=function(t){try{return f.IPv6.parseCIDR(t)}catch(e){try{return f.IPv4.parseCIDR(t)}catch(r){throw new Error("ipaddr: the address has neither IPv6 nor IPv4 CIDR format")}}},f.process=function(t){const e=this.parse(t);return"ipv6"===e.kind()&&e.isIPv4MappedAddress()?e.toIPv4Address():e},f.subnetMatch=function(t,e,r){let n,i,s,o;for(i in void 0!==r&&null!==r||(r="unicast"),e)if(Object.prototype.hasOwnProperty.call(e,i))for(s=e[i],!s[0]||s[0]instanceof Array||(s=[s]),n=0;n<s.length;n++)if(o=s[n],t.kind()===o[0].kind()&&t.match.apply(t,o))return i;return r},t.exports?t.exports=f:e.ipaddr=f}(this)},4024:function(t){function e(){return"undefined"!==typeof window&&"object"===typeof window.process&&"renderer"===window.process.type||(!("undefined"===typeof process||"object"!==typeof process.versions||!process.versions.electron)||"object"===typeof navigator&&"string"===typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0)}t.exports=e},4170:function(t,e,r){"use strict";const{Readable:n}=r(8141),i=r(1809),s=(t=1/0)=>{let e=0;return new n({read(r){if(e>=t)return this.push(null);e+r>=t&&(r=t-e),e+=r,this.push(i(r))}})};t.exports={randomStream:s,randomBytes:i}},1809:function(t,e,r){"use strict";r(8675),r(3462);const n=65536;function i(t){const e=new Uint8Array(t);let r=0;if(t>0)if(t>n)while(r<t)r+n>t?(crypto.getRandomValues(e.subarray(r,r+(t-r))),r+=t-r):(crypto.getRandomValues(e.subarray(r,r+n)),r+=n);else crypto.getRandomValues(e);return e}t.exports=i},7192:function(t){"use strict";const e=async t=>{const e=[];for await(const r of t)e.push(r);return e};t.exports=e},9164:function(t){"use strict";const e=async t=>{for await(const e of t);};t.exports=e},3726:function(t){"use strict";const e=async function*(t,e){for await(const r of t)await e(r)&&(yield r)};t.exports=e},4461:function(t){"use strict";const e=async t=>{for await(const e of t)return e};t.exports=e},8189:function(t){"use strict";const e=async function*(t,e){for await(const r of t)await e(r),yield r};t.exports=e},7285:function(t){"use strict";const e=async t=>{let e=0;for await(const r of t)e++;return e};t.exports=e},9927:function(t){"use strict";const e=async function*(t,e){for await(const r of t)yield e(r)};t.exports=e},940:function(t,e,r){"use strict";const n=r(7115),i=async function*(...t){const e=n();setTimeout((async()=>{try{await Promise.all(t.map((async t=>{for await(const r of t)e.push(r)}))),e.end()}catch(r){e.end(r)}}),0),yield*e};t.exports=i},7115:function(t,e,r){const n=r(2819);t.exports=t=>{let e;t=t||{},"function"===typeof t?(e=t,t={}):e=t.onEnd;let r,i,s,o=new n;const a=()=>{if(!o.isEmpty()){if(t.writev){let t;const e=[];while(!o.isEmpty()){if(t=o.shift(),t.error)throw t.error;e.push(t.value)}return{done:t.done,value:e}}const e=o.shift();if(e.error)throw e.error;return e}return s?{done:!0}:new Promise(((e,n)=>{i=s=>(i=null,s.error?n(s.error):t.writev&&!s.done?e({done:s.done,value:[s.value]}):e(s),r)}))},c=t=>i?i(t):(o.push(t),r),u=t=>(o=new n,i?i({error:t}):(o.push({error:t}),r)),l=t=>s?r:c({done:!1,value:t}),h=t=>s?r:(s=!0,t?u(t):c({done:!0})),d=()=>(o=new n,h(),{done:!0}),f=t=>(h(t),{done:!0});if(r={[Symbol.asyncIterator](){return this},next:a,return:d,throw:f,push:l,end:h},!e)return r;const p=r;return r={[Symbol.asyncIterator](){return this},next(){return p.next()},throw(t){return p.throw(t),e&&(e(t),e=null),{done:!0}},return(){return p.return(),e&&(e(),e=null),{done:!0}},push:l,end(t){return p.end(t),e&&(e(t),e=null),r}},r}},9310:function(t,e,r){"use strict";const n=r(570),i=r(3793).EventEmitter;async function*s(t,e={}){let r=e.concurrency||1/0;r<1&&(r=1/0);const s=null!=e.ordered&&e.ordered,o=new i,a=[];let c,u=n(),l=n(),h=!1,d=!1;function f(){return s?Boolean(a[0]&&a[0].done):Boolean(a.find((t=>t.done)))}function*p(){while(a.length&&a[0].done){const t=a[0];if(a.shift(),!t.ok)throw d=!0,u.resolve(),t.err;yield t.value,u.resolve()}}function*g(){while(f())for(let t=0;t<a.length;t++)if(a[t].done){const e=a[t];if(a.splice(t,1),t--,!e.ok)throw d=!0,u.resolve(),e.err;yield e.value,u.resolve()}}o.on("task-complete",(()=>{l.resolve()})),Promise.resolve().then((async()=>{try{for await(const e of t){if(a.length===r&&(u=n(),await u.promise),d)break;const t={done:!1};a.push(t),e().then((e=>{t.done=!0,t.ok=!0,t.value=e,o.emit("task-complete")}),(e=>{t.done=!0,t.err=e,o.emit("task-complete")}))}h=!0,o.emit("task-complete")}catch(e){c=e,o.emit("task-complete")}}));while(1){if(f()||(l=n(),await l.promise),c)throw c;if(s?yield*p():yield*g(),h&&0===a.length)break}}t.exports=s},570:function(t){"use strict";const e=()=>{const t={};return t.promise=new Promise(((e,r)=>{t.resolve=e,t.reject=r})),t};t.exports=e},640:function(t,e,r){"use strict";const n=r(7192),i=async function*(t,e){const r=await n(t);yield*r.sort(e)};t.exports=i},6855:function(t){"use strict";const e=async function*(t,e){let r=0;if(!(e<1))for await(const n of t)if(yield n,r++,r===e)return};t.exports=e},6657:function(t,e,r){"use strict";r(8675),r(3462),r(1703);const n=r(7602),{EventEmitter:i}=r(3793);function s(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let r=0,n=t.length;r<n;++r)if(t[r]!==e[r])return!1;return!0}function o(){return{contacts:[],dontSplit:!1,left:null,right:null}}function a(t,e){if(!(e instanceof Uint8Array))throw new TypeError(t+" is not a Uint8Array")}class c extends i{constructor(t={}){super(),this.localNodeId=t.localNodeId||n(20),this.numberOfNodesPerKBucket=t.numberOfNodesPerKBucket||20,this.numberOfNodesToPing=t.numberOfNodesToPing||3,this.distance=t.distance||c.distance,this.arbiter=t.arbiter||c.arbiter,this.metadata=Object.assign({},t.metadata),a("option.localNodeId as parameter 1",this.localNodeId),this.root=o()}static arbiter(t,e){return t.vectorClock>e.vectorClock?t:e}static distance(t,e){let r=0,n=0;const i=Math.min(t.length,e.length),s=Math.max(t.length,e.length);for(;n<i;++n)r=256*r+(t[n]^e[n]);for(;n<s;++n)r=256*r+255;return r}add(t){a("contact.id",(t||{}).id);let e=0,r=this.root;while(null===r.contacts)r=this._determineNode(r,t.id,e++);const n=this._indexOf(r,t.id);return n>=0?(this._update(r,n,t),this):r.contacts.length<this.numberOfNodesPerKBucket?(r.contacts.push(t),this.emit("added",t),this):r.dontSplit?(this.emit("ping",r.contacts.slice(0,this.numberOfNodesToPing),t),this):(this._split(r,e),this.add(t))}closest(t,e=1/0){if(a("id",t),!Number.isInteger(e)&&e!==1/0||e<=0)throw new TypeError("n is not positive number");let r=[];for(let n=[this.root],i=0;n.length>0&&r.length<e;){const e=n.pop();if(null===e.contacts){const r=this._determineNode(e,t,i++);n.push(e.left===r?e.right:e.left),n.push(r)}else r=r.concat(e.contacts)}return r.map((e=>[this.distance(e.id,t),e])).sort(((t,e)=>t[0]-e[0])).slice(0,e).map((t=>t[1]))}count(){let t=0;for(const e=[this.root];e.length>0;){const r=e.pop();null===r.contacts?e.push(r.right,r.left):t+=r.contacts.length}return t}_determineNode(t,e,r){const n=r>>3,i=r%8;if(e.length<=n&&0!==i)return t.left;const s=e[n];return s&1<<7-i?t.right:t.left}get(t){a("id",t);let e=0,r=this.root;while(null===r.contacts)r=this._determineNode(r,t,e++);const n=this._indexOf(r,t);return n>=0?r.contacts[n]:null}_indexOf(t,e){for(let r=0;r<t.contacts.length;++r)if(s(t.contacts[r].id,e))return r;return-1}remove(t){a("the id as parameter 1",t);let e=0,r=this.root;while(null===r.contacts)r=this._determineNode(r,t,e++);const n=this._indexOf(r,t);if(n>=0){const t=r.contacts.splice(n,1)[0];this.emit("removed",t)}return this}_split(t,e){t.left=o(),t.right=o();for(const i of t.contacts)this._determineNode(t,i.id,e).contacts.push(i);t.contacts=null;const r=this._determineNode(t,this.localNodeId,e),n=t.left===r?t.right:t.left;n.dontSplit=!0}toArray(){let t=[];for(const e=[this.root];e.length>0;){const r=e.pop();null===r.contacts?e.push(r.right,r.left):t=t.concat(r.contacts)}return t}*toIterable(){for(const t=[this.root];t.length>0;){const e=t.pop();null===e.contacts?t.push(e.right,e.left):yield*e.contacts}}_update(t,e,r){if(!s(t.contacts[e].id,r.id))throw new Error("wrong index for _update");const n=t.contacts[e],i=this.arbiter(n,r);i===n&&n!==r||(t.contacts.splice(e,1),t.contacts.push(i),this.emit("updated",n,i))}}t.exports=c},535:function(t,e,r){"use strict";r(1703);const n=r(1800),{hasOwnProperty:i}=Object.prototype,{propertyIsEnumerable:s}=Object,o=(t,e,r)=>Object.defineProperty(t,e,{value:r,writable:!0,enumerable:!0,configurable:!0}),a=this,c={concatArrays:!1,ignoreUndefined:!1},u=t=>{const e=[];for(const r in t)i.call(t,r)&&e.push(r);if(Object.getOwnPropertySymbols){const r=Object.getOwnPropertySymbols(t);for(const n of r)s.call(t,n)&&e.push(n)}return e};function l(t){return Array.isArray(t)?h(t):n(t)?d(t):t}function h(t){const e=t.slice(0,0);return u(t).forEach((r=>{o(e,r,l(t[r]))})),e}function d(t){const e=null===Object.getPrototypeOf(t)?Object.create(null):{};return u(t).forEach((r=>{o(e,r,l(t[r]))})),e}const f=(t,e,r,n)=>(r.forEach((r=>{"undefined"===typeof e[r]&&n.ignoreUndefined||(r in t&&t[r]!==Object.getPrototypeOf(t)?o(t,r,g(t[r],e[r],n)):o(t,r,l(e[r])))})),t),p=(t,e,r)=>{let n=t.slice(0,0),s=0;return[t,e].forEach((e=>{const a=[];for(let r=0;r<e.length;r++)i.call(e,r)&&(a.push(String(r)),o(n,s++,e===t?e[r]:l(e[r])));n=f(n,e,u(e).filter((t=>!a.includes(t))),r)})),n};function g(t,e,r){return r.concatArrays&&Array.isArray(t)&&Array.isArray(e)?p(t,e,r):n(e)&&n(t)?f(t,e,u(e),r):l(e)}t.exports=function(...t){const e=g(l(c),this!==a&&this||{},c);let r={_:{}};for(const i of t)if(void 0!==i){if(!n(i))throw new TypeError("`"+i+"` is not an Option Object");r=g(r,{_:i},e)}return r._}},1800:function(t){"use strict";t.exports=t=>{if("[object Object]"!==Object.prototype.toString.call(t))return!1;const e=Object.getPrototypeOf(t);return null===e||e===Object.prototype}},7901:function(t,e,r){r(1703);var n=1e3,i=60*n,s=60*i,o=24*s,a=7*o,c=365.25*o;function u(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),u=(e[2]||"ms").toLowerCase();switch(u){case"years":case"year":case"yrs":case"yr":case"y":return r*c;case"weeks":case"week":case"w":return r*a;case"days":case"day":case"d":return r*o;case"hours":case"hour":case"hrs":case"hr":case"h":return r*s;case"minutes":case"minute":case"mins":case"min":case"m":return r*i;case"seconds":case"second":case"secs":case"sec":case"s":return r*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function l(t){var e=Math.abs(t);return e>=o?Math.round(t/o)+"d":e>=s?Math.round(t/s)+"h":e>=i?Math.round(t/i)+"m":e>=n?Math.round(t/n)+"s":t+"ms"}function h(t){var e=Math.abs(t);return e>=o?d(t,e,o,"day"):e>=s?d(t,e,s,"hour"):e>=i?d(t,e,i,"minute"):e>=n?d(t,e,n,"second"):t+" ms"}function d(t,e,r,n){var i=e>=1.5*r;return Math.round(t/r)+" "+n+(i?"s":"")}t.exports=function(t,e){e=e||{};var r=typeof t;if("string"===r&&t.length>0)return u(t);if("number"===r&&isFinite(t))return e.long?h(t):l(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},8295:function(t,e,r){"use strict";function n(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}r(1703),t.exports=function(t){var e=void 0,r=void 0;function i(t){if(!(t instanceof Object))throw new Error('Target "'+t+'" is not an object');r=t}function s(t){Object.keys(t).forEach((function(e){var r=t[e];if("function"!==typeof r)throw new Error('Trap "'+e+": "+r+'" is not a function');if(!Reflect[e])throw new Error('Trap "'+e+": "+r+'" is not a valid trap')})),e=t}i((function(){})),t&&i(t),s(Reflect);var o=new Proxy({},{get:function(t,i){return function(){for(var t=arguments.length,s=Array(t),o=0;o<t;o++)s[o]=arguments[o];return e[i].apply(null,[r].concat(n(s.slice(1))))}}});return{setTarget:i,setHandler:s,getTarget:function(){return r},getHandler:function(){return e},proxy:new Proxy(r,o)}}},98:function(t,e,r){r(1703),function(){var t,r,n,i,s,o,a,c;c=function(t){var e,r,n,i;return e=(t&255<<24)>>>24,r=(t&255<<16)>>>16,n=(65280&t)>>>8,i=255&t,[e,r,n,i].join(".")},a=function(t){var e,n,i,s,o,a;for(e=[],i=s=0;s<=3;i=++s){if(0===t.length)break;if(i>0){if("."!==t[0])throw new Error("Invalid IP");t=t.substring(1)}a=r(t),o=a[0],n=a[1],t=t.substring(n),e.push(o)}if(0!==t.length)throw new Error("Invalid IP");switch(e.length){case 1:if(e[0]>4294967295)throw new Error("Invalid IP");return e[0]>>>0;case 2:if(e[0]>255||e[1]>16777215)throw new Error("Invalid IP");return(e[0]<<24|e[1])>>>0;case 3:if(e[0]>255||e[1]>255||e[2]>65535)throw new Error("Invalid IP");return(e[0]<<24|e[1]<<16|e[2])>>>0;case 4:if(e[0]>255||e[1]>255||e[2]>255||e[3]>255)throw new Error("Invalid IP");return(e[0]<<24|e[1]<<16|e[2]<<8|e[3])>>>0;default:throw new Error("Invalid IP")}},n=function(t){return t.charCodeAt(0)},i=n("0"),o=n("a"),s=n("A"),r=function(t){var e,r,a,c,u;c=0,e=10,r="9",a=0,t.length>1&&"0"===t[a]&&("x"===t[a+1]||"X"===t[a+1]?(a+=2,e=16):"0"<=t[a+1]&&t[a+1]<="9"&&(a++,e=8,r="7")),u=a;while(a<t.length){if("0"<=t[a]&&t[a]<=r)c=c*e+(n(t[a])-i)>>>0;else{if(16!==e)break;if("a"<=t[a]&&t[a]<="f")c=c*e+(10+n(t[a])-o)>>>0;else{if(!("A"<=t[a]&&t[a]<="F"))break;c=c*e+(10+n(t[a])-s)>>>0}}if(c>4294967295)throw new Error("too large");a++}if(a===u)throw new Error("empty octet");return[c,a]},t=function(){function t(t,e){var r,n,i;if("string"!==typeof t)throw new Error("Missing `net' parameter");if(e||(i=t.split("/",2),t=i[0],e=i[1]),e||(e=32),"string"===typeof e&&e.indexOf(".")>-1){try{this.maskLong=a(e)}catch(s){throw s,new Error("Invalid mask: "+e)}for(r=n=32;n>=0;r=--n)if(this.maskLong===4294967295<<32-r>>>0){this.bitmask=r;break}}else{if(!e&&0!==e)throw new Error("Invalid mask: empty");this.bitmask=parseInt(e,10),this.maskLong=0,this.bitmask>0&&(this.maskLong=4294967295<<32-this.bitmask>>>0)}try{this.netLong=(a(t)&this.maskLong)>>>0}catch(s){throw s,new Error("Invalid net address: "+t)}if(!(this.bitmask<=32))throw new Error("Invalid mask for ip4: "+e);this.size=Math.pow(2,32-this.bitmask),this.base=c(this.netLong),this.mask=c(this.maskLong),this.hostmask=c(~this.maskLong),this.first=this.bitmask<=30?c(this.netLong+1):this.base,this.last=this.bitmask<=30?c(this.netLong+this.size-2):c(this.netLong+this.size-1),this.broadcast=this.bitmask<=30?c(this.netLong+this.size-1):void 0}return t.prototype.contains=function(e){return"string"===typeof e&&(e.indexOf("/")>0||4!==e.split(".").length)&&(e=new t(e)),e instanceof t?this.contains(e.base)&&this.contains(e.broadcast||e.last):(a(e)&this.maskLong)>>>0===(this.netLong&this.maskLong)>>>0},t.prototype.next=function(e){return null==e&&(e=1),new t(c(this.netLong+this.size*e),this.mask)},t.prototype.forEach=function(t){var e,r,n;n=a(this.first),r=a(this.last),e=0;while(n<=r)t(c(n),n,e),e++,n++},t.prototype.toString=function(){return this.base+"/"+this.bitmask},t}(),e.ip2long=a,e.long2ip=c,e.Netmask=t}.call(this)},22:function(t,e,r){r(1703);var n=r(5736);function i(t,e){var r=function(){return new n.aes.Algorithm(t,e)};n.cipher.registerAlgorithm(t,r)}r(298),r(2009),r(4292),t.exports=n.aes=n.aes||{},n.aes.startEncrypting=function(t,e,r,n){var i=g({key:t,output:r,decrypt:!1,mode:n});return i.start(e),i},n.aes.createEncryptionCipher=function(t,e){return g({key:t,output:null,decrypt:!1,mode:e})},n.aes.startDecrypting=function(t,e,r,n){var i=g({key:t,output:r,decrypt:!0,mode:n});return i.start(e),i},n.aes.createDecryptionCipher=function(t,e){return g({key:t,output:null,decrypt:!0,mode:e})},n.aes.Algorithm=function(t,e){l||d();var r=this;r.name=t,r.mode=new e({blockSize:16,cipher:{encrypt:function(t,e){return p(r._w,t,e,!1)},decrypt:function(t,e){return p(r._w,t,e,!0)}}}),r._init=!1},n.aes.Algorithm.prototype.initialize=function(t){if(!this._init){var e,r=t.key;if("string"!==typeof r||16!==r.length&&24!==r.length&&32!==r.length){if(n.util.isArray(r)&&(16===r.length||24===r.length||32===r.length)){e=r,r=n.util.createBuffer();for(var i=0;i<e.length;++i)r.putByte(e[i])}}else r=n.util.createBuffer(r);if(!n.util.isArray(r)){e=r,r=[];var s=e.length();if(16===s||24===s||32===s){s>>>=2;for(i=0;i<s;++i)r.push(e.getInt32())}}if(!n.util.isArray(r)||4!==r.length&&6!==r.length&&8!==r.length)throw new Error("Invalid key parameter.");var o=this.mode.name,a=-1!==["CFB","OFB","CTR","GCM"].indexOf(o);this._w=f(r,t.decrypt&&!a),this._init=!0}},n.aes._expandKey=function(t,e){return l||d(),f(t,e)},n.aes._updateBlock=p,i("AES-ECB",n.cipher.modes.ecb),i("AES-CBC",n.cipher.modes.cbc),i("AES-CFB",n.cipher.modes.cfb),i("AES-OFB",n.cipher.modes.ofb),i("AES-CTR",n.cipher.modes.ctr),i("AES-GCM",n.cipher.modes.gcm);var s,o,a,c,u,l=!1,h=4;function d(){l=!0,a=[0,1,2,4,8,16,32,64,128,27,54];for(var t=new Array(256),e=0;e<128;++e)t[e]=e<<1,t[e+128]=e+128<<1^283;s=new Array(256),o=new Array(256),c=new Array(4),u=new Array(4);for(e=0;e<4;++e)c[e]=new Array(256),u[e]=new Array(256);var r,n,i,h,d,f,p,g=0,y=0;for(e=0;e<256;++e){h=y^y<<1^y<<2^y<<3^y<<4,h=h>>8^255&h^99,s[g]=h,o[h]=g,d=t[h],r=t[g],n=t[r],i=t[n],f=d<<24^h<<16^h<<8^h^d,p=(r^n^i)<<24^(g^i)<<16^(g^n^i)<<8^g^r^i;for(var m=0;m<4;++m)c[m][g]=f,u[m][h]=p,f=f<<24|f>>>8,p=p<<24|p>>>8;0===g?g=y=1:(g=r^t[t[t[r^i]]],y^=t[t[y]])}}function f(t,e){for(var r,n=t.slice(0),i=1,o=n.length,c=o+6+1,l=h*c,d=o;d<l;++d)r=n[d-1],d%o===0?(r=s[r>>>16&255]<<24^s[r>>>8&255]<<16^s[255&r]<<8^s[r>>>24]^a[i]<<24,i++):o>6&&d%o===4&&(r=s[r>>>24]<<24^s[r>>>16&255]<<16^s[r>>>8&255]<<8^s[255&r]),n[d]=n[d-o]^r;if(e){var f,p=u[0],g=u[1],y=u[2],m=u[3],w=n.slice(0);l=n.length;d=0;for(var v=l-h;d<l;d+=h,v-=h)if(0===d||d===l-h)w[d]=n[v],w[d+1]=n[v+3],w[d+2]=n[v+2],w[d+3]=n[v+1];else for(var E=0;E<h;++E)f=n[v+E],w[d+(3&-E)]=p[s[f>>>24]]^g[s[f>>>16&255]]^y[s[f>>>8&255]]^m[s[255&f]];n=w}return n}function p(t,e,r,n){var i,a,l,h,d,f,p,g,y,m,w,v,E=t.length/4-1;n?(i=u[0],a=u[1],l=u[2],h=u[3],d=o):(i=c[0],a=c[1],l=c[2],h=c[3],d=s),f=e[0]^t[0],p=e[n?3:1]^t[1],g=e[2]^t[2],y=e[n?1:3]^t[3];for(var b=3,S=1;S<E;++S)m=i[f>>>24]^a[p>>>16&255]^l[g>>>8&255]^h[255&y]^t[++b],w=i[p>>>24]^a[g>>>16&255]^l[y>>>8&255]^h[255&f]^t[++b],v=i[g>>>24]^a[y>>>16&255]^l[f>>>8&255]^h[255&p]^t[++b],y=i[y>>>24]^a[f>>>16&255]^l[p>>>8&255]^h[255&g]^t[++b],f=m,p=w,g=v;r[0]=d[f>>>24]<<24^d[p>>>16&255]<<16^d[g>>>8&255]<<8^d[255&y]^t[++b],r[n?3:1]=d[p>>>24]<<24^d[g>>>16&255]<<16^d[y>>>8&255]<<8^d[255&f]^t[++b],r[2]=d[g>>>24]<<24^d[y>>>16&255]<<16^d[f>>>8&255]<<8^d[255&p]^t[++b],r[n?1:3]=d[y>>>24]<<24^d[f>>>16&255]<<16^d[p>>>8&255]<<8^d[255&g]^t[++b]}function g(t){t=t||{};var e,r=(t.mode||"CBC").toUpperCase(),i="AES-"+r;e=t.decrypt?n.cipher.createDecipher(i,t.key):n.cipher.createCipher(i,t.key);var s=e.start;return e.start=function(t,r){var i=null;r instanceof n.util.ByteBuffer&&(i=r,r={}),r=r||{},r.output=i,r.iv=t,s.call(e,r)},e}},1041:function(t,e,r){r(1703);var n=r(5736);r(4292),r(9002);var i=t.exports=n.asn1=n.asn1||{};function s(t,e,r){if(r>e){var n=new Error("Too few bytes to parse DER.");throw n.available=t.length(),n.remaining=e,n.requested=r,n}}i.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192},i.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30},i.create=function(t,e,r,s,o){if(n.util.isArray(s)){for(var a=[],c=0;c<s.length;++c)void 0!==s[c]&&a.push(s[c]);s=a}var u={tagClass:t,type:e,constructed:r,composed:r||n.util.isArray(s),value:s};return o&&"bitStringContents"in o&&(u.bitStringContents=o.bitStringContents,u.original=i.copy(u)),u},i.copy=function(t,e){var r;if(n.util.isArray(t)){r=[];for(var s=0;s<t.length;++s)r.push(i.copy(t[s],e));return r}return"string"===typeof t?t:(r={tagClass:t.tagClass,type:t.type,constructed:t.constructed,composed:t.composed,value:i.copy(t.value,e)},e&&!e.excludeBitStringContents&&(r.bitStringContents=t.bitStringContents),r)},i.equals=function(t,e,r){if(n.util.isArray(t)){if(!n.util.isArray(e))return!1;if(t.length!==e.length)return!1;for(var s=0;s<t.length;++s)if(!i.equals(t[s],e[s]))return!1;return!0}if(typeof t!==typeof e)return!1;if("string"===typeof t)return t===e;var o=t.tagClass===e.tagClass&&t.type===e.type&&t.constructed===e.constructed&&t.composed===e.composed&&i.equals(t.value,e.value);return r&&r.includeBitStringContents&&(o=o&&t.bitStringContents===e.bitStringContents),o},i.getBerValueLength=function(t){var e=t.getByte();if(128!==e){var r,n=128&e;return r=n?t.getInt((127&e)<<3):e,r}};var o=function(t,e){var r=t.getByte();if(e--,128!==r){var n,i=128&r;if(i){var o=127&r;s(t,e,o),n=t.getInt(o<<3)}else n=r;if(n<0)throw new Error("Negative length: "+n);return n}};function a(t,e,r,n){var c;s(t,e,2);var u=t.getByte();e--;var l=192&u,h=31&u;c=t.length();var d,f,p=o(t,e);if(e-=c-t.length(),void 0!==p&&p>e){if(n.strict){var g=new Error("Too few bytes to read ASN.1 value.");throw g.available=t.length(),g.remaining=e,g.requested=p,g}p=e}var y=32===(32&u);if(y)if(d=[],void 0===p)for(;;){if(s(t,e,2),t.bytes(2)===String.fromCharCode(0,0)){t.getBytes(2),e-=2;break}c=t.length(),d.push(a(t,e,r+1,n)),e-=c-t.length()}else while(p>0)c=t.length(),d.push(a(t,p,r+1,n)),e-=c-t.length(),p-=c-t.length();if(void 0===d&&l===i.Class.UNIVERSAL&&h===i.Type.BITSTRING&&(f=t.bytes(p)),void 0===d&&n.decodeBitStrings&&l===i.Class.UNIVERSAL&&h===i.Type.BITSTRING&&p>1){var m=t.read,w=e,v=0;if(h===i.Type.BITSTRING&&(s(t,e,1),v=t.getByte(),e--),0===v)try{c=t.length();var E={strict:!0,decodeBitStrings:!0},b=a(t,e,r+1,E),S=c-t.length();e-=S,h==i.Type.BITSTRING&&S++;var _=b.tagClass;S!==p||_!==i.Class.UNIVERSAL&&_!==i.Class.CONTEXT_SPECIFIC||(d=[b])}catch(I){}void 0===d&&(t.read=m,e=w)}if(void 0===d){if(void 0===p){if(n.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");p=e}if(h===i.Type.BMPSTRING)for(d="";p>0;p-=2)s(t,e,2),d+=String.fromCharCode(t.getInt16()),e-=2;else d=t.getBytes(p),e-=p}var R=void 0===f?null:{bitStringContents:f};return i.create(l,h,y,d,R)}i.fromDer=function(t,e){void 0===e&&(e={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),"boolean"===typeof e&&(e={strict:e,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in e||(e.strict=!0),"parseAllBytes"in e||(e.parseAllBytes=!0),"decodeBitStrings"in e||(e.decodeBitStrings=!0),"string"===typeof t&&(t=n.util.createBuffer(t));var r=t.length(),i=a(t,t.length(),0,e);if(e.parseAllBytes&&0!==t.length()){var s=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw s.byteCount=r,s.remaining=t.length(),s}return i},i.toDer=function(t){var e=n.util.createBuffer(),r=t.tagClass|t.type,s=n.util.createBuffer(),o=!1;if("bitStringContents"in t&&(o=!0,t.original&&(o=i.equals(t,t.original))),o)s.putBytes(t.bitStringContents);else if(t.composed){t.constructed?r|=32:s.putByte(0);for(var a=0;a<t.value.length;++a)void 0!==t.value[a]&&s.putBuffer(i.toDer(t.value[a]))}else if(t.type===i.Type.BMPSTRING)for(a=0;a<t.value.length;++a)s.putInt16(t.value.charCodeAt(a));else t.type===i.Type.INTEGER&&t.value.length>1&&(0===t.value.charCodeAt(0)&&0===(128&t.value.charCodeAt(1))||255===t.value.charCodeAt(0)&&128===(128&t.value.charCodeAt(1)))?s.putBytes(t.value.substr(1)):s.putBytes(t.value);if(e.putByte(r),s.length()<=127)e.putByte(127&s.length());else{var c=s.length(),u="";do{u+=String.fromCharCode(255&c),c>>>=8}while(c>0);e.putByte(128|u.length);for(a=u.length-1;a>=0;--a)e.putByte(u.charCodeAt(a))}return e.putBuffer(s),e},i.oidToDer=function(t){var e,r,i,s,o=t.split("."),a=n.util.createBuffer();a.putByte(40*parseInt(o[0],10)+parseInt(o[1],10));for(var c=2;c<o.length;++c){e=!0,r=[],i=parseInt(o[c],10);do{s=127&i,i>>>=7,e||(s|=128),r.push(s),e=!1}while(i>0);for(var u=r.length-1;u>=0;--u)a.putByte(r[u])}return a},i.derToOid=function(t){var e;"string"===typeof t&&(t=n.util.createBuffer(t));var r=t.getByte();e=Math.floor(r/40)+"."+r%40;var i=0;while(t.length()>0)r=t.getByte(),i<<=7,128&r?i+=127&r:(e+="."+(i+r),i=0);return e},i.utcTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(t.substr(2,2),10)-1,i=parseInt(t.substr(4,2),10),s=parseInt(t.substr(6,2),10),o=parseInt(t.substr(8,2),10),a=0;if(t.length>11){var c=t.charAt(10),u=10;"+"!==c&&"-"!==c&&(a=parseInt(t.substr(10,2),10),u+=2)}if(e.setUTCFullYear(r,n,i),e.setUTCHours(s,o,a,0),u&&(c=t.charAt(u),"+"===c||"-"===c)){var l=parseInt(t.substr(u+1,2),10),h=parseInt(t.substr(u+4,2),10),d=60*l+h;d*=6e4,"+"===c?e.setTime(+e-d):e.setTime(+e+d)}return e},i.generalizedTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,4),10),n=parseInt(t.substr(4,2),10)-1,i=parseInt(t.substr(6,2),10),s=parseInt(t.substr(8,2),10),o=parseInt(t.substr(10,2),10),a=parseInt(t.substr(12,2),10),c=0,u=0,l=!1;"Z"===t.charAt(t.length-1)&&(l=!0);var h=t.length-5,d=t.charAt(h);if("+"===d||"-"===d){var f=parseInt(t.substr(h+1,2),10),p=parseInt(t.substr(h+4,2),10);u=60*f+p,u*=6e4,"+"===d&&(u*=-1),l=!0}return"."===t.charAt(14)&&(c=1e3*parseFloat(t.substr(14),10)),l?(e.setUTCFullYear(r,n,i),e.setUTCHours(s,o,a,c),e.setTime(+e+u)):(e.setFullYear(r,n,i),e.setHours(s,o,a,c)),e},i.dateToUtcTime=function(t){if("string"===typeof t)return t;var e="",r=[];r.push((""+t.getUTCFullYear()).substr(2)),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z",e},i.dateToGeneralizedTime=function(t){if("string"===typeof t)return t;var e="",r=[];r.push(""+t.getUTCFullYear()),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z",e},i.integerToDer=function(t){var e=n.util.createBuffer();if(t>=-128&&t<128)return e.putSignedInt(t,8);if(t>=-32768&&t<32768)return e.putSignedInt(t,16);if(t>=-8388608&&t<8388608)return e.putSignedInt(t,24);if(t>=-2147483648&&t<2147483648)return e.putSignedInt(t,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=t,r},i.derToInteger=function(t){"string"===typeof t&&(t=n.util.createBuffer(t));var e=8*t.length();if(e>32)throw new Error("Integer too large; max is 32-bits.");return t.getSignedInt(e)},i.validate=function(t,e,r,s){var o=!1;if(t.tagClass!==e.tagClass&&"undefined"!==typeof e.tagClass||t.type!==e.type&&"undefined"!==typeof e.type)s&&(t.tagClass!==e.tagClass&&s.push("["+e.name+'] Expected tag class "'+e.tagClass+'", got "'+t.tagClass+'"'),t.type!==e.type&&s.push("["+e.name+'] Expected type "'+e.type+'", got "'+t.type+'"'));else if(t.constructed===e.constructed||"undefined"===typeof e.constructed){if(o=!0,e.value&&n.util.isArray(e.value))for(var a=0,c=0;o&&c<e.value.length;++c)o=e.value[c].optional||!1,t.value[a]&&(o=i.validate(t.value[a],e.value[c],r,s),o?++a:e.value[c].optional&&(o=!0)),!o&&s&&s.push("["+e.name+'] Tag class "'+e.tagClass+'", type "'+e.type+'" expected value length "'+e.value.length+'", got "'+t.value.length+'"');if(o&&r)if(e.capture&&(r[e.capture]=t.value),e.captureAsn1&&(r[e.captureAsn1]=t),e.captureBitStringContents&&"bitStringContents"in t&&(r[e.captureBitStringContents]=t.bitStringContents),e.captureBitStringValue&&"bitStringContents"in t)if(t.bitStringContents.length<2)r[e.captureBitStringValue]="";else{var u=t.bitStringContents.charCodeAt(0);if(0!==u)throw new Error("captureBitStringValue only supported for zero unused bits");r[e.captureBitStringValue]=t.bitStringContents.slice(1)}}else s&&s.push("["+e.name+'] Expected constructed "'+e.constructed+'", got "'+t.constructed+'"');return o};var c=/[^\\u0000-\\u00ff]/;i.prettyPrint=function(t,e,r){var s="";e=e||0,r=r||2,e>0&&(s+="\n");for(var o="",a=0;a<e*r;++a)o+=" ";switch(s+=o+"Tag: ",t.tagClass){case i.Class.UNIVERSAL:s+="Universal:";break;case i.Class.APPLICATION:s+="Application:";break;case i.Class.CONTEXT_SPECIFIC:s+="Context-Specific:";break;case i.Class.PRIVATE:s+="Private:";break}if(t.tagClass===i.Class.UNIVERSAL)switch(s+=t.type,t.type){case i.Type.NONE:s+=" (None)";break;case i.Type.BOOLEAN:s+=" (Boolean)";break;case i.Type.INTEGER:s+=" (Integer)";break;case i.Type.BITSTRING:s+=" (Bit string)";break;case i.Type.OCTETSTRING:s+=" (Octet string)";break;case i.Type.NULL:s+=" (Null)";break;case i.Type.OID:s+=" (Object Identifier)";break;case i.Type.ODESC:s+=" (Object Descriptor)";break;case i.Type.EXTERNAL:s+=" (External or Instance of)";break;case i.Type.REAL:s+=" (Real)";break;case i.Type.ENUMERATED:s+=" (Enumerated)";break;case i.Type.EMBEDDED:s+=" (Embedded PDV)";break;case i.Type.UTF8:s+=" (UTF8)";break;case i.Type.ROID:s+=" (Relative Object Identifier)";break;case i.Type.SEQUENCE:s+=" (Sequence)";break;case i.Type.SET:s+=" (Set)";break;case i.Type.PRINTABLESTRING:s+=" (Printable String)";break;case i.Type.IA5String:s+=" (IA5String (ASCII))";break;case i.Type.UTCTIME:s+=" (UTC time)";break;case i.Type.GENERALIZEDTIME:s+=" (Generalized time)";break;case i.Type.BMPSTRING:s+=" (BMP String)";break}else s+=t.type;if(s+="\n",s+=o+"Constructed: "+t.constructed+"\n",t.composed){var u=0,l="";for(a=0;a<t.value.length;++a)void 0!==t.value[a]&&(u+=1,l+=i.prettyPrint(t.value[a],e+1,r),a+1<t.value.length&&(l+=","));s+=o+"Sub values: "+u+l}else{if(s+=o+"Value: ",t.type===i.Type.OID){var h=i.derToOid(t.value);s+=h,n.pki&&n.pki.oids&&h in n.pki.oids&&(s+=" ("+n.pki.oids[h]+") ")}if(t.type===i.Type.INTEGER)try{s+=i.derToInteger(t.value)}catch(f){s+="0x"+n.util.bytesToHex(t.value)}else if(t.type===i.Type.BITSTRING){if(t.value.length>1?s+="0x"+n.util.bytesToHex(t.value.slice(1)):s+="(none)",t.value.length>0){var d=t.value.charCodeAt(0);1==d?s+=" (1 unused bit shown)":d>1&&(s+=" ("+d+" unused bits shown)")}}else if(t.type===i.Type.OCTETSTRING)c.test(t.value)||(s+="("+t.value+") "),s+="0x"+n.util.bytesToHex(t.value);else if(t.type===i.Type.UTF8)try{s+=n.util.decodeUtf8(t.value)}catch(p){if("URI malformed"!==p.message)throw p;s+="0x"+n.util.bytesToHex(t.value)+" (malformed UTF8)"}else t.type===i.Type.PRINTABLESTRING||t.type===i.Type.IA5String?s+=t.value:c.test(t.value)?s+="0x"+n.util.bytesToHex(t.value):0===t.value.length?s+="[null]":s+=t.value}return s}},3220:function(t,e,r){r(1703),r(8675),r(3462),r(2262),r(4506);var n={};t.exports=n;var i={};function s(t,e){var r=0,n=e.length,i=e.charAt(0),s=[0];for(r=0;r<t.length();++r){for(var o=0,a=t.at(r);o<s.length;++o)a+=s[o]<<8,s[o]=a%n,a=a/n|0;while(a>0)s.push(a%n),a=a/n|0}var c="";for(r=0;0===t.at(r)&&r<t.length()-1;++r)c+=i;for(r=s.length-1;r>=0;--r)c+=e[s[r]];return c}n.encode=function(t,e,r){if("string"!==typeof e)throw new TypeError('"alphabet" must be a string.');if(void 0!==r&&"number"!==typeof r)throw new TypeError('"maxline" must be a number.');var n="";if(t instanceof Uint8Array){var i=0,o=e.length,a=e.charAt(0),c=[0];for(i=0;i<t.length;++i){for(var u=0,l=t[i];u<c.length;++u)l+=c[u]<<8,c[u]=l%o,l=l/o|0;while(l>0)c.push(l%o),l=l/o|0}for(i=0;0===t[i]&&i<t.length-1;++i)n+=a;for(i=c.length-1;i>=0;--i)n+=e[c[i]]}else n=s(t,e);if(r){var h=new RegExp(".{1,"+r+"}","g");n=n.match(h).join("\r\n")}return n},n.decode=function(t,e){if("string"!==typeof t)throw new TypeError('"input" must be a string.');if("string"!==typeof e)throw new TypeError('"alphabet" must be a string.');var r=i[e];if(!r){r=i[e]=[];for(var n=0;n<e.length;++n)r[e.charCodeAt(n)]=n}t=t.replace(/\s/g,"");var s=e.length,o=e.charAt(0),a=[0];for(n=0;n<t.length;n++){var c=r[t.charCodeAt(n)];if(void 0===c)return;for(var u=0,l=c;u<a.length;++u)l+=a[u]*s,a[u]=255&l,l>>=8;while(l>0)a.push(255&l),l>>=8}for(var h=0;t[h]===o&&h<t.length-1;++h)a.push(0);return"undefined"!==typeof Buffer?Buffer.from(a.reverse()):new Uint8Array(a.reverse())}},298:function(t,e,r){r(1703);var n=r(5736);r(4292),t.exports=n.cipher=n.cipher||{},n.cipher.algorithms=n.cipher.algorithms||{},n.cipher.createCipher=function(t,e){var r=t;if("string"===typeof r&&(r=n.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new n.cipher.BlockCipher({algorithm:r,key:e,decrypt:!1})},n.cipher.createDecipher=function(t,e){var r=t;if("string"===typeof r&&(r=n.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new n.cipher.BlockCipher({algorithm:r,key:e,decrypt:!0})},n.cipher.registerAlgorithm=function(t,e){t=t.toUpperCase(),n.cipher.algorithms[t]=e},n.cipher.getAlgorithm=function(t){return t=t.toUpperCase(),t in n.cipher.algorithms?n.cipher.algorithms[t]:null};var i=n.cipher.BlockCipher=function(t){this.algorithm=t.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=t.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=t.decrypt,this.algorithm.initialize(t)};i.prototype.start=function(t){t=t||{};var e={};for(var r in t)e[r]=t[r];e.decrypt=this._decrypt,this._finish=!1,this._input=n.util.createBuffer(),this.output=t.output||n.util.createBuffer(),this.mode.start(e)},i.prototype.update=function(t){t&&this._input.putBuffer(t);while(!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish);this._input.compact()},i.prototype.finish=function(t){!t||"ECB"!==this.mode.name&&"CBC"!==this.mode.name||(this.mode.pad=function(e){return t(this.blockSize,e,!1)},this.mode.unpad=function(e){return t(this.blockSize,e,!0)});var e={};return e.decrypt=this._decrypt,e.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,e))&&(this._finish=!0,this.update(),!(this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,e))&&!(this.mode.afterFinish&&!this.mode.afterFinish(this.output,e)))}},2009:function(t,e,r){r(2262),r(4506),r(1703);var n=r(5736);r(4292),n.cipher=n.cipher||{};var i=t.exports=n.cipher.modes=n.cipher.modes||{};function s(t,e){if("string"===typeof t&&(t=n.util.createBuffer(t)),n.util.isArray(t)&&t.length>4){var r=t;t=n.util.createBuffer();for(var i=0;i<r.length;++i)t.putByte(r[i])}if(t.length()<e)throw new Error("Invalid IV length; got "+t.length()+" bytes and expected "+e+" bytes.");if(!n.util.isArray(t)){var s=[],o=e/4;for(i=0;i<o;++i)s.push(t.getInt32());t=s}return t}function o(t){t[t.length-1]=t[t.length-1]+1&4294967295}function a(t){return[t/4294967296|0,4294967295&t]}i.ecb=function(t){t=t||{},this.name="ECB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},i.ecb.prototype.start=function(t){},i.ecb.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])},i.ecb.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])},i.ecb.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0},i.ecb.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return!(n>this.blockSize<<2)&&(t.truncate(n),!0)},i.cbc=function(t){t=t||{},this.name="CBC",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},i.cbc.prototype.start=function(t){if(null===t.iv){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else{if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=s(t.iv,this.blockSize),this._prev=this._iv.slice(0)}},i.cbc.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(n=0;n<this._ints;++n)e.putInt32(this._outBlock[n]);this._prev=this._outBlock},i.cbc.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(n=0;n<this._ints;++n)e.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)},i.cbc.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0},i.cbc.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return!(n>this.blockSize<<2)&&(t.truncate(n),!0)},i.cfb=function(t){t=t||{},this.name="CFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=n.util.createBuffer(),this._partialBytes=0},i.cfb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=s(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},i.cfb.prototype.encrypt=function(t,e,r){var n=t.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32()^this._outBlock[i],e.putInt32(this._inBlock[i]);else{var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(s>0)t.read-=this.blockSize;else for(i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},i.cfb.prototype.decrypt=function(t,e,r){var n=t.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32(),e.putInt32(this._inBlock[i]^this._outBlock[i]);else{var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(s>0)t.read-=this.blockSize;else for(i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},i.ofb=function(t){t=t||{},this.name="OFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=n.util.createBuffer(),this._partialBytes=0},i.ofb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=s(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},i.ofb.prototype.encrypt=function(t,e,r){var n=t.length();if(0===t.length())return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];else{var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(s>0)t.read-=this.blockSize;else for(i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},i.ofb.prototype.decrypt=i.ofb.prototype.encrypt,i.ctr=function(t){t=t||{},this.name="CTR",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=n.util.createBuffer(),this._partialBytes=0},i.ctr.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=s(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},i.ctr.prototype.encrypt=function(t,e,r){var n=t.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]);else{var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(s>0&&(t.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}o(this._inBlock)},i.ctr.prototype.decrypt=i.ctr.prototype.encrypt,i.gcm=function(t){t=t||{},this.name="GCM",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=n.util.createBuffer(),this._partialBytes=0,this._R=3774873600},i.gcm.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");var e,r=n.util.createBuffer(t.iv);if(this._cipherLength=0,e="additionalData"in t?n.util.createBuffer(t.additionalData):n.util.createBuffer(),this._tagLength="tagLength"in t?t.tagLength:128,this._tag=null,t.decrypt&&(this._tag=n.util.createBuffer(t.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var i=r.length();if(12===i)this._j0=[r.getInt32(),r.getInt32(),r.getInt32(),1];else{this._j0=[0,0,0,0];while(r.length()>0)this._j0=this.ghash(this._hashSubkey,this._j0,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(a(8*i)))}this._inBlock=this._j0.slice(0),o(this._inBlock),this._partialBytes=0,e=n.util.createBuffer(e),this._aDataLength=a(8*e.length());var s=e.length()%this.blockSize;s&&e.fillWithByte(0,this.blockSize-s),this._s=[0,0,0,0];while(e.length()>0)this._s=this.ghash(this._hashSubkey,this._s,[e.getInt32(),e.getInt32(),e.getInt32(),e.getInt32()])},i.gcm.prototype.encrypt=function(t,e,r){var n=t.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize){for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^=t.getInt32());this._cipherLength+=this.blockSize}else{var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(s<=0||r){if(r){var a=n%this.blockSize;this._cipherLength+=a,this._partialOutput.truncate(this.blockSize-a)}else this._cipherLength+=this.blockSize;for(i=0;i<this._ints;++i)this._outBlock[i]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.read-=this.blockSize,e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),o(this._inBlock)},i.gcm.prototype.decrypt=function(t,e,r){var n=t.length();if(n<this.blockSize&&!(r&&n>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),o(this._inBlock),this._hashBlock[0]=t.getInt32(),this._hashBlock[1]=t.getInt32(),this._hashBlock[2]=t.getInt32(),this._hashBlock[3]=t.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^this._hashBlock[i]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize},i.gcm.prototype.afterFinish=function(t,e){var r=!0;e.decrypt&&e.overflow&&t.truncate(this.blockSize-e.overflow),this.tag=n.util.createBuffer();var i=this._aDataLength.concat(a(8*this._cipherLength));this._s=this.ghash(this._hashSubkey,this._s,i);var s=[];this.cipher.encrypt(this._j0,s);for(var o=0;o<this._ints;++o)this.tag.putInt32(this._s[o]^s[o]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),e.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r},i.gcm.prototype.multiply=function(t,e){for(var r=[0,0,0,0],n=e.slice(0),i=0;i<128;++i){var s=t[i/32|0]&1<<31-i%32;s&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n)}return r},i.gcm.prototype.pow=function(t,e){for(var r=1&t[3],n=3;n>0;--n)e[n]=t[n]>>>1|(1&t[n-1])<<31;e[0]=t[0]>>>1,r&&(e[0]^=this._R)},i.gcm.prototype.tableMultiply=function(t){for(var e=[0,0,0,0],r=0;r<32;++r){var n=r/8|0,i=t[n]>>>4*(7-r%8)&15,s=this._m[r][i];e[0]^=s[0],e[1]^=s[1],e[2]^=s[2],e[3]^=s[3]}return e},i.gcm.prototype.ghash=function(t,e,r){return e[0]^=r[0],e[1]^=r[1],e[2]^=r[2],e[3]^=r[3],this.tableMultiply(e)},i.gcm.prototype.generateHashTable=function(t,e){for(var r=8/e,n=4*r,i=16*r,s=new Array(i),o=0;o<i;++o){var a=[0,0,0,0],c=o/n|0,u=(n-1-o%n)*e;a[c]=1<<e-1<<u,s[o]=this.generateSubHashTable(this.multiply(a,t),e)}return s},i.gcm.prototype.generateSubHashTable=function(t,e){var r=1<<e,n=r>>>1,i=new Array(r);i[n]=t.slice(0);var s=n>>>1;while(s>0)this.pow(i[2*s],i[s]=[]),s>>=1;s=2;while(s<n){for(var o=1;o<s;++o){var a=i[s],c=i[o];i[s+o]=[a[0]^c[0],a[1]^c[1],a[2]^c[2],a[3]^c[3]]}s*=2}for(i[0]=[0,0,0,0],s=n+1;s<r;++s){var u=i[s^n];i[s]=[t[0]^u[0],t[1]^u[1],t[2]^u[2],t[3]^u[3]]}return i}},8577:function(t,e,r){r(1703);var n=r(5736);function i(t,e){var r=function(){return new n.des.Algorithm(t,e)};n.cipher.registerAlgorithm(t,r)}r(298),r(2009),r(4292),t.exports=n.des=n.des||{},n.des.startEncrypting=function(t,e,r,n){var i=g({key:t,output:r,decrypt:!1,mode:n||(null===e?"ECB":"CBC")});return i.start(e),i},n.des.createEncryptionCipher=function(t,e){return g({key:t,output:null,decrypt:!1,mode:e})},n.des.startDecrypting=function(t,e,r,n){var i=g({key:t,output:r,decrypt:!0,mode:n||(null===e?"ECB":"CBC")});return i.start(e),i},n.des.createDecryptionCipher=function(t,e){return g({key:t,output:null,decrypt:!0,mode:e})},n.des.Algorithm=function(t,e){var r=this;r.name=t,r.mode=new e({blockSize:8,cipher:{encrypt:function(t,e){return p(r._keys,t,e,!1)},decrypt:function(t,e){return p(r._keys,t,e,!0)}}}),r._init=!1},n.des.Algorithm.prototype.initialize=function(t){if(!this._init){var e=n.util.createBuffer(t.key);if(0===this.name.indexOf("3DES")&&24!==e.length())throw new Error("Invalid Triple-DES key size: "+8*e.length());this._keys=f(e),this._init=!0}},i("DES-ECB",n.cipher.modes.ecb),i("DES-CBC",n.cipher.modes.cbc),i("DES-CFB",n.cipher.modes.cfb),i("DES-OFB",n.cipher.modes.ofb),i("DES-CTR",n.cipher.modes.ctr),i("3DES-ECB",n.cipher.modes.ecb),i("3DES-CBC",n.cipher.modes.cbc),i("3DES-CFB",n.cipher.modes.cfb),i("3DES-OFB",n.cipher.modes.ofb),i("3DES-CTR",n.cipher.modes.ctr);var s=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],o=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],a=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],c=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],u=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],l=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],h=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],d=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function f(t){for(var e,r=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],n=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],i=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],s=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],o=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],a=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],c=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],u=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],l=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],h=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],d=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],f=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],p=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],g=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],y=t.length()>8?3:1,m=[],w=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],v=0,E=0;E<y;E++){var b=t.getInt32(),S=t.getInt32();e=252645135&(b>>>4^S),S^=e,b^=e<<4,e=65535&(S>>>-16^b),b^=e,S^=e<<-16,e=858993459&(b>>>2^S),S^=e,b^=e<<2,e=65535&(S>>>-16^b),b^=e,S^=e<<-16,e=1431655765&(b>>>1^S),S^=e,b^=e<<1,e=16711935&(S>>>8^b),b^=e,S^=e<<8,e=1431655765&(b>>>1^S),S^=e,b^=e<<1,e=b<<8|S>>>20&240,b=S<<24|S<<8&16711680|S>>>8&65280|S>>>24&240,S=e;for(var _=0;_<w.length;++_){w[_]?(b=b<<2|b>>>26,S=S<<2|S>>>26):(b=b<<1|b>>>27,S=S<<1|S>>>27),b&=-15,S&=-15;var R=r[b>>>28]|n[b>>>24&15]|i[b>>>20&15]|s[b>>>16&15]|o[b>>>12&15]|a[b>>>8&15]|c[b>>>4&15],I=u[S>>>28]|l[S>>>24&15]|h[S>>>20&15]|d[S>>>16&15]|f[S>>>12&15]|p[S>>>8&15]|g[S>>>4&15];e=65535&(I>>>16^R),m[v++]=R^e,m[v++]=I^e<<16}}return m}function p(t,e,r,n){var i,f,p=32===t.length?3:9;i=3===p?n?[30,-2,-2]:[0,32,2]:n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var g=e[0],y=e[1];f=252645135&(g>>>4^y),y^=f,g^=f<<4,f=65535&(g>>>16^y),y^=f,g^=f<<16,f=858993459&(y>>>2^g),g^=f,y^=f<<2,f=16711935&(y>>>8^g),g^=f,y^=f<<8,f=1431655765&(g>>>1^y),y^=f,g^=f<<1,g=g<<1|g>>>31,y=y<<1|y>>>31;for(var m=0;m<p;m+=3){for(var w=i[m+1],v=i[m+2],E=i[m];E!=w;E+=v){var b=y^t[E],S=(y>>>4|y<<28)^t[E+1];f=g,g=y,y=f^(o[b>>>24&63]|c[b>>>16&63]|l[b>>>8&63]|d[63&b]|s[S>>>24&63]|a[S>>>16&63]|u[S>>>8&63]|h[63&S])}f=g,g=y,y=f}g=g>>>1|g<<31,y=y>>>1|y<<31,f=1431655765&(g>>>1^y),y^=f,g^=f<<1,f=16711935&(y>>>8^g),g^=f,y^=f<<8,f=858993459&(y>>>2^g),g^=f,y^=f<<2,f=65535&(g>>>16^y),y^=f,g^=f<<16,f=252645135&(g>>>4^y),y^=f,g^=f<<4,r[0]=g,r[1]=y}function g(t){t=t||{};var e,r=(t.mode||"CBC").toUpperCase(),i="DES-"+r;e=t.decrypt?n.cipher.createDecipher(i,t.key):n.cipher.createCipher(i,t.key);var s=e.start;return e.start=function(t,r){var i=null;r instanceof n.util.ByteBuffer&&(i=r,r={}),r=r||{},r.output=i,r.iv=t,s.call(e,r)},e}},5736:function(t){t.exports={options:{usePureJavaScript:!1}}},4881:function(t,e,r){r(1703),r(2262),r(4506);var n=r(5736);r(4038),r(4292);var i=t.exports=n.hmac=n.hmac||{};i.create=function(){var t=null,e=null,r=null,i=null,s={start:function(s,o){if(null!==s)if("string"===typeof s){if(s=s.toLowerCase(),!(s in n.md.algorithms))throw new Error('Unknown hash algorithm "'+s+'"');e=n.md.algorithms[s].create()}else e=s;if(null===o)o=t;else{if("string"===typeof o)o=n.util.createBuffer(o);else if(n.util.isArray(o)){var a=o;o=n.util.createBuffer();for(var c=0;c<a.length;++c)o.putByte(a[c])}var u=o.length();u>e.blockLength&&(e.start(),e.update(o.bytes()),o=e.digest()),r=n.util.createBuffer(),i=n.util.createBuffer(),u=o.length();for(c=0;c<u;++c){a=o.at(c);r.putByte(54^a),i.putByte(92^a)}if(u<e.blockLength)for(a=e.blockLength-u,c=0;c<a;++c)r.putByte(54),i.putByte(92);t=o,r=r.bytes(),i=i.bytes()}e.start(),e.update(r)},update:function(t){e.update(t)},getMac:function(){var t=e.digest().bytes();return e.start(),e.update(i),e.update(t),e.digest()}};return s.digest=s.getMac,s}},5970:function(t,e,r){var n,i=r(5736);t.exports=i.jsbn=i.jsbn||{};var s=0xdeadbeefcafe,o=15715070==(16777215&s);function a(t,e,r){this.data=[],null!=t&&("number"==typeof t?this.fromNumber(t,e,r):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))}function c(){return new a(null)}function u(t,e,r,n,i,s){while(--s>=0){var o=e*this.data[t++]+r.data[n]+i;i=Math.floor(o/67108864),r.data[n++]=67108863&o}return i}function l(t,e,r,n,i,s){var o=32767&e,a=e>>15;while(--s>=0){var c=32767&this.data[t],u=this.data[t++]>>15,l=a*c+u*o;c=o*c+((32767&l)<<15)+r.data[n]+(1073741823&i),i=(c>>>30)+(l>>>15)+a*u+(i>>>30),r.data[n++]=1073741823&c}return i}function h(t,e,r,n,i,s){var o=16383&e,a=e>>14;while(--s>=0){var c=16383&this.data[t],u=this.data[t++]>>14,l=a*c+u*o;c=o*c+((16383&l)<<14)+r.data[n]+i,i=(c>>28)+(l>>14)+a*u,r.data[n++]=268435455&c}return i}i.jsbn.BigInteger=a,"undefined"===typeof navigator?(a.prototype.am=h,n=28):o&&"Microsoft Internet Explorer"==navigator.appName?(a.prototype.am=l,n=30):o&&"Netscape"!=navigator.appName?(a.prototype.am=u,n=26):(a.prototype.am=h,n=28),a.prototype.DB=n,a.prototype.DM=(1<<n)-1,a.prototype.DV=1<<n;var d=52;a.prototype.FV=Math.pow(2,d),a.prototype.F1=d-n,a.prototype.F2=2*n-d;var f,p,g="0123456789abcdefghijklmnopqrstuvwxyz",y=new Array;for(f="0".charCodeAt(0),p=0;p<=9;++p)y[f++]=p;for(f="a".charCodeAt(0),p=10;p<36;++p)y[f++]=p;for(f="A".charCodeAt(0),p=10;p<36;++p)y[f++]=p;function m(t){return g.charAt(t)}function w(t,e){var r=y[t.charCodeAt(e)];return null==r?-1:r}function v(t){for(var e=this.t-1;e>=0;--e)t.data[e]=this.data[e];t.t=this.t,t.s=this.s}function E(t){this.t=1,this.s=t<0?-1:0,t>0?this.data[0]=t:t<-1?this.data[0]=t+this.DV:this.t=0}function b(t){var e=c();return e.fromInt(t),e}function S(t,e){var r;if(16==e)r=4;else if(8==e)r=3;else if(256==e)r=8;else if(2==e)r=1;else if(32==e)r=5;else{if(4!=e)return void this.fromRadix(t,e);r=2}this.t=0,this.s=0;var n=t.length,i=!1,s=0;while(--n>=0){var o=8==r?255&t[n]:w(t,n);o<0?"-"==t.charAt(n)&&(i=!0):(i=!1,0==s?this.data[this.t++]=o:s+r>this.DB?(this.data[this.t-1]|=(o&(1<<this.DB-s)-1)<<s,this.data[this.t++]=o>>this.DB-s):this.data[this.t-1]|=o<<s,s+=r,s>=this.DB&&(s-=this.DB))}8==r&&0!=(128&t[0])&&(this.s=-1,s>0&&(this.data[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),i&&a.ZERO.subTo(this,this)}function _(){var t=this.s&this.DM;while(this.t>0&&this.data[this.t-1]==t)--this.t}function R(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var r,n=(1<<e)-1,i=!1,s="",o=this.t,a=this.DB-o*this.DB%e;if(o-- >0){a<this.DB&&(r=this.data[o]>>a)>0&&(i=!0,s=m(r));while(o>=0)a<e?(r=(this.data[o]&(1<<a)-1)<<e-a,r|=this.data[--o]>>(a+=this.DB-e)):(r=this.data[o]>>(a-=e)&n,a<=0&&(a+=this.DB,--o)),r>0&&(i=!0),i&&(s+=m(r))}return i?s:"0"}function I(){var t=c();return a.ZERO.subTo(this,t),t}function C(){return this.s<0?this.negate():this}function A(t){var e=this.s-t.s;if(0!=e)return e;var r=this.t;if(e=r-t.t,0!=e)return this.s<0?-e:e;while(--r>=0)if(0!=(e=this.data[r]-t.data[r]))return e;return 0}function T(t){var e,r=1;return 0!=(e=t>>>16)&&(t=e,r+=16),0!=(e=t>>8)&&(t=e,r+=8),0!=(e=t>>4)&&(t=e,r+=4),0!=(e=t>>2)&&(t=e,r+=2),0!=(e=t>>1)&&(t=e,r+=1),r}function k(){return this.t<=0?0:this.DB*(this.t-1)+T(this.data[this.t-1]^this.s&this.DM)}function P(t,e){var r;for(r=this.t-1;r>=0;--r)e.data[r+t]=this.data[r];for(r=t-1;r>=0;--r)e.data[r]=0;e.t=this.t+t,e.s=this.s}function N(t,e){for(var r=t;r<this.t;++r)e.data[r-t]=this.data[r];e.t=Math.max(this.t-t,0),e.s=this.s}function L(t,e){var r,n=t%this.DB,i=this.DB-n,s=(1<<i)-1,o=Math.floor(t/this.DB),a=this.s<<n&this.DM;for(r=this.t-1;r>=0;--r)e.data[r+o+1]=this.data[r]>>i|a,a=(this.data[r]&s)<<n;for(r=o-1;r>=0;--r)e.data[r]=0;e.data[o]=a,e.t=this.t+o+1,e.s=this.s,e.clamp()}function D(t,e){e.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t)e.t=0;else{var n=t%this.DB,i=this.DB-n,s=(1<<n)-1;e.data[0]=this.data[r]>>n;for(var o=r+1;o<this.t;++o)e.data[o-r-1]|=(this.data[o]&s)<<i,e.data[o-r]=this.data[o]>>n;n>0&&(e.data[this.t-r-1]|=(this.s&s)<<i),e.t=this.t-r,e.clamp()}}function O(t,e){var r=0,n=0,i=Math.min(t.t,this.t);while(r<i)n+=this.data[r]-t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){n-=t.s;while(r<this.t)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{n+=this.s;while(r<t.t)n-=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n-=t.s}e.s=n<0?-1:0,n<-1?e.data[r++]=this.DV+n:n>0&&(e.data[r++]=n),e.t=r,e.clamp()}function B(t,e){var r=this.abs(),n=t.abs(),i=r.t;e.t=i+n.t;while(--i>=0)e.data[i]=0;for(i=0;i<n.t;++i)e.data[i+r.t]=r.am(0,n.data[i],e,i,0,r.t);e.s=0,e.clamp(),this.s!=t.s&&a.ZERO.subTo(e,e)}function x(t){var e=this.abs(),r=t.t=2*e.t;while(--r>=0)t.data[r]=0;for(r=0;r<e.t-1;++r){var n=e.am(r,e.data[r],t,2*r,0,1);(t.data[r+e.t]+=e.am(r+1,2*e.data[r],t,2*r+1,n,e.t-r-1))>=e.DV&&(t.data[r+e.t]-=e.DV,t.data[r+e.t+1]=1)}t.t>0&&(t.data[t.t-1]+=e.am(r,e.data[r],t,2*r,0,1)),t.s=0,t.clamp()}function U(t,e,r){var n=t.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t)return null!=e&&e.fromInt(0),void(null!=r&&this.copyTo(r));null==r&&(r=c());var s=c(),o=this.s,u=t.s,l=this.DB-T(n.data[n.t-1]);l>0?(n.lShiftTo(l,s),i.lShiftTo(l,r)):(n.copyTo(s),i.copyTo(r));var h=s.t,d=s.data[h-1];if(0!=d){var f=d*(1<<this.F1)+(h>1?s.data[h-2]>>this.F2:0),p=this.FV/f,g=(1<<this.F1)/f,y=1<<this.F2,m=r.t,w=m-h,v=null==e?c():e;s.dlShiftTo(w,v),r.compareTo(v)>=0&&(r.data[r.t++]=1,r.subTo(v,r)),a.ONE.dlShiftTo(h,v),v.subTo(s,s);while(s.t<h)s.data[s.t++]=0;while(--w>=0){var E=r.data[--m]==d?this.DM:Math.floor(r.data[m]*p+(r.data[m-1]+y)*g);if((r.data[m]+=s.am(0,E,r,w,0,h))<E){s.dlShiftTo(w,v),r.subTo(v,r);while(r.data[m]<--E)r.subTo(v,r)}}null!=e&&(r.drShiftTo(h,e),o!=u&&a.ZERO.subTo(e,e)),r.t=h,r.clamp(),l>0&&r.rShiftTo(l,r),o<0&&a.ZERO.subTo(r,r)}}}function M(t){var e=c();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(a.ZERO)>0&&t.subTo(e,e),e}function V(t){this.m=t}function K(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function F(t){return t}function j(t){t.divRemTo(this.m,null,t)}function q(t,e,r){t.multiplyTo(e,r),this.reduce(r)}function H(t,e){t.squareTo(e),this.reduce(e)}function G(){if(this.t<1)return 0;var t=this.data[0];if(0==(1&t))return 0;var e=3&t;return e=e*(2-(15&t)*e)&15,e=e*(2-(255&t)*e)&255,e=e*(2-((65535&t)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function z(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function $(t){var e=c();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(a.ZERO)>0&&this.m.subTo(e,e),e}function W(t){var e=c();return t.copyTo(e),this.reduce(e),e}function Y(t){while(t.t<=this.mt2)t.data[t.t++]=0;for(var e=0;e<this.m.t;++e){var r=32767&t.data[e],n=r*this.mpl+((r*this.mph+(t.data[e]>>15)*this.mpl&this.um)<<15)&t.DM;r=e+this.m.t,t.data[r]+=this.m.am(0,n,t,e,0,this.m.t);while(t.data[r]>=t.DV)t.data[r]-=t.DV,t.data[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function Q(t,e){t.squareTo(e),this.reduce(e)}function X(t,e,r){t.multiplyTo(e,r),this.reduce(r)}function J(){return 0==(this.t>0?1&this.data[0]:this.s)}function Z(t,e){if(t>4294967295||t<1)return a.ONE;var r=c(),n=c(),i=e.convert(this),s=T(t)-1;i.copyTo(r);while(--s>=0)if(e.sqrTo(r,n),(t&1<<s)>0)e.mulTo(n,i,r);else{var o=r;r=n,n=o}return e.revert(r)}function tt(t,e){var r;return r=t<256||e.isEven()?new V(e):new z(e),this.exp(t,r)}function et(){var t=c();return this.copyTo(t),t}function rt(){if(this.s<0){if(1==this.t)return this.data[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this.data[0];if(0==this.t)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function nt(){return 0==this.t?this.s:this.data[0]<<24>>24}function it(){return 0==this.t?this.s:this.data[0]<<16>>16}function st(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function ot(){return this.s<0?-1:this.t<=0||1==this.t&&this.data[0]<=0?0:1}function at(t){if(null==t&&(t=10),0==this.signum()||t<2||t>36)return"0";var e=this.chunkSize(t),r=Math.pow(t,e),n=b(r),i=c(),s=c(),o="";this.divRemTo(n,i,s);while(i.signum()>0)o=(r+s.intValue()).toString(t).substr(1)+o,i.divRemTo(n,i,s);return s.intValue().toString(t)+o}function ct(t,e){this.fromInt(0),null==e&&(e=10);for(var r=this.chunkSize(e),n=Math.pow(e,r),i=!1,s=0,o=0,c=0;c<t.length;++c){var u=w(t,c);u<0?"-"==t.charAt(c)&&0==this.signum()&&(i=!0):(o=e*o+u,++s>=r&&(this.dMultiply(n),this.dAddOffset(o,0),s=0,o=0))}s>0&&(this.dMultiply(Math.pow(e,s)),this.dAddOffset(o,0)),i&&a.ZERO.subTo(this,this)}function ut(t,e,r){if("number"==typeof e)if(t<2)this.fromInt(1);else{this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(a.ONE.shiftLeft(t-1),mt,this),this.isEven()&&this.dAddOffset(1,0);while(!this.isProbablePrime(e))this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(a.ONE.shiftLeft(t-1),this)}else{var n=new Array,i=7&t;n.length=1+(t>>3),e.nextBytes(n),i>0?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256)}}function lt(){var t=this.t,e=new Array;e[0]=this.s;var r,n=this.DB-t*this.DB%8,i=0;if(t-- >0){n<this.DB&&(r=this.data[t]>>n)!=(this.s&this.DM)>>n&&(e[i++]=r|this.s<<this.DB-n);while(t>=0)n<8?(r=(this.data[t]&(1<<n)-1)<<8-n,r|=this.data[--t]>>(n+=this.DB-8)):(r=this.data[t]>>(n-=8)&255,n<=0&&(n+=this.DB,--t)),0!=(128&r)&&(r|=-256),0==i&&(128&this.s)!=(128&r)&&++i,(i>0||r!=this.s)&&(e[i++]=r)}return e}function ht(t){return 0==this.compareTo(t)}function dt(t){return this.compareTo(t)<0?this:t}function ft(t){return this.compareTo(t)>0?this:t}function pt(t,e,r){var n,i,s=Math.min(t.t,this.t);for(n=0;n<s;++n)r.data[n]=e(this.data[n],t.data[n]);if(t.t<this.t){for(i=t.s&this.DM,n=s;n<this.t;++n)r.data[n]=e(this.data[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=s;n<t.t;++n)r.data[n]=e(i,t.data[n]);r.t=t.t}r.s=e(this.s,t.s),r.clamp()}function gt(t,e){return t&e}function yt(t){var e=c();return this.bitwiseTo(t,gt,e),e}function mt(t,e){return t|e}function wt(t){var e=c();return this.bitwiseTo(t,mt,e),e}function vt(t,e){return t^e}function Et(t){var e=c();return this.bitwiseTo(t,vt,e),e}function bt(t,e){return t&~e}function St(t){var e=c();return this.bitwiseTo(t,bt,e),e}function _t(){for(var t=c(),e=0;e<this.t;++e)t.data[e]=this.DM&~this.data[e];return t.t=this.t,t.s=~this.s,t}function Rt(t){var e=c();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}function It(t){var e=c();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}function Ct(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}function At(){for(var t=0;t<this.t;++t)if(0!=this.data[t])return t*this.DB+Ct(this.data[t]);return this.s<0?this.t*this.DB:-1}function Tt(t){var e=0;while(0!=t)t&=t-1,++e;return e}function kt(){for(var t=0,e=this.s&this.DM,r=0;r<this.t;++r)t+=Tt(this.data[r]^e);return t}function Pt(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this.data[e]&1<<t%this.DB)}function Nt(t,e){var r=a.ONE.shiftLeft(t);return this.bitwiseTo(r,e,r),r}function Lt(t){return this.changeBit(t,mt)}function Dt(t){return this.changeBit(t,bt)}function Ot(t){return this.changeBit(t,vt)}function Bt(t,e){var r=0,n=0,i=Math.min(t.t,this.t);while(r<i)n+=this.data[r]+t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){n+=t.s;while(r<this.t)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{n+=this.s;while(r<t.t)n+=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=t.s}e.s=n<0?-1:0,n>0?e.data[r++]=n:n<-1&&(e.data[r++]=this.DV+n),e.t=r,e.clamp()}function xt(t){var e=c();return this.addTo(t,e),e}function Ut(t){var e=c();return this.subTo(t,e),e}function Mt(t){var e=c();return this.multiplyTo(t,e),e}function Vt(t){var e=c();return this.divRemTo(t,e,null),e}function Kt(t){var e=c();return this.divRemTo(t,null,e),e}function Ft(t){var e=c(),r=c();return this.divRemTo(t,e,r),new Array(e,r)}function jt(t){this.data[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function qt(t,e){if(0!=t){while(this.t<=e)this.data[this.t++]=0;this.data[e]+=t;while(this.data[e]>=this.DV)this.data[e]-=this.DV,++e>=this.t&&(this.data[this.t++]=0),++this.data[e]}}function Ht(){}function Gt(t){return t}function zt(t,e,r){t.multiplyTo(e,r)}function $t(t,e){t.squareTo(e)}function Wt(t){return this.exp(t,new Ht)}function Yt(t,e,r){var n,i=Math.min(this.t+t.t,e);r.s=0,r.t=i;while(i>0)r.data[--i]=0;for(n=r.t-this.t;i<n;++i)r.data[i+this.t]=this.am(0,t.data[i],r,i,0,this.t);for(n=Math.min(t.t,e);i<n;++i)this.am(0,t.data[i],r,i,0,e-i);r.clamp()}function Qt(t,e,r){--e;var n=r.t=this.t+t.t-e;r.s=0;while(--n>=0)r.data[n]=0;for(n=Math.max(e-this.t,0);n<t.t;++n)r.data[this.t+n-e]=this.am(e-n,t.data[n],r,0,0,this.t+n-e);r.clamp(),r.drShiftTo(1,r)}function Xt(t){this.r2=c(),this.q3=c(),a.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}function Jt(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=c();return t.copyTo(e),this.reduce(e),e}function Zt(t){return t}function te(t){t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);while(t.compareTo(this.r2)<0)t.dAddOffset(1,this.m.t+1);t.subTo(this.r2,t);while(t.compareTo(this.m)>=0)t.subTo(this.m,t)}function ee(t,e){t.squareTo(e),this.reduce(e)}function re(t,e,r){t.multiplyTo(e,r),this.reduce(r)}function ne(t,e){var r,n,i=t.bitLength(),s=b(1);if(i<=0)return s;r=i<18?1:i<48?3:i<144?4:i<768?5:6,n=i<8?new V(e):e.isEven()?new Xt(e):new z(e);var o=new Array,a=3,u=r-1,l=(1<<r)-1;if(o[1]=n.convert(this),r>1){var h=c();n.sqrTo(o[1],h);while(a<=l)o[a]=c(),n.mulTo(h,o[a-2],o[a]),a+=2}var d,f,p=t.t-1,g=!0,y=c();i=T(t.data[p])-1;while(p>=0){i>=u?d=t.data[p]>>i-u&l:(d=(t.data[p]&(1<<i+1)-1)<<u-i,p>0&&(d|=t.data[p-1]>>this.DB+i-u)),a=r;while(0==(1&d))d>>=1,--a;if((i-=a)<0&&(i+=this.DB,--p),g)o[d].copyTo(s),g=!1;else{while(a>1)n.sqrTo(s,y),n.sqrTo(y,s),a-=2;a>0?n.sqrTo(s,y):(f=s,s=y,y=f),n.mulTo(y,o[d],s)}while(p>=0&&0==(t.data[p]&1<<i))n.sqrTo(s,y),f=s,s=y,y=f,--i<0&&(i=this.DB-1,--p)}return n.revert(s)}function ie(t){var e=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(e.compareTo(r)<0){var n=e;e=r,r=n}var i=e.getLowestSetBit(),s=r.getLowestSetBit();if(s<0)return e;i<s&&(s=i),s>0&&(e.rShiftTo(s,e),r.rShiftTo(s,r));while(e.signum()>0)(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),e.compareTo(r)>=0?(e.subTo(r,e),e.rShiftTo(1,e)):(r.subTo(e,r),r.rShiftTo(1,r));return s>0&&r.lShiftTo(s,r),r}function se(t){if(t<=0)return 0;var e=this.DV%t,r=this.s<0?t-1:0;if(this.t>0)if(0==e)r=this.data[0]%t;else for(var n=this.t-1;n>=0;--n)r=(e*r+this.data[n])%t;return r}function oe(t){var e=t.isEven();if(this.isEven()&&e||0==t.signum())return a.ZERO;var r=t.clone(),n=this.clone(),i=b(1),s=b(0),o=b(0),c=b(1);while(0!=r.signum()){while(r.isEven())r.rShiftTo(1,r),e?(i.isEven()&&s.isEven()||(i.addTo(this,i),s.subTo(t,s)),i.rShiftTo(1,i)):s.isEven()||s.subTo(t,s),s.rShiftTo(1,s);while(n.isEven())n.rShiftTo(1,n),e?(o.isEven()&&c.isEven()||(o.addTo(this,o),c.subTo(t,c)),o.rShiftTo(1,o)):c.isEven()||c.subTo(t,c),c.rShiftTo(1,c);r.compareTo(n)>=0?(r.subTo(n,r),e&&i.subTo(o,i),s.subTo(c,s)):(n.subTo(r,n),e&&o.subTo(i,o),c.subTo(s,c))}return 0!=n.compareTo(a.ONE)?a.ZERO:c.compareTo(t)>=0?c.subtract(t):c.signum()<0?(c.addTo(t,c),c.signum()<0?c.add(t):c):c}V.prototype.convert=K,V.prototype.revert=F,V.prototype.reduce=j,V.prototype.mulTo=q,V.prototype.sqrTo=H,z.prototype.convert=$,z.prototype.revert=W,z.prototype.reduce=Y,z.prototype.mulTo=X,z.prototype.sqrTo=Q,a.prototype.copyTo=v,a.prototype.fromInt=E,a.prototype.fromString=S,a.prototype.clamp=_,a.prototype.dlShiftTo=P,a.prototype.drShiftTo=N,a.prototype.lShiftTo=L,a.prototype.rShiftTo=D,a.prototype.subTo=O,a.prototype.multiplyTo=B,a.prototype.squareTo=x,a.prototype.divRemTo=U,a.prototype.invDigit=G,a.prototype.isEven=J,a.prototype.exp=Z,a.prototype.toString=R,a.prototype.negate=I,a.prototype.abs=C,a.prototype.compareTo=A,a.prototype.bitLength=k,a.prototype.mod=M,a.prototype.modPowInt=tt,a.ZERO=b(0),a.ONE=b(1),Ht.prototype.convert=Gt,Ht.prototype.revert=Gt,Ht.prototype.mulTo=zt,Ht.prototype.sqrTo=$t,Xt.prototype.convert=Jt,Xt.prototype.revert=Zt,Xt.prototype.reduce=te,Xt.prototype.mulTo=re,Xt.prototype.sqrTo=ee;var ae=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],ce=(1<<26)/ae[ae.length-1];function ue(t){var e,r=this.abs();if(1==r.t&&r.data[0]<=ae[ae.length-1]){for(e=0;e<ae.length;++e)if(r.data[0]==ae[e])return!0;return!1}if(r.isEven())return!1;e=1;while(e<ae.length){var n=ae[e],i=e+1;while(i<ae.length&&n<ce)n*=ae[i++];n=r.modInt(n);while(e<i)if(n%ae[e++]==0)return!1}return r.millerRabin(t)}function le(t){var e=this.subtract(a.ONE),r=e.getLowestSetBit();if(r<=0)return!1;for(var n,i=e.shiftRight(r),s=he(),o=0;o<t;++o){do{n=new a(this.bitLength(),s)}while(n.compareTo(a.ONE)<=0||n.compareTo(e)>=0);var c=n.modPow(i,this);if(0!=c.compareTo(a.ONE)&&0!=c.compareTo(e)){var u=1;while(u++<r&&0!=c.compareTo(e))if(c=c.modPowInt(2,this),0==c.compareTo(a.ONE))return!1;if(0!=c.compareTo(e))return!1}}return!0}function he(){return{nextBytes:function(t){for(var e=0;e<t.length;++e)t[e]=Math.floor(256*Math.random())}}}a.prototype.chunkSize=st,a.prototype.toRadix=at,a.prototype.fromRadix=ct,a.prototype.fromNumber=ut,a.prototype.bitwiseTo=pt,a.prototype.changeBit=Nt,a.prototype.addTo=Bt,a.prototype.dMultiply=jt,a.prototype.dAddOffset=qt,a.prototype.multiplyLowerTo=Yt,a.prototype.multiplyUpperTo=Qt,a.prototype.modInt=se,a.prototype.millerRabin=le,a.prototype.clone=et,a.prototype.intValue=rt,a.prototype.byteValue=nt,a.prototype.shortValue=it,a.prototype.signum=ot,a.prototype.toByteArray=lt,a.prototype.equals=ht,a.prototype.min=dt,a.prototype.max=ft,a.prototype.and=yt,a.prototype.or=wt,a.prototype.xor=Et,a.prototype.andNot=St,a.prototype.not=_t,a.prototype.shiftLeft=Rt,a.prototype.shiftRight=It,a.prototype.getLowestSetBit=At,a.prototype.bitCount=kt,a.prototype.testBit=Pt,a.prototype.setBit=Lt,a.prototype.clearBit=Dt,a.prototype.flipBit=Ot,a.prototype.add=xt,a.prototype.subtract=Ut,a.prototype.multiply=Mt,a.prototype.divide=Vt,a.prototype.remainder=Kt,a.prototype.divideAndRemainder=Ft,a.prototype.modPow=ne,a.prototype.modInverse=oe,a.prototype.pow=Wt,a.prototype.gcd=ie,a.prototype.isProbablePrime=ue},4038:function(t,e,r){var n=r(5736);t.exports=n.md=n.md||{},n.md.algorithms=n.md.algorithms||{}},235:function(t,e,r){var n=r(5736);r(5219),t.exports=n.mgf=n.mgf||{},n.mgf.mgf1=n.mgf1},5219:function(t,e,r){var n=r(5736);r(4292),n.mgf=n.mgf||{};var i=t.exports=n.mgf.mgf1=n.mgf1=n.mgf1||{};i.create=function(t){var e={generate:function(e,r){for(var i=new n.util.ByteBuffer,s=Math.ceil(r/t.digestLength),o=0;o<s;o++){var a=new n.util.ByteBuffer;a.putInt32(o),t.start(),t.update(e+a.getBytes()),i.putBuffer(t.digest())}return i.truncate(i.length()-r),i.getBytes()}};return e}},9002:function(t,e,r){var n=r(5736);n.pki=n.pki||{};var i=t.exports=n.pki.oids=n.oids=n.oids||{};function s(t,e){i[t]=e,i[e]=t}function o(t,e){i[t]=e}s("1.2.840.113549.1.1.1","rsaEncryption"),s("1.2.840.113549.1.1.4","md5WithRSAEncryption"),s("1.2.840.113549.1.1.5","sha1WithRSAEncryption"),s("1.2.840.113549.1.1.7","RSAES-OAEP"),s("1.2.840.113549.1.1.8","mgf1"),s("1.2.840.113549.1.1.9","pSpecified"),s("1.2.840.113549.1.1.10","RSASSA-PSS"),s("1.2.840.113549.1.1.11","sha256WithRSAEncryption"),s("1.2.840.113549.1.1.12","sha384WithRSAEncryption"),s("1.2.840.113549.1.1.13","sha512WithRSAEncryption"),s("1.3.101.112","EdDSA25519"),s("1.2.840.10040.4.3","dsa-with-sha1"),s("1.3.14.3.2.7","desCBC"),s("1.3.14.3.2.26","sha1"),s("1.3.14.3.2.29","sha1WithRSASignature"),s("2.16.840.1.101.3.4.2.1","sha256"),s("2.16.840.1.101.3.4.2.2","sha384"),s("2.16.840.1.101.3.4.2.3","sha512"),s("2.16.840.1.101.3.4.2.4","sha224"),s("2.16.840.1.101.3.4.2.5","sha512-224"),s("2.16.840.1.101.3.4.2.6","sha512-256"),s("1.2.840.113549.2.2","md2"),s("1.2.840.113549.2.5","md5"),s("1.2.840.113549.1.7.1","data"),s("1.2.840.113549.1.7.2","signedData"),s("1.2.840.113549.1.7.3","envelopedData"),s("1.2.840.113549.1.7.4","signedAndEnvelopedData"),s("1.2.840.113549.1.7.5","digestedData"),s("1.2.840.113549.1.7.6","encryptedData"),s("1.2.840.113549.1.9.1","emailAddress"),s("1.2.840.113549.1.9.2","unstructuredName"),s("1.2.840.113549.1.9.3","contentType"),s("1.2.840.113549.1.9.4","messageDigest"),s("1.2.840.113549.1.9.5","signingTime"),s("1.2.840.113549.1.9.6","counterSignature"),s("1.2.840.113549.1.9.7","challengePassword"),s("1.2.840.113549.1.9.8","unstructuredAddress"),s("1.2.840.113549.1.9.14","extensionRequest"),s("1.2.840.113549.1.9.20","friendlyName"),s("1.2.840.113549.1.9.21","localKeyId"),s("1.2.840.113549.1.9.22.1","x509Certificate"),s("1.2.840.113549.1.12.10.1.1","keyBag"),s("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag"),s("1.2.840.113549.1.12.10.1.3","certBag"),s("1.2.840.113549.1.12.10.1.4","crlBag"),s("1.2.840.113549.1.12.10.1.5","secretBag"),s("1.2.840.113549.1.12.10.1.6","safeContentsBag"),s("1.2.840.113549.1.5.13","pkcs5PBES2"),s("1.2.840.113549.1.5.12","pkcs5PBKDF2"),s("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4"),s("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4"),s("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC"),s("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC"),s("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC"),s("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC"),s("1.2.840.113549.2.7","hmacWithSHA1"),s("1.2.840.113549.2.8","hmacWithSHA224"),s("1.2.840.113549.2.9","hmacWithSHA256"),s("1.2.840.113549.2.10","hmacWithSHA384"),s("1.2.840.113549.2.11","hmacWithSHA512"),s("1.2.840.113549.3.7","des-EDE3-CBC"),s("2.16.840.1.101.3.4.1.2","aes128-CBC"),s("2.16.840.1.101.3.4.1.22","aes192-CBC"),s("2.16.840.1.101.3.4.1.42","aes256-CBC"),s("2.5.4.3","commonName"),s("2.5.4.4","surname"),s("2.5.4.5","serialNumber"),s("2.5.4.6","countryName"),s("2.5.4.7","localityName"),s("2.5.4.8","stateOrProvinceName"),s("2.5.4.9","streetAddress"),s("2.5.4.10","organizationName"),s("2.5.4.11","organizationalUnitName"),s("2.5.4.12","title"),s("2.5.4.13","description"),s("2.5.4.15","businessCategory"),s("2.5.4.17","postalCode"),s("2.5.4.42","givenName"),s("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName"),s("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName"),s("2.16.840.1.113730.1.1","nsCertType"),s("2.16.840.1.113730.1.13","nsComment"),o("2.5.29.1","authorityKeyIdentifier"),o("2.5.29.2","keyAttributes"),o("2.5.29.3","certificatePolicies"),o("2.5.29.4","keyUsageRestriction"),o("2.5.29.5","policyMapping"),o("2.5.29.6","subtreesConstraint"),o("2.5.29.7","subjectAltName"),o("2.5.29.8","issuerAltName"),o("2.5.29.9","subjectDirectoryAttributes"),o("2.5.29.10","basicConstraints"),o("2.5.29.11","nameConstraints"),o("2.5.29.12","policyConstraints"),o("2.5.29.13","basicConstraints"),s("2.5.29.14","subjectKeyIdentifier"),s("2.5.29.15","keyUsage"),o("2.5.29.16","privateKeyUsagePeriod"),s("2.5.29.17","subjectAltName"),s("2.5.29.18","issuerAltName"),s("2.5.29.19","basicConstraints"),o("2.5.29.20","cRLNumber"),o("2.5.29.21","cRLReason"),o("2.5.29.22","expirationDate"),o("2.5.29.23","instructionCode"),o("2.5.29.24","invalidityDate"),o("2.5.29.25","cRLDistributionPoints"),o("2.5.29.26","issuingDistributionPoint"),o("2.5.29.27","deltaCRLIndicator"),o("2.5.29.28","issuingDistributionPoint"),o("2.5.29.29","certificateIssuer"),o("2.5.29.30","nameConstraints"),s("2.5.29.31","cRLDistributionPoints"),s("2.5.29.32","certificatePolicies"),o("2.5.29.33","policyMappings"),o("2.5.29.34","policyConstraints"),s("2.5.29.35","authorityKeyIdentifier"),o("2.5.29.36","policyConstraints"),s("2.5.29.37","extKeyUsage"),o("2.5.29.46","freshestCRL"),o("2.5.29.54","inhibitAnyPolicy"),s("1.3.6.1.4.1.11129.2.4.2","timestampList"),s("1.3.6.1.5.5.7.1.1","authorityInfoAccess"),s("1.3.6.1.5.5.7.3.1","serverAuth"),s("1.3.6.1.5.5.7.3.2","clientAuth"),s("1.3.6.1.5.5.7.3.3","codeSigning"),s("1.3.6.1.5.5.7.3.4","emailProtection"),s("1.3.6.1.5.5.7.3.8","timeStamping")},1352:function(t,e,r){r(1703),r(2262),r(4506);var n=r(5736);if(r(22),r(1041),r(8577),r(4038),r(9002),r(2515),r(7513),r(6412),r(2890),r(5070),r(4292),"undefined"===typeof i)var i=n.jsbn.BigInteger;var s=n.asn1,o=n.pki=n.pki||{};t.exports=o.pbe=n.pbe=n.pbe||{};var a=o.oids,c={name:"EncryptedPrivateKeyInfo",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},u={name:"PBES2Algorithms",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},l={name:"pkcs-12PbeParams",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"iterations"}]};function h(t,e){return t.start().update(e).digest().getBytes()}function d(t){var e;if(t){if(e=o.oids[s.derToOid(t)],!e){var r=new Error("Unsupported PRF OID.");throw r.oid=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}}else e="hmacWithSHA1";return f(e)}function f(t){var e=n.md;switch(t){case"hmacWithSHA224":e=n.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":t=t.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!e||!(t in e))throw new Error("Unknown hash algorithm: "+t);return e[t].create()}function p(t,e,r,i){var a=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,t),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,e.getBytes())]);return"hmacWithSHA1"!==i&&a.value.push(s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,n.util.hexToBytes(r.toString(16))),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(o.oids[i]).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.NULL,!1,"")])),a}o.encryptPrivateKeyInfo=function(t,e,r){r=r||{},r.saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var i,c,u,l=n.random.getBytesSync(r.saltSize),h=r.count,d=s.integerToDer(h);if(0===r.algorithm.indexOf("aes")||"des"===r.algorithm){var g,y,m;switch(r.algorithm){case"aes128":i=16,g=16,y=a["aes128-CBC"],m=n.aes.createEncryptionCipher;break;case"aes192":i=24,g=16,y=a["aes192-CBC"],m=n.aes.createEncryptionCipher;break;case"aes256":i=32,g=16,y=a["aes256-CBC"],m=n.aes.createEncryptionCipher;break;case"des":i=8,g=8,y=a["desCBC"],m=n.des.createEncryptionCipher;break;default:var w=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw w.algorithm=r.algorithm,w}var v="hmacWith"+r.prfAlgorithm.toUpperCase(),E=f(v),b=n.pkcs5.pbkdf2(e,l,h,i,E),S=n.random.getBytesSync(g),_=m(b);_.start(S),_.update(s.toDer(t)),_.finish(),u=_.output.getBytes();var R=p(l,d,i,v);c=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(a["pkcs5PBES2"]).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(a["pkcs5PBKDF2"]).getBytes()),R]),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(y).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,S)])])])}else{if("3des"!==r.algorithm){w=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw w.algorithm=r.algorithm,w}i=24;var I=new n.util.ByteBuffer(l);b=o.pbe.generatePkcs12Key(e,I,1,h,i),S=o.pbe.generatePkcs12Key(e,I,2,h,i),_=n.des.createEncryptionCipher(b);_.start(S),_.update(s.toDer(t)),_.finish(),u=_.output.getBytes(),c=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(a["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,l),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,d.getBytes())])])}var C=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[c,s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,u)]);return C},o.decryptPrivateKeyInfo=function(t,e){var r=null,i={},a=[];if(!s.validate(t,c,i,a)){var u=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw u.errors=a,u}var l=s.derToOid(i.encryptionOid),h=o.pbe.getCipher(l,i.encryptionParams,e),d=n.util.createBuffer(i.encryptedData);return h.update(d),h.finish()&&(r=s.fromDer(h.output)),r},o.encryptedPrivateKeyToPem=function(t,e){var r={type:"ENCRYPTED PRIVATE KEY",body:s.toDer(t).getBytes()};return n.pem.encode(r,{maxline:e})},o.encryptedPrivateKeyFromPem=function(t){var e=n.pem.decode(t)[0];if("ENCRYPTED PRIVATE KEY"!==e.type){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&"ENCRYPTED"===e.procType.type)throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return s.fromDer(e.body)},o.encryptRsaPrivateKey=function(t,e,r){if(r=r||{},!r.legacy){var i=o.wrapRsaPrivateKey(o.privateKeyToAsn1(t));return i=o.encryptPrivateKeyInfo(i,e,r),o.encryptedPrivateKeyToPem(i)}var a,c,u,l;switch(r.algorithm){case"aes128":a="AES-128-CBC",u=16,c=n.random.getBytesSync(16),l=n.aes.createEncryptionCipher;break;case"aes192":a="AES-192-CBC",u=24,c=n.random.getBytesSync(16),l=n.aes.createEncryptionCipher;break;case"aes256":a="AES-256-CBC",u=32,c=n.random.getBytesSync(16),l=n.aes.createEncryptionCipher;break;case"3des":a="DES-EDE3-CBC",u=24,c=n.random.getBytesSync(8),l=n.des.createEncryptionCipher;break;case"des":a="DES-CBC",u=8,c=n.random.getBytesSync(8),l=n.des.createEncryptionCipher;break;default:var h=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw h.algorithm=r.algorithm,h}var d=n.pbe.opensslDeriveBytes(e,c.substr(0,8),u),f=l(d);f.start(c),f.update(s.toDer(o.privateKeyToAsn1(t))),f.finish();var p={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:a,parameters:n.util.bytesToHex(c).toUpperCase()},body:f.output.getBytes()};return n.pem.encode(p)},o.decryptRsaPrivateKey=function(t,e){var r=null,i=n.pem.decode(t)[0];if("ENCRYPTED PRIVATE KEY"!==i.type&&"PRIVATE KEY"!==i.type&&"RSA PRIVATE KEY"!==i.type){var a=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw a.headerType=a,a}if(i.procType&&"ENCRYPTED"===i.procType.type){var c,u;switch(i.dekInfo.algorithm){case"DES-CBC":c=8,u=n.des.createDecryptionCipher;break;case"DES-EDE3-CBC":c=24,u=n.des.createDecryptionCipher;break;case"AES-128-CBC":c=16,u=n.aes.createDecryptionCipher;break;case"AES-192-CBC":c=24,u=n.aes.createDecryptionCipher;break;case"AES-256-CBC":c=32,u=n.aes.createDecryptionCipher;break;case"RC2-40-CBC":c=5,u=function(t){return n.rc2.createDecryptionCipher(t,40)};break;case"RC2-64-CBC":c=8,u=function(t){return n.rc2.createDecryptionCipher(t,64)};break;case"RC2-128-CBC":c=16,u=function(t){return n.rc2.createDecryptionCipher(t,128)};break;default:a=new Error('Could not decrypt private key; unsupported encryption algorithm "'+i.dekInfo.algorithm+'".');throw a.algorithm=i.dekInfo.algorithm,a}var l=n.util.hexToBytes(i.dekInfo.parameters),h=n.pbe.opensslDeriveBytes(e,l.substr(0,8),c),d=u(h);if(d.start(l),d.update(n.util.createBuffer(i.body)),!d.finish())return r;r=d.output.getBytes()}else r=i.body;return r="ENCRYPTED PRIVATE KEY"===i.type?o.decryptPrivateKeyInfo(s.fromDer(r),e):s.fromDer(r),null!==r&&(r=o.privateKeyFromAsn1(r)),r},o.pbe.generatePkcs12Key=function(t,e,r,i,s,o){var a,c;if("undefined"===typeof o||null===o){if(!("sha1"in n.md))throw new Error('"sha1" hash algorithm unavailable.');o=n.md.sha1.create()}var u=o.digestLength,l=o.blockLength,h=new n.util.ByteBuffer,d=new n.util.ByteBuffer;if(null!==t&&void 0!==t){for(c=0;c<t.length;c++)d.putInt16(t.charCodeAt(c));d.putInt16(0)}var f=d.length(),p=e.length(),g=new n.util.ByteBuffer;g.fillWithByte(r,l);var y=l*Math.ceil(p/l),m=new n.util.ByteBuffer;for(c=0;c<y;c++)m.putByte(e.at(c%p));var w=l*Math.ceil(f/l),v=new n.util.ByteBuffer;for(c=0;c<w;c++)v.putByte(d.at(c%f));var E=m;E.putBuffer(v);for(var b=Math.ceil(s/u),S=1;S<=b;S++){var _=new n.util.ByteBuffer;_.putBytes(g.bytes()),_.putBytes(E.bytes());for(var R=0;R<i;R++)o.start(),o.update(_.getBytes()),_=o.digest();var I=new n.util.ByteBuffer;for(c=0;c<l;c++)I.putByte(_.at(c%u));var C=Math.ceil(p/l)+Math.ceil(f/l),A=new n.util.ByteBuffer;for(a=0;a<C;a++){var T=new n.util.ByteBuffer(E.getBytes(l)),k=511;for(c=I.length()-1;c>=0;c--)k>>=8,k+=I.at(c)+T.at(c),T.setAt(c,255&k);A.putBuffer(T)}E=A,h.putBuffer(_)}return h.truncate(h.length()-s),h},o.pbe.getCipher=function(t,e,r){switch(t){case o.oids["pkcs5PBES2"]:return o.pbe.getCipherForPBES2(t,e,r);case o.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case o.oids["pbewithSHAAnd40BitRC2-CBC"]:return o.pbe.getCipherForPKCS12PBE(t,e,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=t,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}},o.pbe.getCipherForPBES2=function(t,e,r){var i={},a=[];if(!s.validate(e,u,i,a)){var c=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw c.errors=a,c}if(t=s.derToOid(i.kdfOid),t!==o.oids["pkcs5PBKDF2"]){c=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw c.oid=t,c.supportedOids=["pkcs5PBKDF2"],c}if(t=s.derToOid(i.encOid),t!==o.oids["aes128-CBC"]&&t!==o.oids["aes192-CBC"]&&t!==o.oids["aes256-CBC"]&&t!==o.oids["des-EDE3-CBC"]&&t!==o.oids["desCBC"]){c=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw c.oid=t,c.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],c}var l,h,f=i.kdfSalt,p=n.util.createBuffer(i.kdfIterationCount);switch(p=p.getInt(p.length()<<3),o.oids[t]){case"aes128-CBC":l=16,h=n.aes.createDecryptionCipher;break;case"aes192-CBC":l=24,h=n.aes.createDecryptionCipher;break;case"aes256-CBC":l=32,h=n.aes.createDecryptionCipher;break;case"des-EDE3-CBC":l=24,h=n.des.createDecryptionCipher;break;case"desCBC":l=8,h=n.des.createDecryptionCipher;break}var g=d(i.prfOid),y=n.pkcs5.pbkdf2(r,f,p,l,g),m=i.encIv,w=h(y);return w.start(m),w},o.pbe.getCipherForPKCS12PBE=function(t,e,r){var i={},a=[];if(!s.validate(e,l,i,a)){var c=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw c.errors=a,c}var u,h,f,p=n.util.createBuffer(i.salt),g=n.util.createBuffer(i.iterations);switch(g=g.getInt(g.length()<<3),t){case o.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:u=24,h=8,f=n.des.startDecrypting;break;case o.oids["pbewithSHAAnd40BitRC2-CBC"]:u=5,h=8,f=function(t,e){var r=n.rc2.createDecryptionCipher(t,40);return r.start(e,null),r};break;default:c=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw c.oid=t,c}var y=d(i.prfOid),m=o.pbe.generatePkcs12Key(r,p,1,g,u,y);y.start();var w=o.pbe.generatePkcs12Key(r,p,2,g,h,y);return f(m,w)},o.pbe.opensslDeriveBytes=function(t,e,r,i){if("undefined"===typeof i||null===i){if(!("md5"in n.md))throw new Error('"md5" hash algorithm unavailable.');i=n.md.md5.create()}null===e&&(e="");for(var s=[h(i,t+e)],o=16,a=1;o<r;++a,o+=16)s.push(h(i,s[a-1]+t+e));return s.join("").substr(0,r)}},2515:function(t,e,r){r(1703);var n=r(5736);r(4881),r(4038),r(4292);var i,s=n.pkcs5=n.pkcs5||{};n.util.isNodejs&&!n.options.usePureJavaScript&&(i=r(5819)),t.exports=n.pbkdf2=s.pbkdf2=function(t,e,r,s,o,a){if("function"===typeof o&&(a=o,o=null),n.util.isNodejs&&!n.options.usePureJavaScript&&i.pbkdf2&&(null===o||"object"!==typeof o)&&(i.pbkdf2Sync.length>4||!o||"sha1"===o))return"string"!==typeof o&&(o="sha1"),t=Buffer.from(t,"binary"),e=Buffer.from(e,"binary"),a?4===i.pbkdf2Sync.length?i.pbkdf2(t,e,r,s,(function(t,e){if(t)return a(t);a(null,e.toString("binary"))})):i.pbkdf2(t,e,r,s,o,(function(t,e){if(t)return a(t);a(null,e.toString("binary"))})):4===i.pbkdf2Sync.length?i.pbkdf2Sync(t,e,r,s).toString("binary"):i.pbkdf2Sync(t,e,r,s,o).toString("binary");if("undefined"!==typeof o&&null!==o||(o="sha1"),"string"===typeof o){if(!(o in n.md.algorithms))throw new Error("Unknown hash algorithm: "+o);o=n.md[o].create()}var c=o.digestLength;if(s>4294967295*c){var u=new Error("Derived key is too long.");if(a)return a(u);throw u}var l=Math.ceil(s/c),h=s-(l-1)*c,d=n.hmac.create();d.start(o,t);var f,p,g,y="";if(!a){for(var m=1;m<=l;++m){d.start(null,null),d.update(e),d.update(n.util.int32ToBytes(m)),f=g=d.digest().getBytes();for(var w=2;w<=r;++w)d.start(null,null),d.update(g),p=d.digest().getBytes(),f=n.util.xorBytes(f,p,c),g=p;y+=m<l?f:f.substr(0,h)}return y}m=1;function v(){if(m>l)return a(null,y);d.start(null,null),d.update(e),d.update(n.util.int32ToBytes(m)),f=g=d.digest().getBytes(),w=2,E()}function E(){if(w<=r)return d.start(null,null),d.update(g),p=d.digest().getBytes(),f=n.util.xorBytes(f,p,c),g=p,++w,n.util.setImmediate(E);y+=m<l?f:f.substr(0,h),++m,v()}v()}},7513:function(t,e,r){r(1703);var n=r(5736);r(4292);var i=t.exports=n.pem=n.pem||{};function s(t){for(var e=t.name+": ",r=[],n=function(t,e){return" "+e},i=0;i<t.values.length;++i)r.push(t.values[i].replace(/^(\S+\r\n)/,n));e+=r.join(",")+"\r\n";var s=0,o=-1;for(i=0;i<e.length;++i,++s)if(s>65&&-1!==o){var a=e[o];","===a?(++o,e=e.substr(0,o)+"\r\n "+e.substr(o)):e=e.substr(0,o)+"\r\n"+a+e.substr(o+1),s=i-o-1,o=-1,++i}else" "!==e[i]&&"\t"!==e[i]&&","!==e[i]||(o=i);return e}function o(t){return t.replace(/^\s+/,"")}i.encode=function(t,e){e=e||{};var r,i="-----BEGIN "+t.type+"-----\r\n";if(t.procType&&(r={name:"Proc-Type",values:[String(t.procType.version),t.procType.type]},i+=s(r)),t.contentDomain&&(r={name:"Content-Domain",values:[t.contentDomain]},i+=s(r)),t.dekInfo&&(r={name:"DEK-Info",values:[t.dekInfo.algorithm]},t.dekInfo.parameters&&r.values.push(t.dekInfo.parameters),i+=s(r)),t.headers)for(var o=0;o<t.headers.length;++o)i+=s(t.headers[o]);return t.procType&&(i+="\r\n"),i+=n.util.encode64(t.body,e.maxline||64)+"\r\n",i+="-----END "+t.type+"-----\r\n",i},i.decode=function(t){var e,r=[],i=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,s=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,a=/\r?\n/;while(1){if(e=i.exec(t),!e)break;var c=e[1];"NEW CERTIFICATE REQUEST"===c&&(c="CERTIFICATE REQUEST");var u={type:c,procType:null,contentDomain:null,dekInfo:null,headers:[],body:n.util.decode64(e[3])};if(r.push(u),e[2]){var l=e[2].split(a),h=0;while(e&&h<l.length){for(var d=l[h].replace(/\s+$/,""),f=h+1;f<l.length;++f){var p=l[f];if(!/\s/.test(p[0]))break;d+=p,h=f}if(e=d.match(s),e){for(var g={name:e[1],values:[]},y=e[2].split(","),m=0;m<y.length;++m)g.values.push(o(y[m]));if(u.procType)if(u.contentDomain||"Content-Domain"!==g.name)if(u.dekInfo||"DEK-Info"!==g.name)u.headers.push(g);else{if(0===g.values.length)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');u.dekInfo={algorithm:y[0],parameters:y[1]||null}}else u.contentDomain=y[0]||"";else{if("Proc-Type"!==g.name)throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(2!==g.values.length)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');u.procType={version:y[0],type:y[1]}}}++h}if("ENCRYPTED"===u.procType&&!u.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(0===r.length)throw new Error("Invalid PEM formatted message.");return r}},902:function(t,e,r){r(1703);var n=r(5736);r(4292),r(6412),r(989);var i=t.exports=n.pkcs1=n.pkcs1||{};function s(t,e,r){r||(r=n.md.sha1.create());for(var i="",s=Math.ceil(e/r.digestLength),o=0;o<s;++o){var a=String.fromCharCode(o>>24&255,o>>16&255,o>>8&255,255&o);r.start(),r.update(t+a),i+=r.digest().getBytes()}return i.substring(0,e)}i.encode_rsa_oaep=function(t,e,r){var i,o,a,c;"string"===typeof r?(i=r,o=arguments[3]||void 0,a=arguments[4]||void 0):r&&(i=r.label||void 0,o=r.seed||void 0,a=r.md||void 0,r.mgf1&&r.mgf1.md&&(c=r.mgf1.md)),a?a.start():a=n.md.sha1.create(),c||(c=a);var u=Math.ceil(t.n.bitLength()/8),l=u-2*a.digestLength-2;if(e.length>l){var h=new Error("RSAES-OAEP input message length is too long.");throw h.length=e.length,h.maxLength=l,h}i||(i=""),a.update(i,"raw");for(var d=a.digest(),f="",p=l-e.length,g=0;g<p;g++)f+="\0";var y=d.getBytes()+f+""+e;if(o){if(o.length!==a.digestLength){h=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw h.seedLength=o.length,h.digestLength=a.digestLength,h}}else o=n.random.getBytes(a.digestLength);var m=s(o,u-a.digestLength-1,c),w=n.util.xorBytes(y,m,y.length),v=s(w,a.digestLength,c),E=n.util.xorBytes(o,v,o.length);return"\0"+E+w},i.decode_rsa_oaep=function(t,e,r){var i,o,a;"string"===typeof r?(i=r,o=arguments[3]||void 0):r&&(i=r.label||void 0,o=r.md||void 0,r.mgf1&&r.mgf1.md&&(a=r.mgf1.md));var c=Math.ceil(t.n.bitLength()/8);if(e.length!==c){var u=new Error("RSAES-OAEP encoded message length is invalid.");throw u.length=e.length,u.expectedLength=c,u}if(void 0===o?o=n.md.sha1.create():o.start(),a||(a=o),c<2*o.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");i||(i=""),o.update(i,"raw");for(var l=o.digest().getBytes(),h=e.charAt(0),d=e.substring(1,o.digestLength+1),f=e.substring(1+o.digestLength),p=s(f,o.digestLength,a),g=n.util.xorBytes(d,p,d.length),y=s(g,c-o.digestLength-1,a),m=n.util.xorBytes(f,y,f.length),w=m.substring(0,o.digestLength),v=(u="\0"!==h,0);v<o.digestLength;++v)u|=l.charAt(v)!==w.charAt(v);for(var E=1,b=o.digestLength,S=o.digestLength;S<m.length;S++){var _=m.charCodeAt(S),R=1&_^1,I=E?65534:0;u|=_&I,E&=R,b+=E}if(u||1!==m.charCodeAt(b))throw new Error("Invalid RSAES-OAEP padding.");return m.substring(b+1)}},7323:function(t,e,r){r(1703);var n=r(5736);r(22),r(1041),r(8577),r(9002),r(7513),r(2193),r(6412),r(4292),r(8410);var i=n.asn1,s=t.exports=n.pkcs7=n.pkcs7||{};function o(t){var e={},r=[];if(!i.validate(t,s.asn1.recipientInfoValidator,e,r)){var o=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw o.errors=r,o}return{version:e.version.charCodeAt(0),issuer:n.pki.RDNAttributesAsArray(e.issuer),serialNumber:n.util.createBuffer(e.serial).toHex(),encryptedContent:{algorithm:i.derToOid(e.encAlgorithm),parameter:e.encParameter?e.encParameter.value:void 0,content:e.encKey}}}function a(t){return i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(t.version).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[n.pki.distinguishedNameToAsn1({attributes:t.issuer}),i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,n.util.hexToBytes(t.serialNumber))]),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.encryptedContent.algorithm).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")]),i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,t.encryptedContent.content)])}function c(t){for(var e=[],r=0;r<t.length;++r)e.push(o(t[r]));return e}function u(t){for(var e=[],r=0;r<t.length;++r)e.push(a(t[r]));return e}function l(t){var e=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(t.version).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[n.pki.distinguishedNameToAsn1({attributes:t.issuer}),i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,n.util.hexToBytes(t.serialNumber))]),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.digestAlgorithm).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")])]);if(t.authenticatedAttributesAsn1&&e.value.push(t.authenticatedAttributesAsn1),e.value.push(i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.signatureAlgorithm).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")])),e.value.push(i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,t.signature)),t.unauthenticatedAttributes.length>0){for(var r=i.create(i.Class.CONTEXT_SPECIFIC,1,!0,[]),s=0;s<t.unauthenticatedAttributes.length;++s){var o=t.unauthenticatedAttributes[s];r.values.push(d(o))}e.value.push(r)}return e}function h(t){for(var e=[],r=0;r<t.length;++r)e.push(l(t[r]));return e}function d(t){var e;if(t.type===n.pki.oids.contentType)e=i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.value).getBytes());else if(t.type===n.pki.oids.messageDigest)e=i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,t.value.bytes());else if(t.type===n.pki.oids.signingTime){var r=new Date("1950-01-01T00:00:00Z"),s=new Date("2050-01-01T00:00:00Z"),o=t.value;if("string"===typeof o){var a=Date.parse(o);o=isNaN(a)?13===o.length?i.utcTimeToDate(o):i.generalizedTimeToDate(o):new Date(a)}e=o>=r&&o<s?i.create(i.Class.UNIVERSAL,i.Type.UTCTIME,!1,i.dateToUtcTime(o)):i.create(i.Class.UNIVERSAL,i.Type.GENERALIZEDTIME,!1,i.dateToGeneralizedTime(o))}return i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.type).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SET,!0,[e])])}function f(t){return[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(n.pki.oids.data).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.algorithm).getBytes()),t.parameter?i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,t.parameter.getBytes()):void 0]),i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,t.content.getBytes())])]}function p(t,e,r){var s={},o=[];if(!i.validate(e,r,s,o)){var a=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw a.errors=a,a}var c=i.derToOid(s.contentType);if(c!==n.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(s.encryptedContent){var u="";if(n.util.isArray(s.encryptedContent))for(var l=0;l<s.encryptedContent.length;++l){if(s.encryptedContent[l].type!==i.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");u+=s.encryptedContent[l].value}else u=s.encryptedContent;t.encryptedContent={algorithm:i.derToOid(s.encAlgorithm),parameter:n.util.createBuffer(s.encParameter.value),content:n.util.createBuffer(u)}}if(s.content){u="";if(n.util.isArray(s.content))for(l=0;l<s.content.length;++l){if(s.content[l].type!==i.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");u+=s.content[l].value}else u=s.content;t.content=n.util.createBuffer(u)}return t.version=s.version.charCodeAt(0),t.rawCapture=s,s}function g(t){if(void 0===t.encryptedContent.key)throw new Error("Symmetric key not available.");if(void 0===t.content){var e;switch(t.encryptedContent.algorithm){case n.pki.oids["aes128-CBC"]:case n.pki.oids["aes192-CBC"]:case n.pki.oids["aes256-CBC"]:e=n.aes.createDecryptionCipher(t.encryptedContent.key);break;case n.pki.oids["desCBC"]:case n.pki.oids["des-EDE3-CBC"]:e=n.des.createDecryptionCipher(t.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+t.encryptedContent.algorithm)}if(e.start(t.encryptedContent.parameter),e.update(t.encryptedContent.content),!e.finish())throw new Error("Symmetric decryption failed.");t.content=e.output}}s.messageFromPem=function(t){var e=n.pem.decode(t)[0];if("PKCS7"!==e.type){var r=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw r.headerType=e.type,r}if(e.procType&&"ENCRYPTED"===e.procType.type)throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var o=i.fromDer(e.body);return s.messageFromAsn1(o)},s.messageToPem=function(t,e){var r={type:"PKCS7",body:i.toDer(t.toAsn1()).getBytes()};return n.pem.encode(r,{maxline:e})},s.messageFromAsn1=function(t){var e={},r=[];if(!i.validate(t,s.asn1.contentInfoValidator,e,r)){var o=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw o.errors=r,o}var a,c=i.derToOid(e.contentType);switch(c){case n.pki.oids.envelopedData:a=s.createEnvelopedData();break;case n.pki.oids.encryptedData:a=s.createEncryptedData();break;case n.pki.oids.signedData:a=s.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+c+" is not (yet) supported.")}return a.fromAsn1(e.content.value[0]),a},s.createSignedData=function(){var t=null;return t={type:n.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(e){if(p(t,e,s.asn1.signedDataValidator),t.certificates=[],t.crls=[],t.digestAlgorithmIdentifiers=[],t.contentInfo=null,t.signerInfos=[],t.rawCapture.certificates)for(var r=t.rawCapture.certificates.value,i=0;i<r.length;++i)t.certificates.push(n.pki.certificateFromAsn1(r[i]))},toAsn1:function(){t.contentInfo||t.sign();for(var e=[],r=0;r<t.certificates.length;++r)e.push(n.pki.certificateToAsn1(t.certificates[r]));var s=[],o=i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(t.version).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SET,!0,t.digestAlgorithmIdentifiers),t.contentInfo])]);return e.length>0&&o.value[0].value.push(i.create(i.Class.CONTEXT_SPECIFIC,0,!0,e)),s.length>0&&o.value[0].value.push(i.create(i.Class.CONTEXT_SPECIFIC,1,!0,s)),o.value[0].value.push(i.create(i.Class.UNIVERSAL,i.Type.SET,!0,t.signerInfos)),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.type).getBytes()),o])},addSigner:function(e){var r=e.issuer,i=e.serialNumber;if(e.certificate){var s=e.certificate;"string"===typeof s&&(s=n.pki.certificateFromPem(s)),r=s.issuer.attributes,i=s.serialNumber}var o=e.key;if(!o)throw new Error("Could not add PKCS#7 signer; no private key specified.");"string"===typeof o&&(o=n.pki.privateKeyFromPem(o));var a=e.digestAlgorithm||n.pki.oids.sha1;switch(a){case n.pki.oids.sha1:case n.pki.oids.sha256:case n.pki.oids.sha384:case n.pki.oids.sha512:case n.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+a)}var c=e.authenticatedAttributes||[];if(c.length>0){for(var u=!1,l=!1,h=0;h<c.length;++h){var d=c[h];if(u||d.type!==n.pki.oids.contentType){if(l||d.type!==n.pki.oids.messageDigest);else if(l=!0,u)break}else if(u=!0,l)break}if(!u||!l)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}t.signers.push({key:o,version:1,issuer:r,serialNumber:i,digestAlgorithm:a,signatureAlgorithm:n.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:c,unauthenticatedAttributes:[]})},sign:function(s){var o;(s=s||{},"object"!==typeof t.content||null===t.contentInfo)&&(t.contentInfo=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(n.pki.oids.data).getBytes())]),"content"in t&&(t.content instanceof n.util.ByteBuffer?o=t.content.bytes():"string"===typeof t.content&&(o=n.util.encodeUtf8(t.content)),s.detached?t.detachedContent=i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,o):t.contentInfo.value.push(i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,o)]))));if(0!==t.signers.length){var a=e();r(a)}},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(e){"string"===typeof e&&(e=n.pki.certificateFromPem(e)),t.certificates.push(e)},addCertificateRevokationList:function(t){throw new Error("PKCS#7 CRL support not yet implemented.")}},t;function e(){for(var e={},r=0;r<t.signers.length;++r){var s=t.signers[r],o=s.digestAlgorithm;o in e||(e[o]=n.md[n.pki.oids[o]].create()),0===s.authenticatedAttributes.length?s.md=e[o]:s.md=n.md[n.pki.oids[o]].create()}for(var o in t.digestAlgorithmIdentifiers=[],e)t.digestAlgorithmIdentifiers.push(i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(o).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")]));return e}function r(e){var r;if(t.detachedContent?r=t.detachedContent:(r=t.contentInfo.value[1],r=r.value[0]),!r)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var s=i.derToOid(t.contentInfo.value[0].value),o=i.toDer(r);for(var a in o.getByte(),i.getBerValueLength(o),o=o.getBytes(),e)e[a].start().update(o);for(var c=new Date,u=0;u<t.signers.length;++u){var l=t.signers[u];if(0===l.authenticatedAttributes.length){if(s!==n.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{l.authenticatedAttributesAsn1=i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var f=i.create(i.Class.UNIVERSAL,i.Type.SET,!0,[]),p=0;p<l.authenticatedAttributes.length;++p){var g=l.authenticatedAttributes[p];g.type===n.pki.oids.messageDigest?g.value=e[l.digestAlgorithm].digest():g.type===n.pki.oids.signingTime&&(g.value||(g.value=c)),f.value.push(d(g)),l.authenticatedAttributesAsn1.value.push(d(g))}o=i.toDer(f).getBytes(),l.md.start().update(o)}l.signature=l.key.sign(l.md,"RSASSA-PKCS1-V1_5")}t.signerInfos=h(t.signers)}},s.createEncryptedData=function(){var t=null;return t={type:n.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:n.pki.oids["aes256-CBC"]},fromAsn1:function(e){p(t,e,s.asn1.encryptedDataValidator)},decrypt:function(e){void 0!==e&&(t.encryptedContent.key=e),g(t)}},t},s.createEnvelopedData=function(){var t=null;return t={type:n.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:n.pki.oids["aes256-CBC"]},fromAsn1:function(e){var r=p(t,e,s.asn1.envelopedDataValidator);t.recipients=c(r.recipientInfos.value)},toAsn1:function(){return i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.type).getBytes()),i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(t.version).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SET,!0,u(t.recipients)),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,f(t.encryptedContent))])])])},findRecipient:function(e){for(var r=e.issuer.attributes,n=0;n<t.recipients.length;++n){var i=t.recipients[n],s=i.issuer;if(i.serialNumber===e.serialNumber&&s.length===r.length){for(var o=!0,a=0;a<r.length;++a)if(s[a].type!==r[a].type||s[a].value!==r[a].value){o=!1;break}if(o)return i}}return null},decrypt:function(e,r){if(void 0===t.encryptedContent.key&&void 0!==e&&void 0!==r)switch(e.encryptedContent.algorithm){case n.pki.oids.rsaEncryption:case n.pki.oids.desCBC:var i=r.decrypt(e.encryptedContent.content);t.encryptedContent.key=n.util.createBuffer(i);break;default:throw new Error("Unsupported asymmetric cipher, OID "+e.encryptedContent.algorithm)}g(t)},addRecipient:function(e){t.recipients.push({version:0,issuer:e.issuer.attributes,serialNumber:e.serialNumber,encryptedContent:{algorithm:n.pki.oids.rsaEncryption,key:e.publicKey}})},encrypt:function(e,r){if(void 0===t.encryptedContent.content){var i,s,o;switch(r=r||t.encryptedContent.algorithm,e=e||t.encryptedContent.key,r){case n.pki.oids["aes128-CBC"]:i=16,s=16,o=n.aes.createEncryptionCipher;break;case n.pki.oids["aes192-CBC"]:i=24,s=16,o=n.aes.createEncryptionCipher;break;case n.pki.oids["aes256-CBC"]:i=32,s=16,o=n.aes.createEncryptionCipher;break;case n.pki.oids["des-EDE3-CBC"]:i=24,s=8,o=n.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+r)}if(void 0===e)e=n.util.createBuffer(n.random.getBytes(i));else if(e.length()!=i)throw new Error("Symmetric key has wrong length; got "+e.length()+" bytes, expected "+i+".");t.encryptedContent.algorithm=r,t.encryptedContent.key=e,t.encryptedContent.parameter=n.util.createBuffer(n.random.getBytes(s));var a=o(e);if(a.start(t.encryptedContent.parameter.copy()),a.update(t.content),!a.finish())throw new Error("Symmetric encryption failed.");t.encryptedContent.content=a.output}for(var c=0;c<t.recipients.length;++c){var u=t.recipients[c];if(void 0===u.encryptedContent.content)switch(u.encryptedContent.algorithm){case n.pki.oids.rsaEncryption:u.encryptedContent.content=u.encryptedContent.key.encrypt(t.encryptedContent.key.data);break;default:throw new Error("Unsupported asymmetric cipher, OID "+u.encryptedContent.algorithm)}}}},t}},2193:function(t,e,r){var n=r(5736);r(1041),r(4292);var i=n.asn1,s=t.exports=n.pkcs7asn1=n.pkcs7asn1||{};n.pkcs7=n.pkcs7||{},n.pkcs7.asn1=s;var o={name:"ContentInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};s.contentInfoValidator=o;var a={name:"EncryptedContentInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:i.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};s.envelopedDataValidator={name:"EnvelopedData",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:i.Class.UNIVERSAL,type:i.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(a)},s.encryptedDataValidator={name:"EncryptedData",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"version"}].concat(a)};var c={name:"SignerInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:i.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:i.Class.UNIVERSAL,type:i.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:i.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};s.signedDataValidator={name:"SignedData",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:i.Class.UNIVERSAL,type:i.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},o,{name:"SignedData.Certificates",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:i.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:i.Class.UNIVERSAL,type:i.Type.SET,capture:"signerInfos",optional:!0,value:[c]}]},s.recipientInfoValidator={name:"RecipientInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:i.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter",optional:!0}]},{name:"RecipientInfo.encryptedKey",tagClass:i.Class.UNIVERSAL,type:i.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}},3686:function(t,e,r){r(1703);var n=r(5736);r(4292),r(5970),r(6412),function(){if(n.prime)t.exports=n.prime;else{var e=t.exports=n.prime=n.prime||{},r=n.jsbn.BigInteger,i=[6,4,2,4,2,4,6,2],s=new r(null);s.fromInt(30);var o=function(t,e){return t|e};e.generateProbablePrime=function(t,e,r){"function"===typeof e&&(r=e,e={}),e=e||{};var i=e.algorithm||"PRIMEINC";"string"===typeof i&&(i={name:i}),i.options=i.options||{};var s=e.prng||n.random,o={nextBytes:function(t){for(var e=s.getBytesSync(t.length),r=0;r<t.length;++r)t[r]=e.charCodeAt(r)}};if("PRIMEINC"===i.name)return a(t,o,i.options,r);throw new Error("Invalid prime generation algorithm: "+i.name)}}function a(t,e,r,n){return"workers"in r?l(t,e,r,n):c(t,e,r,n)}function c(t,e,r,n){var i=h(t,e),s=0,o=d(i.bitLength());"millerRabinTests"in r&&(o=r.millerRabinTests);var a=10;"maxBlockTime"in r&&(a=r.maxBlockTime),u(i,t,e,s,o,a,n)}function u(t,e,r,s,o,a,c){var l=+new Date;do{if(t.bitLength()>e&&(t=h(e,r)),t.isProbablePrime(o))return c(null,t);t.dAddOffset(i[s++%8],0)}while(a<0||+new Date-l<a);n.util.setImmediate((function(){u(t,e,r,s,o,a,c)}))}function l(t,e,i,s){if("undefined"===typeof Worker)return c(t,e,i,s);var o=h(t,e),a=i.workers,u=i.workLoad||100,l=30*u/8,d=i.workerScript||"forge/prime.worker.js";if(-1===a)return n.util.estimateCores((function(t,e){t&&(e=2),a=e-1,f()}));function f(){a=Math.max(1,a);for(var n=[],i=0;i<a;++i)n[i]=new Worker(d);for(i=0;i<a;++i)n[i].addEventListener("message",f);var c=!1;function f(i){if(!c){0;var a=i.data;if(a.found){for(var d=0;d<n.length;++d)n[d].terminate();return c=!0,s(null,new r(a.prime,16))}o.bitLength()>t&&(o=h(t,e));var f=o.toString(16);i.target.postMessage({hex:f,workLoad:u}),o.dAddOffset(l,0)}}}f()}function h(t,e){var n=new r(t,e),i=t-1;return n.testBit(i)||n.bitwiseTo(r.ONE.shiftLeft(i),o,n),n.dAddOffset(31-n.mod(s).byteValue(),0),n}function d(t){return t<=100?27:t<=150?18:t<=200?15:t<=250?12:t<=300?9:t<=350?8:t<=400?7:t<=500?6:t<=600?5:t<=800?4:t<=1250?3:2}}()},649:function(t,e,r){r(8675),r(3462);var n=r(5736);r(4292);var i=null;!n.util.isNodejs||n.options.usePureJavaScript||process.versions["node-webkit"]||(i=r(5819));var s=t.exports=n.prng=n.prng||{};s.create=function(t){for(var e={plugin:t,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=t.md,s=new Array(32),o=0;o<32;++o)s[o]=r.create();function a(t){if(e.pools[0].messageLength>=32)return u(),t();var r=32-e.pools[0].messageLength<<5;e.seedFile(r,(function(r,n){if(r)return t(r);e.collect(n),u(),t()}))}function c(){if(e.pools[0].messageLength>=32)return u();var t=32-e.pools[0].messageLength<<5;e.collect(e.seedFileSync(t)),u()}function u(){e.reseeds=4294967295===e.reseeds?0:e.reseeds+1;var t=e.plugin.md.create();t.update(e.keyBytes);for(var r=1,n=0;n<32;++n)e.reseeds%r===0&&(t.update(e.pools[n].digest().getBytes()),e.pools[n].start()),r<<=1;e.keyBytes=t.digest().getBytes(),t.start(),t.update(e.keyBytes);var i=t.digest().getBytes();e.key=e.plugin.formatKey(e.keyBytes),e.seed=e.plugin.formatSeed(i),e.generated=0}function l(t){var e=null,r=n.util.globalScope,i=r.crypto||r.msCrypto;i&&i.getRandomValues&&(e=function(t){return i.getRandomValues(t)});var s=n.util.createBuffer();if(e)while(s.length()<t){var o=Math.max(1,Math.min(t-s.length(),65536)/4),a=new Uint32Array(Math.floor(o));try{e(a);for(var c=0;c<a.length;++c)s.putInt32(a[c])}catch(f){if(!("undefined"!==typeof QuotaExceededError&&f instanceof QuotaExceededError))throw f}}if(s.length()<t){var u,l,h,d=Math.floor(65536*Math.random());while(s.length()<t){l=16807*(65535&d),u=16807*(d>>16),l+=(32767&u)<<16,l+=u>>15,l=(2147483647&l)+(l>>31),d=4294967295&l;for(c=0;c<3;++c)h=d>>>(c<<3),h^=Math.floor(256*Math.random()),s.putByte(255&h)}}return s.getBytes(t)}return e.pools=s,e.pool=0,e.generate=function(t,r){if(!r)return e.generateSync(t);var i=e.plugin.cipher,s=e.plugin.increment,o=e.plugin.formatKey,c=e.plugin.formatSeed,u=n.util.createBuffer();function l(h){if(h)return r(h);if(u.length()>=t)return r(null,u.getBytes(t));if(e.generated>1048575&&(e.key=null),null===e.key)return n.util.nextTick((function(){a(l)}));var d=i(e.key,e.seed);e.generated+=d.length,u.putBytes(d),e.key=o(i(e.key,s(e.seed))),e.seed=c(i(e.key,e.seed)),n.util.setImmediate(l)}e.key=null,l()},e.generateSync=function(t){var r=e.plugin.cipher,i=e.plugin.increment,s=e.plugin.formatKey,o=e.plugin.formatSeed;e.key=null;var a=n.util.createBuffer();while(a.length()<t){e.generated>1048575&&(e.key=null),null===e.key&&c();var u=r(e.key,e.seed);e.generated+=u.length,a.putBytes(u),e.key=s(r(e.key,i(e.seed))),e.seed=o(r(e.key,e.seed))}return a.getBytes(t)},i?(e.seedFile=function(t,e){i.randomBytes(t,(function(t,r){if(t)return e(t);e(null,r.toString())}))},e.seedFileSync=function(t){return i.randomBytes(t).toString()}):(e.seedFile=function(t,e){try{e(null,l(t))}catch(r){e(r)}},e.seedFileSync=l),e.collect=function(t){for(var r=t.length,n=0;n<r;++n)e.pools[e.pool].update(t.substr(n,1)),e.pool=31===e.pool?0:e.pool+1},e.collectInt=function(t,r){for(var n="",i=0;i<r;i+=8)n+=String.fromCharCode(t>>i&255);e.collect(n)},e.registerWorker=function(t){if(t===self)e.seedFile=function(t,e){function r(t){var n=t.data;n.forge&&n.forge.prng&&(self.removeEventListener("message",r),e(n.forge.prng.err,n.forge.prng.bytes))}self.addEventListener("message",r),self.postMessage({forge:{prng:{needed:t}}})};else{var r=function(r){var n=r.data;n.forge&&n.forge.prng&&e.seedFile(n.forge.prng.needed,(function(e,r){t.postMessage({forge:{prng:{err:e,bytes:r}}})}))};t.addEventListener("message",r)}},e}},5451:function(t,e,r){r(1703);var n=r(5736);r(6412),r(4292);var i=t.exports=n.pss=n.pss||{};i.create=function(t){3===arguments.length&&(t={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var e,r=t.md,i=t.mgf,s=r.digestLength,o=t.salt||null;if("string"===typeof o&&(o=n.util.createBuffer(o)),"saltLength"in t)e=t.saltLength;else{if(null===o)throw new Error("Salt length not specified or specific salt not given.");e=o.length()}if(null!==o&&o.length()!==e)throw new Error("Given salt length does not match length of given salt.");var a=t.prng||n.random,c={encode:function(t,c){var u,l,h=c-1,d=Math.ceil(h/8),f=t.digest().getBytes();if(d<s+e+2)throw new Error("Message is too long to encrypt.");l=null===o?a.getBytesSync(e):o.bytes();var p=new n.util.ByteBuffer;p.fillWithByte(0,8),p.putBytes(f),p.putBytes(l),r.start(),r.update(p.getBytes());var g=r.digest().getBytes(),y=new n.util.ByteBuffer;y.fillWithByte(0,d-e-s-2),y.putByte(1),y.putBytes(l);var m=y.getBytes(),w=d-s-1,v=i.generate(g,w),E="";for(u=0;u<w;u++)E+=String.fromCharCode(m.charCodeAt(u)^v.charCodeAt(u));var b=65280>>8*d-h&255;return E=String.fromCharCode(E.charCodeAt(0)&~b)+E.substr(1),E+g+String.fromCharCode(188)},verify:function(t,o,a){var c,u=a-1,l=Math.ceil(u/8);if(o=o.substr(-l),l<s+e+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(188!==o.charCodeAt(l-1))throw new Error("Encoded message does not end in 0xBC.");var h=l-s-1,d=o.substr(0,h),f=o.substr(h,s),p=65280>>8*l-u&255;if(0!==(d.charCodeAt(0)&p))throw new Error("Bits beyond keysize not zero as expected.");var g=i.generate(f,h),y="";for(c=0;c<h;c++)y+=String.fromCharCode(d.charCodeAt(c)^g.charCodeAt(c));y=String.fromCharCode(y.charCodeAt(0)&~p)+y.substr(1);var m=l-s-e-2;for(c=0;c<m;c++)if(0!==y.charCodeAt(c))throw new Error("Leftmost octets not zero as expected");if(1!==y.charCodeAt(m))throw new Error("Inconsistent PSS signature, 0x01 marker not found");var w=y.substr(-e),v=new n.util.ByteBuffer;v.fillWithByte(0,8),v.putBytes(t),v.putBytes(w),r.start(),r.update(v.getBytes());var E=r.digest().getBytes();return f===E}};return c}},6412:function(t,e,r){var n=r(5736);r(22),r(5898),r(649),r(4292),function(){n.random&&n.random.getBytes?t.exports=n.random:function(e){var r={},i=new Array(4),s=n.util.createBuffer();function o(){var t=n.prng.create(r);return t.getBytes=function(e,r){return t.generate(e,r)},t.getBytesSync=function(e){return t.generate(e)},t}r.formatKey=function(t){var e=n.util.createBuffer(t);return t=new Array(4),t[0]=e.getInt32(),t[1]=e.getInt32(),t[2]=e.getInt32(),t[3]=e.getInt32(),n.aes._expandKey(t,!1)},r.formatSeed=function(t){var e=n.util.createBuffer(t);return t=new Array(4),t[0]=e.getInt32(),t[1]=e.getInt32(),t[2]=e.getInt32(),t[3]=e.getInt32(),t},r.cipher=function(t,e){return n.aes._updateBlock(t,e,i,!1),s.putInt32(i[0]),s.putInt32(i[1]),s.putInt32(i[2]),s.putInt32(i[3]),s.getBytes()},r.increment=function(t){return++t[3],t},r.md=n.md.sha256;var a=o(),c=null,u=n.util.globalScope,l=u.crypto||u.msCrypto;if(l&&l.getRandomValues&&(c=function(t){return l.getRandomValues(t)}),n.options.usePureJavaScript||!n.util.isNodejs&&!c){if("undefined"===typeof window||window.document,a.collectInt(+new Date,32),"undefined"!==typeof navigator){var h="";for(var d in navigator)try{"string"==typeof navigator[d]&&(h+=navigator[d])}catch(f){}a.collect(h),h=null}e&&(e().mousemove((function(t){a.collectInt(t.clientX,16),a.collectInt(t.clientY,16)})),e().keypress((function(t){a.collectInt(t.charCode,8)})))}if(n.random)for(var d in a)n.random[d]=a[d];else n.random=a;n.random.createInstance=o,t.exports=n.random}("undefined"!==typeof jQuery?jQuery:null)}()},2890:function(t,e,r){r(2262),r(4506);var n=r(5736);r(4292);var i=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],s=[1,2,3,5],o=function(t,e){return t<<e&65535|(65535&t)>>16-e},a=function(t,e){return(65535&t)>>e|t<<16-e&65535};t.exports=n.rc2=n.rc2||{},n.rc2.expandKey=function(t,e){"string"===typeof t&&(t=n.util.createBuffer(t)),e=e||128;var r,s=t,o=t.length(),a=e,c=Math.ceil(a/8),u=255>>(7&a);for(r=o;r<128;r++)s.putByte(i[s.at(r-1)+s.at(r-o)&255]);for(s.setAt(128-c,i[s.at(128-c)&u]),r=127-c;r>=0;r--)s.setAt(r,i[s.at(r+1)^s.at(r+c)]);return s};var c=function(t,e,r){var i,c,u,l,h=!1,d=null,f=null,p=null,g=[];for(t=n.rc2.expandKey(t,e),u=0;u<64;u++)g.push(t.getInt16Le());r?(i=function(t){for(u=0;u<4;u++)t[u]+=g[l]+(t[(u+3)%4]&t[(u+2)%4])+(~t[(u+3)%4]&t[(u+1)%4]),t[u]=o(t[u],s[u]),l++},c=function(t){for(u=0;u<4;u++)t[u]+=g[63&t[(u+3)%4]]}):(i=function(t){for(u=3;u>=0;u--)t[u]=a(t[u],s[u]),t[u]-=g[l]+(t[(u+3)%4]&t[(u+2)%4])+(~t[(u+3)%4]&t[(u+1)%4]),l--},c=function(t){for(u=3;u>=0;u--)t[u]-=g[63&t[(u+3)%4]]});var y=function(t){var e=[];for(u=0;u<4;u++){var n=d.getInt16Le();null!==p&&(r?n^=p.getInt16Le():p.putInt16Le(n)),e.push(65535&n)}l=r?0:63;for(var i=0;i<t.length;i++)for(var s=0;s<t[i][0];s++)t[i][1](e);for(u=0;u<4;u++)null!==p&&(r?p.putInt16Le(e[u]):e[u]^=p.getInt16Le()),f.putInt16Le(e[u])},m=null;return m={start:function(t,e){t&&"string"===typeof t&&(t=n.util.createBuffer(t)),h=!1,d=n.util.createBuffer(),f=e||new n.util.createBuffer,p=t,m.output=f},update:function(t){h||d.putBuffer(t);while(d.length()>=8)y([[5,i],[1,c],[6,i],[1,c],[5,i]])},finish:function(t){var e=!0;if(r)if(t)e=t(8,d,!r);else{var n=8===d.length()?8:8-d.length();d.fillWithByte(n,n)}if(e&&(h=!0,m.update()),!r&&(e=0===d.length(),e))if(t)e=t(8,f,!r);else{var i=f.length(),s=f.at(i-1);s>i?e=!1:f.truncate(s)}return e}},m};n.rc2.startEncrypting=function(t,e,r){var i=n.rc2.createEncryptionCipher(t,128);return i.start(e,r),i},n.rc2.createEncryptionCipher=function(t,e){return c(t,e,!0)},n.rc2.startDecrypting=function(t,e,r){var i=n.rc2.createDecryptionCipher(t,128);return i.start(e,r),i},n.rc2.createDecryptionCipher=function(t,e){return c(t,e,!1)}},5070:function(t,e,r){r(1703),r(8675),r(3462);var n=r(5736);if(r(1041),r(5970),r(9002),r(902),r(3686),r(6412),r(4292),"undefined"===typeof i)var i=n.jsbn.BigInteger;var s=n.util.isNodejs?r(5819):null,o=n.asn1,a=n.util;n.pki=n.pki||{},t.exports=n.pki.rsa=n.rsa=n.rsa||{};var c=n.pki,u=[6,4,2,4,2,4,6,2],l={name:"PrivateKeyInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},h={name:"RSAPrivateKey",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},d={name:"RSAPublicKey",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},f=n.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:o.Class.UNIVERSAL,type:o.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},p={name:"DigestInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:o.Class.UNIVERSAL,type:o.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:o.Class.UNIVERSAL,type:o.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},g=function(t){var e;if(!(t.algorithm in c.oids)){var r=new Error("Unknown message digest algorithm.");throw r.algorithm=t.algorithm,r}e=c.oids[t.algorithm];var n=o.oidToDer(e).getBytes(),i=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]),s=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]);s.value.push(o.create(o.Class.UNIVERSAL,o.Type.OID,!1,n)),s.value.push(o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,""));var a=o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,t.digest().getBytes());return i.value.push(s),i.value.push(a),o.toDer(i).getBytes()},y=function(t,e,r){if(r)return t.modPow(e.e,e.n);if(!e.p||!e.q)return t.modPow(e.d,e.n);var s;e.dP||(e.dP=e.d.mod(e.p.subtract(i.ONE))),e.dQ||(e.dQ=e.d.mod(e.q.subtract(i.ONE))),e.qInv||(e.qInv=e.q.modInverse(e.p));do{s=new i(n.util.bytesToHex(n.random.getBytes(e.n.bitLength()/8)),16)}while(s.compareTo(e.n)>=0||!s.gcd(e.n).equals(i.ONE));t=t.multiply(s.modPow(e.e,e.n)).mod(e.n);var o=t.mod(e.p).modPow(e.dP,e.p),a=t.mod(e.q).modPow(e.dQ,e.q);while(o.compareTo(a)<0)o=o.add(e.p);var c=o.subtract(a).multiply(e.qInv).mod(e.p).multiply(e.q).add(a);return c=c.multiply(s.modInverse(e.n)).mod(e.n),c};function m(t,e,r){var i=n.util.createBuffer(),s=Math.ceil(e.n.bitLength()/8);if(t.length>s-11){var o=new Error("Message is too long for PKCS#1 v1.5 padding.");throw o.length=t.length,o.max=s-11,o}i.putByte(0),i.putByte(r);var a,c=s-3-t.length;if(0===r||1===r){a=0===r?0:255;for(var u=0;u<c;++u)i.putByte(a)}else while(c>0){var l=0,h=n.random.getBytes(c);for(u=0;u<c;++u)a=h.charCodeAt(u),0===a?++l:i.putByte(a);c=l}return i.putByte(0),i.putBytes(t),i}function w(t,e,r,i){var s=Math.ceil(e.n.bitLength()/8),o=n.util.createBuffer(t),a=o.getByte(),c=o.getByte();if(0!==a||r&&0!==c&&1!==c||!r&&2!=c||r&&0===c&&"undefined"===typeof i)throw new Error("Encryption block is invalid.");var u=0;if(0===c){u=s-3-i;for(var l=0;l<u;++l)if(0!==o.getByte())throw new Error("Encryption block is invalid.")}else if(1===c){u=0;while(o.length()>1){if(255!==o.getByte()){--o.read;break}++u}}else if(2===c){u=0;while(o.length()>1){if(0===o.getByte()){--o.read;break}++u}}var h=o.getByte();if(0!==h||u!==s-3-o.length())throw new Error("Encryption block is invalid.");return o.getBytes()}function v(t,e,r){"function"===typeof e&&(r=e,e={}),e=e||{};var s={algorithm:{name:e.algorithm||"PRIMEINC",options:{workers:e.workers||2,workLoad:e.workLoad||100,workerScript:e.workerScript}}};function o(){a(t.pBits,(function(e,n){return e?r(e):(t.p=n,null!==t.q?u(e,t.q):void a(t.qBits,u))}))}function a(t,e){n.prime.generateProbablePrime(t,s,e)}function u(e,n){if(e)return r(e);if(t.q=n,t.p.compareTo(t.q)<0){var s=t.p;t.p=t.q,t.q=s}if(0!==t.p.subtract(i.ONE).gcd(t.e).compareTo(i.ONE))return t.p=null,void o();if(0!==t.q.subtract(i.ONE).gcd(t.e).compareTo(i.ONE))return t.q=null,void a(t.qBits,u);if(t.p1=t.p.subtract(i.ONE),t.q1=t.q.subtract(i.ONE),t.phi=t.p1.multiply(t.q1),0!==t.phi.gcd(t.e).compareTo(i.ONE))return t.p=t.q=null,void o();if(t.n=t.p.multiply(t.q),t.n.bitLength()!==t.bits)return t.q=null,void a(t.qBits,u);var l=t.e.modInverse(t.phi);t.keys={privateKey:c.rsa.setPrivateKey(t.n,t.e,l,t.p,t.q,l.mod(t.p1),l.mod(t.q1),t.q.modInverse(t.p)),publicKey:c.rsa.setPublicKey(t.n,t.e)},r(null,t.keys)}"prng"in e&&(s.prng=e.prng),o()}function E(t){var e=t.toString(16);e[0]>="8"&&(e="00"+e);var r=n.util.hexToBytes(e);return r.length>1&&(0===r.charCodeAt(0)&&0===(128&r.charCodeAt(1))||255===r.charCodeAt(0)&&128===(128&r.charCodeAt(1)))?r.substr(1):r}function b(t){return t<=100?27:t<=150?18:t<=200?15:t<=250?12:t<=300?9:t<=350?8:t<=400?7:t<=500?6:t<=600?5:t<=800?4:t<=1250?3:2}function S(t){return n.util.isNodejs&&"function"===typeof s[t]}function _(t){return"undefined"!==typeof a.globalScope&&"object"===typeof a.globalScope.crypto&&"object"===typeof a.globalScope.crypto.subtle&&"function"===typeof a.globalScope.crypto.subtle[t]}function R(t){return"undefined"!==typeof a.globalScope&&"object"===typeof a.globalScope.msCrypto&&"object"===typeof a.globalScope.msCrypto.subtle&&"function"===typeof a.globalScope.msCrypto.subtle[t]}function I(t){for(var e=n.util.hexToBytes(t.toString(16)),r=new Uint8Array(e.length),i=0;i<e.length;++i)r[i]=e.charCodeAt(i);return r}c.rsa.encrypt=function(t,e,r){var s,o=r,a=Math.ceil(e.n.bitLength()/8);!1!==r&&!0!==r?(o=2===r,s=m(t,e,r)):(s=n.util.createBuffer(),s.putBytes(t));var c=new i(s.toHex(),16),u=y(c,e,o),l=u.toString(16),h=n.util.createBuffer(),d=a-Math.ceil(l.length/2);while(d>0)h.putByte(0),--d;return h.putBytes(n.util.hexToBytes(l)),h.getBytes()},c.rsa.decrypt=function(t,e,r,s){var o=Math.ceil(e.n.bitLength()/8);if(t.length!==o){var a=new Error("Encrypted message length is invalid.");throw a.length=t.length,a.expected=o,a}var c=new i(n.util.createBuffer(t).toHex(),16);if(c.compareTo(e.n)>=0)throw new Error("Encrypted message is invalid.");var u=y(c,e,r),l=u.toString(16),h=n.util.createBuffer(),d=o-Math.ceil(l.length/2);while(d>0)h.putByte(0),--d;return h.putBytes(n.util.hexToBytes(l)),!1!==s?w(h.getBytes(),e,r):h.getBytes()},c.rsa.createKeyPairGenerationState=function(t,e,r){"string"===typeof t&&(t=parseInt(t,10)),t=t||2048,r=r||{};var s,o=r.prng||n.random,a={nextBytes:function(t){for(var e=o.getBytesSync(t.length),r=0;r<t.length;++r)t[r]=e.charCodeAt(r)}},c=r.algorithm||"PRIMEINC";if("PRIMEINC"!==c)throw new Error("Invalid key generation algorithm: "+c);return s={algorithm:c,state:0,bits:t,rng:a,eInt:e||65537,e:new i(null),p:null,q:null,qBits:t>>1,pBits:t-(t>>1),pqState:0,num:null,keys:null},s.e.fromInt(s.eInt),s},c.rsa.stepKeyPairGenerationState=function(t,e){"algorithm"in t||(t.algorithm="PRIMEINC");var r=new i(null);r.fromInt(30);var n,s=0,o=function(t,e){return t|e},a=+new Date,l=0;while(null===t.keys&&(e<=0||l<e)){if(0===t.state){var h=null===t.p?t.pBits:t.qBits,d=h-1;0===t.pqState?(t.num=new i(h,t.rng),t.num.testBit(d)||t.num.bitwiseTo(i.ONE.shiftLeft(d),o,t.num),t.num.dAddOffset(31-t.num.mod(r).byteValue(),0),s=0,++t.pqState):1===t.pqState?t.num.bitLength()>h?t.pqState=0:t.num.isProbablePrime(b(t.num.bitLength()))?++t.pqState:t.num.dAddOffset(u[s++%8],0):2===t.pqState?t.pqState=0===t.num.subtract(i.ONE).gcd(t.e).compareTo(i.ONE)?3:0:3===t.pqState&&(t.pqState=0,null===t.p?t.p=t.num:t.q=t.num,null!==t.p&&null!==t.q&&++t.state,t.num=null)}else if(1===t.state)t.p.compareTo(t.q)<0&&(t.num=t.p,t.p=t.q,t.q=t.num),++t.state;else if(2===t.state)t.p1=t.p.subtract(i.ONE),t.q1=t.q.subtract(i.ONE),t.phi=t.p1.multiply(t.q1),++t.state;else if(3===t.state)0===t.phi.gcd(t.e).compareTo(i.ONE)?++t.state:(t.p=null,t.q=null,t.state=0);else if(4===t.state)t.n=t.p.multiply(t.q),t.n.bitLength()===t.bits?++t.state:(t.q=null,t.state=0);else if(5===t.state){var f=t.e.modInverse(t.phi);t.keys={privateKey:c.rsa.setPrivateKey(t.n,t.e,f,t.p,t.q,f.mod(t.p1),f.mod(t.q1),t.q.modInverse(t.p)),publicKey:c.rsa.setPublicKey(t.n,t.e)}}n=+new Date,l+=n-a,a=n}return null!==t.keys},c.rsa.generateKeyPair=function(t,e,r,i){if(1===arguments.length?"object"===typeof t?(r=t,t=void 0):"function"===typeof t&&(i=t,t=void 0):2===arguments.length?"number"===typeof t?"function"===typeof e?(i=e,e=void 0):"number"!==typeof e&&(r=e,e=void 0):(r=t,i=e,t=void 0,e=void 0):3===arguments.length&&("number"===typeof e?"function"===typeof r&&(i=r,r=void 0):(i=r,r=e,e=void 0)),r=r||{},void 0===t&&(t=r.bits||2048),void 0===e&&(e=r.e||65537),!n.options.usePureJavaScript&&!r.prng&&t>=256&&t<=16384&&(65537===e||3===e))if(i){if(S("generateKeyPair"))return s.generateKeyPair("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},(function(t,e,r){if(t)return i(t);i(null,{privateKey:c.privateKeyFromPem(r),publicKey:c.publicKeyFromPem(e)})}));if(_("generateKey")&&_("exportKey"))return a.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:I(e),hash:{name:"SHA-256"}},!0,["sign","verify"]).then((function(t){return a.globalScope.crypto.subtle.exportKey("pkcs8",t.privateKey)})).then(void 0,(function(t){i(t)})).then((function(t){if(t){var e=c.privateKeyFromAsn1(o.fromDer(n.util.createBuffer(t)));i(null,{privateKey:e,publicKey:c.setRsaPublicKey(e.n,e.e)})}}));if(R("generateKey")&&R("exportKey")){var u=a.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:I(e),hash:{name:"SHA-256"}},!0,["sign","verify"]);return u.oncomplete=function(t){var e=t.target.result,r=a.globalScope.msCrypto.subtle.exportKey("pkcs8",e.privateKey);r.oncomplete=function(t){var e=t.target.result,r=c.privateKeyFromAsn1(o.fromDer(n.util.createBuffer(e)));i(null,{privateKey:r,publicKey:c.setRsaPublicKey(r.n,r.e)})},r.onerror=function(t){i(t)}},void(u.onerror=function(t){i(t)})}}else if(S("generateKeyPairSync")){var l=s.generateKeyPairSync("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:c.privateKeyFromPem(l.privateKey),publicKey:c.publicKeyFromPem(l.publicKey)}}var h=c.rsa.createKeyPairGenerationState(t,e,r);if(!i)return c.rsa.stepKeyPairGenerationState(h,0),h.keys;v(h,r,i)},c.setRsaPublicKey=c.rsa.setPublicKey=function(t,e){var r={n:t,e:e,encrypt:function(t,e,i){if("string"===typeof e?e=e.toUpperCase():void 0===e&&(e="RSAES-PKCS1-V1_5"),"RSAES-PKCS1-V1_5"===e)e={encode:function(t,e,r){return m(t,e,2).getBytes()}};else if("RSA-OAEP"===e||"RSAES-OAEP"===e)e={encode:function(t,e){return n.pkcs1.encode_rsa_oaep(e,t,i)}};else if(-1!==["RAW","NONE","NULL",null].indexOf(e))e={encode:function(t){return t}};else if("string"===typeof e)throw new Error('Unsupported encryption scheme: "'+e+'".');var s=e.encode(t,r,!0);return c.rsa.encrypt(s,r,!0)},verify:function(t,e,i,s){"string"===typeof i?i=i.toUpperCase():void 0===i&&(i="RSASSA-PKCS1-V1_5"),void 0===s&&(s={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in s||(s._parseAllDigestBytes=!0),"RSASSA-PKCS1-V1_5"===i?i={verify:function(t,e){e=w(e,r,!0);var i=o.fromDer(e,{parseAllBytes:s._parseAllDigestBytes}),a={},c=[];if(!o.validate(i,p,a,c)){var u=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.");throw u.errors=c,u}var l=o.derToOid(a.algorithmIdentifier);if(l!==n.oids.md2&&l!==n.oids.md5&&l!==n.oids.sha1&&l!==n.oids.sha224&&l!==n.oids.sha256&&l!==n.oids.sha384&&l!==n.oids.sha512&&l!==n.oids["sha512-224"]&&l!==n.oids["sha512-256"]){u=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.");throw u.oid=l,u}if((l===n.oids.md2||l===n.oids.md5)&&!("parameters"in a))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return t===a.digest}}:"NONE"!==i&&"NULL"!==i&&null!==i||(i={verify:function(t,e){return e=w(e,r,!0),t===e}});var a=c.rsa.decrypt(e,r,!0,!1);return i.verify(t,a,r.n.bitLength())}};return r},c.setRsaPrivateKey=c.rsa.setPrivateKey=function(t,e,r,i,s,o,a,u){var l={n:t,e:e,d:r,p:i,q:s,dP:o,dQ:a,qInv:u,decrypt:function(t,e,r){"string"===typeof e?e=e.toUpperCase():void 0===e&&(e="RSAES-PKCS1-V1_5");var i=c.rsa.decrypt(t,l,!1,!1);if("RSAES-PKCS1-V1_5"===e)e={decode:w};else if("RSA-OAEP"===e||"RSAES-OAEP"===e)e={decode:function(t,e){return n.pkcs1.decode_rsa_oaep(e,t,r)}};else{if(-1===["RAW","NONE","NULL",null].indexOf(e))throw new Error('Unsupported encryption scheme: "'+e+'".');e={decode:function(t){return t}}}return e.decode(i,l,!1)},sign:function(t,e){var r=!1;"string"===typeof e&&(e=e.toUpperCase()),void 0===e||"RSASSA-PKCS1-V1_5"===e?(e={encode:g},r=1):"NONE"!==e&&"NULL"!==e&&null!==e||(e={encode:function(){return t}},r=1);var n=e.encode(t,l.n.bitLength());return c.rsa.encrypt(n,l,r)}};return l},c.wrapRsaPrivateKey=function(t){return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(0).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(c.oids.rsaEncryption).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,"")]),o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,o.toDer(t).getBytes())])},c.privateKeyFromAsn1=function(t){var e,r,s,a,u,d,f,p,g={},y=[];if(o.validate(t,l,g,y)&&(t=o.fromDer(n.util.createBuffer(g.privateKey))),g={},y=[],!o.validate(t,h,g,y)){var m=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw m.errors=y,m}return e=n.util.createBuffer(g.privateKeyModulus).toHex(),r=n.util.createBuffer(g.privateKeyPublicExponent).toHex(),s=n.util.createBuffer(g.privateKeyPrivateExponent).toHex(),a=n.util.createBuffer(g.privateKeyPrime1).toHex(),u=n.util.createBuffer(g.privateKeyPrime2).toHex(),d=n.util.createBuffer(g.privateKeyExponent1).toHex(),f=n.util.createBuffer(g.privateKeyExponent2).toHex(),p=n.util.createBuffer(g.privateKeyCoefficient).toHex(),c.setRsaPrivateKey(new i(e,16),new i(r,16),new i(s,16),new i(a,16),new i(u,16),new i(d,16),new i(f,16),new i(p,16))},c.privateKeyToAsn1=c.privateKeyToRSAPrivateKey=function(t){return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(0).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,E(t.n)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,E(t.e)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,E(t.d)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,E(t.p)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,E(t.q)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,E(t.dP)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,E(t.dQ)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,E(t.qInv))])},c.publicKeyFromAsn1=function(t){var e={},r=[];if(o.validate(t,f,e,r)){var s=o.derToOid(e.publicKeyOid);if(s!==c.oids.rsaEncryption){var a=new Error("Cannot read public key. Unknown OID.");throw a.oid=s,a}t=e.rsaPublicKey}if(r=[],!o.validate(t,d,e,r)){a=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw a.errors=r,a}var u=n.util.createBuffer(e.publicKeyModulus).toHex(),l=n.util.createBuffer(e.publicKeyExponent).toHex();return c.setRsaPublicKey(new i(u,16),new i(l,16))},c.publicKeyToAsn1=c.publicKeyToSubjectPublicKeyInfo=function(t){return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(c.oids.rsaEncryption).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,"")]),o.create(o.Class.UNIVERSAL,o.Type.BITSTRING,!1,[c.publicKeyToRSAPublicKey(t)])])},c.publicKeyToRSAPublicKey=function(t){return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,E(t.n)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,E(t.e))])}},989:function(t,e,r){var n=r(5736);r(4038),r(4292);var i=t.exports=n.sha1=n.sha1||{};n.md.sha1=n.md.algorithms.sha1=i,i.create=function(){o||a();var t=null,e=n.util.createBuffer(),r=new Array(80),i={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){i.messageLength=0,i.fullMessageLength=i.messageLength64=[];for(var r=i.messageLengthSize/4,s=0;s<r;++s)i.fullMessageLength.push(0);return e=n.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},i}};return i.start(),i.update=function(s,o){"utf8"===o&&(s=n.util.encodeUtf8(s));var a=s.length;i.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var u=i.fullMessageLength.length-1;u>=0;--u)i.fullMessageLength[u]+=a[1],a[1]=a[0]+(i.fullMessageLength[u]/4294967296>>>0),i.fullMessageLength[u]=i.fullMessageLength[u]>>>0,a[0]=a[1]/4294967296>>>0;return e.putBytes(s),c(t,r,e),(e.read>2048||0===e.length())&&e.compact(),i},i.digest=function(){var o=n.util.createBuffer();o.putBytes(e.bytes());var a,u,l=i.fullMessageLength[i.fullMessageLength.length-1]+i.messageLengthSize,h=l&i.blockLength-1;o.putBytes(s.substr(0,i.blockLength-h));for(var d=8*i.fullMessageLength[0],f=0;f<i.fullMessageLength.length-1;++f)a=8*i.fullMessageLength[f+1],u=a/4294967296>>>0,d+=u,o.putInt32(d>>>0),d=a>>>0;o.putInt32(d);var p={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4};c(p,r,o);var g=n.util.createBuffer();return g.putInt32(p.h0),g.putInt32(p.h1),g.putInt32(p.h2),g.putInt32(p.h3),g.putInt32(p.h4),g},i};var s=null,o=!1;function a(){s=String.fromCharCode(128),s+=n.util.fillString(String.fromCharCode(0),64),o=!0}function c(t,e,r){var n,i,s,o,a,c,u,l,h=r.length();while(h>=64){for(i=t.h0,s=t.h1,o=t.h2,a=t.h3,c=t.h4,l=0;l<16;++l)n=r.getInt32(),e[l]=n,u=a^s&(o^a),n=(i<<5|i>>>27)+u+c+1518500249+n,c=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;l<20;++l)n=e[l-3]^e[l-8]^e[l-14]^e[l-16],n=n<<1|n>>>31,e[l]=n,u=a^s&(o^a),n=(i<<5|i>>>27)+u+c+1518500249+n,c=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;l<32;++l)n=e[l-3]^e[l-8]^e[l-14]^e[l-16],n=n<<1|n>>>31,e[l]=n,u=s^o^a,n=(i<<5|i>>>27)+u+c+1859775393+n,c=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;l<40;++l)n=e[l-6]^e[l-16]^e[l-28]^e[l-32],n=n<<2|n>>>30,e[l]=n,u=s^o^a,n=(i<<5|i>>>27)+u+c+1859775393+n,c=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;l<60;++l)n=e[l-6]^e[l-16]^e[l-28]^e[l-32],n=n<<2|n>>>30,e[l]=n,u=s&o|a&(s^o),n=(i<<5|i>>>27)+u+c+2400959708+n,c=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;l<80;++l)n=e[l-6]^e[l-16]^e[l-28]^e[l-32],n=n<<2|n>>>30,e[l]=n,u=s^o^a,n=(i<<5|i>>>27)+u+c+3395469782+n,c=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;t.h0=t.h0+i|0,t.h1=t.h1+s|0,t.h2=t.h2+o|0,t.h3=t.h3+a|0,t.h4=t.h4+c|0,h-=64}}},5898:function(t,e,r){var n=r(5736);r(4038),r(4292);var i=t.exports=n.sha256=n.sha256||{};n.md.sha256=n.md.algorithms.sha256=i,i.create=function(){o||c();var t=null,e=n.util.createBuffer(),r=new Array(64),i={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){i.messageLength=0,i.fullMessageLength=i.messageLength64=[];for(var r=i.messageLengthSize/4,s=0;s<r;++s)i.fullMessageLength.push(0);return e=n.util.createBuffer(),t={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},i}};return i.start(),i.update=function(s,o){"utf8"===o&&(s=n.util.encodeUtf8(s));var a=s.length;i.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var c=i.fullMessageLength.length-1;c>=0;--c)i.fullMessageLength[c]+=a[1],a[1]=a[0]+(i.fullMessageLength[c]/4294967296>>>0),i.fullMessageLength[c]=i.fullMessageLength[c]>>>0,a[0]=a[1]/4294967296>>>0;return e.putBytes(s),u(t,r,e),(e.read>2048||0===e.length())&&e.compact(),i},i.digest=function(){var o=n.util.createBuffer();o.putBytes(e.bytes());var a,c,l=i.fullMessageLength[i.fullMessageLength.length-1]+i.messageLengthSize,h=l&i.blockLength-1;o.putBytes(s.substr(0,i.blockLength-h));for(var d=8*i.fullMessageLength[0],f=0;f<i.fullMessageLength.length-1;++f)a=8*i.fullMessageLength[f+1],c=a/4294967296>>>0,d+=c,o.putInt32(d>>>0),d=a>>>0;o.putInt32(d);var p={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4,h5:t.h5,h6:t.h6,h7:t.h7};u(p,r,o);var g=n.util.createBuffer();return g.putInt32(p.h0),g.putInt32(p.h1),g.putInt32(p.h2),g.putInt32(p.h3),g.putInt32(p.h4),g.putInt32(p.h5),g.putInt32(p.h6),g.putInt32(p.h7),g},i};var s=null,o=!1,a=null;function c(){s=String.fromCharCode(128),s+=n.util.fillString(String.fromCharCode(0),64),a=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],o=!0}function u(t,e,r){var n,i,s,o,c,u,l,h,d,f,p,g,y,m,w,v=r.length();while(v>=64){for(l=0;l<16;++l)e[l]=r.getInt32();for(;l<64;++l)n=e[l-2],n=(n>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,i=e[l-15],i=(i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,e[l]=n+e[l-7]+i+e[l-16]|0;for(h=t.h0,d=t.h1,f=t.h2,p=t.h3,g=t.h4,y=t.h5,m=t.h6,w=t.h7,l=0;l<64;++l)o=(g>>>6|g<<26)^(g>>>11|g<<21)^(g>>>25|g<<7),c=m^g&(y^m),s=(h>>>2|h<<30)^(h>>>13|h<<19)^(h>>>22|h<<10),u=h&d|f&(h^d),n=w+o+c+a[l]+e[l],i=s+u,w=m,m=y,y=g,g=p+n>>>0,p=f,f=d,d=h,h=n+i>>>0;t.h0=t.h0+h|0,t.h1=t.h1+d|0,t.h2=t.h2+f|0,t.h3=t.h3+p|0,t.h4=t.h4+g|0,t.h5=t.h5+y|0,t.h6=t.h6+m|0,t.h7=t.h7+w|0,v-=64}}},2328:function(t,e,r){r(1703);var n=r(5736);r(4038),r(4292);var i=t.exports=n.sha512=n.sha512||{};n.md.sha512=n.md.algorithms.sha512=i;var s=n.sha384=n.sha512.sha384=n.sha512.sha384||{};s.create=function(){return i.create("SHA-384")},n.md.sha384=n.md.algorithms.sha384=s,n.sha512.sha256=n.sha512.sha256||{create:function(){return i.create("SHA-512/256")}},n.md["sha512/256"]=n.md.algorithms["sha512/256"]=n.sha512.sha256,n.sha512.sha224=n.sha512.sha224||{create:function(){return i.create("SHA-512/224")}},n.md["sha512/224"]=n.md.algorithms["sha512/224"]=n.sha512.sha224,i.create=function(t){if(a||l(),"undefined"===typeof t&&(t="SHA-512"),!(t in u))throw new Error("Invalid SHA-512 algorithm: "+t);for(var e=u[t],r=null,i=n.util.createBuffer(),s=new Array(80),c=0;c<80;++c)s[c]=new Array(2);var d=64;switch(t){case"SHA-384":d=48;break;case"SHA-512/256":d=32;break;case"SHA-512/224":d=28;break}var f={algorithm:t.replace("-","").toLowerCase(),blockLength:128,digestLength:d,messageLength:0,fullMessageLength:null,messageLengthSize:16,start:function(){f.messageLength=0,f.fullMessageLength=f.messageLength128=[];for(var t=f.messageLengthSize/4,s=0;s<t;++s)f.fullMessageLength.push(0);i=n.util.createBuffer(),r=new Array(e.length);for(s=0;s<e.length;++s)r[s]=e[s].slice(0);return f}};return f.start(),f.update=function(t,e){"utf8"===e&&(t=n.util.encodeUtf8(t));var o=t.length;f.messageLength+=o,o=[o/4294967296>>>0,o>>>0];for(var a=f.fullMessageLength.length-1;a>=0;--a)f.fullMessageLength[a]+=o[1],o[1]=o[0]+(f.fullMessageLength[a]/4294967296>>>0),f.fullMessageLength[a]=f.fullMessageLength[a]>>>0,o[0]=o[1]/4294967296>>>0;return i.putBytes(t),h(r,s,i),(i.read>2048||0===i.length())&&i.compact(),f},f.digest=function(){var e=n.util.createBuffer();e.putBytes(i.bytes());var a,c,u=f.fullMessageLength[f.fullMessageLength.length-1]+f.messageLengthSize,l=u&f.blockLength-1;e.putBytes(o.substr(0,f.blockLength-l));for(var d=8*f.fullMessageLength[0],p=0;p<f.fullMessageLength.length-1;++p)a=8*f.fullMessageLength[p+1],c=a/4294967296>>>0,d+=c,e.putInt32(d>>>0),d=a>>>0;e.putInt32(d);var g=new Array(r.length);for(p=0;p<r.length;++p)g[p]=r[p].slice(0);h(g,s,e);var y,m=n.util.createBuffer();y="SHA-512"===t?g.length:"SHA-384"===t?g.length-2:g.length-4;for(p=0;p<y;++p)m.putInt32(g[p][0]),p===y-1&&"SHA-512/224"===t||m.putInt32(g[p][1]);return m},f};var o=null,a=!1,c=null,u=null;function l(){o=String.fromCharCode(128),o+=n.util.fillString(String.fromCharCode(0),128),c=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],u={},u["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],u["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],u["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],u["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],a=!0}function h(t,e,r){var n,i,s,o,a,u,l,h,d,f,p,g,y,m,w,v,E,b,S,_,R,I,C,A,T,k,P,N,L,D,O,B,x,U,M,V=r.length();while(V>=128){for(L=0;L<16;++L)e[L][0]=r.getInt32()>>>0,e[L][1]=r.getInt32()>>>0;for(;L<80;++L)B=e[L-2],D=B[0],O=B[1],n=((D>>>19|O<<13)^(O>>>29|D<<3)^D>>>6)>>>0,i=((D<<13|O>>>19)^(O<<3|D>>>29)^(D<<26|O>>>6))>>>0,U=e[L-15],D=U[0],O=U[1],s=((D>>>1|O<<31)^(D>>>8|O<<24)^D>>>7)>>>0,o=((D<<31|O>>>1)^(D<<24|O>>>8)^(D<<25|O>>>7))>>>0,x=e[L-7],M=e[L-16],O=i+x[1]+o+M[1],e[L][0]=n+x[0]+s+M[0]+(O/4294967296>>>0)>>>0,e[L][1]=O>>>0;for(y=t[0][0],m=t[0][1],w=t[1][0],v=t[1][1],E=t[2][0],b=t[2][1],S=t[3][0],_=t[3][1],R=t[4][0],I=t[4][1],C=t[5][0],A=t[5][1],T=t[6][0],k=t[6][1],P=t[7][0],N=t[7][1],L=0;L<80;++L)l=((R>>>14|I<<18)^(R>>>18|I<<14)^(I>>>9|R<<23))>>>0,h=((R<<18|I>>>14)^(R<<14|I>>>18)^(I<<23|R>>>9))>>>0,d=(T^R&(C^T))>>>0,f=(k^I&(A^k))>>>0,a=((y>>>28|m<<4)^(m>>>2|y<<30)^(m>>>7|y<<25))>>>0,u=((y<<4|m>>>28)^(m<<30|y>>>2)^(m<<25|y>>>7))>>>0,p=(y&w|E&(y^w))>>>0,g=(m&v|b&(m^v))>>>0,O=N+h+f+c[L][1]+e[L][1],n=P+l+d+c[L][0]+e[L][0]+(O/4294967296>>>0)>>>0,i=O>>>0,O=u+g,s=a+p+(O/4294967296>>>0)>>>0,o=O>>>0,P=T,N=k,T=C,k=A,C=R,A=I,O=_+i,R=S+n+(O/4294967296>>>0)>>>0,I=O>>>0,S=E,_=b,E=w,b=v,w=y,v=m,O=i+o,y=n+s+(O/4294967296>>>0)>>>0,m=O>>>0;O=t[0][1]+m,t[0][0]=t[0][0]+y+(O/4294967296>>>0)>>>0,t[0][1]=O>>>0,O=t[1][1]+v,t[1][0]=t[1][0]+w+(O/4294967296>>>0)>>>0,t[1][1]=O>>>0,O=t[2][1]+b,t[2][0]=t[2][0]+E+(O/4294967296>>>0)>>>0,t[2][1]=O>>>0,O=t[3][1]+_,t[3][0]=t[3][0]+S+(O/4294967296>>>0)>>>0,t[3][1]=O>>>0,O=t[4][1]+I,t[4][0]=t[4][0]+R+(O/4294967296>>>0)>>>0,t[4][1]=O>>>0,O=t[5][1]+A,t[5][0]=t[5][0]+C+(O/4294967296>>>0)>>>0,t[5][1]=O>>>0,O=t[6][1]+k,t[6][0]=t[6][0]+T+(O/4294967296>>>0)>>>0,t[6][1]=O>>>0,O=t[7][1]+N,t[7][0]=t[7][0]+P+(O/4294967296>>>0)>>>0,t[7][1]=O>>>0,V-=128}}},4292:function(t,e,r){r(4633),r(1703),r(8675),r(3462),r(2262),r(4506);var n=r(5736),i=r(3220),s=t.exports=n.util=n.util||{};function o(t){if(8!==t&&16!==t&&24!==t&&32!==t)throw new Error("Only 8, 16, 24, or 32 bits supported: "+t)}function a(t){if(this.data="",this.read=0,"string"===typeof t)this.data=t;else if(s.isArrayBuffer(t)||s.isArrayBufferView(t))if("undefined"!==typeof Buffer&&t instanceof Buffer)this.data=t.toString("binary");else{var e=new Uint8Array(t);try{this.data=String.fromCharCode.apply(null,e)}catch(n){for(var r=0;r<e.length;++r)this.putByte(e[r])}}else(t instanceof a||"object"===typeof t&&"string"===typeof t.data&&"number"===typeof t.read)&&(this.data=t.data,this.read=t.read);this._constructedStringLength=0}(function(){if("undefined"!==typeof process&&process.nextTick&&!process.browser)return s.nextTick=process.nextTick,void("function"===typeof setImmediate?s.setImmediate=setImmediate:s.setImmediate=s.nextTick);if("function"===typeof setImmediate)return s.setImmediate=function(){return setImmediate.apply(void 0,arguments)},void(s.nextTick=function(t){return setImmediate(t)});if(s.setImmediate=function(t){setTimeout(t,0)},"undefined"!==typeof window&&"function"===typeof window.postMessage){var t="forge.setImmediate",e=[];function r(r){if(r.source===window&&r.data===t){r.stopPropagation();var n=e.slice();e.length=0,n.forEach((function(t){t()}))}}s.setImmediate=function(r){e.push(r),1===e.length&&window.postMessage(t,"*")},window.addEventListener("message",r,!0)}if("undefined"!==typeof MutationObserver){var n=Date.now(),i=!0,o=document.createElement("div");e=[];new MutationObserver((function(){var t=e.slice();e.length=0,t.forEach((function(t){t()}))})).observe(o,{attributes:!0});var a=s.setImmediate;s.setImmediate=function(t){Date.now()-n>15?(n=Date.now(),a(t)):(e.push(t),1===e.length&&o.setAttribute("a",i=!i))}}s.nextTick=s.setImmediate})(),s.isNodejs="undefined"!==typeof process&&process.versions&&process.versions.node,s.globalScope=function(){return s.isNodejs?r.g:"undefined"===typeof self?window:self}(),s.isArray=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},s.isArrayBuffer=function(t){return"undefined"!==typeof ArrayBuffer&&t instanceof ArrayBuffer},s.isArrayBufferView=function(t){return t&&s.isArrayBuffer(t.buffer)&&void 0!==t.byteLength},s.ByteBuffer=a,s.ByteStringBuffer=a;var c=4096;function u(t,e){e=e||{},this.read=e.readOffset||0,this.growSize=e.growSize||1024;var r=s.isArrayBuffer(t),n=s.isArrayBufferView(t);if(r||n)return this.data=r?new DataView(t):new DataView(t.buffer,t.byteOffset,t.byteLength),void(this.write="writeOffset"in e?e.writeOffset:this.data.byteLength);this.data=new DataView(new ArrayBuffer(0)),this.write=0,null!==t&&void 0!==t&&this.putBytes(t),"writeOffset"in e&&(this.write=e.writeOffset)}s.ByteStringBuffer.prototype._optimizeConstructedString=function(t){this._constructedStringLength+=t,this._constructedStringLength>c&&(this.data.substr(0,1),this._constructedStringLength=0)},s.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read},s.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0},s.ByteStringBuffer.prototype.putByte=function(t){return this.putBytes(String.fromCharCode(t))},s.ByteStringBuffer.prototype.fillWithByte=function(t,e){t=String.fromCharCode(t);var r=this.data;while(e>0)1&e&&(r+=t),e>>>=1,e>0&&(t+=t);return this.data=r,this._optimizeConstructedString(e),this},s.ByteStringBuffer.prototype.putBytes=function(t){return this.data+=t,this._optimizeConstructedString(t.length),this},s.ByteStringBuffer.prototype.putString=function(t){return this.putBytes(s.encodeUtf8(t))},s.ByteStringBuffer.prototype.putInt16=function(t){return this.putBytes(String.fromCharCode(t>>8&255)+String.fromCharCode(255&t))},s.ByteStringBuffer.prototype.putInt24=function(t){return this.putBytes(String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(255&t))},s.ByteStringBuffer.prototype.putInt32=function(t){return this.putBytes(String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(255&t))},s.ByteStringBuffer.prototype.putInt16Le=function(t){return this.putBytes(String.fromCharCode(255&t)+String.fromCharCode(t>>8&255))},s.ByteStringBuffer.prototype.putInt24Le=function(t){return this.putBytes(String.fromCharCode(255&t)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255))},s.ByteStringBuffer.prototype.putInt32Le=function(t){return this.putBytes(String.fromCharCode(255&t)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>24&255))},s.ByteStringBuffer.prototype.putInt=function(t,e){o(e);var r="";do{e-=8,r+=String.fromCharCode(t>>e&255)}while(e>0);return this.putBytes(r)},s.ByteStringBuffer.prototype.putSignedInt=function(t,e){return t<0&&(t+=2<<e-1),this.putInt(t,e)},s.ByteStringBuffer.prototype.putBuffer=function(t){return this.putBytes(t.getBytes())},s.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)},s.ByteStringBuffer.prototype.getInt16=function(){var t=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,t},s.ByteStringBuffer.prototype.getInt24=function(){var t=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,t},s.ByteStringBuffer.prototype.getInt32=function(){var t=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,t},s.ByteStringBuffer.prototype.getInt16Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,t},s.ByteStringBuffer.prototype.getInt24Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,t},s.ByteStringBuffer.prototype.getInt32Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,t},s.ByteStringBuffer.prototype.getInt=function(t){o(t);var e=0;do{e=(e<<8)+this.data.charCodeAt(this.read++),t-=8}while(t>0);return e},s.ByteStringBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e},s.ByteStringBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):0===t?e="":(e=0===this.read?this.data:this.data.slice(this.read),this.clear()),e},s.ByteStringBuffer.prototype.bytes=function(t){return"undefined"===typeof t?this.data.slice(this.read):this.data.slice(this.read,this.read+t)},s.ByteStringBuffer.prototype.at=function(t){return this.data.charCodeAt(this.read+t)},s.ByteStringBuffer.prototype.setAt=function(t,e){return this.data=this.data.substr(0,this.read+t)+String.fromCharCode(e)+this.data.substr(this.read+t+1),this},s.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)},s.ByteStringBuffer.prototype.copy=function(){var t=s.createBuffer(this.data);return t.read=this.read,t},s.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this},s.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this},s.ByteStringBuffer.prototype.truncate=function(t){var e=Math.max(0,this.length()-t);return this.data=this.data.substr(this.read,e),this.read=0,this},s.ByteStringBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.length;++e){var r=this.data.charCodeAt(e);r<16&&(t+="0"),t+=r.toString(16)}return t},s.ByteStringBuffer.prototype.toString=function(){return s.decodeUtf8(this.bytes())},s.DataBuffer=u,s.DataBuffer.prototype.length=function(){return this.write-this.read},s.DataBuffer.prototype.isEmpty=function(){return this.length()<=0},s.DataBuffer.prototype.accommodate=function(t,e){if(this.length()>=t)return this;e=Math.max(e||this.growSize,t);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+e);return n.set(r),this.data=new DataView(n.buffer),this},s.DataBuffer.prototype.putByte=function(t){return this.accommodate(1),this.data.setUint8(this.write++,t),this},s.DataBuffer.prototype.fillWithByte=function(t,e){this.accommodate(e);for(var r=0;r<e;++r)this.data.setUint8(t);return this},s.DataBuffer.prototype.putBytes=function(t,e){if(s.isArrayBufferView(t)){var r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),n=r.byteLength-r.byteOffset;this.accommodate(n);var i=new Uint8Array(this.data.buffer,this.write);return i.set(r),this.write+=n,this}if(s.isArrayBuffer(t)){r=new Uint8Array(t);this.accommodate(r.byteLength);i=new Uint8Array(this.data.buffer);return i.set(r,this.write),this.write+=r.byteLength,this}if(t instanceof s.DataBuffer||"object"===typeof t&&"number"===typeof t.read&&"number"===typeof t.write&&s.isArrayBufferView(t.data)){r=new Uint8Array(t.data.byteLength,t.read,t.length());this.accommodate(r.byteLength);i=new Uint8Array(t.data.byteLength,this.write);return i.set(r),this.write+=r.byteLength,this}if(t instanceof s.ByteStringBuffer&&(t=t.data,e="binary"),e=e||"binary","string"===typeof t){var o;if("hex"===e)return this.accommodate(Math.ceil(t.length/2)),o=new Uint8Array(this.data.buffer,this.write),this.write+=s.binary.hex.decode(t,o,this.write),this;if("base64"===e)return this.accommodate(3*Math.ceil(t.length/4)),o=new Uint8Array(this.data.buffer,this.write),this.write+=s.binary.base64.decode(t,o,this.write),this;if("utf8"===e&&(t=s.encodeUtf8(t),e="binary"),"binary"===e||"raw"===e)return this.accommodate(t.length),o=new Uint8Array(this.data.buffer,this.write),this.write+=s.binary.raw.decode(o),this;if("utf16"===e)return this.accommodate(2*t.length),o=new Uint16Array(this.data.buffer,this.write),this.write+=s.text.utf16.encode(o),this;throw new Error("Invalid encoding: "+e)}throw Error("Invalid parameter: "+t)},s.DataBuffer.prototype.putBuffer=function(t){return this.putBytes(t),t.clear(),this},s.DataBuffer.prototype.putString=function(t){return this.putBytes(t,"utf16")},s.DataBuffer.prototype.putInt16=function(t){return this.accommodate(2),this.data.setInt16(this.write,t),this.write+=2,this},s.DataBuffer.prototype.putInt24=function(t){return this.accommodate(3),this.data.setInt16(this.write,t>>8&65535),this.data.setInt8(this.write,t>>16&255),this.write+=3,this},s.DataBuffer.prototype.putInt32=function(t){return this.accommodate(4),this.data.setInt32(this.write,t),this.write+=4,this},s.DataBuffer.prototype.putInt16Le=function(t){return this.accommodate(2),this.data.setInt16(this.write,t,!0),this.write+=2,this},s.DataBuffer.prototype.putInt24Le=function(t){return this.accommodate(3),this.data.setInt8(this.write,t>>16&255),this.data.setInt16(this.write,t>>8&65535,!0),this.write+=3,this},s.DataBuffer.prototype.putInt32Le=function(t){return this.accommodate(4),this.data.setInt32(this.write,t,!0),this.write+=4,this},s.DataBuffer.prototype.putInt=function(t,e){o(e),this.accommodate(e/8);do{e-=8,this.data.setInt8(this.write++,t>>e&255)}while(e>0);return this},s.DataBuffer.prototype.putSignedInt=function(t,e){return o(e),this.accommodate(e/8),t<0&&(t+=2<<e-1),this.putInt(t,e)},s.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)},s.DataBuffer.prototype.getInt16=function(){var t=this.data.getInt16(this.read);return this.read+=2,t},s.DataBuffer.prototype.getInt24=function(){var t=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,t},s.DataBuffer.prototype.getInt32=function(){var t=this.data.getInt32(this.read);return this.read+=4,t},s.DataBuffer.prototype.getInt16Le=function(){var t=this.data.getInt16(this.read,!0);return this.read+=2,t},s.DataBuffer.prototype.getInt24Le=function(){var t=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,t},s.DataBuffer.prototype.getInt32Le=function(){var t=this.data.getInt32(this.read,!0);return this.read+=4,t},s.DataBuffer.prototype.getInt=function(t){o(t);var e=0;do{e=(e<<8)+this.data.getInt8(this.read++),t-=8}while(t>0);return e},s.DataBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e},s.DataBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):0===t?e="":(e=0===this.read?this.data:this.data.slice(this.read),this.clear()),e},s.DataBuffer.prototype.bytes=function(t){return"undefined"===typeof t?this.data.slice(this.read):this.data.slice(this.read,this.read+t)},s.DataBuffer.prototype.at=function(t){return this.data.getUint8(this.read+t)},s.DataBuffer.prototype.setAt=function(t,e){return this.data.setUint8(t,e),this},s.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)},s.DataBuffer.prototype.copy=function(){return new s.DataBuffer(this)},s.DataBuffer.prototype.compact=function(){if(this.read>0){var t=new Uint8Array(this.data.buffer,this.read),e=new Uint8Array(t.byteLength);e.set(t),this.data=new DataView(e),this.write-=this.read,this.read=0}return this},s.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this},s.DataBuffer.prototype.truncate=function(t){return this.write=Math.max(0,this.length()-t),this.read=Math.min(this.read,this.write),this},s.DataBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.byteLength;++e){var r=this.data.getUint8(e);r<16&&(t+="0"),t+=r.toString(16)}return t},s.DataBuffer.prototype.toString=function(t){var e=new Uint8Array(this.data,this.read,this.length());if(t=t||"utf8","binary"===t||"raw"===t)return s.binary.raw.encode(e);if("hex"===t)return s.binary.hex.encode(e);if("base64"===t)return s.binary.base64.encode(e);if("utf8"===t)return s.text.utf8.decode(e);if("utf16"===t)return s.text.utf16.decode(e);throw new Error("Invalid encoding: "+t)},s.createBuffer=function(t,e){return e=e||"raw",void 0!==t&&"utf8"===e&&(t=s.encodeUtf8(t)),new s.ByteBuffer(t)},s.fillString=function(t,e){var r="";while(e>0)1&e&&(r+=t),e>>>=1,e>0&&(t+=t);return r},s.xorBytes=function(t,e,r){for(var n="",i="",s="",o=0,a=0;r>0;--r,++o)i=t.charCodeAt(o)^e.charCodeAt(o),a>=10&&(n+=s,s="",a=0),s+=String.fromCharCode(i),++a;return n+=s,n},s.hexToBytes=function(t){var e="",r=0;for(!0&t.length&&(r=1,e+=String.fromCharCode(parseInt(t[0],16)));r<t.length;r+=2)e+=String.fromCharCode(parseInt(t.substr(r,2),16));return e},s.bytesToHex=function(t){return s.createBuffer(t).toHex()},s.int32ToBytes=function(t){return String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(255&t)};var l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",h=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],d="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";s.encode64=function(t,e){var r,n,i,s="",o="",a=0;while(a<t.length)r=t.charCodeAt(a++),n=t.charCodeAt(a++),i=t.charCodeAt(a++),s+=l.charAt(r>>2),s+=l.charAt((3&r)<<4|n>>4),isNaN(n)?s+="==":(s+=l.charAt((15&n)<<2|i>>6),s+=isNaN(i)?"=":l.charAt(63&i)),e&&s.length>e&&(o+=s.substr(0,e)+"\r\n",s=s.substr(e));return o+=s,o},s.decode64=function(t){t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");var e,r,n,i,s="",o=0;while(o<t.length)e=h[t.charCodeAt(o++)-43],r=h[t.charCodeAt(o++)-43],n=h[t.charCodeAt(o++)-43],i=h[t.charCodeAt(o++)-43],s+=String.fromCharCode(e<<2|r>>4),64!==n&&(s+=String.fromCharCode((15&r)<<4|n>>2),64!==i&&(s+=String.fromCharCode((3&n)<<6|i)));return s},s.encodeUtf8=function(t){return unescape(encodeURIComponent(t))},s.decodeUtf8=function(t){return decodeURIComponent(escape(t))},s.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:i.encode,decode:i.decode}},s.binary.raw.encode=function(t){return String.fromCharCode.apply(null,t)},s.binary.raw.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length)),r=r||0;for(var i=r,s=0;s<t.length;++s)n[i++]=t.charCodeAt(s);return e?i-r:n},s.binary.hex.encode=s.bytesToHex,s.binary.hex.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/2))),r=r||0;var i=0,s=r;for(1&t.length&&(i=1,n[s++]=parseInt(t[0],16));i<t.length;i+=2)n[s++]=parseInt(t.substr(i,2),16);return e?s-r:n},s.binary.base64.encode=function(t,e){var r,n,i,s="",o="",a=0;while(a<t.byteLength)r=t[a++],n=t[a++],i=t[a++],s+=l.charAt(r>>2),s+=l.charAt((3&r)<<4|n>>4),isNaN(n)?s+="==":(s+=l.charAt((15&n)<<2|i>>6),s+=isNaN(i)?"=":l.charAt(63&i)),e&&s.length>e&&(o+=s.substr(0,e)+"\r\n",s=s.substr(e));return o+=s,o},s.binary.base64.decode=function(t,e,r){var n,i,s,o,a=e;a||(a=new Uint8Array(3*Math.ceil(t.length/4))),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,""),r=r||0;var c=0,u=r;while(c<t.length)n=h[t.charCodeAt(c++)-43],i=h[t.charCodeAt(c++)-43],s=h[t.charCodeAt(c++)-43],o=h[t.charCodeAt(c++)-43],a[u++]=n<<2|i>>4,64!==s&&(a[u++]=(15&i)<<4|s>>2,64!==o&&(a[u++]=(3&s)<<6|o));return e?u-r:a.subarray(0,u)},s.binary.base58.encode=function(t,e){return s.binary.baseN.encode(t,d,e)},s.binary.base58.decode=function(t,e){return s.binary.baseN.decode(t,d,e)},s.text={utf8:{},utf16:{}},s.text.utf8.encode=function(t,e,r){t=s.encodeUtf8(t);var n=e;n||(n=new Uint8Array(t.length)),r=r||0;for(var i=r,o=0;o<t.length;++o)n[i++]=t.charCodeAt(o);return e?i-r:n},s.text.utf8.decode=function(t){return s.decodeUtf8(String.fromCharCode.apply(null,t))},s.text.utf16.encode=function(t,e,r){var n=e;n||(n=new Uint8Array(2*t.length));var i=new Uint16Array(n.buffer);r=r||0;for(var s=r,o=r,a=0;a<t.length;++a)i[o++]=t.charCodeAt(a),s+=2;return e?s-r:n},s.text.utf16.decode=function(t){return String.fromCharCode.apply(null,new Uint16Array(t.buffer))},s.deflate=function(t,e,r){if(e=s.decode64(t.deflate(s.encode64(e)).rval),r){var n=2,i=e.charCodeAt(1);32&i&&(n=6),e=e.substring(n,e.length-4)}return e},s.inflate=function(t,e,r){var n=t.inflate(s.encode64(e)).rval;return null===n?null:s.decode64(n)};var f=function(t,e,r){if(!t)throw new Error("WebStorage not available.");var n;if(null===r?n=t.removeItem(e):(r=s.encode64(JSON.stringify(r)),n=t.setItem(e,r)),"undefined"!==typeof n&&!0!==n.rval){var i=new Error(n.error.message);throw i.id=n.error.id,i.name=n.error.name,i}},p=function(t,e){if(!t)throw new Error("WebStorage not available.");var r=t.getItem(e);if(t.init)if(null===r.rval){if(r.error){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}r=null}else r=r.rval;return null!==r&&(r=JSON.parse(s.decode64(r))),r},g=function(t,e,r,n){var i=p(t,e);null===i&&(i={}),i[r]=n,f(t,e,i)},y=function(t,e,r){var n=p(t,e);return null!==n&&(n=r in n?n[r]:null),n},m=function(t,e,r){var n=p(t,e);if(null!==n&&r in n){delete n[r];var i=!0;for(var s in n){i=!1;break}i&&(n=null),f(t,e,n)}},w=function(t,e){f(t,e,null)},v=function(t,e,r){var n,i=null;"undefined"===typeof r&&(r=["web","flash"]);var s=!1,o=null;for(var a in r){n=r[a];try{if("flash"===n||"both"===n){if(null===e[0])throw new Error("Flash local storage not available.");i=t.apply(this,e),s="flash"===n}"web"!==n&&"both"!==n||(e[0]=localStorage,i=t.apply(this,e),s=!0)}catch(c){o=c}if(s)break}if(!s)throw o;return i};s.setItem=function(t,e,r,n,i){v(g,arguments,i)},s.getItem=function(t,e,r,n){return v(y,arguments,n)},s.removeItem=function(t,e,r,n){v(m,arguments,n)},s.clearItems=function(t,e,r){v(w,arguments,r)},s.isEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0},s.format=function(t){var e,r,n=/%./g,i=0,s=[],o=0;while(e=n.exec(t)){r=t.substring(o,n.lastIndex-2),r.length>0&&s.push(r),o=n.lastIndex;var a=e[0][1];switch(a){case"s":case"o":i<arguments.length?s.push(arguments[1+i++]):s.push("<?>");break;case"%":s.push("%");break;default:s.push("<%"+a+"?>")}}return s.push(t.substring(o)),s.join("")},s.formatNumber=function(t,e,r,n){var i=t,s=isNaN(e=Math.abs(e))?2:e,o=void 0===r?",":r,a=void 0===n?".":n,c=i<0?"-":"",u=parseInt(i=Math.abs(+i||0).toFixed(s),10)+"",l=u.length>3?u.length%3:0;return c+(l?u.substr(0,l)+a:"")+u.substr(l).replace(/(\d{3})(?=\d)/g,"$1"+a)+(s?o+Math.abs(i-u).toFixed(s).slice(2):"")},s.formatSize=function(t){return t=t>=1073741824?s.formatNumber(t/1073741824,2,".","")+" GiB":t>=1048576?s.formatNumber(t/1048576,2,".","")+" MiB":t>=1024?s.formatNumber(t/1024,0)+" KiB":s.formatNumber(t,0)+" bytes",t},s.bytesFromIP=function(t){return-1!==t.indexOf(".")?s.bytesFromIPv4(t):-1!==t.indexOf(":")?s.bytesFromIPv6(t):null},s.bytesFromIPv4=function(t){if(t=t.split("."),4!==t.length)return null;for(var e=s.createBuffer(),r=0;r<t.length;++r){var n=parseInt(t[r],10);if(isNaN(n))return null;e.putByte(n)}return e.getBytes()},s.bytesFromIPv6=function(t){var e=0;t=t.split(":").filter((function(t){return 0===t.length&&++e,!0}));for(var r=2*(8-t.length+e),n=s.createBuffer(),i=0;i<8;++i)if(t[i]&&0!==t[i].length){var o=s.hexToBytes(t[i]);o.length<2&&n.putByte(0),n.putBytes(o)}else n.fillWithByte(0,r),r=0;return n.getBytes()},s.bytesToIP=function(t){return 4===t.length?s.bytesToIPv4(t):16===t.length?s.bytesToIPv6(t):null},s.bytesToIPv4=function(t){if(4!==t.length)return null;for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e.join(".")},s.bytesToIPv6=function(t){if(16!==t.length)return null;for(var e=[],r=[],n=0,i=0;i<t.length;i+=2){var o=s.bytesToHex(t[i]+t[i+1]);while("0"===o[0]&&"0"!==o)o=o.substr(1);if("0"===o){var a=r[r.length-1],c=e.length;a&&c===a.end+1?(a.end=c,a.end-a.start>r[n].end-r[n].start&&(n=r.length-1)):r.push({start:c,end:c})}e.push(o)}if(r.length>0){var u=r[n];u.end-u.start>0&&(e.splice(u.start,u.end-u.start+1,""),0===u.start&&e.unshift(""),7===u.end&&e.push(""))}return e.join(":")},s.estimateCores=function(t,e){if("function"===typeof t&&(e=t,t={}),t=t||{},"cores"in s&&!t.update)return e(null,s.cores);if("undefined"!==typeof navigator&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return s.cores=navigator.hardwareConcurrency,e(null,s.cores);if("undefined"===typeof Worker)return s.cores=1,e(null,s.cores);if("undefined"===typeof Blob)return s.cores=2,e(null,s.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",(function(t){var e=Date.now(),r=e+4;while(Date.now()<r);self.postMessage({st:e,et:r})}))}.toString(),")()"],{type:"application/javascript"}));function n(t,a,c){if(0===a){var u=Math.floor(t.reduce((function(t,e){return t+e}),0)/t.length);return s.cores=Math.max(1,u),URL.revokeObjectURL(r),e(null,s.cores)}i(c,(function(e,r){t.push(o(c,r)),n(t,a-1,c)}))}function i(t,e){for(var n=[],i=[],s=0;s<t;++s){var o=new Worker(r);o.addEventListener("message",(function(r){if(i.push(r.data),i.length===t){for(var s=0;s<t;++s)n[s].terminate();e(null,i)}})),n.push(o)}for(s=0;s<t;++s)n[s].postMessage(s)}function o(t,e){for(var r=[],n=0;n<t;++n)for(var i=e[n],s=r[n]=[],o=0;o<t;++o)if(n!==o){var a=e[o];(i.st>a.st&&i.st<a.et||a.st>i.st&&a.st<i.et)&&s.push(o)}return r.reduce((function(t,e){return Math.max(t,e.length)}),0)}n([],5,16)}},8410:function(t,e,r){r(1703);var n=r(5736);r(22),r(1041),r(8577),r(4038),r(235),r(9002),r(7513),r(5451),r(5070),r(4292);var i=n.asn1,s=t.exports=n.pki=n.pki||{},o=s.oids,a={};a["CN"]=o["commonName"],a["commonName"]="CN",a["C"]=o["countryName"],a["countryName"]="C",a["L"]=o["localityName"],a["localityName"]="L",a["ST"]=o["stateOrProvinceName"],a["stateOrProvinceName"]="ST",a["O"]=o["organizationName"],a["organizationName"]="O",a["OU"]=o["organizationalUnitName"],a["organizationalUnitName"]="OU",a["E"]=o["emailAddress"],a["emailAddress"]="E";var c=n.pki.rsa.publicKeyValidator,u={name:"Certificate",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:i.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:i.Class.UNIVERSAL,type:i.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:i.Class.UNIVERSAL,type:i.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:i.Class.UNIVERSAL,type:i.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:i.Class.UNIVERSAL,type:i.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},c,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:i.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:i.Class.UNIVERSAL,type:i.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:i.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:i.Class.UNIVERSAL,type:i.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:i.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:i.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:i.Class.UNIVERSAL,type:i.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},l={name:"rsapss",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:i.Class.UNIVERSAL,type:i.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:i.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:i.Class.UNIVERSAL,type:i.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:i.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:i.Class.UNIVERSAL,type:i.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:i.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:i.Class.UNIVERSAL,type:i.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},h={name:"CertificationRequestInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},c,{name:"CertificationRequestInfo.attributes",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:i.Class.UNIVERSAL,type:i.Type.SET,constructed:!0}]}]}]},d={name:"CertificationRequest",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[h,{name:"CertificationRequest.signatureAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:i.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:i.Class.UNIVERSAL,type:i.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};function f(t,e){"string"===typeof e&&(e={shortName:e});for(var r,n=null,i=0;null===n&&i<t.attributes.length;++i)r=t.attributes[i],(e.type&&e.type===r.type||e.name&&e.name===r.name||e.shortName&&e.shortName===r.shortName)&&(n=r);return n}s.RDNAttributesAsArray=function(t,e){for(var r,n,s,c=[],u=0;u<t.value.length;++u){r=t.value[u];for(var l=0;l<r.value.length;++l)s={},n=r.value[l],s.type=i.derToOid(n.value[0].value),s.value=n.value[1].value,s.valueTagClass=n.value[1].type,s.type in o&&(s.name=o[s.type],s.name in a&&(s.shortName=a[s.name])),e&&(e.update(s.type),e.update(s.value)),c.push(s)}return c},s.CRIAttributesAsArray=function(t){for(var e=[],r=0;r<t.length;++r)for(var n=t[r],c=i.derToOid(n.value[0].value),u=n.value[1].value,l=0;l<u.length;++l){var h={};if(h.type=c,h.value=u[l].value,h.valueTagClass=u[l].type,h.type in o&&(h.name=o[h.type],h.name in a&&(h.shortName=a[h.name])),h.type===o.extensionRequest){h.extensions=[];for(var d=0;d<h.value.length;++d)h.extensions.push(s.certificateExtensionFromAsn1(h.value[d]))}e.push(h)}return e};var p=function(t,e,r){var n={};if(t!==o["RSASSA-PSS"])return n;r&&(n={hash:{algorithmOid:o["sha1"]},mgf:{algorithmOid:o["mgf1"],hash:{algorithmOid:o["sha1"]}},saltLength:20});var s={},a=[];if(!i.validate(e,l,s,a)){var c=new Error("Cannot read RSASSA-PSS parameter block.");throw c.errors=a,c}return void 0!==s.hashOid&&(n.hash=n.hash||{},n.hash.algorithmOid=i.derToOid(s.hashOid)),void 0!==s.maskGenOid&&(n.mgf=n.mgf||{},n.mgf.algorithmOid=i.derToOid(s.maskGenOid),n.mgf.hash=n.mgf.hash||{},n.mgf.hash.algorithmOid=i.derToOid(s.maskGenHashOid)),void 0!==s.saltLength&&(n.saltLength=s.saltLength.charCodeAt(0)),n},g=function(t){switch(o[t.signatureOid]){case"sha1WithRSAEncryption":case"sha1WithRSASignature":return n.md.sha1.create();case"md5WithRSAEncryption":return n.md.md5.create();case"sha256WithRSAEncryption":return n.md.sha256.create();case"sha384WithRSAEncryption":return n.md.sha384.create();case"sha512WithRSAEncryption":return n.md.sha512.create();case"RSASSA-PSS":return n.md.sha256.create();default:var e=new Error("Could not compute "+t.type+" digest. Unknown signature OID.");throw e.signatureOid=t.signatureOid,e}},y=function(t){var e,r=t.certificate;switch(r.signatureOid){case o.sha1WithRSAEncryption:case o.sha1WithRSASignature:break;case o["RSASSA-PSS"]:var i,s;if(i=o[r.signatureParameters.mgf.hash.algorithmOid],void 0===i||void 0===n.md[i]){var a=new Error("Unsupported MGF hash function.");throw a.oid=r.signatureParameters.mgf.hash.algorithmOid,a.name=i,a}if(s=o[r.signatureParameters.mgf.algorithmOid],void 0===s||void 0===n.mgf[s]){a=new Error("Unsupported MGF function.");throw a.oid=r.signatureParameters.mgf.algorithmOid,a.name=s,a}if(s=n.mgf[s].create(n.md[i].create()),i=o[r.signatureParameters.hash.algorithmOid],void 0===i||void 0===n.md[i]){a=new Error("Unsupported RSASSA-PSS hash function.");throw a.oid=r.signatureParameters.hash.algorithmOid,a.name=i,a}e=n.pss.create(n.md[i].create(),s,r.signatureParameters.saltLength);break}return r.publicKey.verify(t.md.digest().getBytes(),t.signature,e)};function m(t){for(var e,r,s=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]),o=t.attributes,a=0;a<o.length;++a){e=o[a];var c=e.value,u=i.Type.PRINTABLESTRING;"valueTagClass"in e&&(u=e.valueTagClass,u===i.Type.UTF8&&(c=n.util.encodeUtf8(c))),r=i.create(i.Class.UNIVERSAL,i.Type.SET,!0,[i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.type).getBytes()),i.create(i.Class.UNIVERSAL,u,!1,c)])]),s.value.push(r)}return s}function w(t){for(var e,r=0;r<t.length;++r){if(e=t[r],"undefined"===typeof e.name&&(e.type&&e.type in s.oids?e.name=s.oids[e.type]:e.shortName&&e.shortName in a&&(e.name=s.oids[a[e.shortName]])),"undefined"===typeof e.type){if(!e.name||!(e.name in s.oids)){var n=new Error("Attribute type not specified.");throw n.attribute=e,n}e.type=s.oids[e.name]}if("undefined"===typeof e.shortName&&e.name&&e.name in a&&(e.shortName=a[e.name]),e.type===o.extensionRequest&&(e.valueConstructed=!0,e.valueTagClass=i.Type.SEQUENCE,!e.value&&e.extensions)){e.value=[];for(var c=0;c<e.extensions.length;++c)e.value.push(s.certificateExtensionToAsn1(v(e.extensions[c])))}if("undefined"===typeof e.value){n=new Error("Attribute value not specified.");throw n.attribute=e,n}}}function v(t,e){if(e=e||{},"undefined"===typeof t.name&&t.id&&t.id in s.oids&&(t.name=s.oids[t.id]),"undefined"===typeof t.id){if(!t.name||!(t.name in s.oids)){var r=new Error("Extension ID not specified.");throw r.extension=t,r}t.id=s.oids[t.name]}if("undefined"!==typeof t.value)return t;if("keyUsage"===t.name){var a=0,c=0,u=0;t.digitalSignature&&(c|=128,a=7),t.nonRepudiation&&(c|=64,a=6),t.keyEncipherment&&(c|=32,a=5),t.dataEncipherment&&(c|=16,a=4),t.keyAgreement&&(c|=8,a=3),t.keyCertSign&&(c|=4,a=2),t.cRLSign&&(c|=2,a=1),t.encipherOnly&&(c|=1,a=0),t.decipherOnly&&(u|=128,a=7);var l=String.fromCharCode(a);0!==u?l+=String.fromCharCode(c)+String.fromCharCode(u):0!==c&&(l+=String.fromCharCode(c)),t.value=i.create(i.Class.UNIVERSAL,i.Type.BITSTRING,!1,l)}else if("basicConstraints"===t.name)t.value=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]),t.cA&&t.value.value.push(i.create(i.Class.UNIVERSAL,i.Type.BOOLEAN,!1,String.fromCharCode(255))),"pathLenConstraint"in t&&t.value.value.push(i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(t.pathLenConstraint).getBytes()));else if("extKeyUsage"===t.name){t.value=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]);var h=t.value.value;for(var d in t)!0===t[d]&&(d in o?h.push(i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(o[d]).getBytes())):-1!==d.indexOf(".")&&h.push(i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(d).getBytes())))}else if("nsCertType"===t.name){a=0,c=0;t.client&&(c|=128,a=7),t.server&&(c|=64,a=6),t.email&&(c|=32,a=5),t.objsign&&(c|=16,a=4),t.reserved&&(c|=8,a=3),t.sslCA&&(c|=4,a=2),t.emailCA&&(c|=2,a=1),t.objCA&&(c|=1,a=0);l=String.fromCharCode(a);0!==c&&(l+=String.fromCharCode(c)),t.value=i.create(i.Class.UNIVERSAL,i.Type.BITSTRING,!1,l)}else if("subjectAltName"===t.name||"issuerAltName"===t.name){t.value=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]);for(var f=0;f<t.altNames.length;++f){v=t.altNames[f];l=v.value;if(7===v.type&&v.ip){if(l=n.util.bytesFromIP(v.ip),null===l){r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=t,r}}else 8===v.type&&(l=v.oid?i.oidToDer(i.oidToDer(v.oid)):i.oidToDer(l));t.value.value.push(i.create(i.Class.CONTEXT_SPECIFIC,v.type,!1,l))}}else if("nsComment"===t.name&&e.cert){if(!/^[\x00-\x7F]*$/.test(t.comment)||t.comment.length<1||t.comment.length>128)throw new Error('Invalid "nsComment" content.');t.value=i.create(i.Class.UNIVERSAL,i.Type.IA5STRING,!1,t.comment)}else if("subjectKeyIdentifier"===t.name&&e.cert){var p=e.cert.generateSubjectKeyIdentifier();t.subjectKeyIdentifier=p.toHex(),t.value=i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,p.getBytes())}else if("authorityKeyIdentifier"===t.name&&e.cert){t.value=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]);h=t.value.value;if(t.keyIdentifier){var g=!0===t.keyIdentifier?e.cert.generateSubjectKeyIdentifier().getBytes():t.keyIdentifier;h.push(i.create(i.Class.CONTEXT_SPECIFIC,0,!1,g))}if(t.authorityCertIssuer){var y=[i.create(i.Class.CONTEXT_SPECIFIC,4,!0,[m(!0===t.authorityCertIssuer?e.cert.issuer:t.authorityCertIssuer)])];h.push(i.create(i.Class.CONTEXT_SPECIFIC,1,!0,y))}if(t.serialNumber){var w=n.util.hexToBytes(!0===t.serialNumber?e.cert.serialNumber:t.serialNumber);h.push(i.create(i.Class.CONTEXT_SPECIFIC,2,!1,w))}}else if("cRLDistributionPoints"===t.name){t.value=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]);h=t.value.value;var v,E=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]),b=i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[]);for(f=0;f<t.altNames.length;++f){v=t.altNames[f];l=v.value;if(7===v.type&&v.ip){if(l=n.util.bytesFromIP(v.ip),null===l){r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=t,r}}else 8===v.type&&(l=v.oid?i.oidToDer(i.oidToDer(v.oid)):i.oidToDer(l));b.value.push(i.create(i.Class.CONTEXT_SPECIFIC,v.type,!1,l))}E.value.push(i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[b])),h.push(E)}if("undefined"===typeof t.value){r=new Error("Extension value not specified.");throw r.extension=t,r}return t}function E(t,e){switch(t){case o["RSASSA-PSS"]:var r=[];return void 0!==e.hash.algorithmOid&&r.push(i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.hash.algorithmOid).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")])])),void 0!==e.mgf.algorithmOid&&r.push(i.create(i.Class.CONTEXT_SPECIFIC,1,!0,[i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.mgf.algorithmOid).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.mgf.hash.algorithmOid).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")])])])),void 0!==e.saltLength&&r.push(i.create(i.Class.CONTEXT_SPECIFIC,2,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(e.saltLength).getBytes())])),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,r);default:return i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")}}function b(t){var e=i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[]);if(0===t.attributes.length)return e;for(var r=t.attributes,s=0;s<r.length;++s){var o=r[s],a=o.value,c=i.Type.UTF8;"valueTagClass"in o&&(c=o.valueTagClass),c===i.Type.UTF8&&(a=n.util.encodeUtf8(a));var u=!1;"valueConstructed"in o&&(u=o.valueConstructed);var l=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(o.type).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SET,!0,[i.create(i.Class.UNIVERSAL,c,u,a)])]);e.value.push(l)}return e}s.certificateFromPem=function(t,e,r){var o=n.pem.decode(t)[0];if("CERTIFICATE"!==o.type&&"X509 CERTIFICATE"!==o.type&&"TRUSTED CERTIFICATE"!==o.type){var a=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw a.headerType=o.type,a}if(o.procType&&"ENCRYPTED"===o.procType.type)throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var c=i.fromDer(o.body,r);return s.certificateFromAsn1(c,e)},s.certificateToPem=function(t,e){var r={type:"CERTIFICATE",body:i.toDer(s.certificateToAsn1(t)).getBytes()};return n.pem.encode(r,{maxline:e})},s.publicKeyFromPem=function(t){var e=n.pem.decode(t)[0];if("PUBLIC KEY"!==e.type&&"RSA PUBLIC KEY"!==e.type){var r=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw r.headerType=e.type,r}if(e.procType&&"ENCRYPTED"===e.procType.type)throw new Error("Could not convert public key from PEM; PEM is encrypted.");var o=i.fromDer(e.body);return s.publicKeyFromAsn1(o)},s.publicKeyToPem=function(t,e){var r={type:"PUBLIC KEY",body:i.toDer(s.publicKeyToAsn1(t)).getBytes()};return n.pem.encode(r,{maxline:e})},s.publicKeyToRSAPublicKeyPem=function(t,e){var r={type:"RSA PUBLIC KEY",body:i.toDer(s.publicKeyToRSAPublicKey(t)).getBytes()};return n.pem.encode(r,{maxline:e})},s.getPublicKeyFingerprint=function(t,e){e=e||{};var r,o=e.md||n.md.sha1.create(),a=e.type||"RSAPublicKey";switch(a){case"RSAPublicKey":r=i.toDer(s.publicKeyToRSAPublicKey(t)).getBytes();break;case"SubjectPublicKeyInfo":r=i.toDer(s.publicKeyToAsn1(t)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+e.type+'".')}o.start(),o.update(r);var c=o.digest();if("hex"===e.encoding){var u=c.toHex();return e.delimiter?u.match(/.{2}/g).join(e.delimiter):u}if("binary"===e.encoding)return c.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".');return c},s.certificationRequestFromPem=function(t,e,r){var o=n.pem.decode(t)[0];if("CERTIFICATE REQUEST"!==o.type){var a=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw a.headerType=o.type,a}if(o.procType&&"ENCRYPTED"===o.procType.type)throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var c=i.fromDer(o.body,r);return s.certificationRequestFromAsn1(c,e)},s.certificationRequestToPem=function(t,e){var r={type:"CERTIFICATE REQUEST",body:i.toDer(s.certificationRequestToAsn1(t)).getBytes()};return n.pem.encode(r,{maxline:e})},s.createCertificate=function(){var t={version:2,serialNumber:"00",signatureOid:null,signature:null,siginfo:{}};return t.siginfo.algorithmOid=null,t.validity={},t.validity.notBefore=new Date,t.validity.notAfter=new Date,t.issuer={},t.issuer.getField=function(e){return f(t.issuer,e)},t.issuer.addField=function(e){w([e]),t.issuer.attributes.push(e)},t.issuer.attributes=[],t.issuer.hash=null,t.subject={},t.subject.getField=function(e){return f(t.subject,e)},t.subject.addField=function(e){w([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.extensions=[],t.publicKey=null,t.md=null,t.setSubject=function(e,r){w(e),t.subject.attributes=e,delete t.subject.uniqueId,r&&(t.subject.uniqueId=r),t.subject.hash=null},t.setIssuer=function(e,r){w(e),t.issuer.attributes=e,delete t.issuer.uniqueId,r&&(t.issuer.uniqueId=r),t.issuer.hash=null},t.setExtensions=function(e){for(var r=0;r<e.length;++r)v(e[r],{cert:t});t.extensions=e},t.getExtension=function(e){"string"===typeof e&&(e={name:e});for(var r,n=null,i=0;null===n&&i<t.extensions.length;++i)r=t.extensions[i],(e.id&&r.id===e.id||e.name&&r.name===e.name)&&(n=r);return n},t.sign=function(e,r){t.md=r||n.md.sha1.create();var a=o[t.md.algorithm+"WithRSAEncryption"];if(!a){var c=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw c.algorithm=t.md.algorithm,c}t.signatureOid=t.siginfo.algorithmOid=a,t.tbsCertificate=s.getTBSCertificate(t);var u=i.toDer(t.tbsCertificate);t.md.update(u.getBytes()),t.signature=e.sign(t.md)},t.verify=function(e){var r=!1;if(!t.issued(e)){var n=e.issuer,o=t.subject,a=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw a.expectedIssuer=o.attributes,a.actualIssuer=n.attributes,a}var c=e.md;if(null===c){c=g({signatureOid:e.signatureOid,type:"certificate"});var u=e.tbsCertificate||s.getTBSCertificate(e),l=i.toDer(u);c.update(l.getBytes())}return null!==c&&(r=y({certificate:t,md:c,signature:e.signature})),r},t.isIssuer=function(e){var r=!1,n=t.issuer,i=e.subject;if(n.hash&&i.hash)r=n.hash===i.hash;else if(n.attributes.length===i.attributes.length){var s,o;r=!0;for(var a=0;r&&a<n.attributes.length;++a)s=n.attributes[a],o=i.attributes[a],s.type===o.type&&s.value===o.value||(r=!1)}return r},t.issued=function(e){return e.isIssuer(t)},t.generateSubjectKeyIdentifier=function(){return s.getPublicKeyFingerprint(t.publicKey,{type:"RSAPublicKey"})},t.verifySubjectKeyIdentifier=function(){for(var e=o["subjectKeyIdentifier"],r=0;r<t.extensions.length;++r){var i=t.extensions[r];if(i.id===e){var s=t.generateSubjectKeyIdentifier().getBytes();return n.util.hexToBytes(i.subjectKeyIdentifier)===s}}return!1},t},s.certificateFromAsn1=function(t,e){var r={},o=[];if(!i.validate(t,u,r,o)){var a=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw a.errors=o,a}var c=i.derToOid(r.publicKeyOid);if(c!==s.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var l=s.createCertificate();l.version=r.certVersion?r.certVersion.charCodeAt(0):0;var h=n.util.createBuffer(r.certSerialNumber);l.serialNumber=h.toHex(),l.signatureOid=n.asn1.derToOid(r.certSignatureOid),l.signatureParameters=p(l.signatureOid,r.certSignatureParams,!0),l.siginfo.algorithmOid=n.asn1.derToOid(r.certinfoSignatureOid),l.siginfo.parameters=p(l.siginfo.algorithmOid,r.certinfoSignatureParams,!1),l.signature=r.certSignature;var d=[];if(void 0!==r.certValidity1UTCTime&&d.push(i.utcTimeToDate(r.certValidity1UTCTime)),void 0!==r.certValidity2GeneralizedTime&&d.push(i.generalizedTimeToDate(r.certValidity2GeneralizedTime)),void 0!==r.certValidity3UTCTime&&d.push(i.utcTimeToDate(r.certValidity3UTCTime)),void 0!==r.certValidity4GeneralizedTime&&d.push(i.generalizedTimeToDate(r.certValidity4GeneralizedTime)),d.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(d.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(l.validity.notBefore=d[0],l.validity.notAfter=d[1],l.tbsCertificate=r.tbsCertificate,e){l.md=g({signatureOid:l.signatureOid,type:"certificate"});var y=i.toDer(l.tbsCertificate);l.md.update(y.getBytes())}var m=n.md.sha1.create(),v=i.toDer(r.certIssuer);m.update(v.getBytes()),l.issuer.getField=function(t){return f(l.issuer,t)},l.issuer.addField=function(t){w([t]),l.issuer.attributes.push(t)},l.issuer.attributes=s.RDNAttributesAsArray(r.certIssuer),r.certIssuerUniqueId&&(l.issuer.uniqueId=r.certIssuerUniqueId),l.issuer.hash=m.digest().toHex();var E=n.md.sha1.create(),b=i.toDer(r.certSubject);return E.update(b.getBytes()),l.subject.getField=function(t){return f(l.subject,t)},l.subject.addField=function(t){w([t]),l.subject.attributes.push(t)},l.subject.attributes=s.RDNAttributesAsArray(r.certSubject),r.certSubjectUniqueId&&(l.subject.uniqueId=r.certSubjectUniqueId),l.subject.hash=E.digest().toHex(),r.certExtensions?l.extensions=s.certificateExtensionsFromAsn1(r.certExtensions):l.extensions=[],l.publicKey=s.publicKeyFromAsn1(r.subjectPublicKeyInfo),l},s.certificateExtensionsFromAsn1=function(t){for(var e=[],r=0;r<t.value.length;++r)for(var n=t.value[r],i=0;i<n.value.length;++i)e.push(s.certificateExtensionFromAsn1(n.value[i]));return e},s.certificateExtensionFromAsn1=function(t){var e={};if(e.id=i.derToOid(t.value[0].value),e.critical=!1,t.value[1].type===i.Type.BOOLEAN?(e.critical=0!==t.value[1].value.charCodeAt(0),e.value=t.value[2].value):e.value=t.value[1].value,e.id in o)if(e.name=o[e.id],"keyUsage"===e.name){var r=i.fromDer(e.value),s=0,a=0;r.value.length>1&&(s=r.value.charCodeAt(1),a=r.value.length>2?r.value.charCodeAt(2):0),e.digitalSignature=128===(128&s),e.nonRepudiation=64===(64&s),e.keyEncipherment=32===(32&s),e.dataEncipherment=16===(16&s),e.keyAgreement=8===(8&s),e.keyCertSign=4===(4&s),e.cRLSign=2===(2&s),e.encipherOnly=1===(1&s),e.decipherOnly=128===(128&a)}else if("basicConstraints"===e.name){r=i.fromDer(e.value);r.value.length>0&&r.value[0].type===i.Type.BOOLEAN?e.cA=0!==r.value[0].value.charCodeAt(0):e.cA=!1;var c=null;r.value.length>0&&r.value[0].type===i.Type.INTEGER?c=r.value[0].value:r.value.length>1&&(c=r.value[1].value),null!==c&&(e.pathLenConstraint=i.derToInteger(c))}else if("extKeyUsage"===e.name){r=i.fromDer(e.value);for(var u=0;u<r.value.length;++u){var l=i.derToOid(r.value[u].value);l in o?e[o[l]]=!0:e[l]=!0}}else if("nsCertType"===e.name){r=i.fromDer(e.value),s=0;r.value.length>1&&(s=r.value.charCodeAt(1)),e.client=128===(128&s),e.server=64===(64&s),e.email=32===(32&s),e.objsign=16===(16&s),e.reserved=8===(8&s),e.sslCA=4===(4&s),e.emailCA=2===(2&s),e.objCA=1===(1&s)}else if("subjectAltName"===e.name||"issuerAltName"===e.name){var h;e.altNames=[];r=i.fromDer(e.value);for(var d=0;d<r.value.length;++d){h=r.value[d];var f={type:h.type,value:h.value};switch(e.altNames.push(f),h.type){case 1:case 2:case 6:break;case 7:f.ip=n.util.bytesToIP(h.value);break;case 8:f.oid=i.derToOid(h.value);break;default:}}}else if("subjectKeyIdentifier"===e.name){r=i.fromDer(e.value);e.subjectKeyIdentifier=n.util.bytesToHex(r.value)}return e},s.certificationRequestFromAsn1=function(t,e){var r={},o=[];if(!i.validate(t,d,r,o)){var a=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw a.errors=o,a}var c=i.derToOid(r.publicKeyOid);if(c!==s.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var u=s.createCertificationRequest();if(u.version=r.csrVersion?r.csrVersion.charCodeAt(0):0,u.signatureOid=n.asn1.derToOid(r.csrSignatureOid),u.signatureParameters=p(u.signatureOid,r.csrSignatureParams,!0),u.siginfo.algorithmOid=n.asn1.derToOid(r.csrSignatureOid),u.siginfo.parameters=p(u.siginfo.algorithmOid,r.csrSignatureParams,!1),u.signature=r.csrSignature,u.certificationRequestInfo=r.certificationRequestInfo,e){u.md=g({signatureOid:u.signatureOid,type:"certification request"});var l=i.toDer(u.certificationRequestInfo);u.md.update(l.getBytes())}var h=n.md.sha1.create();return u.subject.getField=function(t){return f(u.subject,t)},u.subject.addField=function(t){w([t]),u.subject.attributes.push(t)},u.subject.attributes=s.RDNAttributesAsArray(r.certificationRequestInfoSubject,h),u.subject.hash=h.digest().toHex(),u.publicKey=s.publicKeyFromAsn1(r.subjectPublicKeyInfo),u.getAttribute=function(t){return f(u,t)},u.addAttribute=function(t){w([t]),u.attributes.push(t)},u.attributes=s.CRIAttributesAsArray(r.certificationRequestInfoAttributes||[]),u},s.createCertificationRequest=function(){var t={version:0,signatureOid:null,signature:null,siginfo:{}};return t.siginfo.algorithmOid=null,t.subject={},t.subject.getField=function(e){return f(t.subject,e)},t.subject.addField=function(e){w([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.publicKey=null,t.attributes=[],t.getAttribute=function(e){return f(t,e)},t.addAttribute=function(e){w([e]),t.attributes.push(e)},t.md=null,t.setSubject=function(e){w(e),t.subject.attributes=e,t.subject.hash=null},t.setAttributes=function(e){w(e),t.attributes=e},t.sign=function(e,r){t.md=r||n.md.sha1.create();var a=o[t.md.algorithm+"WithRSAEncryption"];if(!a){var c=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw c.algorithm=t.md.algorithm,c}t.signatureOid=t.siginfo.algorithmOid=a,t.certificationRequestInfo=s.getCertificationRequestInfo(t);var u=i.toDer(t.certificationRequestInfo);t.md.update(u.getBytes()),t.signature=e.sign(t.md)},t.verify=function(){var e=!1,r=t.md;if(null===r){r=g({signatureOid:t.signatureOid,type:"certification request"});var n=t.certificationRequestInfo||s.getCertificationRequestInfo(t),o=i.toDer(n);r.update(o.getBytes())}return null!==r&&(e=y({certificate:t,md:r,signature:t.signature})),e},t};var S=new Date("1950-01-01T00:00:00Z"),_=new Date("2050-01-01T00:00:00Z");function R(t){return t>=S&&t<_?i.create(i.Class.UNIVERSAL,i.Type.UTCTIME,!1,i.dateToUtcTime(t)):i.create(i.Class.UNIVERSAL,i.Type.GENERALIZEDTIME,!1,i.dateToGeneralizedTime(t))}s.getTBSCertificate=function(t){var e=R(t.validity.notBefore),r=R(t.validity.notAfter),o=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(t.version).getBytes())]),i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,n.util.hexToBytes(t.serialNumber)),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.siginfo.algorithmOid).getBytes()),E(t.siginfo.algorithmOid,t.siginfo.parameters)]),m(t.issuer),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[e,r]),m(t.subject),s.publicKeyToAsn1(t.publicKey)]);return t.issuer.uniqueId&&o.value.push(i.create(i.Class.CONTEXT_SPECIFIC,1,!0,[i.create(i.Class.UNIVERSAL,i.Type.BITSTRING,!1,String.fromCharCode(0)+t.issuer.uniqueId)])),t.subject.uniqueId&&o.value.push(i.create(i.Class.CONTEXT_SPECIFIC,2,!0,[i.create(i.Class.UNIVERSAL,i.Type.BITSTRING,!1,String.fromCharCode(0)+t.subject.uniqueId)])),t.extensions.length>0&&o.value.push(s.certificateExtensionsToAsn1(t.extensions)),o},s.getCertificationRequestInfo=function(t){var e=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(t.version).getBytes()),m(t.subject),s.publicKeyToAsn1(t.publicKey),b(t)]);return e},s.distinguishedNameToAsn1=function(t){return m(t)},s.certificateToAsn1=function(t){var e=t.tbsCertificate||s.getTBSCertificate(t);return i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[e,i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.signatureOid).getBytes()),E(t.signatureOid,t.signatureParameters)]),i.create(i.Class.UNIVERSAL,i.Type.BITSTRING,!1,String.fromCharCode(0)+t.signature)])},s.certificateExtensionsToAsn1=function(t){var e=i.create(i.Class.CONTEXT_SPECIFIC,3,!0,[]),r=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]);e.value.push(r);for(var n=0;n<t.length;++n)r.value.push(s.certificateExtensionToAsn1(t[n]));return e},s.certificateExtensionToAsn1=function(t){var e=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]);e.value.push(i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.id).getBytes())),t.critical&&e.value.push(i.create(i.Class.UNIVERSAL,i.Type.BOOLEAN,!1,String.fromCharCode(255)));var r=t.value;return"string"!==typeof t.value&&(r=i.toDer(r).getBytes()),e.value.push(i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,r)),e},s.certificationRequestToAsn1=function(t){var e=t.certificationRequestInfo||s.getCertificationRequestInfo(t);return i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[e,i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.signatureOid).getBytes()),E(t.signatureOid,t.signatureParameters)]),i.create(i.Class.UNIVERSAL,i.Type.BITSTRING,!1,String.fromCharCode(0)+t.signature)])},s.createCaStore=function(t){var e={certs:{}};function r(t){return o(t),e.certs[t.hash]||null}function o(t){if(!t.hash){var e=n.md.sha1.create();t.attributes=s.RDNAttributesAsArray(m(t),e),t.hash=e.digest().toHex()}}if(e.getIssuer=function(t){var e=r(t.issuer);return e},e.addCertificate=function(t){if("string"===typeof t&&(t=n.pki.certificateFromPem(t)),o(t.subject),!e.hasCertificate(t))if(t.subject.hash in e.certs){var r=e.certs[t.subject.hash];n.util.isArray(r)||(r=[r]),r.push(t),e.certs[t.subject.hash]=r}else e.certs[t.subject.hash]=t},e.hasCertificate=function(t){"string"===typeof t&&(t=n.pki.certificateFromPem(t));var e=r(t.subject);if(!e)return!1;n.util.isArray(e)||(e=[e]);for(var o=i.toDer(s.certificateToAsn1(t)).getBytes(),a=0;a<e.length;++a){var c=i.toDer(s.certificateToAsn1(e[a])).getBytes();if(o===c)return!0}return!1},e.listAllCertificates=function(){var t=[];for(var r in e.certs)if(e.certs.hasOwnProperty(r)){var i=e.certs[r];if(n.util.isArray(i))for(var s=0;s<i.length;++s)t.push(i[s]);else t.push(i)}return t},e.removeCertificate=function(t){var a;if("string"===typeof t&&(t=n.pki.certificateFromPem(t)),o(t.subject),!e.hasCertificate(t))return null;var c=r(t.subject);if(!n.util.isArray(c))return a=e.certs[t.subject.hash],delete e.certs[t.subject.hash],a;for(var u=i.toDer(s.certificateToAsn1(t)).getBytes(),l=0;l<c.length;++l){var h=i.toDer(s.certificateToAsn1(c[l])).getBytes();u===h&&(a=c[l],c.splice(l,1))}return 0===c.length&&delete e.certs[t.subject.hash],a},t)for(var a=0;a<t.length;++a){var c=t[a];e.addCertificate(c)}return e},s.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"},s.verifyCertificateChain=function(t,e,r){"function"===typeof r&&(r={verify:r}),r=r||{},e=e.slice(0);var i=e.slice(0),o=r.validityCheckDate;"undefined"===typeof o&&(o=new Date);var a=!0,c=null,u=0;do{var l=e.shift(),h=null,d=!1;if(o&&(o<l.validity.notBefore||o>l.validity.notAfter)&&(c={message:"Certificate is not valid yet or has expired.",error:s.certificateError.certificate_expired,notBefore:l.validity.notBefore,notAfter:l.validity.notAfter,now:o}),null===c){if(h=e[0]||t.getIssuer(l),null===h&&l.isIssuer(l)&&(d=!0,h=l),h){var f=h;n.util.isArray(f)||(f=[f]);var p=!1;while(!p&&f.length>0){h=f.shift();try{p=h.verify(l)}catch(_){}}p||(c={message:"Certificate signature is invalid.",error:s.certificateError.bad_certificate})}null!==c||h&&!d||t.hasCertificate(l)||(c={message:"Certificate is not trusted.",error:s.certificateError.unknown_ca})}if(null===c&&h&&!l.isIssuer(h)&&(c={message:"Certificate issuer is invalid.",error:s.certificateError.bad_certificate}),null===c)for(var g={keyUsage:!0,basicConstraints:!0},y=0;null===c&&y<l.extensions.length;++y){var m=l.extensions[y];m.critical&&!(m.name in g)&&(c={message:"Certificate has an unsupported critical extension.",error:s.certificateError.unsupported_certificate})}if(null===c&&(!a||0===e.length&&(!h||d))){var w=l.getExtension("basicConstraints"),v=l.getExtension("keyUsage");if(null!==v&&(v.keyCertSign&&null!==w||(c={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:s.certificateError.bad_certificate})),null!==c||null===w||w.cA||(c={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:s.certificateError.bad_certificate}),null===c&&null!==v&&"pathLenConstraint"in w){var E=u-1;E>w.pathLenConstraint&&(c={message:"Certificate basicConstraints pathLenConstraint violated.",error:s.certificateError.bad_certificate})}}var b=null===c||c.error,S=r.verify?r.verify(b,u,i):b;if(!0!==S)throw!0===b&&(c={message:"The application rejected the certificate.",error:s.certificateError.bad_certificate}),(S||0===S)&&("object"!==typeof S||n.util.isArray(S)?"string"===typeof S&&(c.error=S):(S.message&&(c.message=S.message),S.error&&(c.error=S.error))),c;c=null,a=!1,++u}while(e.length>0);return!0}},1838:function(t,e,r){const n=r(2819),i=r(9044);t.exports=class{constructor(){this._buffer=new n,this._waitingConsumers=new n}push(t){const{promise:e,resolve:r}=i();return this._buffer.push({chunk:t,resolve:r}),this._consume(),e}_consume(){while(!this._waitingConsumers.isEmpty()&&!this._buffer.isEmpty()){const t=this._waitingConsumers.shift(),e=this._buffer.shift();t.resolve(e.chunk),e.resolve()}}shift(){const{promise:t,resolve:e}=i();return this._waitingConsumers.push({resolve:e}),this._consume(),t}isEmpty(){return this._buffer.isEmpty()}}},9044:function(t){"use strict";const e=()=>{const t={};return t.promise=new Promise(((e,r)=>{t.resolve=e,t.reject=r})),t};t.exports=e},6327:function(t,e){e.encode=function(t){var e="";for(var r in t)t.hasOwnProperty(r)&&(e.length&&(e+="&"),e+=encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return e},e.decode=function(t){for(var e={},r=t.split("&"),n=0,i=r.length;n<i;n++){var s=r[n].split("=");e[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return e}},2793:function(t){var e=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,r=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function n(t,e){var r=/\/{2,9}/g,n=e.replace(r,"/").split("/");return"/"!=e.substr(0,1)&&0!==e.length||n.splice(0,1),"/"==e.substr(e.length-1,1)&&n.splice(n.length-1,1),n}function i(t,e){var r={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(t,e,n){e&&(r[e]=n)})),r}t.exports=function(t){var s=t,o=t.indexOf("["),a=t.indexOf("]");-1!=o&&-1!=a&&(t=t.substring(0,o)+t.substring(o,a).replace(/:/g,";")+t.substring(a,t.length));var c=e.exec(t||""),u={},l=14;while(l--)u[r[l]]=c[l]||"";return-1!=o&&-1!=a&&(u.source=s,u.host=u.host.substring(1,u.host.length-1).replace(/;/g,":"),u.authority=u.authority.replace("[","").replace("]","").replace(/;/g,":"),u.ipv6uri=!0),u.pathNames=n(u,u["path"]),u.queryKey=i(u,u["query"]),u}},2645:function(t,e,r){"use strict";t.exports=r(1145)["default"]},1145:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=r(98),s=n(r(9840)),o=n(r(1646)),a=r(9564),c=["0.0.0.0/8","10.0.0.0/8","100.64.0.0/10","127.0.0.0/8","169.254.0.0/16","172.16.0.0/12","192.0.0.0/24","192.0.0.0/29","192.0.0.8/32","192.0.0.9/32","192.0.0.10/32","192.0.0.170/32","192.0.0.171/32","192.0.2.0/24","192.31.196.0/24","192.52.193.0/24","192.88.99.0/24","192.168.0.0/16","192.175.48.0/24","198.18.0.0/15","198.51.100.0/24","203.0.113.0/24","240.0.0.0/4","255.255.255.255/32"],u=c.map((t=>new i.Netmask(t)));function l(t){for(let e of u)if(e.contains(t))return!0;return!1}function h(t){return/^::$/.test(t)||/^::1$/.test(t)||/^::f{4}:([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(t)||/^::f{4}:0.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(t)||/^64:ff9b::([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(t)||/^100::([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(t)||/^2001::([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(t)||/^2001:2[0-9a-fA-F]:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(t)||/^2001:db8:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(t)||/^2002:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(t)||/^f[c-d]([0-9a-fA-F]{2,2}):/i.test(t)||/^fe[8-9a-bA-B][0-9a-fA-F]:/i.test(t)||/^ff([0-9a-fA-F]{2,2}):/i.test(t)}e["default"]=t=>{if(a.isValid(t)){const e=a.parse(t);if("ipv4"===e.kind())return l(e.toNormalizedString());if("ipv6"===e.kind())return h(t)}else if(o.default(t)&&s.default.v6().test(t))return h(t)}},9840:function(t){"use strict";const e="[a-fA-F\\d:]",r=t=>t&&t.includeBoundaries?`(?:(?<=\\s|^)(?=${e})|(?<=${e})(?=\\s|$))`:"",n="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",i="[a-fA-F\\d]{1,4}",s=`\n(?:\n(?:${i}:){7}(?:${i}|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8\n(?:${i}:){6}(?:${n}|:${i}|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4\n(?:${i}:){5}(?::${n}|(?::${i}){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4\n(?:${i}:){4}(?:(?::${i}){0,1}:${n}|(?::${i}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4\n(?:${i}:){3}(?:(?::${i}){0,2}:${n}|(?::${i}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4\n(?:${i}:){2}(?:(?::${i}){0,3}:${n}|(?::${i}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4\n(?:${i}:){1}(?:(?::${i}){0,4}:${n}|(?::${i}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4\n(?::(?:(?::${i}){0,5}:${n}|(?::${i}){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4\n)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1\n`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),o=new RegExp(`(?:^${n}$)|(?:^${s}$)`),a=new RegExp(`^${n}$`),c=new RegExp(`^${s}$`),u=t=>t&&t.exact?o:new RegExp(`(?:${r(t)}${n}${r(t)})|(?:${r(t)}${s}${r(t)})`,"g");u.v4=t=>t&&t.exact?a:new RegExp(`${r(t)}${n}${r(t)}`,"g"),u.v6=t=>t&&t.exact?c:new RegExp(`${r(t)}${s}${r(t)}`,"g"),t.exports=u},1646:function(t,e,r){"use strict";const n=r(9840),i=t=>n({exact:!0}).test(t);i.v4=t=>n.v4({exact:!0}).test(t),i.v6=t=>n.v6({exact:!0}).test(t),i.version=t=>i(t)?i.v4(t)?4:6:void 0,t.exports=i},7602:function(t,e,r){"use strict";r(1703);var n=65536,i=4294967295;function s(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}var o=r(6779).Buffer,a=r.g.crypto||r.g.msCrypto;function c(t,e){if(t>i)throw new RangeError("requested too many random bytes");var r=o.allocUnsafe(t);if(t>0)if(t>n)for(var s=0;s<t;s+=n)a.getRandomValues(r.slice(s,s+n));else a.getRandomValues(r);return"function"===typeof e?process.nextTick((function(){e(null,r)})):r}a&&a.getRandomValues?t.exports=c:t.exports=s},5314:function(t,e,r){"use strict";function n(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}r(1703);var i={};function s(t,e,r){function s(t,r,n){return"string"===typeof e?e:e(t,r,n)}r||(r=Error);var o=function(t){function e(e,r,n){return t.call(this,s(e,r,n))||this}return n(e,t),e}(r);o.prototype.name=r.name,o.prototype.code=t,i[t]=o}function o(t,e){if(Array.isArray(t)){var r=t.length;return t=t.map((function(t){return String(t)})),r>2?"one of ".concat(e," ").concat(t.slice(0,r-1).join(", "),", or ")+t[r-1]:2===r?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}return"of ".concat(e," ").concat(String(t))}function a(t,e,r){return t.substr(!r||r<0?0:+r,e.length)===e}function c(t,e,r){return(void 0===r||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}function u(t,e,r){return"number"!==typeof r&&(r=0),!(r+e.length>t.length)&&-1!==t.indexOf(e,r)}s("ERR_INVALID_OPT_VALUE",(function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'}),TypeError),s("ERR_INVALID_ARG_TYPE",(function(t,e,r){var n,i;if("string"===typeof e&&a(e,"not ")?(n="must not be",e=e.replace(/^not /,"")):n="must be",c(t," argument"))i="The ".concat(t," ").concat(n," ").concat(o(e,"type"));else{var s=u(t,".")?"property":"argument";i='The "'.concat(t,'" ').concat(s," ").concat(n," ").concat(o(e,"type"))}return i+=". Received type ".concat(typeof r),i}),TypeError),s("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),s("ERR_METHOD_NOT_IMPLEMENTED",(function(t){return"The "+t+" method is not implemented"})),s("ERR_STREAM_PREMATURE_CLOSE","Premature close"),s("ERR_STREAM_DESTROYED",(function(t){return"Cannot call "+t+" after a stream was destroyed"})),s("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),s("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),s("ERR_STREAM_WRITE_AFTER_END","write after end"),s("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),s("ERR_UNKNOWN_ENCODING",(function(t){return"Unknown encoding: "+t}),TypeError),s("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.q=i},1418:function(t,e,r){"use strict";var n=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};t.exports=u;var i=r(187),s=r(9621);r(1923)(u,i);for(var o=n(s.prototype),a=0;a<o.length;a++){var c=o[a];u.prototype[c]||(u.prototype[c]=s.prototype[c])}function u(t){if(!(this instanceof u))return new u(t);i.call(this,t),s.call(this,t),this.allowHalfOpen=!0,t&&(!1===t.readable&&(this.readable=!1),!1===t.writable&&(this.writable=!1),!1===t.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",l)))}function l(){this._writableState.ended||process.nextTick(h,this)}function h(t){t.end()}Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(u.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(u.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(u.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}})},214:function(t,e,r){"use strict";t.exports=i;var n=r(7825);function i(t){if(!(this instanceof i))return new i(t);n.call(this,t)}r(1923)(i,n),i.prototype._transform=function(t,e,r){r(null,t)}},187:function(t,e,r){"use strict";var n;r(8675),r(3462),t.exports=T,T.ReadableState=A;r(3793).EventEmitter;var i=function(t,e){return t.listeners(e).length},s=r(3066),o=r(5361).Buffer,a=r.g.Uint8Array||function(){};function c(t){return o.from(t)}function u(t){return o.isBuffer(t)||t instanceof a}var l,h=r(4616);l=h&&h.debuglog?h.debuglog("stream"):function(){};var d,f,p,g=r(8947),y=r(7508),m=r(1938),w=m.getHighWaterMark,v=r(5314).q,E=v.ERR_INVALID_ARG_TYPE,b=v.ERR_STREAM_PUSH_AFTER_EOF,S=v.ERR_METHOD_NOT_IMPLEMENTED,_=v.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;r(1923)(T,s);var R=y.errorOrDestroy,I=["error","close","destroy","pause","resume"];function C(t,e,r){if("function"===typeof t.prependListener)return t.prependListener(e,r);t._events&&t._events[e]?Array.isArray(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]:t.on(e,r)}function A(t,e,i){n=n||r(1418),t=t||{},"boolean"!==typeof i&&(i=e instanceof n),this.objectMode=!!t.objectMode,i&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=w(this,t,"readableHighWaterMark",i),this.buffer=new g,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(d||(d=r(5605).s),this.decoder=new d(t.encoding),this.encoding=t.encoding)}function T(t){if(n=n||r(1418),!(this instanceof T))return new T(t);var e=this instanceof n;this._readableState=new A(t,this,e),this.readable=!0,t&&("function"===typeof t.read&&(this._read=t.read),"function"===typeof t.destroy&&(this._destroy=t.destroy)),s.call(this)}function k(t,e,r,n,i){l("readableAddChunk",e);var s,a=t._readableState;if(null===e)a.reading=!1,B(t,a);else if(i||(s=N(a,e)),s)R(t,s);else if(a.objectMode||e&&e.length>0)if("string"===typeof e||a.objectMode||Object.getPrototypeOf(e)===o.prototype||(e=c(e)),n)a.endEmitted?R(t,new _):P(t,a,e,!0);else if(a.ended)R(t,new b);else{if(a.destroyed)return!1;a.reading=!1,a.decoder&&!r?(e=a.decoder.write(e),a.objectMode||0!==e.length?P(t,a,e,!1):M(t,a)):P(t,a,e,!1)}else n||(a.reading=!1,M(t,a));return!a.ended&&(a.length<a.highWaterMark||0===a.length)}function P(t,e,r,n){e.flowing&&0===e.length&&!e.sync?(e.awaitDrain=0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&x(t)),M(t,e)}function N(t,e){var r;return u(e)||"string"===typeof e||void 0===e||t.objectMode||(r=new E("chunk",["string","Buffer","Uint8Array"],e)),r}Object.defineProperty(T.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),T.prototype.destroy=y.destroy,T.prototype._undestroy=y.undestroy,T.prototype._destroy=function(t,e){e(t)},T.prototype.push=function(t,e){var r,n=this._readableState;return n.objectMode?r=!0:"string"===typeof t&&(e=e||n.defaultEncoding,e!==n.encoding&&(t=o.from(t,e),e=""),r=!0),k(this,t,e,!1,r)},T.prototype.unshift=function(t){return k(this,t,null,!0,!1)},T.prototype.isPaused=function(){return!1===this._readableState.flowing},T.prototype.setEncoding=function(t){d||(d=r(5605).s);var e=new d(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;var n=this._readableState.buffer.head,i="";while(null!==n)i+=e.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var L=1073741824;function D(t){return t>=L?t=L:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function O(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=D(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function B(t,e){if(l("onEofChunk"),!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?x(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,U(t)))}}function x(t){var e=t._readableState;l("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(l("emitReadable",e.flowing),e.emittedReadable=!0,process.nextTick(U,t))}function U(t){var e=t._readableState;l("emitReadable_",e.destroyed,e.length,e.ended),e.destroyed||!e.length&&!e.ended||(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,G(t)}function M(t,e){e.readingMore||(e.readingMore=!0,process.nextTick(V,t,e))}function V(t,e){while(!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&0===e.length)){var r=e.length;if(l("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}function K(t){return function(){var e=t._readableState;l("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&i(t,"data")&&(e.flowing=!0,G(t))}}function F(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function j(t){l("readable nexttick read 0"),t.read(0)}function q(t,e){e.resumeScheduled||(e.resumeScheduled=!0,process.nextTick(H,t,e))}function H(t,e){l("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),G(t),e.flowing&&!e.reading&&t.read(0)}function G(t){var e=t._readableState;l("flow",e.flowing);while(e.flowing&&null!==t.read());}function z(t,e){return 0===e.length?null:(e.objectMode?r=e.buffer.shift():!t||t>=e.length?(r=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.first():e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r);var r}function $(t){var e=t._readableState;l("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,process.nextTick(W,e,t))}function W(t,e){if(l("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&0===t.length&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var r=e._writableState;(!r||r.autoDestroy&&r.finished)&&e.destroy()}}function Y(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}T.prototype.read=function(t){l("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&((0!==e.highWaterMark?e.length>=e.highWaterMark:e.length>0)||e.ended))return l("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?$(this):x(this),null;if(t=O(t,e),0===t&&e.ended)return 0===e.length&&$(this),null;var n,i=e.needReadable;return l("need readable",i),(0===e.length||e.length-t<e.highWaterMark)&&(i=!0,l("length less than watermark",i)),e.ended||e.reading?(i=!1,l("reading or ended",i)):i&&(l("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=O(r,e))),n=t>0?z(t,e):null,null===n?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),0===e.length&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&$(this)),null!==n&&this.emit("data",n),n},T.prototype._read=function(t){R(this,new S("_read()"))},T.prototype.pipe=function(t,e){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=t;break;case 1:n.pipes=[n.pipes,t];break;default:n.pipes.push(t);break}n.pipesCount+=1,l("pipe count=%d opts=%j",n.pipesCount,e);var s=(!e||!1!==e.end)&&t!==process.stdout&&t!==process.stderr,o=s?c:m;function a(t,e){l("onunpipe"),t===r&&e&&!1===e.hasUnpiped&&(e.hasUnpiped=!0,d())}function c(){l("onend"),t.end()}n.endEmitted?process.nextTick(o):r.once("end",o),t.on("unpipe",a);var u=K(r);t.on("drain",u);var h=!1;function d(){l("cleanup"),t.removeListener("close",g),t.removeListener("finish",y),t.removeListener("drain",u),t.removeListener("error",p),t.removeListener("unpipe",a),r.removeListener("end",c),r.removeListener("end",m),r.removeListener("data",f),h=!0,!n.awaitDrain||t._writableState&&!t._writableState.needDrain||u()}function f(e){l("ondata");var i=t.write(e);l("dest.write",i),!1===i&&((1===n.pipesCount&&n.pipes===t||n.pipesCount>1&&-1!==Y(n.pipes,t))&&!h&&(l("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause())}function p(e){l("onerror",e),m(),t.removeListener("error",p),0===i(t,"error")&&R(t,e)}function g(){t.removeListener("finish",y),m()}function y(){l("onfinish"),t.removeListener("close",g),m()}function m(){l("unpipe"),r.unpipe(t)}return r.on("data",f),C(t,"error",p),t.once("close",g),t.once("finish",y),t.emit("pipe",r),n.flowing||(l("pipe resume"),r.resume()),t},T.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r)),this;if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var s=0;s<i;s++)n[s].emit("unpipe",this,{hasUnpiped:!1});return this}var o=Y(e.pipes,t);return-1===o||(e.pipes.splice(o,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r)),this},T.prototype.on=function(t,e){var r=s.prototype.on.call(this,t,e),n=this._readableState;return"data"===t?(n.readableListening=this.listenerCount("readable")>0,!1!==n.flowing&&this.resume()):"readable"===t&&(n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,l("on readable",n.length,n.reading),n.length?x(this):n.reading||process.nextTick(j,this))),r},T.prototype.addListener=T.prototype.on,T.prototype.removeListener=function(t,e){var r=s.prototype.removeListener.call(this,t,e);return"readable"===t&&process.nextTick(F,this),r},T.prototype.removeAllListeners=function(t){var e=s.prototype.removeAllListeners.apply(this,arguments);return"readable"!==t&&void 0!==t||process.nextTick(F,this),e},T.prototype.resume=function(){var t=this._readableState;return t.flowing||(l("resume"),t.flowing=!t.readableListening,q(this,t)),t.paused=!1,this},T.prototype.pause=function(){return l("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(l("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},T.prototype.wrap=function(t){var e=this,r=this._readableState,n=!1;for(var i in t.on("end",(function(){if(l("wrapped end"),r.decoder&&!r.ended){var t=r.decoder.end();t&&t.length&&e.push(t)}e.push(null)})),t.on("data",(function(i){if(l("wrapped data"),r.decoder&&(i=r.decoder.write(i)),(!r.objectMode||null!==i&&void 0!==i)&&(r.objectMode||i&&i.length)){var s=e.push(i);s||(n=!0,t.pause())}})),t)void 0===this[i]&&"function"===typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));for(var s=0;s<I.length;s++)t.on(I[s],this.emit.bind(this,I[s]));return this._read=function(e){l("wrapped _read",e),n&&(n=!1,t.resume())},this},"function"===typeof Symbol&&(T.prototype[Symbol.asyncIterator]=function(){return void 0===f&&(f=r(9637)),f(this)}),Object.defineProperty(T.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(T.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(T.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}}),T._fromList=z,Object.defineProperty(T.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"===typeof Symbol&&(T.from=function(t,e){return void 0===p&&(p=r(9980)),p(T,t,e)})},7825:function(t,e,r){"use strict";t.exports=l;var n=r(5314).q,i=n.ERR_METHOD_NOT_IMPLEMENTED,s=n.ERR_MULTIPLE_CALLBACK,o=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=n.ERR_TRANSFORM_WITH_LENGTH_0,c=r(1418);function u(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(null===n)return this.emit("error",new s);r.writechunk=null,r.writecb=null,null!=e&&this.push(e),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function l(t){if(!(this instanceof l))return new l(t);c.call(this,t),this._transformState={afterTransform:u.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"===typeof t.transform&&(this._transform=t.transform),"function"===typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",h)}function h(){var t=this;"function"!==typeof this._flush||this._readableState.destroyed?d(this,null,null):this._flush((function(e,r){d(t,e,r)}))}function d(t,e,r){if(e)return t.emit("error",e);if(null!=r&&t.push(r),t._writableState.length)throw new a;if(t._transformState.transforming)throw new o;return t.push(null)}r(1923)(l,c),l.prototype.push=function(t,e){return this._transformState.needTransform=!1,c.prototype.push.call(this,t,e)},l.prototype._transform=function(t,e,r){r(new i("_transform()"))},l.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},l.prototype._read=function(t){var e=this._transformState;null===e.writechunk||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))},l.prototype._destroy=function(t,e){c.prototype._destroy.call(this,t,(function(t){e(t)}))}},9621:function(t,e,r){"use strict";function n(t){var e=this;this.next=null,this.entry=null,this.finish=function(){H(e,t)}}var i;r(8675),r(3462),t.exports=A,A.WritableState=C;var s={deprecate:r(9733)},o=r(3066),a=r(5361).Buffer,c=r.g.Uint8Array||function(){};function u(t){return a.from(t)}function l(t){return a.isBuffer(t)||t instanceof c}var h,d=r(7508),f=r(1938),p=f.getHighWaterMark,g=r(5314).q,y=g.ERR_INVALID_ARG_TYPE,m=g.ERR_METHOD_NOT_IMPLEMENTED,w=g.ERR_MULTIPLE_CALLBACK,v=g.ERR_STREAM_CANNOT_PIPE,E=g.ERR_STREAM_DESTROYED,b=g.ERR_STREAM_NULL_VALUES,S=g.ERR_STREAM_WRITE_AFTER_END,_=g.ERR_UNKNOWN_ENCODING,R=d.errorOrDestroy;function I(){}function C(t,e,s){i=i||r(1418),t=t||{},"boolean"!==typeof s&&(s=e instanceof i),this.objectMode=!!t.objectMode,s&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=p(this,t,"writableHighWaterMark",s),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var o=!1===t.decodeStrings;this.decodeStrings=!o,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){B(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new n(this)}function A(t){i=i||r(1418);var e=this instanceof i;if(!e&&!h.call(A,this))return new A(t);this._writableState=new C(t,this,e),this.writable=!0,t&&("function"===typeof t.write&&(this._write=t.write),"function"===typeof t.writev&&(this._writev=t.writev),"function"===typeof t.destroy&&(this._destroy=t.destroy),"function"===typeof t.final&&(this._final=t.final)),o.call(this)}function T(t,e){var r=new S;R(t,r),process.nextTick(e,r)}function k(t,e,r,n){var i;return null===r?i=new b:"string"===typeof r||e.objectMode||(i=new y("chunk",["string","Buffer"],r)),!i||(R(t,i),process.nextTick(n,i),!1)}function P(t,e,r){return t.objectMode||!1===t.decodeStrings||"string"!==typeof e||(e=a.from(e,r)),e}function N(t,e,r,n,i,s){if(!r){var o=P(e,n,i);n!==o&&(r=!0,i="buffer",n=o)}var a=e.objectMode?1:n.length;e.length+=a;var c=e.length<e.highWaterMark;if(c||(e.needDrain=!0),e.writing||e.corked){var u=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:s,next:null},u?u.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else L(t,e,!1,a,n,i,s);return c}function L(t,e,r,n,i,s,o){e.writelen=n,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new E("write")):r?t._writev(i,e.onwrite):t._write(i,s,e.onwrite),e.sync=!1}function D(t,e,r,n,i){--e.pendingcb,r?(process.nextTick(i,n),process.nextTick(j,t,e),t._writableState.errorEmitted=!0,R(t,n)):(i(n),t._writableState.errorEmitted=!0,R(t,n),j(t,e))}function O(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function B(t,e){var r=t._writableState,n=r.sync,i=r.writecb;if("function"!==typeof i)throw new w;if(O(r),e)D(t,r,n,e,i);else{var s=V(r)||t.destroyed;s||r.corked||r.bufferProcessing||!r.bufferedRequest||M(t,r),n?process.nextTick(x,t,r,s,i):x(t,r,s,i)}}function x(t,e,r,n){r||U(t,e),e.pendingcb--,n(),j(t,e)}function U(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function M(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var i=e.bufferedRequestCount,s=new Array(i),o=e.corkedRequestsFree;o.entry=r;var a=0,c=!0;while(r)s[a]=r,r.isBuf||(c=!1),r=r.next,a+=1;s.allBuffers=c,L(t,e,!0,e.length,s,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new n(e),e.bufferedRequestCount=0}else{while(r){var u=r.chunk,l=r.encoding,h=r.callback,d=e.objectMode?1:u.length;if(L(t,e,!1,d,u,l,h),r=r.next,e.bufferedRequestCount--,e.writing)break}null===r&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}function V(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function K(t,e){t._final((function(r){e.pendingcb--,r&&R(t,r),e.prefinished=!0,t.emit("prefinish"),j(t,e)}))}function F(t,e){e.prefinished||e.finalCalled||("function"!==typeof t._final||e.destroyed?(e.prefinished=!0,t.emit("prefinish")):(e.pendingcb++,e.finalCalled=!0,process.nextTick(K,t,e)))}function j(t,e){var r=V(e);if(r&&(F(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var n=t._readableState;(!n||n.autoDestroy&&n.endEmitted)&&t.destroy()}return r}function q(t,e,r){e.ending=!0,j(t,e),r&&(e.finished?process.nextTick(r):t.once("finish",r)),e.ended=!0,t.writable=!1}function H(t,e,r){var n=t.entry;t.entry=null;while(n){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree.next=t}r(1923)(A,o),C.prototype.getBuffer=function(){var t=this.bufferedRequest,e=[];while(t)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(C.prototype,"buffer",{get:s.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"===typeof Symbol&&Symbol.hasInstance&&"function"===typeof Function.prototype[Symbol.hasInstance]?(h=Function.prototype[Symbol.hasInstance],Object.defineProperty(A,Symbol.hasInstance,{value:function(t){return!!h.call(this,t)||this===A&&(t&&t._writableState instanceof C)}})):h=function(t){return t instanceof this},A.prototype.pipe=function(){R(this,new v)},A.prototype.write=function(t,e,r){var n=this._writableState,i=!1,s=!n.objectMode&&l(t);return s&&!a.isBuffer(t)&&(t=u(t)),"function"===typeof e&&(r=e,e=null),s?e="buffer":e||(e=n.defaultEncoding),"function"!==typeof r&&(r=I),n.ending?T(this,r):(s||k(this,n,t,r))&&(n.pendingcb++,i=N(this,n,s,t,e,r)),i},A.prototype.cork=function(){this._writableState.corked++},A.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.bufferProcessing||!t.bufferedRequest||M(this,t))},A.prototype.setDefaultEncoding=function(t){if("string"===typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new _(t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(A.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(A.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),A.prototype._write=function(t,e,r){r(new m("_write()"))},A.prototype._writev=null,A.prototype.end=function(t,e,r){var n=this._writableState;return"function"===typeof t?(r=t,t=null,e=null):"function"===typeof e&&(r=e,e=null),null!==t&&void 0!==t&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||q(this,n,r),this},Object.defineProperty(A.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(A.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),A.prototype.destroy=d.destroy,A.prototype._undestroy=d.undestroy,A.prototype._destroy=function(t,e){e(t)}},9637:function(t,e,r){"use strict";var n;function i(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var s=r(3210),o=Symbol("lastResolve"),a=Symbol("lastReject"),c=Symbol("error"),u=Symbol("ended"),l=Symbol("lastPromise"),h=Symbol("handlePromise"),d=Symbol("stream");function f(t,e){return{value:t,done:e}}function p(t){var e=t[o];if(null!==e){var r=t[d].read();null!==r&&(t[l]=null,t[o]=null,t[a]=null,e(f(r,!1)))}}function g(t){process.nextTick(p,t)}function y(t,e){return function(r,n){t.then((function(){e[u]?r(f(void 0,!0)):e[h](r,n)}),n)}}var m=Object.getPrototypeOf((function(){})),w=Object.setPrototypeOf((n={get stream(){return this[d]},next:function(){var t=this,e=this[c];if(null!==e)return Promise.reject(e);if(this[u])return Promise.resolve(f(void 0,!0));if(this[d].destroyed)return new Promise((function(e,r){process.nextTick((function(){t[c]?r(t[c]):e(f(void 0,!0))}))}));var r,n=this[l];if(n)r=new Promise(y(n,this));else{var i=this[d].read();if(null!==i)return Promise.resolve(f(i,!1));r=new Promise(this[h])}return this[l]=r,r}},i(n,Symbol.asyncIterator,(function(){return this})),i(n,"return",(function(){var t=this;return new Promise((function(e,r){t[d].destroy(null,(function(t){t?r(t):e(f(void 0,!0))}))}))})),n),m),v=function(t){var e,r=Object.create(w,(e={},i(e,d,{value:t,writable:!0}),i(e,o,{value:null,writable:!0}),i(e,a,{value:null,writable:!0}),i(e,c,{value:null,writable:!0}),i(e,u,{value:t._readableState.endEmitted,writable:!0}),i(e,h,{value:function(t,e){var n=r[d].read();n?(r[l]=null,r[o]=null,r[a]=null,t(f(n,!1))):(r[o]=t,r[a]=e)},writable:!0}),e));return r[l]=null,s(t,(function(t){if(t&&"ERR_STREAM_PREMATURE_CLOSE"!==t.code){var e=r[a];return null!==e&&(r[l]=null,r[o]=null,r[a]=null,e(t)),void(r[c]=t)}var n=r[o];null!==n&&(r[l]=null,r[o]=null,r[a]=null,n(f(void 0,!0))),r[u]=!0})),t.on("readable",g.bind(null,r)),r};t.exports=v},8947:function(t,e,r){"use strict";function n(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function i(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?n(Object(r),!0).forEach((function(e){s(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function s(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function c(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}r(1703);var u=r(5361),l=u.Buffer,h=r(2361),d=h.inspect,f=d&&d.custom||"inspect";function p(t,e,r){l.prototype.copy.call(t,e,r)}t.exports=function(){function t(){o(this,t),this.head=null,this.tail=null,this.length=0}return c(t,[{key:"push",value:function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length}},{key:"unshift",value:function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length}},{key:"shift",value:function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(t){if(0===this.length)return"";var e=this.head,r=""+e.data;while(e=e.next)r+=t+e.data;return r}},{key:"concat",value:function(t){if(0===this.length)return l.alloc(0);var e=l.allocUnsafe(t>>>0),r=this.head,n=0;while(r)p(r.data,e,n),n+=r.data.length,r=r.next;return e}},{key:"consume",value:function(t,e){var r;return t<this.head.data.length?(r=this.head.data.slice(0,t),this.head.data=this.head.data.slice(t)):r=t===this.head.data.length?this.shift():e?this._getString(t):this._getBuffer(t),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(t){var e=this.head,r=1,n=e.data;t-=n.length;while(e=e.next){var i=e.data,s=t>i.length?i.length:t;if(s===i.length?n+=i:n+=i.slice(0,t),t-=s,0===t){s===i.length?(++r,e.next?this.head=e.next:this.head=this.tail=null):(this.head=e,e.data=i.slice(s));break}++r}return this.length-=r,n}},{key:"_getBuffer",value:function(t){var e=l.allocUnsafe(t),r=this.head,n=1;r.data.copy(e),t-=r.data.length;while(r=r.next){var i=r.data,s=t>i.length?i.length:t;if(i.copy(e,e.length-t,0,s),t-=s,0===t){s===i.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=i.slice(s));break}++n}return this.length-=n,e}},{key:f,value:function(t,e){return d(this,i({},e,{depth:0,customInspect:!1}))}}]),t}()},7508:function(t){"use strict";function e(t,e){var i=this,o=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return o||a?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(s,this,t)):process.nextTick(s,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!e&&t?i._writableState?i._writableState.errorEmitted?process.nextTick(n,i):(i._writableState.errorEmitted=!0,process.nextTick(r,i,t)):process.nextTick(r,i,t):e?(process.nextTick(n,i),e(t)):process.nextTick(n,i)})),this)}function r(t,e){s(t,e),n(t)}function n(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function i(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function s(t,e){t.emit("error",e)}function o(t,e){var r=t._readableState,n=t._writableState;r&&r.autoDestroy||n&&n.autoDestroy?t.destroy(e):t.emit("error",e)}t.exports={destroy:e,undestroy:i,errorOrDestroy:o}},3210:function(t,e,r){"use strict";var n=r(5314).q.ERR_STREAM_PREMATURE_CLOSE;function i(t){var e=!1;return function(){if(!e){e=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];t.apply(this,n)}}}function s(){}function o(t){return t.setHeader&&"function"===typeof t.abort}function a(t,e,r){if("function"===typeof e)return a(t,null,e);e||(e={}),r=i(r||s);var c=e.readable||!1!==e.readable&&t.readable,u=e.writable||!1!==e.writable&&t.writable,l=function(){t.writable||d()},h=t._writableState&&t._writableState.finished,d=function(){u=!1,h=!0,c||r.call(t)},f=t._readableState&&t._readableState.endEmitted,p=function(){c=!1,f=!0,u||r.call(t)},g=function(e){r.call(t,e)},y=function(){var e;return c&&!f?(t._readableState&&t._readableState.ended||(e=new n),r.call(t,e)):u&&!h?(t._writableState&&t._writableState.ended||(e=new n),r.call(t,e)):void 0},m=function(){t.req.on("finish",d)};return o(t)?(t.on("complete",d),t.on("abort",y),t.req?m():t.on("request",m)):u&&!t._writableState&&(t.on("end",l),t.on("close",l)),t.on("end",p),t.on("finish",d),!1!==e.error&&t.on("error",g),t.on("close",y),function(){t.removeListener("complete",d),t.removeListener("abort",y),t.removeListener("request",m),t.req&&t.req.removeListener("finish",d),t.removeListener("end",l),t.removeListener("close",l),t.removeListener("finish",d),t.removeListener("end",p),t.removeListener("error",g),t.removeListener("close",y)}}t.exports=a},9980:function(t,e,r){r(1703),t.exports=function(){throw new Error("Readable.from is not available in the browser")}},6708:function(t,e,r){"use strict";var n;function i(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}var s=r(5314).q,o=s.ERR_MISSING_ARGS,a=s.ERR_STREAM_DESTROYED;function c(t){if(t)throw t}function u(t){return t.setHeader&&"function"===typeof t.abort}function l(t,e,s,o){o=i(o);var c=!1;t.on("close",(function(){c=!0})),void 0===n&&(n=r(3210)),n(t,{readable:e,writable:s},(function(t){if(t)return o(t);c=!0,o()}));var l=!1;return function(e){if(!c&&!l)return l=!0,u(t)?t.abort():"function"===typeof t.destroy?t.destroy():void o(e||new a("pipe"))}}function h(t){t()}function d(t,e){return t.pipe(e)}function f(t){return t.length?"function"!==typeof t[t.length-1]?c:t.pop():c}function p(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n,i=f(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new o("streams");var s=e.map((function(t,r){var o=r<e.length-1,a=r>0;return l(t,o,a,(function(t){n||(n=t),t&&s.forEach(h),o||(s.forEach(h),i(n))}))}));return e.reduce(d)}t.exports=p},1938:function(t,e,r){"use strict";var n=r(5314).q.ERR_INVALID_OPT_VALUE;function i(t,e,r){return null!=t.highWaterMark?t.highWaterMark:e?t[r]:null}function s(t,e,r,s){var o=i(e,s,r);if(null!=o){if(!isFinite(o)||Math.floor(o)!==o||o<0){var a=s?r:"highWaterMark";throw new n(a,o)}return Math.floor(o)}return t.objectMode?16:16384}t.exports={getHighWaterMark:s}},3066:function(t,e,r){t.exports=r(3793).EventEmitter},8141:function(t,e,r){e=t.exports=r(187),e.Stream=e,e.Readable=e,e.Writable=r(9621),e.Duplex=r(1418),e.Transform=r(7825),e.PassThrough=r(214),e.finished=r(3210),e.pipeline=r(6708)},3061:function(t,e,r){"use strict";r(1703),t.exports=a;var n=r(7901),i=a.prototype,s=new Date%1e9;function o(){return(1e9*Math.random()>>>0)+s++}function a(t){t=t||{},this.id=t.id||o(),this.max=t.max||1/0,this.items=t.items||[],this._lookup={},this.size=this.items.length,this.lastModified=new Date(t.lastModified||new Date);for(var e,r,n=this.items.length;n--;)e=this.items[n],r=new Date(e.expires)-new Date,this._lookup[e.key]=e,r>0?this.expire(e.key,r):r<=0&&this.delete(e.key)}i.has=function(t){return t in this._lookup},i.get=function(t){if(!this.has(t))return null;var e=this._lookup[t];return e.refresh&&this.expire(t,e.refresh),this.items.splice(this.items.indexOf(e),1),this.items.push(e),e.value},i.meta=function(t){if(!this.has(t))return null;var e=this._lookup[t];return"meta"in e?e.meta:null},i.set=function(t,e,r){var n=this._lookup[t],i=this._lookup[t]={key:t,value:e};return this.lastModified=new Date,n?(clearTimeout(n.timeout),this.items.splice(this.items.indexOf(n),1,i)):(this.size>=this.max&&this.delete(this.items[0].key),this.items.push(i),this.size++),r&&("ttl"in r&&this.expire(t,r.ttl),"meta"in r&&(i.meta=r.meta),r.refresh&&(i.refresh=r.ttl)),this},i.delete=function(t){var e=this._lookup[t];return!!e&&(this.lastModified=new Date,this.items.splice(this.items.indexOf(e),1),clearTimeout(e.timeout),delete this._lookup[t],this.size--,this)},i.expire=function(t,e){var r=e||0,i=this._lookup[t];if(!i)return this;if("string"===typeof r&&(r=n(e)),"number"!==typeof r)throw new TypeError("Expiration time must be a string or number.");return clearTimeout(i.timeout),i.timeout=setTimeout(this.delete.bind(this,i.key),r),i.expires=Number(new Date)+r,this},i.clear=function(){for(var t=this.items.length;t--;)this.delete(this.items[t].key);return this},i.toJSON=function(){for(var t,e=new Array(this.items.length),r=e.length;r--;)t=this.items[r],e[r]={key:t.key,meta:t.meta,value:t.value,expires:t.expires,refresh:t.refresh};return{id:this.id,max:isFinite(this.max)?this.max:void 0,lastModified:this.lastModified,items:e}}},3057:function(t,e,r){"use strict";r(1703);const n=r(9723);class i{constructor(t,e,r){const i=this;this._started=n(),this._rescheduled=0,this._scheduled=e,this._args=r,this._triggered=!1,this._timerWrapper=()=>{i._rescheduled>0?(i._scheduled=i._rescheduled-(n()-i._started),i._schedule(i._scheduled)):(i._triggered=!0,t.apply(null,i._args))},this._timer=setTimeout(this._timerWrapper,e)}reschedule(t){t||(t=this._scheduled);const e=n();e+t-(this._started+this._scheduled)<0?(clearTimeout(this._timer),this._schedule(t)):this._triggered?this._schedule(t):(this._started=e,this._rescheduled=t)}_schedule(t){this._triggered=!1,this._started=n(),this._rescheduled=0,this._scheduled=t,this._timer=setTimeout(this._timerWrapper,t)}clear(){clearTimeout(this._timer)}}function s(){if("function"!==typeof arguments[0])throw new Error("callback needed");if("number"!==typeof arguments[1])throw new Error("timeout needed");let t;if(arguments.length>0){t=new Array(arguments.length-2);for(var e=0;e<t.length;e++)t[e]=arguments[e+2]}return new i(arguments[0],arguments[1],t)}t.exports=s},9723:function(t){"use strict";t.exports=function(){return Date.now()}},6779:function(t,e,r){r(1703);var n=r(5361),i=n.Buffer;function s(t,e){for(var r in t)e[r]=t[r]}function o(t,e,r){return i(t,e,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=n:(s(n,e),e.Buffer=o),s(i,o),o.from=function(t,e,r){if("number"===typeof t)throw new TypeError("Argument must not be a number");return i(t,e,r)},o.alloc=function(t,e,r){if("number"!==typeof t)throw new TypeError("Argument must be a number");var n=i(t);return void 0!==e?"string"===typeof r?n.fill(e,r):n.fill(e):n.fill(0),n},o.allocUnsafe=function(t){if("number"!==typeof t)throw new TypeError("Argument must be a number");return i(t)},o.allocUnsafeSlow=function(t){if("number"!==typeof t)throw new TypeError("Argument must be a number");return n.SlowBuffer(t)}},4840:function(t,e,r){"use strict";r(1703);var n=r(7339),i=/[\/\?<>\\:\*\|"]/g,s=/[\x00-\x1f\x80-\x9f]/g,o=/^\.+$/,a=/^(con|prn|aux|nul|com[0-9]|lpt[0-9])(\..*)?$/i,c=/[\. ]+$/;function u(t,e){if("string"!==typeof t)throw new Error("Input must be string");var r=t.replace(i,e).replace(s,e).replace(o,e).replace(a,e).replace(c,e);return n(r,255)}t.exports=function(t,e){var r=e&&e.replacement||"",n=u(t,r);return""===r?n:u(n,"")}},2407:function(t){"use strict";const e=new Map,r=()=>`${Date.now()}:${Math.floor(1e6*Math.random())}`;async function n(t,r,n){while(e.get(n)){try{await t()}catch(i){setTimeout((()=>{throw i}),1);break}if(!e.get(n))break;await new Promise((t=>{const i=setTimeout(t,r);e.set(n,i)}))}}function i(t,i,s){s=s||i;const o=r(),a=setTimeout((()=>{n(t,i,o)}),s);return e.set(o,a),o}function s(t){const r=e.get(t);r&&(clearTimeout(r),e.delete(t))}t.exports={setDelayedInterval:i,clearDelayedInterval:s}},5605:function(t,e,r){"use strict";r(1703);var n=r(4304).Buffer,i=n.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function s(t){if(!t)return"utf8";var e;while(1)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function o(t){var e=s(t);if("string"!==typeof e&&(n.isEncoding===i||!i(t)))throw new Error("Unknown encoding: "+t);return e||t}function a(t){var e;switch(this.encoding=o(t),this.encoding){case"utf16le":this.text=p,this.end=g,e=4;break;case"utf8":this.fillLast=h,e=4;break;case"base64":this.text=y,this.end=m,e=3;break;default:return this.write=w,void(this.end=v)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(e)}function c(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function u(t,e,r){var n=e.length-1;if(n<r)return 0;var i=c(e[n]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--n<r||-2===i?0:(i=c(e[n]),i>=0?(i>0&&(t.lastNeed=i-2),i):--n<r||-2===i?0:(i=c(e[n]),i>=0?(i>0&&(2===i?i=0:t.lastNeed=i-3),i):0))}function l(t,e,r){if(128!==(192&e[0]))return t.lastNeed=0,"�";if(t.lastNeed>1&&e.length>1){if(128!==(192&e[1]))return t.lastNeed=1,"�";if(t.lastNeed>2&&e.length>2&&128!==(192&e[2]))return t.lastNeed=2,"�"}}function h(t){var e=this.lastTotal-this.lastNeed,r=l(this,t,e);return void 0!==r?r:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function d(t,e){var r=u(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)}function f(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�":e}function p(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function g(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function y(t,e){var r=(t.length-e)%3;return 0===r?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function m(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function w(t){return t.toString(this.encoding)}function v(t){return t&&t.length?this.write(t):""}e.s=a,a.prototype.write=function(t){if(0===t.length)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),void 0===e)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""},a.prototype.end=f,a.prototype.text=d,a.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},4304:function(t,e,r){r(1703);
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
var n=r(5361),i=n.Buffer;function s(t,e){for(var r in t)e[r]=t[r]}function o(t,e,r){return i(t,e,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=n:(s(n,e),e.Buffer=o),o.prototype=Object.create(i.prototype),s(i,o),o.from=function(t,e,r){if("number"===typeof t)throw new TypeError("Argument must not be a number");return i(t,e,r)},o.alloc=function(t,e,r){if("number"!==typeof t)throw new TypeError("Argument must be a number");var n=i(t);return void 0!==e?"string"===typeof r?n.fill(e,r):n.fill(e):n.fill(0),n},o.allocUnsafe=function(t){if("number"!==typeof t)throw new TypeError("Argument must be a number");return i(t)},o.allocUnsafeSlow=function(t){if("number"!==typeof t)throw new TypeError("Argument must be a number");return n.SlowBuffer(t)}},2856:function(t,e,r){"use strict";const{AbortController:n}=globalThis,i=r(3057);class s extends n{constructor(t){super(),this._ms=t,this._timer=i((()=>this.abort()),t),Object.setPrototypeOf(this,s.prototype)}abort(){return this._timer.clear(),super.abort()}clear(){this._timer.clear()}reset(){this._timer.clear(),this._timer=i((()=>this.abort()),this._ms)}}t.exports={TimeoutController:s}},7339:function(t,e,r){"use strict";var n=r(432),i=r(1725);t.exports=n.bind(null,i)},432:function(t,e,r){"use strict";function n(t){return t>=55296&&t<=56319}function i(t){return t>=56320&&t<=57343}r(1703),t.exports=function(t,e,r){if("string"!==typeof e)throw new Error("Input must be string");for(var s,o,a=e.length,c=0,u=0;u<a;u+=1){if(s=e.charCodeAt(u),o=e[u],n(s)&&i(e.charCodeAt(u+1))&&(u+=1,o+=e[u]),c+=t(o),c===r)return e.slice(0,u+1);if(c>r)return e.slice(0,u-o.length+1)}return e}},1725:function(t,e,r){"use strict";function n(t){return t>=55296&&t<=56319}function i(t){return t>=56320&&t<=57343}r(1703),t.exports=function(t){if("string"!==typeof t)throw new Error("Input must be string");for(var e=t.length,r=0,s=null,o=null,a=0;a<e;a++)s=t.charCodeAt(a),i(s)?null!=o&&n(o)?r+=1:r+=3:s<=127?r+=1:s>=128&&s<=2047?r+=2:s>=2048&&s<=65535&&(r+=3),o=s;return r}},9733:function(t,e,r){function n(t,e){if(i("noDeprecation"))return t;var r=!1;function n(){if(!r){if(i("throwDeprecation"))throw new Error(e);i("traceDeprecation")?console.trace(e):console.warn(e),r=!0}return t.apply(this,arguments)}return n}function i(t){try{if(!r.g.localStorage)return!1}catch(n){return!1}var e=r.g.localStorage[t];return null!=e&&"true"===String(e).toLowerCase()}r(1703),t.exports=n},2706:function(t,e,r){r(1703),t.exports=s;var n=128,i=127;function s(t,e){var r,o=0,a=(e=e||0,0),c=e,u=t.length;do{if(c>=u||a>49)throw s.bytes=0,new RangeError("Could not decode varint");r=t[c++],o+=a<28?(r&i)<<a:(r&i)*Math.pow(2,a),a+=7}while(r>=n);return s.bytes=c-e,o}},799:function(t,e,r){r(1703),t.exports=a;var n=128,i=127,s=~i,o=Math.pow(2,31);function a(t,e,r){if(Number.MAX_SAFE_INTEGER&&t>Number.MAX_SAFE_INTEGER)throw a.bytes=0,new RangeError("Could not encode varint");e=e||[],r=r||0;var i=r;while(t>=o)e[r++]=255&t|n,t/=128;while(t&s)e[r++]=255&t|n,t>>>=7;return e[r]=0|t,a.bytes=r-i+1,e}},2611:function(t,e,r){t.exports={encode:r(799),decode:r(2706),encodingLength:r(3303)}},3303:function(t){var e=Math.pow(2,7),r=Math.pow(2,14),n=Math.pow(2,21),i=Math.pow(2,28),s=Math.pow(2,35),o=Math.pow(2,42),a=Math.pow(2,49),c=Math.pow(2,56),u=Math.pow(2,63);t.exports=function(t){return t<e?1:t<r?2:t<n?3:t<i?4:t<s?5:t<o?6:t<a?7:t<c?8:t<u?9:10}},3336:function(t,e,r){"use strict";const n=r(4024),i="object"===typeof window&&"object"===typeof document&&9===document.nodeType,s=n(),o=i&&!s,a=s&&!i,c=s&&i,u="undefined"!==typeof globalThis.process&&"undefined"!==typeof globalThis.process.release&&"node"===globalThis.process.release.name&&!s,l="function"===typeof importScripts&&"undefined"!==typeof self&&"undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,h="undefined"!==typeof globalThis.process&&"undefined"!==typeof globalThis.process.env&&"test"===globalThis.process.env["NODE"+(()=>"_")()+"ENV"],d="undefined"!==typeof navigator&&"ReactNative"===navigator.product;t.exports={isTest:h,isElectron:s,isElectronMain:a,isElectronRenderer:c,isNode:u,isBrowser:o,isWebWorker:l,isEnvWithDom:i,isReactNative:d}},7755:function(t){"use strict";var e,r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),n=64,i={},s=0,o=0;function a(t){var e="";do{e=r[t%n]+e,t=Math.floor(t/n)}while(t>0);return e}function c(t){var e=0;for(o=0;o<t.length;o++)e=e*n+i[t.charAt(o)];return e}function u(){var t=a(+new Date);return t!==e?(s=0,e=t):t+"."+a(s++)}for(;o<n;o++)i[r[o]]=o;u.encode=a,u.decode=c,t.exports=u},4251:function(t,e,r){"use strict";r.d(e,{cy:function(){return mt}});r(8675),r(3462),r(1703);var n=r(8134),i=r(4291);function s(t,e={}){const r=(0,n.Y)(t),s=i.Jx.fromReader(r.reader,e),o={read:async t=>{const{value:e}=await r.reader.next(t);if(null==e)throw new Error("Value is null");return e},readLP:async()=>{const{value:t}=await s.next();if(null==t)throw new Error("Value is null");return t},readPB:async t=>{const e=await o.readLP();if(null==e)throw new Error("Value is null");const r=e instanceof Uint8Array?e:e.slice();return t.decode(r)},write:t=>{t instanceof Uint8Array?r.writer.push(t):r.writer.push(t.slice())},writeLP:t=>{o.write(i.cv.single(t,e))},writePB:(t,e)=>{o.writeLP(e.encode(t))},pb:t=>({read:async()=>await o.readPB(t),write:e=>o.writePB(e,t)}),unwrap:()=>(r.rest(),r.stream)};return o}var o=r(4622);function a(){const t=(0,o.Z)();let e=!1;return{sink:async r=>{if(e)throw new Error("already piped");e=!0,t.resolve(r)},source:async function*(){const e=await t.promise;yield*e}()}}function c(){const t=a(),e=a();return[{source:t.source,sink:e.sink},{source:e.source,sink:t.sink}]}var u=r(9174);const l=65535,h=l-16,d=Boolean(globalThis.process?.env?.DUMP_SESSION_KEYS);var f=r(6711),p=r(2982),g=r(4185),y=r(2130);const m={hashSHA256(t){return(0,g.vp)(t)},getHKDF(t,e){const r=new f.t(g.mE,e,t),n=r.expand(96),i=n,s=i.slice(0,32),o=i.slice(32,64),a=i.slice(64,96);return[s,o,a]},generateX25519KeyPair(){const t=p.Au();return{publicKey:t.publicKey,privateKey:t.secretKey}},generateX25519KeyPairFromSeed(t){const e=p._w(t);return{publicKey:e.publicKey,privateKey:e.secretKey}},generateX25519SharedKey(t,e){return p.gi(t,e)},chaCha20Poly1305Encrypt(t,e,r,n){const i=new y.OK(n);return i.seal(e,t,r)},chaCha20Poly1305Decrypt(t,e,r,n){const i=new y.OK(n);return i.open(e,t,r)}};function w(t){return async function*(e){for await(const r of e)for(let e=0;e<r.length;e+=h){let n=e+h;n>r.length&&(n=r.length);const i=t.encrypt(r.slice(e,n),t.session);yield i}}}function v(t){return async function*(e){for await(const r of e)for(let e=0;e<r.length;e+=l){let n=e+l;n>r.length&&(n=r.length);const{plaintext:i,valid:s}=await t.decrypt(r.slice(e,n),t.session);if(!s)throw new Error("Failed to validate decrypted chunk");yield i}}}var E=r(5489);const b=t=>globalThis.Buffer?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t),S=(t,e,r)=>(e=e??b(2),new DataView(e.buffer,e.byteOffset,e.byteLength).setUint16(r??0,t,!1),e);S.bytes=2;const _=t=>{if(t.length<2)throw RangeError("Could not decode int16BE");return t instanceof Uint8Array?new DataView(t.buffer,t.byteOffset,t.byteLength).getUint16(0,!1):t.getUint16(0)};function R(t){return(0,E.z)([t.ne,t.ciphertext],t.ne.length+t.ciphertext.length)}function I(t){return(0,E.z)([t.ne,t.ns,t.ciphertext],t.ne.length+t.ns.length+t.ciphertext.length)}function C(t){return(0,E.z)([t.ns,t.ciphertext],t.ns.length+t.ciphertext.length)}function A(t){if(t.length<32)throw new Error("Cannot decode stage 0 MessageBuffer: length less than 32 bytes.");return{ne:t.slice(0,32),ciphertext:t.slice(32,t.length),ns:new Uint8Array(0)}}function T(t){if(t.length<80)throw new Error("Cannot decode stage 1 MessageBuffer: length less than 80 bytes.");return{ne:t.slice(0,32),ns:t.slice(32,80),ciphertext:t.slice(80,t.length)}}function k(t){if(t.length<48)throw new Error("Cannot decode stage 2 MessageBuffer: length less than 48 bytes.");return{ne:new Uint8Array(0),ns:t.slice(0,48),ciphertext:t.slice(48,t.length)}}_.bytes=2;var P,N=r(6428),L=r(9412),D=r(2259),O=r(1860);(function(t){let e;(function(t){t.codec=()=>(0,O.yw)({1:{name:"identityKey",codec:O.aI},2:{name:"identitySig",codec:O.aI},3:{name:"data",codec:O.aI}}),t.encode=e=>(0,O.LE)(e,t.codec()),t.decode=e=>(0,O.C6)(e,t.codec())})(e=t.NoiseHandshakePayload||(t.NoiseHandshakePayload={}))})(P||(P={}));const B=P.NoiseHandshakePayload;async function x(t,e,r){const n=await M(t,F(e)),i=r??new Uint8Array(0);if(null==t.publicKey)throw new Error("PublicKey was missing from local PeerId");return U(t.publicKey,n,i)}function U(t,e,r){return B.encode({identityKey:t,identitySig:e,data:r??new Uint8Array(0)})}async function M(t,e){if(null==t.privateKey)throw new Error("PrivateKey was missing from PeerId");const r=await(0,N.unmarshalPrivateKey)(t.privateKey);return await r.sign(e)}async function V(t){return await(0,L.y5)(t.identityKey)}function K(t){return B.decode(t)}function F(t){const e=(0,D.m)("noise-libp2p-static-key:");return(0,E.z)([e,t],e.length+t.length)}async function j(t,e){const r=await(0,L.y5)(e);return r.equals(t)}async function q(t,e,r){const n=e.identityKey;if(!await j(r,n))throw new Error("Peer ID doesn't match libp2p public key.");const i=F(t),s=await(0,L.y5)(n);if(null==s.publicKey)throw new Error("PublicKey was missing from PeerId");if(null==e.identitySig)throw new Error("Signature was missing from message");const o=(0,N.unmarshalPublicKey)(s.publicKey),a=await o.verify(i,e.identitySig);if(!a)throw new Error("Static key doesn't match to peer that signed payload!");return s}function H(t){return t instanceof Uint8Array&&32===t.length}var G=r(4141),z=r(6861),$=r(2656),W=r(6523);const Y=(0,$.kg)("libp2p:noise");let Q;function X(t){Q(`LOCAL_STATIC_PUBLIC_KEY ${(0,W.B)(t.publicKey,"hex")}`),Q(`LOCAL_STATIC_PRIVATE_KEY ${(0,W.B)(t.privateKey,"hex")}`)}function J(t){t?(Q(`LOCAL_PUBLIC_EPHEMERAL_KEY ${(0,W.B)(t.publicKey,"hex")}`),Q(`LOCAL_PRIVATE_EPHEMERAL_KEY ${(0,W.B)(t.privateKey,"hex")}`)):Q("Missing local ephemeral keys.")}function Z(t){Q(`REMOTE_STATIC_PUBLIC_KEY ${(0,W.B)(t,"hex")}`)}function tt(t){Q(`REMOTE_EPHEMERAL_PUBLIC_KEY ${(0,W.B)(t,"hex")}`)}function et(t){t.cs1&&t.cs2?(Q(`CIPHER_STATE_1 ${t.cs1.n} ${(0,W.B)(t.cs1.k,"hex")}`),Q(`CIPHER_STATE_2 ${t.cs2.n} ${(0,W.B)(t.cs2.k,"hex")}`)):Q("Missing cipher state.")}Q=d?Y:Object.assign((()=>{}),{enabled:!1,trace:()=>{},error:()=>{}});const rt=0,nt=Number.MAX_SAFE_INTEGER,it="Cipherstate has reached maximum n, a new handshake must be performed";class st{constructor(t){this.crypto=t}encryptWithAd(t,e,r){const n=this.encrypt(t.k,t.n,e,r);return this.setNonce(t,this.incrementNonce(t.n)),n}decryptWithAd(t,e,r){const{plaintext:n,valid:i}=this.decrypt(t.k,t.n,e,r);return this.setNonce(t,this.incrementNonce(t.n)),{plaintext:n,valid:i}}hasKey(t){return!this.isEmptyKey(t.k)}setNonce(t,e){t.n=e}createEmptyKey(){return new Uint8Array(32)}isEmptyKey(t){const e=this.createEmptyKey();return(0,G.f)(e,t)}incrementNonce(t){return t+1}nonceToBytes(t){const e=new Uint8Array(12);return new DataView(e.buffer,e.byteOffset,e.byteLength).setUint32(4,t,!0),e}encrypt(t,e,r,n){if(e>nt)throw new Error(it);const i=this.nonceToBytes(e);return this.crypto.chaCha20Poly1305Encrypt(n,i,r,t)}encryptAndHash(t,e){let r;return r=this.hasKey(t.cs)?this.encryptWithAd(t.cs,t.h,e):e,this.mixHash(t,r),r}decrypt(t,e,r,n){if(e>nt)throw new Error(it);const i=this.nonceToBytes(e),s=this.crypto.chaCha20Poly1305Decrypt(n,i,r,t);return s?{plaintext:s,valid:!0}:{plaintext:new Uint8Array(0),valid:!1}}decryptAndHash(t,e){let r,n=!0;return this.hasKey(t.cs)?({plaintext:r,valid:n}=this.decryptWithAd(t.cs,t.h,e)):r=e,this.mixHash(t,e),{plaintext:r,valid:n}}dh(t,e){try{const r=this.crypto.generateX25519SharedKey(t,e);return 32===r.length?r:r.slice(0,32)}catch(r){const t=r;return Y(t.message),new Uint8Array(32)}}mixHash(t,e){t.h=this.getHash(t.h,e)}getHash(t,e){const r=this.crypto.hashSHA256((0,E.z)([t,e],t.length+e.length));return r}mixKey(t,e){const[r,n]=this.crypto.getHKDF(t.ck,e);t.cs=this.initializeKey(n),t.ck=r}initializeKey(t){const e=rt;return{k:t,n:e}}initializeSymmetric(t){const e=(0,z.mL)(t,"utf-8"),r=this.hashProtocolName(e),n=r,i=this.createEmptyKey(),s=this.initializeKey(i);return{cs:s,ck:n,h:r}}hashProtocolName(t){if(t.length<=32){const e=new Uint8Array(32);return e.set(t),e}return this.getHash(t,new Uint8Array(0))}split(t){const[e,r]=this.crypto.getHKDF(t.ck,new Uint8Array(0)),n=this.initializeKey(e),i=this.initializeKey(r);return{cs1:n,cs2:i}}writeMessageRegular(t,e){const r=this.encryptWithAd(t,new Uint8Array(0),e),n=this.createEmptyKey(),i=new Uint8Array(0);return{ne:n,ns:i,ciphertext:r}}readMessageRegular(t,e){return this.decryptWithAd(t,new Uint8Array(0),e.ciphertext)}}class ot extends st{initSession(t,e,r,n){const i=this.createEmptyKey();let s;return s=t?this.initializeInitiator(e,r,n,i):this.initializeResponder(e,r,n,i),{hs:s,i:t,mc:0}}sendMessage(t,e){let r;if(0===t.mc)r=this.writeMessageA(t.hs,e);else if(1===t.mc){const{messageBuffer:n,h:i,cs1:s,cs2:o}=this.writeMessageB(t.hs,e);r=n,t.h=i,t.cs1=s,t.cs2=o}else{if(!(t.mc>1))throw new Error("Session invalid.");if(t.i){if(!t.cs1)throw new Error("CS1 (cipher state) is not defined");r=this.writeMessageRegular(t.cs1,e)}else{if(!t.cs2)throw new Error("CS2 (cipher state) is not defined");r=this.writeMessageRegular(t.cs2,e)}}return t.mc++,r}recvMessage(t,e){let r=new Uint8Array(0),n=!1;if(0===t.mc&&({plaintext:r,valid:n}=this.readMessageA(t.hs,e)),1===t.mc){const{plaintext:i,valid:s,h:o,cs1:a,cs2:c}=this.readMessageB(t.hs,e);r=i,n=s,t.h=o,t.cs1=a,t.cs2=c}return t.mc++,{plaintext:r,valid:n}}writeMessageA(t,e){t.e=this.crypto.generateX25519KeyPair();const r=t.e.publicKey;this.mixHash(t.ss,r),this.mixKey(t.ss,this.dh(t.e.privateKey,t.rs));const n=t.s.publicKey,i=this.encryptAndHash(t.ss,n);this.mixKey(t.ss,this.dh(t.s.privateKey,t.rs));const s=this.encryptAndHash(t.ss,e);return{ne:r,ns:i,ciphertext:s}}writeMessageB(t,e){t.e=this.crypto.generateX25519KeyPair();const r=t.e.publicKey;this.mixHash(t.ss,r),this.mixKey(t.ss,this.dh(t.e.privateKey,t.re)),this.mixKey(t.ss,this.dh(t.e.privateKey,t.rs));const n=this.encryptAndHash(t.ss,e),i=this.createEmptyKey(),s={ne:r,ns:i,ciphertext:n},{cs1:o,cs2:a}=this.split(t.ss);return{messageBuffer:s,cs1:o,cs2:a,h:t.ss.h}}readMessageA(t,e){H(e.ne)&&(t.re=e.ne),this.mixHash(t.ss,t.re),this.mixKey(t.ss,this.dh(t.s.privateKey,t.re));const{plaintext:r,valid:n}=this.decryptAndHash(t.ss,e.ns);n&&32===r.length&&H(r)&&(t.rs=r),this.mixKey(t.ss,this.dh(t.s.privateKey,t.rs));const{plaintext:i,valid:s}=this.decryptAndHash(t.ss,e.ciphertext);return{plaintext:i,valid:n&&s}}readMessageB(t,e){if(H(e.ne)&&(t.re=e.ne),this.mixHash(t.ss,t.re),!t.e)throw new Error("Handshake state should contain ephemeral key by now.");this.mixKey(t.ss,this.dh(t.e.privateKey,t.re)),this.mixKey(t.ss,this.dh(t.s.privateKey,t.re));const{plaintext:r,valid:n}=this.decryptAndHash(t.ss,e.ciphertext),{cs1:i,cs2:s}=this.split(t.ss);return{h:t.ss.h,valid:n,plaintext:r,cs1:i,cs2:s}}initializeInitiator(t,e,r,n){const i="Noise_IK_25519_ChaChaPoly_SHA256",s=this.initializeSymmetric(i);this.mixHash(s,t),this.mixHash(s,r);const o=new Uint8Array(32);return{ss:s,s:e,rs:r,re:o,psk:n}}initializeResponder(t,e,r,n){const i="Noise_IK_25519_ChaChaPoly_SHA256",s=this.initializeSymmetric(i);this.mixHash(s,t),this.mixHash(s,e.publicKey);const o=new Uint8Array(32);return{ss:s,s:e,rs:r,re:o,psk:n}}}class at extends Error{constructor(t,e){super(e),this.initialMsg=t,this.name="FailedIKhandshake"}}class ct{constructor(t,e,r,n,i,s,o,a,c){this.isInitiator=t,this.payload=e,this.prologue=r,this.staticKeypair=i,this.connection=s,a&&(this.remotePeer=a),this.ik=c??new ot(n),this.session=this.ik.initSession(this.isInitiator,this.prologue,this.staticKeypair,o),this.remoteEarlyData=new Uint8Array}async stage0(){if(X(this.session.hs.s),Z(this.session.hs.rs),this.isInitiator){Y("IK Stage 0 - Initiator sending message...");const t=this.ik.sendMessage(this.session,this.payload);this.connection.writeLP(I(t)),Y("IK Stage 0 - Initiator sent message."),J(this.session.hs.e)}else{Y("IK Stage 0 - Responder receiving message...");const e=await this.connection.readLP();try{const t=T(e.slice()),{plaintext:r,valid:n}=this.ik.recvMessage(this.session,t);if(!n)throw new Error("ik handshake stage 0 decryption validation fail");Y("IK Stage 0 - Responder got message, going to verify payload.");const i=await K(r);this.remotePeer=this.remotePeer||await V(i),await q(this.session.hs.rs,i,this.remotePeer),this.setRemoteEarlyData(i.data),Y("IK Stage 0 - Responder successfully verified payload!"),tt(this.session.hs.re)}catch(t){const r=t;throw Y("Responder breaking up with IK handshake in stage 0."),new at(e,`Error occurred while verifying initiator's signed payload: ${r.message}`)}}}async stage1(){if(this.isInitiator){Y("IK Stage 1 - Initiator receiving message...");const e=(await this.connection.readLP()).slice(),r=A(e),{plaintext:n,valid:i}=this.ik.recvMessage(this.session,r);Y("IK Stage 1 - Initiator got message, going to verify payload.");try{if(!i)throw new Error("ik stage 1 decryption validation fail");const t=await K(n);this.remotePeer=this.remotePeer||await V(t),await q(r.ns.slice(0,32),t,this.remotePeer),this.setRemoteEarlyData(t.data),Y("IK Stage 1 - Initiator successfully verified payload!"),tt(this.session.hs.re)}catch(t){const r=t;throw Y("Initiator breaking up with IK handshake in stage 1."),new at(e,`Error occurred while verifying responder's signed payload: ${r.message}`)}}else{Y("IK Stage 1 - Responder sending message...");const t=this.ik.sendMessage(this.session,this.payload);this.connection.writeLP(R(t)),Y("IK Stage 1 - Responder sent message..."),J(this.session.hs.e)}et(this.session)}decrypt(t,e){const r=this.getCS(e,!1);return this.ik.decryptWithAd(r,new Uint8Array(0),t)}encrypt(t,e){const r=this.getCS(e);return this.ik.encryptWithAd(r,new Uint8Array(0),t)}getLocalEphemeralKeys(){if(!this.session.hs.e)throw new Error("Ephemeral keys do not exist.");return this.session.hs.e}getCS(t,e=!0){if(!t.cs1||!t.cs2)throw new Error("Handshake not completed properly, cipher state does not exist.");return this.isInitiator?e?t.cs1:t.cs2:e?t.cs2:t.cs1}setRemoteEarlyData(t){t&&(this.remoteEarlyData=t)}}class ut extends Error{constructor(t="Unexpected Peer"){super(t),this.code=ut.code}static get code(){return"ERR_UNEXPECTED_PEER"}}class lt extends Error{constructor(t="Invalid crypto exchange"){super(t),this.code=lt.code}static get code(){return"ERR_INVALID_CRYPTO_EXCHANGE"}}Error;class ht extends st{initializeInitiator(t,e,r,n){const i="Noise_XX_25519_ChaChaPoly_SHA256",s=this.initializeSymmetric(i);this.mixHash(s,t);const o=new Uint8Array(32);return{ss:s,s:e,rs:r,psk:n,re:o}}initializeResponder(t,e,r,n){const i="Noise_XX_25519_ChaChaPoly_SHA256",s=this.initializeSymmetric(i);this.mixHash(s,t);const o=new Uint8Array(32);return{ss:s,s:e,rs:r,psk:n,re:o}}writeMessageA(t,e,r){const n=new Uint8Array(0);t.e=void 0!==r?r:this.crypto.generateX25519KeyPair();const i=t.e.publicKey;this.mixHash(t.ss,i);const s=this.encryptAndHash(t.ss,e);return{ne:i,ns:n,ciphertext:s}}writeMessageB(t,e){t.e=this.crypto.generateX25519KeyPair();const r=t.e.publicKey;this.mixHash(t.ss,r),this.mixKey(t.ss,this.dh(t.e.privateKey,t.re));const n=t.s.publicKey,i=this.encryptAndHash(t.ss,n);this.mixKey(t.ss,this.dh(t.s.privateKey,t.re));const s=this.encryptAndHash(t.ss,e);return{ne:r,ns:i,ciphertext:s}}writeMessageC(t,e){const r=t.s.publicKey,n=this.encryptAndHash(t.ss,r);this.mixKey(t.ss,this.dh(t.s.privateKey,t.re));const i=this.encryptAndHash(t.ss,e),s=this.createEmptyKey(),o={ne:s,ns:n,ciphertext:i},{cs1:a,cs2:c}=this.split(t.ss);return{h:t.ss.h,messageBuffer:o,cs1:a,cs2:c}}readMessageA(t,e){return H(e.ne)&&(t.re=e.ne),this.mixHash(t.ss,t.re),this.decryptAndHash(t.ss,e.ciphertext)}readMessageB(t,e){if(H(e.ne)&&(t.re=e.ne),this.mixHash(t.ss,t.re),!t.e)throw new Error("Handshake state `e` param is missing.");this.mixKey(t.ss,this.dh(t.e.privateKey,t.re));const{plaintext:r,valid:n}=this.decryptAndHash(t.ss,e.ns);n&&32===r.length&&H(r)&&(t.rs=r),this.mixKey(t.ss,this.dh(t.e.privateKey,t.rs));const{plaintext:i,valid:s}=this.decryptAndHash(t.ss,e.ciphertext);return{plaintext:i,valid:n&&s}}readMessageC(t,e){const{plaintext:r,valid:n}=this.decryptAndHash(t.ss,e.ns);if(n&&32===r.length&&H(r)&&(t.rs=r),!t.e)throw new Error("Handshake state `e` param is missing.");this.mixKey(t.ss,this.dh(t.e.privateKey,t.rs));const{plaintext:i,valid:s}=this.decryptAndHash(t.ss,e.ciphertext),{cs1:o,cs2:a}=this.split(t.ss);return{h:t.ss.h,plaintext:i,valid:n&&s,cs1:o,cs2:a}}initSession(t,e,r){const n=this.createEmptyKey(),i=new Uint8Array(32);let s;return s=t?this.initializeInitiator(e,r,i,n):this.initializeResponder(e,r,i,n),{hs:s,i:t,mc:0}}sendMessage(t,e,r){let n;if(0===t.mc)n=this.writeMessageA(t.hs,e,r);else if(1===t.mc)n=this.writeMessageB(t.hs,e);else if(2===t.mc){const{h:r,messageBuffer:i,cs1:s,cs2:o}=this.writeMessageC(t.hs,e);n=i,t.h=r,t.cs1=s,t.cs2=o}else{if(!(t.mc>2))throw new Error("Session invalid.");if(t.i){if(!t.cs1)throw new Error("CS1 (cipher state) is not defined");n=this.writeMessageRegular(t.cs1,e)}else{if(!t.cs2)throw new Error("CS2 (cipher state) is not defined");n=this.writeMessageRegular(t.cs2,e)}}return t.mc++,n}recvMessage(t,e){let r=new Uint8Array(0),n=!1;if(0===t.mc)({plaintext:r,valid:n}=this.readMessageA(t.hs,e));else if(1===t.mc)({plaintext:r,valid:n}=this.readMessageB(t.hs,e));else if(2===t.mc){const{h:i,plaintext:s,valid:o,cs1:a,cs2:c}=this.readMessageC(t.hs,e);r=s,n=o,t.h=i,t.cs1=a,t.cs2=c}return t.mc++,{plaintext:r,valid:n}}}class dt{constructor(t,e,r,n,i,s,o,a){this.isInitiator=t,this.payload=e,this.prologue=r,this.staticKeypair=i,this.connection=s,o&&(this.remotePeer=o),this.xx=a??new ht(n),this.session=this.xx.initSession(this.isInitiator,this.prologue,this.staticKeypair),this.remoteEarlyData=new Uint8Array(0)}async propose(){if(X(this.session.hs.s),this.isInitiator){Y("Stage 0 - Initiator starting to send first message.");const t=this.xx.sendMessage(this.session,new Uint8Array(0));this.connection.writeLP(R(t)),Y("Stage 0 - Initiator finished sending first message."),J(this.session.hs.e)}else{Y("Stage 0 - Responder waiting to receive first message...");const t=A((await this.connection.readLP()).slice()),{valid:e}=this.xx.recvMessage(this.session,t);if(!e)throw new lt("xx handshake stage 0 validation fail");Y("Stage 0 - Responder received first message."),tt(this.session.hs.re)}}async exchange(){if(this.isInitiator){Y("Stage 1 - Initiator waiting to receive first message from responder...");const e=T((await this.connection.readLP()).slice()),{plaintext:r,valid:n}=this.xx.recvMessage(this.session,e);if(!n)throw new lt("xx handshake stage 1 validation fail");Y("Stage 1 - Initiator received the message."),tt(this.session.hs.re),Z(this.session.hs.rs),Y("Initiator going to check remote's signature...");try{const t=await K(r);this.remotePeer=this.remotePeer||await V(t),this.remotePeer=await q(this.session.hs.rs,t,this.remotePeer),this.setRemoteEarlyData(t.data)}catch(t){const e=t;throw new ut(`Error occurred while verifying signed payload: ${e.message}`)}Y("All good with the signature!")}else{Y("Stage 1 - Responder sending out first message with signed payload and static key.");const t=this.xx.sendMessage(this.session,this.payload);this.connection.writeLP(I(t)),Y("Stage 1 - Responder sent the second handshake message with signed payload."),J(this.session.hs.e)}}async finish(){if(this.isInitiator){Y("Stage 2 - Initiator sending third handshake message.");const t=this.xx.sendMessage(this.session,this.payload);this.connection.writeLP(C(t)),Y("Stage 2 - Initiator sent message with signed payload.")}else{Y("Stage 2 - Responder waiting for third handshake message...");const e=k((await this.connection.readLP()).slice()),{plaintext:r,valid:n}=this.xx.recvMessage(this.session,e);if(!n)throw new lt("xx handshake stage 2 validation fail");Y("Stage 2 - Responder received the message, finished handshake.");try{const t=await K(r);this.remotePeer=this.remotePeer||await V(t),await q(this.session.hs.rs,t,this.remotePeer),this.setRemoteEarlyData(t.data)}catch(t){const e=t;throw new ut(`Error occurred while verifying signed payload: ${e.message}`)}}et(this.session)}encrypt(t,e){const r=this.getCS(e);return this.xx.encryptWithAd(r,new Uint8Array(0),t)}decrypt(t,e){const r=this.getCS(e,!1);return this.xx.decryptWithAd(r,new Uint8Array(0),t)}getRemoteStaticKey(){return this.session.hs.rs}getCS(t,e=!0){if(!t.cs1||!t.cs2)throw new lt("Handshake not completed properly, cipher state does not exist.");return this.isInitiator?e?t.cs1:t.cs2:e?t.cs2:t.cs1}setRemoteEarlyData(t){t&&(this.remoteEarlyData=t)}}class ft extends dt{constructor(t,e,r,n,i,s,o,a,c,u){super(t,e,r,n,i,s,a,u),c&&(this.ephemeralKeys=c),this.initialMsg=o}async propose(){if(this.isInitiator)this.xx.sendMessage(this.session,new Uint8Array(0),this.ephemeralKeys),Y("XX Fallback Stage 0 - Initialized state as the first message was sent by initiator."),J(this.session.hs.e);else{Y("XX Fallback Stage 0 - Responder decoding initial msg from IK.");const t=A(this.initialMsg),{valid:e}=this.xx.recvMessage(this.session,{ne:t.ne,ns:new Uint8Array(0),ciphertext:new Uint8Array(0)});if(!e)throw new Error("xx fallback stage 0 decryption validation fail");Y("XX Fallback Stage 0 - Responder used received message from IK."),tt(this.session.hs.re)}}async exchange(){if(this.isInitiator){const e=T(this.initialMsg),{plaintext:r,valid:n}=this.xx.recvMessage(this.session,e);if(!n)throw new Error("xx fallback stage 1 decryption validation fail");Y("XX Fallback Stage 1 - Initiator used received message from IK."),tt(this.session.hs.re),Z(this.session.hs.rs),Y("Initiator going to check remote's signature...");try{const t=await K(r);this.remotePeer=this.remotePeer||await V(t),await q(this.session.hs.rs,t,this.remotePeer),this.setRemoteEarlyData(t.data)}catch(t){const e=t;throw new Error(`Error occurred while verifying signed payload from responder: ${e.message}`)}Y("All good with the signature!")}else Y("XX Fallback Stage 1 - Responder start"),await super.exchange(),Y("XX Fallback Stage 1 - Responder end")}}var pt=r(5095);class gt{constructor(){this.storage=new pt.ji}store(t,e){this.storage.set(t,e)}load(t){return t?this.storage.get(t)??null:null}resetStorage(){this.storage.clear()}}const yt=new gt;class mt{constructor(t,e,r=m){this.protocol="/noise",this.prologue=new Uint8Array(0),this.earlyData=e??new Uint8Array(0),this.useNoisePipes=!1,this.crypto=r,this.staticKeys=t?this.crypto.generateX25519KeyPairFromSeed(t):this.crypto.generateX25519KeyPair()}async secureOutbound(t,e,r){const n=s(e,{lengthEncoder:S,lengthDecoder:_,maxDataLength:l}),i=await this.performHandshake({connection:n,isInitiator:!0,localPeer:t,remotePeer:r}),o=await this.createSecureConnection(n,i);return{conn:o,remoteEarlyData:i.remoteEarlyData,remotePeer:i.remotePeer}}async secureInbound(t,e,r){const n=s(e,{lengthEncoder:S,lengthDecoder:_,maxDataLength:l}),i=await this.performHandshake({connection:n,isInitiator:!1,localPeer:t,remotePeer:r}),o=await this.createSecureConnection(n,i);return{conn:o,remoteEarlyData:i.remoteEarlyData,remotePeer:i.remotePeer}}async performHandshake(t){const e=await x(t.localPeer,this.staticKeys.publicKey,this.earlyData);let r=this.useNoisePipes;if(t.isInitiator&&null===yt.load(t.remotePeer)&&(r=!1),!r)return await this.performXXHandshake(t,e);{const{remotePeer:r,connection:i,isInitiator:s}=t,o=new ct(s,e,this.prologue,this.crypto,this.staticKeys,i,yt.load(t.remotePeer)??new Uint8Array(32),r);try{return await this.performIKHandshake(o)}catch(n){const r=n;let i;return t.isInitiator&&(i=o.getLocalEphemeralKeys()),await this.performXXFallbackHandshake(t,e,r.initialMsg,i)}}}async performXXFallbackHandshake(t,e,r,n){const{isInitiator:i,remotePeer:s,connection:o}=t,a=new ft(i,e,this.prologue,this.crypto,this.staticKeys,o,r,s,n);try{await a.propose(),await a.exchange(),await a.finish()}catch(c){const t=c;throw t.message=`Error occurred during XX Fallback handshake: ${t.message}`,Y(t),t}return a}async performXXHandshake(t,e){const{isInitiator:r,remotePeer:n,connection:i}=t,s=new dt(r,e,this.prologue,this.crypto,this.staticKeys,i,n);try{await s.propose(),await s.exchange(),await s.finish(),this.useNoisePipes&&s.remotePeer&&yt.store(s.remotePeer,s.getRemoteStaticKey())}catch(o){if(o instanceof Error)throw o.message=`Error occurred during XX handshake: ${o.message}`,o}return s}async performIKHandshake(t){return await t.stage0(),await t.stage1(),t}async createSecureConnection(t,e){const[r,n]=c(),s=t.unwrap();return await(0,u.zG)(r,w(e),(0,i.cv)({lengthEncoder:S}),s,(0,i.Jx)({lengthDecoder:_}),v(e),r),n}}new mt},4241:function(t,e,r){"use strict";r.d(e,{z:function(){return p}});r(1703);var n,i=r(3839),s=r(9222),o=function(t,e,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(t):n?n.value:e.get(t)};class a extends EventTarget{constructor(){super(...arguments),n.set(this,new Map)}listenerCount(t){const e=o(this,n,"f").get(t);return null==e?0:e.length}addEventListener(t,e,r){super.addEventListener(t,e,r);let i=o(this,n,"f").get(t);null==i&&(i=[],o(this,n,"f").set(t,i)),i.push({callback:e,once:(!0!==r&&!1!==r&&r?.once)??!1})}removeEventListener(t,e,r){super.removeEventListener(t,e,r);let i=o(this,n,"f").get(t);null!=i&&(i=i.filter((({callback:t})=>t!==e)),o(this,n,"f").set(t,i))}dispatchEvent(t){const e=super.dispatchEvent(t);let r=o(this,n,"f").get(t.type);return null==r||(r=r.filter((({once:t})=>!t)),o(this,n,"f").set(t.type,r)),e}}n=new WeakMap;class c extends Event{constructor(t,e){super(t,e),this.detail=e?.detail}}const u=globalThis.CustomEvent??c;var l=r(2656),h=r(9412);const d=Symbol.for("@libp2p/peer-discovery");const f=(0,l.kg)("libp2p:bootstrap");class p extends a{constructor(t={list:[]}){if(null==t.list||0===t.list.length)throw new Error("Bootstrap requires a list of peer addresses");super(),this.interval=t.interval??1e4,this.list=[];for(const e of t.list){if(!s.Ul.matches(e)){f.error("Invalid multiaddr");continue}const t=new i.sc(e),r=t.getPeerId();if(null==r){f.error("Invalid bootstrap multiaddr without peer id");continue}const n={id:(0,h.jE)(r),multiaddrs:[t],protocols:[]};this.list.push(n)}}get[d](){return!0}get[Symbol.toStringTag](){return"@libp2p/bootstrap"}isStarted(){return Boolean(this.timer)}start(){null==this.timer&&(this.timer=setInterval((()=>this._discoverBootstrapPeers()),this.interval),f("Starting bootstrap node discovery"),this._discoverBootstrapPeers())}_discoverBootstrapPeers(){null!=this.timer&&this.list.forEach((t=>{this.dispatchEvent(new u("peer",{detail:t}))}))}stop(){null!=this.timer&&clearInterval(this.timer),this.timer=void 0}}p.tag="bootstrap"},942:function(t,e,r){"use strict";r.d(e,{U:function(){return a}});r(8675),r(3462);var n=r(6017),i={SHA1:20,SHA256:32,SHA512:64};const s={SHA1:"SHA-1",SHA256:"SHA-256",SHA512:"SHA-512"},o=async(t,e)=>{const r=await n.Z.get().subtle.sign({name:"HMAC"},t,e);return new Uint8Array(r,0,r.byteLength)};async function a(t,e){const r=s[t],a=await n.Z.get().subtle.importKey("raw",e,{name:"HMAC",hash:{name:r}},!1,["sign"]);return{async digest(t){return await o(a,t)},length:i[t]}}},4812:function(t,e,r){"use strict";r.d(e,{XP:function(){return i},nk:function(){return u},O6:function(){return s.Z}});r(942),r(22),r(5736),r(6523),r(2259);r(1703);var n=r(9998);var i=r(6428),s=r(115),o=r(2515),a=r(4292);const c={sha1:"sha1","sha2-256":"sha256","sha2-512":"sha512"};function u(t,e,r,i,s){if("sha1"!==s&&"sha2-256"!==s&&"sha2-512"!==s){const t=Object.keys(c).join(" / ");throw n(new Error(`Hash '${s}' is unknown or not supported. Must be ${t}`),"ERR_UNSUPPORTED_HASH_TYPE")}const u=c[s],l=o(t,e,r,i,u);return a.encode64(l,null)}},6428:function(t,e,r){"use strict";r.r(e),r.d(e,{generateEphemeralKeyPair:function(){return D},generateKeyPair:function(){return jt},generateKeyPairFromSeed:function(){return qt},importKey:function(){return Wt},keyStretcher:function(){return w},keysPBM:function(){return n},marshalPrivateKey:function(){return $t},marshalPublicKey:function(){return Gt},supportedKeys:function(){return Vt},unmarshalPrivateKey:function(){return zt},unmarshalPublicKey:function(){return Ht}});var n={};r.r(n),r.d(n,{KeyType:function(){return a},PrivateKey:function(){return l},PublicKey:function(){return u}});var i={};r.r(i),r.d(i,{RsaPrivateKey:function(){return nt},RsaPublicKey:function(){return rt},fromJwk:function(){return ot},generateKeyPair:function(){return at},unmarshalRsaPrivateKey:function(){return it},unmarshalRsaPublicKey:function(){return st}});var s={};r.r(s),r.d(s,{Ed25519PrivateKey:function(){return Et},Ed25519PublicKey:function(){return vt},generateKeyPair:function(){return _t},generateKeyPairFromSeed:function(){return Rt},unmarshalEd25519PrivateKey:function(){return bt},unmarshalEd25519PublicKey:function(){return St}});var o={};r.r(o),r.d(o,{Secp256k1PrivateKey:function(){return Bt},Secp256k1PublicKey:function(){return Ot},generateKeyPair:function(){return Mt},unmarshalSecp256k1PrivateKey:function(){return xt},unmarshalSecp256k1PublicKey:function(){return Ut}});r(1703);var a,c,u,l,h=r(1860);(function(t){t["RSA"]="RSA",t["Ed25519"]="Ed25519",t["Secp256k1"]="Secp256k1"})(a||(a={})),function(t){t[t["RSA"]=0]="RSA",t[t["Ed25519"]=1]="Ed25519",t[t["Secp256k1"]=2]="Secp256k1"}(c||(c={})),function(t){t.codec=()=>(0,h.Ji)(c)}(a||(a={})),function(t){t.codec=()=>(0,h.yw)({1:{name:"Type",codec:a.codec()},2:{name:"Data",codec:h.aI}}),t.encode=e=>(0,h.LE)(e,t.codec()),t.decode=e=>(0,h.C6)(e,t.codec())}(u||(u={})),function(t){t.codec=()=>(0,h.yw)({1:{name:"Type",codec:a.codec()},2:{name:"Data",codec:h.aI}}),t.encode=e=>(0,h.LE)(e,t.codec()),t.decode=e=>(0,h.C6)(e,t.codec())}(l||(l={}));r(1041),r(1352);var d=r(5736),f=r(9998),p=r(2259),g=r(5489),y=r(942);const m={"AES-128":{ivSize:16,keySize:16},"AES-256":{ivSize:16,keySize:32},Blowfish:{ivSize:8,keySize:32}};async function w(t,e,r){const n=m[t];if(null==n){const e=Object.keys(m).join(" / ");throw f(new Error(`unknown cipher type '${t}'. Must be ${e}`),"ERR_INVALID_CIPHER_TYPE")}if(null==e)throw f(new Error("missing hash type"),"ERR_MISSING_HASH_TYPE");const i=n.keySize,s=n.ivSize,o=20,a=(0,p.m)("key expansion"),c=2*(s+i+o),u=await y.U(e,r);let l=await u.digest(a);const h=[];let d=0;while(d<c){const t=await u.digest((0,g.z)([l,a]));let e=t.length;d+e>c&&(e=c-d),h.push(t),d+=e,l=await u.digest(l)}const w=c/2,v=(0,g.z)(h),E=v.slice(0,w),b=v.slice(w,c),S=t=>({iv:t.slice(0,s),cipherKey:t.slice(s,s+i),macKey:t.slice(s+i)});return{k1:S(E),k2:S(b)}}r(8675),r(3462);var v=r(6017),E=(r(4292),r(5970),r(6523));function b(t,e){let r=Uint8Array.from(t.abs().toByteArray());if(r=0===r[0]?r.slice(1):r,null!=e){if(r.length>e)throw new Error("byte array longer than desired length");r=(0,g.z)([new Uint8Array(e-r.length),r])}return(0,E.B)(r,"base64url")}function S(t){const e=_(t);return new d.jsbn.BigInteger((0,E.B)(e,"base16"),16)}function _(t,e){let r=(0,p.m)(t,"base64urlpad");if(null!=e){if(r.length>e)throw new Error("byte array longer than desired length");r=(0,g.z)([new Uint8Array(e-r.length),r])}return r}var R=r(4141);const I={"P-256":256,"P-384":384,"P-521":521},C=Object.keys(I),A=C.join(" / ");async function T(t){if("P-256"!==t&&"P-384"!==t&&"P-521"!==t)throw f(new Error(`Unknown curve: ${t}. Must be ${A}`),"ERR_INVALID_CURVE");const e=await v.Z.get().subtle.generateKey({name:"ECDH",namedCurve:t},!0,["deriveBits"]),r=async(r,n)=>{let i;i=null!=n?await v.Z.get().subtle.importKey("jwk",L(t,n),{name:"ECDH",namedCurve:t},!1,["deriveBits"]):e.privateKey;const s=await v.Z.get().subtle.importKey("jwk",N(t,r),{name:"ECDH",namedCurve:t},!1,[]),o=await v.Z.get().subtle.deriveBits({name:"ECDH",namedCurve:t,public:s},i,I[t]);return new Uint8Array(o,0,o.byteLength)},n=await v.Z.get().subtle.exportKey("jwk",e.publicKey),i={key:P(n),genSharedKey:r};return i}const k={"P-256":32,"P-384":48,"P-521":66};function P(t){if(null==t.crv||null==t.x||null==t.y)throw f(new Error("JWK was missing components"),"ERR_INVALID_PARAMETERS");if("P-256"!==t.crv&&"P-384"!==t.crv&&"P-521"!==t.crv)throw f(new Error(`Unknown curve: ${t.crv}. Must be ${A}`),"ERR_INVALID_CURVE");const e=k[t.crv];return(0,g.z)([Uint8Array.from([4]),_(t.x,e),_(t.y,e)],1+2*e)}function N(t,e){if("P-256"!==t&&"P-384"!==t&&"P-521"!==t)throw f(new Error(`Unknown curve: ${t}. Must be ${A}`),"ERR_INVALID_CURVE");const r=k[t];if(!(0,R.f)(e.slice(0,1),Uint8Array.from([4])))throw f(new Error("Cannot unmarshal public key - invalid key format"),"ERR_INVALID_KEY_FORMAT");return{kty:"EC",crv:t,x:(0,E.B)(e.slice(1,r+1),"base64url"),y:(0,E.B)(e.slice(1+r),"base64url"),ext:!0}}const L=(t,e)=>({...N(t,e.public),d:(0,E.B)(e.private,"base64url")});var D=T,O=r(1058);function B(t){const e=t?.algorithm??"AES-GCM";let r=t?.keyLength??16;const n=t?.nonceLength??12,i=t?.digest??"SHA-256",s=t?.saltLength??16,o=t?.iterations??32767,a=v.Z.get();async function c(t,c){const u=a.getRandomValues(new Uint8Array(s)),l=a.getRandomValues(new Uint8Array(n)),h={name:e,iv:l};"string"===typeof c&&(c=(0,p.m)(c));const d={name:"PBKDF2",salt:u,iterations:o,hash:{name:i}},f=await a.subtle.importKey("raw",c,{name:"PBKDF2"},!1,["deriveKey","deriveBits"]),y=await a.subtle.deriveKey(d,f,{name:e,length:r},!0,["encrypt"]),m=await a.subtle.encrypt(h,y,t);return(0,g.z)([u,h.iv,new Uint8Array(m)])}async function u(t,c){const u=t.slice(0,s),l=t.slice(s,s+n),h=t.slice(s+n),d={name:e,iv:l};"string"===typeof c&&(c=(0,p.m)(c));const f={name:"PBKDF2",salt:u,iterations:o,hash:{name:i}},g=await a.subtle.importKey("raw",c,{name:"PBKDF2"},!1,["deriveKey","deriveBits"]),y=await a.subtle.deriveKey(f,g,{name:e,length:r},!0,["decrypt"]),m=await a.subtle.decrypt(d,y,h);return new Uint8Array(m)}r*=8;const l={encrypt:c,decrypt:u};return l}async function x(t,e){const r=O.base64.decode(t),n=B();return await n.decrypt(r,e)}var U=r(1919),M=(r(2328),r(115));r(5070);function V(t){const e=d.asn1.fromDer((0,E.B)(t,"ascii")),r=d.pki.privateKeyFromAsn1(e);return{kty:"RSA",n:b(r.n),e:b(r.e),d:b(r.d),p:b(r.p),q:b(r.q),dp:b(r.dP),dq:b(r.dQ),qi:b(r.qInv),alg:"RS256"}}function K(t){if(null==t.n||null==t.e||null==t.d||null==t.p||null==t.q||null==t.dp||null==t.dq||null==t.qi)throw f(new Error("JWK was missing components"),"ERR_INVALID_PARAMETERS");const e=d.pki.privateKeyToAsn1({n:S(t.n),e:S(t.e),d:S(t.d),p:S(t.p),q:S(t.q),dP:S(t.dp),dQ:S(t.dq),qInv:S(t.qi)});return(0,p.m)(d.asn1.toDer(e).getBytes(),"ascii")}function F(t){const e=d.asn1.fromDer((0,E.B)(t,"ascii")),r=d.pki.publicKeyFromAsn1(e);return{kty:"RSA",n:b(r.n),e:b(r.e)}}function j(t){if(null==t.n||null==t.e)throw f(new Error("JWK was missing components"),"ERR_INVALID_PARAMETERS");const e=d.pki.publicKeyToAsn1({n:S(t.n),e:S(t.e)});return(0,p.m)(d.asn1.toDer(e).getBytes(),"ascii")}function q(t,e){return e.map((e=>S(t[e])))}function H(t){return d.pki.setRsaPrivateKey(...q(t,["n","e","d","p","q","dp","dq","qi"]))}function G(t){return d.pki.setRsaPublicKey(...q(t,["n","e"]))}async function z(t){const e=await v.Z.get().subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign","verify"]),r=await Q(e);return{privateKey:r[0],publicKey:r[1]}}async function $(t){const e=await v.Z.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["sign"]),r=[e,await X(t)],n=await Q({privateKey:r[0],publicKey:r[1]});return{privateKey:n[0],publicKey:n[1]}}async function W(t,e){const r=await v.Z.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["sign"]),n=await v.Z.get().subtle.sign({name:"RSASSA-PKCS1-v1_5"},r,Uint8Array.from(e));return new Uint8Array(n,0,n.byteLength)}async function Y(t,e,r){const n=await v.Z.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]);return await v.Z.get().subtle.verify({name:"RSASSA-PKCS1-v1_5"},n,e,r)}async function Q(t){if(null==t.privateKey||null==t.publicKey)throw f(new Error("Private and public key are required"),"ERR_INVALID_PARAMETERS");return await Promise.all([v.Z.get().subtle.exportKey("jwk",t.privateKey),v.Z.get().subtle.exportKey("jwk",t.publicKey)])}async function X(t){return await v.Z.get().subtle.importKey("jwk",{kty:t.kty,n:t.n,e:t.e},{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["verify"])}function J(t,e,r,n){const i=e?G(t):H(t),s=(0,E.B)(Uint8Array.from(r),"ascii"),o=n(s,i);return(0,p.m)(o,"ascii")}function Z(t,e){return J(t,!0,e,((t,e)=>e.encrypt(t)))}function tt(t,e){return J(t,!1,e,((t,e)=>e.decrypt(t)))}async function et(t,e){const r=B(),n=await r.encrypt(t,e);return O.base64.encode(n)}class rt{constructor(t){this._key=t}async verify(t,e){return await Y(this._key,e,t)}marshal(){return j(this._key)}get bytes(){return u.encode({Type:a.RSA,Data:this.marshal()})}encrypt(t){return Z(this._key,t)}equals(t){return(0,R.f)(this.bytes,t.bytes)}async hash(){const{bytes:t}=await U.sha256.digest(this.bytes);return t}}class nt{constructor(t,e){this._key=t,this._publicKey=e}genSecret(){return M.Z(16)}async sign(t){return await W(this._key,t)}get public(){if(null==this._publicKey)throw f(new Error("public key not provided"),"ERR_PUBKEY_NOT_PROVIDED");return new rt(this._publicKey)}decrypt(t){return tt(this._key,t)}marshal(){return K(this._key)}get bytes(){return l.encode({Type:a.RSA,Data:this.marshal()})}equals(t){return(0,R.f)(this.bytes,t.bytes)}async hash(){const{bytes:t}=await U.sha256.digest(this.bytes);return t}async id(){const t=await this.public.hash();return(0,E.B)(t,"base58btc")}async export(t,e="pkcs-8"){if("pkcs-8"===e){const e=new d.util.ByteBuffer(this.marshal()),r=d.asn1.fromDer(e),n=d.pki.privateKeyFromAsn1(r),i={algorithm:"aes256",count:1e4,saltSize:16,prfAlgorithm:"sha512"};return d.pki.encryptRsaPrivateKey(n,t,i)}if("libp2p-key"===e)return await et(this.bytes,t);throw f(new Error(`export format '${e}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}}async function it(t){const e=V(t),r=await $(e);return new nt(r.privateKey,r.publicKey)}function st(t){const e=F(t);return new rt(e)}async function ot(t){const e=await $(t);return new nt(e.privateKey,e.publicKey)}async function at(t){const e=await z(t);return new nt(e.privateKey,e.publicKey)}var ct=r(8334),ut=r(7041),lt=r(1099);const ht=32,dt=64,ft=32;async function pt(){const t=lt.P6.randomPrivateKey(),e=await lt.$3(t),r=wt(t,e);return{privateKey:r,publicKey:e}}async function gt(t){if(t.length!==ft)throw new TypeError('"seed" must be 32 bytes in length.');if(!(t instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, or Uint8Array.');const e=t,r=await lt.$3(e),n=wt(e,r);return{privateKey:n,publicKey:r}}async function yt(t,e){const r=t.slice(0,ft);return await lt.Xx(e,r)}async function mt(t,e,r){return await lt.T(e,r,t)}function wt(t,e){const r=new Uint8Array(dt);for(let n=0;n<ft;n++)r[n]=t[n],r[ft+n]=e[n];return r}class vt{constructor(t){this._key=It(t,ht)}async verify(t,e){return await mt(this._key,e,t)}marshal(){return this._key}get bytes(){return u.encode({Type:a.Ed25519,Data:this.marshal()})}equals(t){return(0,R.f)(this.bytes,t.bytes)}async hash(){const{bytes:t}=await U.sha256.digest(this.bytes);return t}}class Et{constructor(t,e){this._key=It(t,dt),this._publicKey=It(e,ht)}async sign(t){return await yt(this._key,t)}get public(){return new vt(this._publicKey)}marshal(){return this._key}get bytes(){return l.encode({Type:a.Ed25519,Data:this.marshal()})}equals(t){return(0,R.f)(this.bytes,t.bytes)}async hash(){const{bytes:t}=await U.sha256.digest(this.bytes);return t}async id(){const t=await ut.identity.digest(this.public.bytes);return ct.base58btc.encode(t.bytes).substring(1)}async export(t,e="libp2p-key"){if("libp2p-key"===e)return await et(this.bytes,t);throw f(new Error(`export format '${e}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}}function bt(t){if(t.length>dt){t=It(t,dt+ht);const e=t.slice(0,dt),r=t.slice(dt,t.length);return new Et(e,r)}t=It(t,dt);const e=t.slice(0,dt),r=t.slice(ht);return new Et(e,r)}function St(t){return t=It(t,ht),new vt(t)}async function _t(){const{privateKey:t,publicKey:e}=await pt();return new Et(t,e)}async function Rt(t){const{privateKey:e,publicKey:r}=await gt(t);return new Et(e,r)}function It(t,e){if(t=Uint8Array.from(t??[]),t.length!==e)throw f(new Error(`Key must be a Uint8Array of length ${e}, got ${t.length}`),"ERR_INVALID_KEY_TYPE");return t}var Ct=r(4618);function At(){return Ct.P6.randomPrivateKey()}async function Tt(t,e){const{digest:r}=await U.sha256.digest(e);try{return await Ct.Xx(r,t)}catch(n){throw f(n,"ERR_INVALID_INPUT")}}async function kt(t,e,r){try{const{digest:n}=await U.sha256.digest(r);return Ct.T(e,n,t)}catch(n){throw f(n,"ERR_INVALID_INPUT")}}function Pt(t){const e=Ct.E9.fromHex(t).toRawBytes(!0);return e}function Nt(t){try{Ct.$3(t,!0)}catch(e){throw f(e,"ERR_INVALID_PRIVATE_KEY")}}function Lt(t){try{Ct.E9.fromHex(t)}catch(e){throw f(e,"ERR_INVALID_PUBLIC_KEY")}}function Dt(t){try{return Ct.$3(t,!0)}catch(e){throw f(e,"ERR_INVALID_PRIVATE_KEY")}}class Ot{constructor(t){Lt(t),this._key=t}async verify(t,e){return await kt(this._key,e,t)}marshal(){return Pt(this._key)}get bytes(){return u.encode({Type:a.Secp256k1,Data:this.marshal()})}equals(t){return(0,R.f)(this.bytes,t.bytes)}async hash(){const{bytes:t}=await U.sha256.digest(this.bytes);return t}}class Bt{constructor(t,e){this._key=t,this._publicKey=e??Dt(t),Nt(this._key),Lt(this._publicKey)}async sign(t){return await Tt(this._key,t)}get public(){return new Ot(this._publicKey)}marshal(){return this._key}get bytes(){return l.encode({Type:a.Secp256k1,Data:this.marshal()})}equals(t){return(0,R.f)(this.bytes,t.bytes)}async hash(){const{bytes:t}=await U.sha256.digest(this.bytes);return t}async id(){const t=await this.public.hash();return(0,E.B)(t,"base58btc")}async export(t,e="libp2p-key"){if("libp2p-key"===e)return await et(this.bytes,t);throw f(new Error(`export format '${e}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}}function xt(t){return new Bt(t)}function Ut(t){return new Ot(t)}async function Mt(){const t=await At();return new Bt(t)}const Vt={rsa:i,ed25519:s,secp256k1:o};function Kt(t){const e=Object.keys(Vt).join(" / ");return f(new Error(`invalid or unsupported key type ${t}. Must be ${e}`),"ERR_UNSUPPORTED_KEY_TYPE")}function Ft(t){if(t=t.toLowerCase(),"rsa"===t||"ed25519"===t||"secp256k1"===t)return Vt[t];throw Kt(t)}async function jt(t,e){return await Ft(t).generateKeyPair(e??2048)}async function qt(t,e,r){if("ed25519"!==t.toLowerCase())throw f(new Error("Seed key derivation is unimplemented for RSA or secp256k1"),"ERR_UNSUPPORTED_KEY_DERIVATION_TYPE");return await Rt(e)}function Ht(t){const e=u.decode(t),r=e.Data;switch(e.Type){case a.RSA:return Vt.rsa.unmarshalRsaPublicKey(r);case a.Ed25519:return Vt.ed25519.unmarshalEd25519PublicKey(r);case a.Secp256k1:return Vt.secp256k1.unmarshalSecp256k1PublicKey(r);default:throw Kt(e.Type)}}function Gt(t,e){return e=(e??"rsa").toLowerCase(),Ft(e),t.bytes}async function zt(t){const e=l.decode(t),r=e.Data;switch(e.Type){case a.RSA:return await Vt.rsa.unmarshalRsaPrivateKey(r);case a.Ed25519:return Vt.ed25519.unmarshalEd25519PrivateKey(r);case a.Secp256k1:return Vt.secp256k1.unmarshalSecp256k1PrivateKey(r);default:throw Kt(e.Type)}}function $t(t,e){return e=(e??"rsa").toLowerCase(),Ft(e),t.bytes}async function Wt(t,e){try{const r=await x(t,e);return await zt(r)}catch(i){}const r=d.pki.decryptRsaPrivateKey(t,e);if(null===r)throw f(new Error("Cannot read the key, most likely the password is wrong or not a RSA key"),"ERR_CANNOT_DECRYPT_PEM");let n=d.asn1.toDer(d.pki.privateKeyToAsn1(r));return n=(0,p.m)(n.getBytes(),"ascii"),await Vt.rsa.unmarshalRsaPrivateKey(n)}},115:function(t,e,r){"use strict";r.d(e,{Z:function(){return s}});r(1703);var n=r(1809),i=r(9998);function s(t){if(isNaN(t)||t<=0)throw i(new Error("random bytes length must be a Number bigger than 0"),"ERR_INVALID_LENGTH");return n(t)}},6017:function(t,e,r){"use strict";r(1703);e["Z"]={get(t=globalThis){const e=t.crypto;if(null==e||null==e.subtle)throw Object.assign(new Error("Missing Web Crypto API. The most likely cause of this error is that this page is being accessed from an insecure context (i.e. not HTTPS). For more information and possible resolutions see https://github.com/libp2p/js-libp2p-crypto/blob/master/README.md#web-crypto-api"),{code:"ERR_MISSING_WEB_CRYPTO"});return e}}},5147:function(t,e,r){"use strict";r.d(e,{K:function(){return X}});var n=r(6523),i=(r(1703),r(8675),r(3462),r(2656)),s=r(1079),o=r(9998),a=r(9174),c=r(1305);const u=Symbol.for("@libp2p/topology");const l=()=>{};class h{constructor(t){this.min=t.min??0,this.max=t.max??1/0,this.peers=new Set,this.onConnect=t.onConnect??l,this.onDisconnect=t.onDisconnect??l}get[Symbol.toStringTag](){return u.toString()}get[u](){return!0}async setRegistrar(t){this.registrar=t}disconnect(t){this.onDisconnect(t)}}function d(t){return new h(t)}const f={ERR_INVALID_SIGNATURE_POLICY:"ERR_INVALID_SIGNATURE_POLICY",ERR_UNHANDLED_SIGNATURE_POLICY:"ERR_UNHANDLED_SIGNATURE_POLICY",ERR_MISSING_SIGNATURE:"ERR_MISSING_SIGNATURE",ERR_MISSING_SEQNO:"ERR_MISSING_SEQNO",ERR_MISSING_KEY:"ERR_MISSING_KEY",ERR_INVALID_SIGNATURE:"ERR_INVALID_SIGNATURE",ERR_MISSING_FROM:"ERR_MISSING_FROM",ERR_UNEXPECTED_FROM:"ERR_UNEXPECTED_FROM",ERR_UNEXPECTED_SIGNATURE:"ERR_UNEXPECTED_SIGNATURE",ERR_UNEXPECTED_KEY:"ERR_UNEXPECTED_KEY",ERR_UNEXPECTED_SEQNO:"ERR_UNEXPECTED_SEQNO"};var p=r(4291),g=r(6312),y=r(43);const m=(0,i.kg)("libp2p-pubsub:peer-streams");class w extends s.vp{constructor(t){super(),this.id=t.id,this.protocol=t.protocol,this._inboundAbortController=new AbortController,this.closed=!1}get isReadable(){return Boolean(this.inboundStream)}get isWritable(){return Boolean(this.outboundStream)}write(t){if(null==this.outboundStream){const t=this.id.toString();throw new Error("No writable connection to "+t)}this.outboundStream.push(t)}attachInboundStream(t){return this._rawInboundStream=t,this.inboundStream=(0,y.wJ)((0,a.zG)(this._rawInboundStream,p.Jx()),this._inboundAbortController.signal,{returnOnAbort:!0}),this.dispatchEvent(new s.Aw("stream:inbound")),this.inboundStream}async attachOutboundStream(t){const e=this.outboundStream;return null!=this.outboundStream&&await this.outboundStream.end(),this._rawOutboundStream=t,this.outboundStream=(0,g.d)({onEnd:t=>{null!=this._rawOutboundStream&&null!=this._rawOutboundStream.reset&&this._rawOutboundStream.reset(),this._rawOutboundStream=void 0,this.outboundStream=void 0,null!=t&&this.dispatchEvent(new s.Aw("close"))}}),(0,a.zG)(this.outboundStream,p.cv(),this._rawOutboundStream).catch((t=>{m.error(t)})),null==e&&this.dispatchEvent(new s.Aw("stream:outbound")),this.outboundStream}close(){this.closed||(this.closed=!0,null!=this.outboundStream&&this.outboundStream.end(),null!=this.inboundStream&&this._inboundAbortController.abort(),this._rawOutboundStream=void 0,this.outboundStream=void 0,this._rawInboundStream=void 0,this.inboundStream=void 0,this.dispatchEvent(new s.Aw("close")))}}var v=r(4170),E=r(2259),b=r(1919),S=r(9412);function _(){return BigInt(`0x${(0,n.B)((0,v.randomBytes)(8),"base16")}`)}const R=(t,e)=>{const r=(0,E.m)(e.toString(16).padStart(16,"0"),"base16"),n=new Uint8Array(t.length+r.length);return n.set(t,0),n.set(r,t.length),n},I=t=>b.sha256.encode(t),C=function(t){return Array.isArray(t)?t:[t]},A=t=>{if(null==t.from)throw o(new Error("RPC message was missing from"),f.ERR_MISSING_FROM);return{from:(0,S.cv)(t.from),topic:t.topic??"",sequenceNumber:null==t.sequenceNumber?void 0:BigInt(`0x${(0,n.B)(t.sequenceNumber,"base16")}`),data:t.data??new Uint8Array(0),signature:t.signature??void 0,key:t.key??void 0}},T=t=>({from:t.from.multihash.bytes,data:t.data,sequenceNumber:null==t.sequenceNumber?void 0:(0,E.m)(t.sequenceNumber.toString(16).padStart(16,"0"),"base16"),topic:t.topic,signature:t.signature,key:t.key});var k=r(5489),P=r(4812);const N=(0,E.m)("libp2p-pubsub:");async function L(t,e,r){const n=(0,k.z)([N,r(T(e))]);if(null==t.privateKey)throw new Error("Cannot sign message, no private key present");if(null==t.publicKey)throw new Error("Cannot sign message, no public key present");const i=await P.XP.unmarshalPrivateKey(t.privateKey),s=await i.sign(n),o={...e,signature:s,key:t.publicKey};return o}async function D(t,e){if(null==t.signature)throw new Error("Message must contain a signature to be verified");if(null==t.from)throw new Error("Message must contain a from property to be verified");const r=(0,k.z)([N,e({...T(t),signature:void 0,key:void 0})]),n=await O(t),i=P.XP.unmarshalPublicKey(n);return await i.verify(r,t.signature)}async function O(t){if(null==t.from)throw new Error("Could not get the public key from the originator id");if(null!=t.key){const e=await(0,S.y5)(t.key);if(null!=e.publicKey)return e.publicKey}if(null!=t.from.publicKey)return t.from.publicKey;throw new Error("Could not get the public key from the originator id")}var B=r(5095);function x(t){return null!=t&&"function"===typeof t.init}class U{constructor(t={}){this.started=!1,null!=t.peerId&&this.setPeerId(t.peerId),null!=t.addressManager&&this.setAddressManager(t.addressManager),null!=t.peerStore&&this.setPeerStore(t.peerStore),null!=t.upgrader&&this.setUpgrader(t.upgrader),null!=t.metrics&&this.setMetrics(t.metrics),null!=t.registrar&&this.setRegistrar(t.registrar),null!=t.connectionManager&&this.setConnectionManager(t.connectionManager),null!=t.transportManager&&this.setTransportManager(t.transportManager),null!=t.connectionGater&&this.setConnectionGater(t.connectionGater),null!=t.contentRouting&&this.setContentRouting(t.contentRouting),null!=t.peerRouting&&this.setPeerRouting(t.peerRouting),null!=t.datastore&&this.setDatastore(t.datastore),null!=t.connectionProtector&&this.setConnectionProtector(t.connectionProtector),null!=t.dht&&this.setDHT(t.dht),null!=t.pubsub&&this.setPubSub(t.pubsub)}isStarted(){return this.started}async beforeStart(){for(const t of Object.values(this).filter((t=>(0,s.qK)(t)))){const e=t;null!=e.beforeStart&&await e.beforeStart()}}async start(){for(const t of Object.values(this).filter((t=>(0,s.qK)(t)))){const e=t;await e.start()}this.started=!0}async afterStart(){for(const t of Object.values(this).filter((t=>(0,s.qK)(t)))){const e=t;null!=e.afterStart&&await e.afterStart()}}async beforeStop(){for(const t of Object.values(this).filter((t=>(0,s.qK)(t)))){const e=t;null!=e.beforeStop&&await e.beforeStop()}}async stop(){for(const t of Object.values(this).filter((t=>(0,s.qK)(t)))){const e=t;await e.stop()}this.started=!1}async afterStop(){for(const t of Object.values(this).filter((t=>(0,s.qK)(t)))){const e=t;null!=e.afterStop&&await e.afterStop()}}setPeerId(t){return this.peerId=t,t}getPeerId(){if(null==this.peerId)throw o(new Error("peerId not set"),"ERR_SERVICE_MISSING");return this.peerId}setMetrics(t){return this.metrics=t,x(t)&&t.init(this),t}getMetrics(){return this.metrics}setAddressManager(t){return this.addressManager=t,x(t)&&t.init(this),t}getAddressManager(){if(null==this.addressManager)throw o(new Error("addressManager not set"),"ERR_SERVICE_MISSING");return this.addressManager}setPeerStore(t){return this.peerStore=t,x(t)&&t.init(this),t}getPeerStore(){if(null==this.peerStore)throw o(new Error("peerStore not set"),"ERR_SERVICE_MISSING");return this.peerStore}setUpgrader(t){return this.upgrader=t,x(t)&&t.init(this),t}getUpgrader(){if(null==this.upgrader)throw o(new Error("upgrader not set"),"ERR_SERVICE_MISSING");return this.upgrader}setRegistrar(t){return this.registrar=t,x(t)&&t.init(this),t}getRegistrar(){if(null==this.registrar)throw o(new Error("registrar not set"),"ERR_SERVICE_MISSING");return this.registrar}setConnectionManager(t){return this.connectionManager=t,x(t)&&t.init(this),t}getConnectionManager(){if(null==this.connectionManager)throw o(new Error("connectionManager not set"),"ERR_SERVICE_MISSING");return this.connectionManager}setTransportManager(t){return this.transportManager=t,x(t)&&t.init(this),t}getTransportManager(){if(null==this.transportManager)throw o(new Error("transportManager not set"),"ERR_SERVICE_MISSING");return this.transportManager}setConnectionGater(t){return this.connectionGater=t,x(t)&&t.init(this),t}getConnectionGater(){if(null==this.connectionGater)throw o(new Error("connectionGater not set"),"ERR_SERVICE_MISSING");return this.connectionGater}setContentRouting(t){return this.contentRouting=t,x(t)&&t.init(this),t}getContentRouting(){if(null==this.contentRouting)throw o(new Error("contentRouting not set"),"ERR_SERVICE_MISSING");return this.contentRouting}setPeerRouting(t){return this.peerRouting=t,x(t)&&t.init(this),t}getPeerRouting(){if(null==this.peerRouting)throw o(new Error("peerRouting not set"),"ERR_SERVICE_MISSING");return this.peerRouting}setDatastore(t){return this.datastore=t,x(t)&&t.init(this),t}getDatastore(){if(null==this.datastore)throw o(new Error("datastore not set"),"ERR_SERVICE_MISSING");return this.datastore}setConnectionProtector(t){return this.connectionProtector=t,x(t)&&t.init(this),t}getConnectionProtector(){return this.connectionProtector}setDHT(t){return this.dht=t,x(t)&&t.init(this),t}getDHT(){if(null==this.dht)throw o(new Error("dht not set"),"ERR_SERVICE_MISSING");return this.dht}setPubSub(t){return this.pubsub=t,x(t)&&t.init(this),t}getPubSub(){if(null==this.pubsub)throw o(new Error("pubsub not set"),"ERR_SERVICE_MISSING");return this.pubsub}}const M=(0,i.kg)("libp2p:pubsub");class V extends s.vp{constructor(t){super(),this.components=new U;const{multicodecs:e=[],globalSignaturePolicy:r="StrictSign",canRelayMessage:n=!1,emitSelf:i=!1,messageProcessingConcurrency:s=10}=t;this.multicodecs=C(e),this.enabled=!1!==t.enabled,this.started=!1,this.topics=new Map,this.subscriptions=new Set,this.peers=new B.ji,this.globalSignaturePolicy="StrictNoSign"===r?"StrictNoSign":"StrictSign",this.canRelayMessage=n,this.emitSelf=i,this.topicValidators=new Map,this.queue=new c.Z({concurrency:s}),this._onIncomingStream=this._onIncomingStream.bind(this),this._onPeerConnected=this._onPeerConnected.bind(this),this._onPeerDisconnected=this._onPeerDisconnected.bind(this)}init(t){this.components=t}async start(){if(this.started||!this.enabled)return;M("starting"),await this.components.getRegistrar().handle(this.multicodecs,this._onIncomingStream);const t=d({onConnect:this._onPeerConnected,onDisconnect:this._onPeerDisconnected});this._registrarTopologyId=await this.components.getRegistrar().register(this.multicodecs,t),M("started"),this.started=!0}async stop(){if(this.started&&this.enabled){null!=this._registrarTopologyId&&this.components.getRegistrar().unregister(this._registrarTopologyId),await this.components.getRegistrar().unhandle(this.multicodecs),M("stopping");for(const t of this.peers.values())t.close();this.peers.clear(),this.subscriptions=new Set,this.started=!1,M("stopped")}}isStarted(){return this.started}_onIncomingStream(t){const{protocol:e,stream:r,connection:n}=t,i=n.remotePeer,s=this.addPeer(i,e),o=s.attachInboundStream(r);this.processMessages(i,o,s).catch((t=>M(t)))}_onPeerConnected(t,e){M("connected %p",t),Promise.resolve().then((async()=>{try{const{stream:r,protocol:n}=await e.newStream(this.multicodecs),i=this.addPeer(t,n);await i.attachOutboundStream(r)}catch(r){M.error(r)}this.send(t,{subscriptions:Array.from(this.subscriptions).map((t=>t.toString())),subscribe:!0})})).catch((t=>{M.error(t)}))}_onPeerDisconnected(t,e){const r=t.toString();M("connection ended",r),this._removePeer(t)}addPeer(t,e){const r=this.peers.get(t);if(null!=r)return r;M("new peer %p",t);const n=new w({id:t,protocol:e});return this.peers.set(t,n),n.addEventListener("close",(()=>this._removePeer(t)),{once:!0}),n}_removePeer(t){const e=this.peers.get(t);if(null!=e){e.close(),M("delete peer %p",t),this.peers.delete(t);for(const e of this.topics.values())e.delete(t);return e}}async processMessages(t,e,r){try{await(0,a.zG)(e,(async e=>{for await(const n of e){const e=this.decodeRpc(n),i=[];for(const r of e.messages??[])null!=r.from&&null!=r.data&&null!=r.topic?i.push({from:r.from,data:r.data,topic:r.topic,sequenceNumber:r.sequenceNumber??void 0,signature:r.signature??void 0,key:r.key??void 0}):M("message from %p was missing from, data or topic fields, dropping",t);this.processRpc(t,r,{subscriptions:(e.subscriptions??[]).map((t=>({subscribe:Boolean(t.subscribe),topic:t.topic??""}))),messages:i}).catch((t=>M(t)))}}))}catch(n){this._onPeerDisconnected(r.id,n)}}async processRpc(t,e,r){if(!this.acceptFrom(t))return M("received message from unacceptable peer %p",t),!1;M("rpc from %p",t);const{subscriptions:n,messages:i}=r;return null!=n&&n.length>0&&(M("subscription update from %p",t),n.forEach((e=>{this.processRpcSubOpt(t,e)})),super.dispatchEvent(new s.Aw("subscription-change",{detail:{peerId:e.id,subscriptions:n.map((({topic:t,subscribe:e})=>({topic:`${t??""}`,subscribe:Boolean(e)})))}}))),null!=i&&i.length>0&&(M("messages from %p",t),this.queue.addAll(i.map((e=>async()=>{if(null==e.topic||!this.subscriptions.has(e.topic)&&!this.canRelayMessage)return M("received message we didn't subscribe to. Dropping."),!1;try{const r=await A(e);await this.processMessage(t,r)}catch(r){M.error(r)}}))).catch((t=>M(t)))),!0}processRpcSubOpt(t,e){const r=e.topic;if(null==r)return;let n=this.topics.get(r);null==n&&(n=new B.fd,this.topics.set(r,n)),!0===e.subscribe?n.add(t):n.delete(t)}async processMessage(t,e){if(!this.components.getPeerId().equals(t)||this.emitSelf){try{await this.validate(e)}catch(r){return void M("Message is invalid, dropping it. %O",r)}if(this.subscriptions.has(e.topic)){const r=this.components.getPeerId().equals(t);r&&!this.emitSelf||super.dispatchEvent(new s.Aw("message",{detail:e}))}await this.publishMessage(t,e)}}getMsgId(t){const e=this.globalSignaturePolicy;switch(e){case"StrictSign":if(null==t.sequenceNumber)throw o(new Error("Need seqno when signature policy is StrictSign but it was missing"),f.ERR_MISSING_SEQNO);if(null==t.key)throw o(new Error("Need key when signature policy is StrictSign but it was missing"),f.ERR_MISSING_KEY);return R(t.key,t.sequenceNumber);case"StrictNoSign":return I(t.data);default:throw o(new Error("Cannot get message id: unhandled signature policy"),f.ERR_UNHANDLED_SIGNATURE_POLICY)}}acceptFrom(t){return!0}send(t,e){const{messages:r,subscriptions:n,subscribe:i}=e;return this.sendRpc(t,{subscriptions:(n??[]).map((t=>({topic:t,subscribe:Boolean(i)}))),messages:(r??[]).map(T)})}sendRpc(t,e){const r=this.peers.get(t);null!=r&&r.isWritable?r.write(this.encodeRpc(e)):M.error("Cannot send RPC to %p as there is no open stream to it available",t)}async validate(t){const e=this.globalSignaturePolicy;switch(e){case"StrictNoSign":if(null!=t.signature)throw o(new Error("StrictNoSigning: signature should not be present"),f.ERR_UNEXPECTED_SIGNATURE);if(null!=t.key)throw o(new Error("StrictNoSigning: key should not be present"),f.ERR_UNEXPECTED_KEY);if(null!=t.sequenceNumber)throw o(new Error("StrictNoSigning: seqno should not be present"),f.ERR_UNEXPECTED_SEQNO);break;case"StrictSign":if(null==t.signature)throw o(new Error("StrictSigning: Signing required and no signature was present"),f.ERR_MISSING_SIGNATURE);if(null==t.sequenceNumber)throw o(new Error("StrictSigning: Signing required and no seqno was present"),f.ERR_MISSING_SEQNO);if(!await D(t,this.encodeMessage.bind(this)))throw o(new Error("StrictSigning: Invalid message signature"),f.ERR_INVALID_SIGNATURE);break;default:throw o(new Error("Cannot validate message: unhandled signature policy"),f.ERR_UNHANDLED_SIGNATURE_POLICY)}const r=this.topicValidators.get(t.topic);null!=r&&await r(t.topic,t)}async buildMessage(t){const e=this.globalSignaturePolicy;switch(e){case"StrictSign":return t.sequenceNumber=_(),await L(this.components.getPeerId(),t,this.encodeMessage.bind(this));case"StrictNoSign":return await Promise.resolve(t);default:throw o(new Error("Cannot build message: unhandled signature policy"),f.ERR_UNHANDLED_SIGNATURE_POLICY)}}getSubscribers(t){if(!this.started)throw o(new Error("not started yet"),"ERR_NOT_STARTED_YET");if(null==t)throw o(new Error("topic is required"),"ERR_NOT_VALID_TOPIC");const e=this.topics.get(t.toString());return null==e?[]:Array.from(e.values())}async publish(t,e){if(!this.started)throw new Error("Pubsub has not started");const r={from:this.components.getPeerId(),topic:t,data:e??new Uint8Array(0)};M("publish topic: %s from: %p data: %m",t,r.from,r.data);const n=await this.buildMessage(r);let i=!1;this.emitSelf&&this.subscriptions.has(t)&&(i=!0,super.dispatchEvent(new s.Aw("message",{detail:n})),0===this.listenerCount(t)&&this.unsubscribe(t));const o=await this.publishMessage(this.components.getPeerId(),n);return i&&(o.recipients=[...o.recipients,this.components.getPeerId()]),o}subscribe(t){if(!this.started)throw new Error("Pubsub has not started");if(!this.subscriptions.has(t)){this.subscriptions.add(t);for(const e of this.peers.keys())this.send(e,{subscriptions:[t],subscribe:!0})}}unsubscribe(t){if(!this.started)throw new Error("Pubsub is not started");super.removeEventListener(t);const e=this.subscriptions.has(t),r=this.listenerCount(t);if(M("unsubscribe from %s - am subscribed %s, listeners %d",t,e,r),e&&0===r){this.subscriptions.delete(t);for(const e of this.peers.keys())this.send(e,{subscriptions:[t],subscribe:!1})}}getTopics(){if(!this.started)throw new Error("Pubsub is not started");return Array.from(this.subscriptions)}getPeers(){if(!this.started)throw new Error("Pubsub is not started");return Array.from(this.peers.keys())}}(0,i.kg)("libp2p:floodsub");const K="/floodsub/1.0.0";class F{constructor(t){this.lastPruneTime=0,this.entries=new Map,this.validityMs=t.validityMs}put(t,e){this.entries.set(t,{value:e,validUntilMs:Date.now()+this.validityMs}),this.prune()}prune(){const t=Date.now();if(!(t-this.lastPruneTime<200)){this.lastPruneTime=t;for(const[e,r]of this.entries.entries()){if(!(r.validUntilMs<t))break;this.entries.delete(e)}}}has(t){return this.entries.has(t)}get(t){const e=this.entries.get(t);return null!=e&&e.validUntilMs>=Date.now()?e.value:void 0}clear(){this.entries=new Map,this.lastPruneTime=0}}var j,q,H,G,z,$,W,Y=r(1860);(function(t){let e,r;(function(t){t.codec=()=>(0,Y.yw)({1:{name:"subscribe",codec:Y.Xg,optional:!0},2:{name:"topic",codec:Y.Z_,optional:!0}}),t.encode=e=>(0,Y.LE)(e,t.codec()),t.decode=e=>(0,Y.C6)(e,t.codec())})(e=t.SubOpts||(t.SubOpts={})),function(t){t.codec=()=>(0,Y.yw)({1:{name:"from",codec:Y.aI,optional:!0},2:{name:"data",codec:Y.aI,optional:!0},3:{name:"sequenceNumber",codec:Y.aI,optional:!0},4:{name:"topic",codec:Y.Z_,optional:!0},5:{name:"signature",codec:Y.aI,optional:!0},6:{name:"key",codec:Y.aI,optional:!0}}),t.encode=e=>(0,Y.LE)(e,t.codec()),t.decode=e=>(0,Y.C6)(e,t.codec())}(r=t.Message||(t.Message={})),t.codec=()=>(0,Y.yw)({1:{name:"subscriptions",codec:t.SubOpts.codec(),repeats:!0},2:{name:"messages",codec:t.Message.codec(),repeats:!0},3:{name:"control",codec:q.codec(),optional:!0}}),t.encode=e=>(0,Y.LE)(e,t.codec()),t.decode=e=>(0,Y.C6)(e,t.codec())})(j||(j={})),function(t){t.codec=()=>(0,Y.yw)({1:{name:"ihave",codec:H.codec(),repeats:!0},2:{name:"iwant",codec:G.codec(),repeats:!0},3:{name:"graft",codec:z.codec(),repeats:!0},4:{name:"prune",codec:$.codec(),repeats:!0}}),t.encode=e=>(0,Y.LE)(e,t.codec()),t.decode=e=>(0,Y.C6)(e,t.codec())}(q||(q={})),function(t){t.codec=()=>(0,Y.yw)({1:{name:"topic",codec:Y.Z_,optional:!0},2:{name:"messageIDs",codec:Y.aI,repeats:!0}}),t.encode=e=>(0,Y.LE)(e,t.codec()),t.decode=e=>(0,Y.C6)(e,t.codec())}(H||(H={})),function(t){t.codec=()=>(0,Y.yw)({1:{name:"messageIDs",codec:Y.aI,repeats:!0}}),t.encode=e=>(0,Y.LE)(e,t.codec()),t.decode=e=>(0,Y.C6)(e,t.codec())}(G||(G={})),function(t){t.codec=()=>(0,Y.yw)({1:{name:"topic",codec:Y.Z_,optional:!0}}),t.encode=e=>(0,Y.LE)(e,t.codec()),t.decode=e=>(0,Y.C6)(e,t.codec())}(z||(z={})),function(t){t.codec=()=>(0,Y.yw)({1:{name:"topic",codec:Y.Z_,optional:!0},2:{name:"peers",codec:W.codec(),repeats:!0},3:{name:"backoff",codec:Y.H9,optional:!0}}),t.encode=e=>(0,Y.LE)(e,t.codec()),t.decode=e=>(0,Y.C6)(e,t.codec())}($||($={})),function(t){t.codec=()=>(0,Y.yw)({1:{name:"peerID",codec:Y.aI,optional:!0},2:{name:"signedPeerRecord",codec:Y.aI,optional:!0}}),t.encode=e=>(0,Y.LE)(e,t.codec()),t.decode=e=>(0,Y.C6)(e,t.codec())}(W||(W={}));const Q=(0,i.kg)("libp2p:floodsub");class X extends V{constructor(t){super({...t,canRelayMessage:!0,multicodecs:[K]}),this.seenCache=new F({validityMs:t?.seenTTL??3e4})}decodeRpc(t){return j.decode(t)}encodeRpc(t){return j.encode(t)}decodeMessage(t){return j.Message.decode(t)}encodeMessage(t){return j.Message.encode(t)}async processMessage(t,e){const r=await super.getMsgId(e),i=(0,n.B)(r,"base64");this.seenCache.has(i)||(this.seenCache.put(i,!0),await super.processMessage(t,e))}async publishMessage(t,e){const r=this.getSubscribers(e.topic),n=[];return null==r||0===r.length?(Q("no peers are subscribed to topic %s",e.topic),{recipients:n}):(r.forEach((r=>{this.components.getPeerId().equals(r)?Q("not sending message on topic %s to myself",e.topic):r.equals(t)?Q("not sending message on topic %s to sender %p",e.topic,r):(Q("publish msgs on topics %s %p",e.topic,r),n.push(r),this.send(r,{messages:[e]}))})),{recipients:n})}}},1079:function(t,e,r){"use strict";r.d(e,{Aw:function(){return c},qK:function(){return s},vp:function(){return o}});r(1703);var n,i=function(t,e,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(t):n?n.value:e.get(t)};function s(t){return null!=t&&"function"===typeof t.start&&"function"===typeof t.stop}class o extends EventTarget{constructor(){super(...arguments),n.set(this,new Map)}listenerCount(t){const e=i(this,n,"f").get(t);return null==e?0:e.length}addEventListener(t,e,r){super.addEventListener(t,e,r);let s=i(this,n,"f").get(t);null==s&&(s=[],i(this,n,"f").set(t,s)),s.push({callback:e,once:(!0!==r&&!1!==r&&r?.once)??!1})}removeEventListener(t,e,r){super.removeEventListener(t,e,r);let s=i(this,n,"f").get(t);null!=s&&(s=s.filter((({callback:t})=>t!==e)),i(this,n,"f").set(t,s))}dispatchEvent(t){const e=super.dispatchEvent(t);let r=i(this,n,"f").get(t.type);return null==r||(r=r.filter((({once:t})=>!t)),i(this,n,"f").set(t.type,r)),e}}n=new WeakMap;class a extends Event{constructor(t,e){super(t,e),this.detail=e?.detail}}const c=globalThis.CustomEvent??a},1763:function(t,e,r){"use strict";r.d(e,{i:function(){return on}});var n={};r.r(n),r.d(n,{RsaPrivateKey:function(){return Ft},RsaPublicKey:function(){return Kt},fromJwk:function(){return Ht},generateKeyPair:function(){return Gt},unmarshalRsaPrivateKey:function(){return jt},unmarshalRsaPublicKey:function(){return qt}});var i={};r.r(i),r.d(i,{Ed25519PrivateKey:function(){return ie},Ed25519PublicKey:function(){return ne},generateKeyPair:function(){return ae},generateKeyPairFromSeed:function(){return ce},unmarshalEd25519PrivateKey:function(){return se},unmarshalEd25519PublicKey:function(){return oe}});var s={};r.r(s),r.d(s,{Secp256k1PrivateKey:function(){return ve},Secp256k1PublicKey:function(){return we},generateKeyPair:function(){return Se},unmarshalSecp256k1PrivateKey:function(){return Ee},unmarshalSecp256k1PublicKey:function(){return be}});r(1703);var o,a=r(6657),c=r(1919),u=r(4676),l=(r(8675),r(3462),r(1860));function h(t){const e=t.getUTCFullYear(),r=String(t.getUTCMonth()+1).padStart(2,"0"),n=String(t.getUTCDate()).padStart(2,"0"),i=String(t.getUTCHours()).padStart(2,"0"),s=String(t.getUTCMinutes()).padStart(2,"0"),o=String(t.getUTCSeconds()).padStart(2,"0"),a=t.getUTCMilliseconds(),c=String(1e3*a*1e3).padStart(9,"0");return`${e}-${r}-${n}T${i}:${s}:${o}.${c}Z`}function d(t){const e=new RegExp("(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2})\\.(\\d+)Z"),r=String(t).trim().match(e);if(null==r)throw new Error("Invalid format");const n=parseInt(r[1],10),i=parseInt(r[2],10)-1,s=parseInt(r[3],10),o=parseInt(r[4],10),a=parseInt(r[5],10),c=parseInt(r[6],10),u=parseInt(r[7].slice(0,-6),10);return new Date(Date.UTC(n,i,s,o,a,c,u))}(function(t){t.codec=()=>(0,l.yw)({1:{name:"key",codec:l.aI},2:{name:"value",codec:l.aI},5:{name:"timeReceived",codec:l.Z_}}),t.encode=e=>(0,l.LE)(e,t.codec()),t.decode=e=>(0,l.C6)(e,t.codec())})(o||(o={}));class f{constructor(t,e,r){if(!(t instanceof Uint8Array))throw new Error("key must be a Uint8Array");if(!(e instanceof Uint8Array))throw new Error("value must be a Uint8Array");this.key=t,this.value=e,this.timeReceived=r}serialize(){return o.encode(this.prepareSerialize())}prepareSerialize(){return{key:this.key,value:this.value,timeReceived:h(this.timeReceived)}}static deserialize(t){const e=o.decode(t);return new f(e.key,e.value,new Date(e.timeReceived))}static fromDeserialized(t){const e=d(t.timeReceived);if(null==t.key)throw new Error("key missing from deserialized object");if(null==t.value)throw new Error("value missing from deserialized object");const r=new f(t.key,t.value,e);return r}}var p=r(2259),g=r(6523),y=r(5489),m=r(2645),w=r(9412);const v=1e3,E=60*v,b=60*E,S=36*b,_="/lan",R="/ipfs",I="/kad/1.0.0",C="/dht/record",A="/dht/provider",T=256,k=24*b,P=b,N=20,L=3,D=Number(5*E),O=Number(30*v),B=Number(5*E),x=Number(30*v),U=Number(30*v),M=(0,p.m)("/pk/");function V(t){return{...t,multiaddrs:t.multiaddrs.filter((t=>{const[[e,r]]=t.stringTuples();return(4===e||6===e)&&(null!=r&&!m(r))}))}}function K(t){return{...t,multiaddrs:t.multiaddrs.filter((t=>{const[[e,r]]=t.stringTuples();return(4===e||6===e)&&(null!=r&&m(r))}))}}async function F(t){const e=await c.sha256.digest(t);return e.digest}async function j(t){return await F(t.toBytes())}function q(t){return new u.s(`${C}/${(0,g.B)(t,"base32")}`,!1)}function H(t){return(0,y.z)([M,t.toBytes()])}function G(t){return"/pk/"===(0,g.B)(t.slice(0,4))}function z(t){return(0,w.cv)(t.slice(4))}function $(t,e){const r=new Date,n=new f(t,e,r);return n.serialize()}var W=r(1305),Y=r(2856),Q=r(2656),X=r(9998);function J(t){return null!=t&&"function"===typeof t.start&&"function"===typeof t.stop}function Z(t){return null!=t&&"function"===typeof t.init}class tt{constructor(t={}){this.started=!1,null!=t.peerId&&this.setPeerId(t.peerId),null!=t.addressManager&&this.setAddressManager(t.addressManager),null!=t.peerStore&&this.setPeerStore(t.peerStore),null!=t.upgrader&&this.setUpgrader(t.upgrader),null!=t.metrics&&this.setMetrics(t.metrics),null!=t.registrar&&this.setRegistrar(t.registrar),null!=t.connectionManager&&this.setConnectionManager(t.connectionManager),null!=t.transportManager&&this.setTransportManager(t.transportManager),null!=t.connectionGater&&this.setConnectionGater(t.connectionGater),null!=t.contentRouting&&this.setContentRouting(t.contentRouting),null!=t.peerRouting&&this.setPeerRouting(t.peerRouting),null!=t.datastore&&this.setDatastore(t.datastore),null!=t.connectionProtector&&this.setConnectionProtector(t.connectionProtector),null!=t.dht&&this.setDHT(t.dht),null!=t.pubsub&&this.setPubSub(t.pubsub)}isStarted(){return this.started}async beforeStart(){await Promise.all(Object.values(this).filter((t=>J(t))).map((async t=>{null!=t.beforeStart&&await t.beforeStart()})))}async start(){await Promise.all(Object.values(this).filter((t=>J(t))).map((async t=>{await t.start()}))),this.started=!0}async afterStart(){await Promise.all(Object.values(this).filter((t=>J(t))).map((async t=>{null!=t.afterStart&&await t.afterStart()})))}async beforeStop(){await Promise.all(Object.values(this).filter((t=>J(t))).map((async t=>{null!=t.beforeStop&&await t.beforeStop()})))}async stop(){await Promise.all(Object.values(this).filter((t=>J(t))).map((async t=>{await t.stop()}))),this.started=!1}async afterStop(){await Promise.all(Object.values(this).filter((t=>J(t))).map((async t=>{null!=t.afterStop&&await t.afterStop()})))}setPeerId(t){return this.peerId=t,t}getPeerId(){if(null==this.peerId)throw X(new Error("peerId not set"),"ERR_SERVICE_MISSING");return this.peerId}setMetrics(t){return this.metrics=t,Z(t)&&t.init(this),t}getMetrics(){return this.metrics}setAddressManager(t){return this.addressManager=t,Z(t)&&t.init(this),t}getAddressManager(){if(null==this.addressManager)throw X(new Error("addressManager not set"),"ERR_SERVICE_MISSING");return this.addressManager}setPeerStore(t){return this.peerStore=t,Z(t)&&t.init(this),t}getPeerStore(){if(null==this.peerStore)throw X(new Error("peerStore not set"),"ERR_SERVICE_MISSING");return this.peerStore}setUpgrader(t){return this.upgrader=t,Z(t)&&t.init(this),t}getUpgrader(){if(null==this.upgrader)throw X(new Error("upgrader not set"),"ERR_SERVICE_MISSING");return this.upgrader}setRegistrar(t){return this.registrar=t,Z(t)&&t.init(this),t}getRegistrar(){if(null==this.registrar)throw X(new Error("registrar not set"),"ERR_SERVICE_MISSING");return this.registrar}setConnectionManager(t){return this.connectionManager=t,Z(t)&&t.init(this),t}getConnectionManager(){if(null==this.connectionManager)throw X(new Error("connectionManager not set"),"ERR_SERVICE_MISSING");return this.connectionManager}setTransportManager(t){return this.transportManager=t,Z(t)&&t.init(this),t}getTransportManager(){if(null==this.transportManager)throw X(new Error("transportManager not set"),"ERR_SERVICE_MISSING");return this.transportManager}setConnectionGater(t){return this.connectionGater=t,Z(t)&&t.init(this),t}getConnectionGater(){if(null==this.connectionGater)throw X(new Error("connectionGater not set"),"ERR_SERVICE_MISSING");return this.connectionGater}setContentRouting(t){return this.contentRouting=t,Z(t)&&t.init(this),t}getContentRouting(){if(null==this.contentRouting)throw X(new Error("contentRouting not set"),"ERR_SERVICE_MISSING");return this.contentRouting}setPeerRouting(t){return this.peerRouting=t,Z(t)&&t.init(this),t}getPeerRouting(){if(null==this.peerRouting)throw X(new Error("peerRouting not set"),"ERR_SERVICE_MISSING");return this.peerRouting}setDatastore(t){return this.datastore=t,Z(t)&&t.init(this),t}getDatastore(){if(null==this.datastore)throw X(new Error("datastore not set"),"ERR_SERVICE_MISSING");return this.datastore}setConnectionProtector(t){return this.connectionProtector=t,Z(t)&&t.init(this),t}getConnectionProtector(){return this.connectionProtector}setDHT(t){return this.dht=t,Z(t)&&t.init(this),t}getDHT(){if(null==this.dht)throw X(new Error("dht not set"),"ERR_SERVICE_MISSING");return this.dht}setPubSub(t){return this.pubsub=t,Z(t)&&t.init(this),t}getPubSub(){if(null==this.pubsub)throw X(new Error("pubsub not set"),"ERR_SERVICE_MISSING");return this.pubsub}}const et="routing-table-size",rt="ping-queue-size",nt="ping-running";class it{constructor(t){this.components=new tt;const{kBucketSize:e,pingTimeout:r,lan:n,pingConcurrency:i,protocol:s}=t;this.log=(0,Q.kg)(`libp2p:kad-dht:${n?"lan":"wan"}:routing-table`),this.kBucketSize=e??20,this.pingTimeout=r??1e4,this.pingConcurrency=i??10,this.lan=n,this.running=!1,this.protocol=s;const o=()=>{this.components.getMetrics()?.updateComponentMetric({system:"libp2p",component:"kad-dht-"+(this.lan?"lan":"wan"),metric:rt,value:this.pingQueue.size}),this.components.getMetrics()?.updateComponentMetric({system:"libp2p",component:"kad-dht-"+(this.lan?"lan":"wan"),metric:nt,value:this.pingQueue.pending})};this.pingQueue=new W.Z({concurrency:this.pingConcurrency}),this.pingQueue.addListener("add",o),this.pingQueue.addListener("next",o),this._onPing=this._onPing.bind(this)}init(t){this.components=t}isStarted(){return this.running}async start(){this.running=!0;const t=new a({localNodeId:await j(this.components.getPeerId()),numberOfNodesPerKBucket:this.kBucketSize,numberOfNodesToPing:1});t.on("ping",this._onPing),this.kb=t}async stop(){this.running=!1,this.pingQueue.clear(),this.kb=void 0}_onPing(t,e){this.pingQueue.add((async()=>{if(!this.running)return;let r=0;try{await Promise.all(t.map((async t=>{let e;try{e=new Y.TimeoutController(this.pingTimeout);const n={signal:e.signal};this.log("pinging old contact %p",t.peer);const i=await this.components.getConnectionManager().openConnection(t.peer,n),{stream:s}=await i.newStream(this.protocol,n);s.close(),r++}catch(n){this.running&&null!=this.kb&&(this.log.error("could not ping peer %p",t.peer,n),this.log("evicting old contact after ping failed %p",t),this.kb.remove(t.id))}finally{null!=e&&e.clear(),this.components.getMetrics()?.updateComponentMetric({system:"libp2p",component:"kad-dht-"+(this.lan?"lan":"wan"),metric:et,value:this.size})}}))),this.running&&r<t.length&&null!=this.kb&&(this.log("adding new contact %p",e.peer),this.kb.add(e))}catch(n){this.log.error("could not process k-bucket ping event",n)}})).catch((t=>{this.log.error("could not process k-bucket ping event",t)}))}get size(){return null==this.kb?0:this.kb.count()}async find(t){const e=await j(t),r=this.closestPeer(e);if(null!=r&&t.equals(r))return r}closestPeer(t){const e=this.closestPeers(t,1);if(e.length>0)return e[0]}closestPeers(t,e=this.kBucketSize){if(null==this.kb)return[];const r=this.kb.closest(t,e);return r.map((t=>t.peer))}async add(t){if(null==this.kb)throw new Error("RoutingTable is not started");const e=await j(t);this.kb.add({id:e,peer:t}),this.log("added %p with kad id %b",t,e),this.components.getMetrics()?.updateComponentMetric({system:"libp2p",component:"kad-dht-"+(this.lan?"lan":"wan"),metric:et,value:this.size})}async remove(t){if(null==this.kb)throw new Error("RoutingTable is not started");const e=await j(t);this.kb.remove(e),this.components.getMetrics()?.updateComponentMetric({system:"libp2p",component:"kad-dht-"+(this.lan?"lan":"wan"),metric:et,value:this.size})}}var st=r(9082),ot=[77591,22417,43971,28421,740,29829,71467,228973,196661,78537,27689,36431,44415,14362,19456,106025,96308,2882,49509,21149,87173,131409,75844,23676,121838,30291,17492,2953,7564,110620,129477,127283,53113,72417,165166,109690,21200,102125,24049,71504,90342,25307,72039,26812,26715,32264,133800,71161,88956,171987,51779,24425,16671,30251,186294,247761,14202,2121,8465,35024,4876,85917,169730,3638,256836,96184,943,18678,6583,52907,35807,112254,214097,18796,11595,9243,23554,887,268203,382004,24590,111335,11625,16619,29039,102425,69006,97976,92362,32552,63717,41433,128974,137630,59943,10019,13986,35430,33665,108037,43799,43280,38195,29078,58629,18265,14425,46832,235538,40830,77881,110717,58937,3463,325358,51300,47623,117252,19007,10170,20540,91237,294813,4951,79841,56232,36270,128547,69209,66275,100156,32063,73531,34439,80937,28892,44466,88595,216307,32583,49620,16605,82127,45807,21630,78726,20235,40163,111007,96926,5567,72083,21665,58844,39419,179767,48328,42662,51550,5251,37811,49608,81056,50854,55513,20922,18891,197409,164656,32593,71449,220474,58919,85682,67854,13758,35066,3565,61905,214793,119572,141419,21504,10302,27354,67003,46131,32668,15165,64871,34450,17821,2757,11452,34189,5160,12257,85523,560,53385,65887,119549,135620,312353,115979,122356,10867,193231,124537,54783,90675,120791,4715,142253,50943,17271,43358,25331,4917,120566,34580,12878,33786,160528,32523,4869,301307,104817,81491,23276,8832,97911,31265,52065,7998,49622,9715,43998,34091,84587,20664,69041,29419,53205,10838,58288,116145,6185,5154,141795,35924,21307,144738,43730,12085,8279,10002,119,133779,199668,72938,31768,39176,67875,38453,9700,44144,4121,116048,41733,12868,82669,92308,128,34262,11332,7712,90764,36141,13553,71312,77470,117314,96549,49135,23602,54468,28605,6327,62308,17171,67531,21319,14105,894,107722,46157,8503,51069,100472,45138,15246,14577,35609,191464,1757,13364,161349,32067,91705,81144,52339,5408,91066,21983,14157,100545,4372,26630,129112,1423,29676,213626,4397,88436,99190,6877,49958,26122,114348,60661,29818,293118,50042,179738,16400,163423,89627,31040,43973,36638,45952,5153,1894,109322,1898,134021,12402,112077,68309,190269,69866,31938,107383,11522,105232,11248,14868,39852,71707,186525,16530,38162,106212,11700,5130,16608,26998,59586,108399,230033,43683,48135,82179,2073,5015,196684,189293,16378,23452,8301,35640,11632,214551,29240,57644,33137,91949,55157,52384,117313,5090,17717,89668,49363,82238,241035,66216,29066,184088,97206,62820,26595,4241,135635,173672,8202,459,71355,146294,29587,3008,135385,141203,14803,6634,45094,69362,50925,546,51884,62011,83296,234584,44515,56050,89476,87751,19373,12691,149923,19794,13833,35846,87557,58339,2884,19145,25647,12224,11024,77338,64608,122297,53025,7205,36189,36294,170779,21750,7739,173883,75192,35664,224240,113121,30181,26267,27036,117827,92015,106516,55628,203549,67949,60462,60844,35911,20457,1820,920,19773,8738,73173,181993,38521,98254,76257,46008,92796,5384,26868,151566,22124,2411,15919,186872,180021,28099,152961,78811,80237,62352,102653,74259,184890,16792,123702,224945,29940,19512,75283,14059,112691,92811,233329,20411,138569,53341,109802,50600,134528,66747,5529,166531,31578,64732,67189,1596,126357,967,167999,206598,109752,119431,207825,78791,91938,10301,27311,24233,252343,28831,32812,66002,112267,90895,8786,8095,16824,22866,21813,60507,174833,19549,130985,117051,52110,6938,81923,123864,38061,919,18680,53534,46739,112893,161529,85429,26761,11900,81121,91968,15390,217947,56524,1713,6654,37089,85630,138866,61850,16491,75577,16884,98296,73523,6140,44645,6062,36366,29844,57946,37932,42472,5266,20834,19309,33753,127182,134259,35810,41805,45878,312001,14881,47757,49251,120050,44252,3708,25856,107864,120347,1228,36550,41682,34496,47025,8393,173365,246526,12894,161607,35670,90785,126572,2095,124731,157033,58694,554,12786,9642,4817,16136,47864,174698,66992,4639,69284,10625,40710,27763,51738,30404,264105,137904,109882,52487,42824,57514,2740,10479,146799,107390,16586,88038,174951,9410,16185,44158,5568,40658,46108,12763,97385,26175,108859,664,230732,67470,46663,14395,50750,141320,93140,15361,47997,55784,6791,307840,118569,107326,18056,58281,260415,54691,8790,73332,45633,7511,45674,143373,14031,11799,94491,35646,96544,14560,26049,32983,25791,83814,42094,231370,63955,139212,2359,169908,3108,183486,105867,28197,32941,124968,26402,88267,149768,23053,3078,19091,52924,25383,19209,111548,97361,3959,24880,235061,9099,24921,161254,151405,20508,7159,34381,20133,11434,74036,19974,34769,36585,1076,22454,17354,38727,235160,111547,96454,117448,156940,91330,37299,7310,26915,117060,51369,22620,61861,322264,106850,111694,15091,2624,40345,300446,177064,1707,27389,54792,327783,132669,183543,59003,17744,20603,151134,106923,53084,71803,279424,319816,11579,21946,16728,38274,72711,5085,83391,88646,40159,25027,34680,10752,12988,54126,30365,18338,100445,230674,44874,84974,143877,123253,139372,28082,91477,144002,13096,219729,46016,50029,42377,14601,6660,58244,58978,23918,88206,113611,64452,17541,41032,10942,12021,49189,10978,40175,37156,10947,71709,106894,112538,57007,137486,150608,152719,40615,7746,279716,13101,19524,28708,40578,72320,1096,182051,94527,51275,22833,45164,81917,77519,48508,5421,140302,37845,149830,5587,27579,5357,428725,248187,6326,206760,39814,32585,89923,44341,288753,284443,96368,31201,94189,119504,20359,52073,103216,179,27934,32801,96035,34111,34309,101326,18198,20704,210266,37643,27880,141873,106e3,19414,56614,167714,66483,107885,86602,4379,20796,75467,4987,5017,118857,26003,34308,114428,29198,6686,29697,73632,3739,69795,16798,41504,7207,30722,21436,36735,28067,28545,3239,11221,36031,41889,100010,19247,317673,29495,174554,6424,129725,53845,94986,7955,59676,2604,191497,19735,102214,62954,23844,11872,179525,261436,34492,428,78404,142035,16747,17246,27578,37021,33672,57944,26056,135760,2369,61674,122066,31327,19374,157065,40553,130982,69619,71290,38855,72100,92903,95940,51422,165999,65713,57873,50726,7288,20272,2081,42326,22624,81120,57914,79352,19447,1684,72302,11774,302559,161481,96396,13692,414988,3721,79066,56627,46883,21150,11747,12184,5856,113458,176117,84416,52079,27933,3354,59765,141359,2212,216309,2555,23458,196722,142463,45701,44548,28798,19418,215,29916,9396,10574,114226,84475,13520,18694,34056,4524,90302,62930,13539,19407,77209,7728,38088,9535,2263,23875,183945,17750,26274,67172,10585,28042,22199,7478,51331,66030,26774,192929,31434,25850,50197,52926,178158,4679,181256,70184,229600,9959,105594,72158,73974,2726,35085,78087,23284,35568,51713,155676,5401,27254,11966,17569,223253,71993,103357,111477,55722,30504,26034,46774,35392,36285,214814,41143,163465,1051,16094,81044,6636,76489,179102,20712,39178,35683,125177,54219,30617,52994,25324,50123,2543,87529,58995,10688,125199,12388,60158,125481,131646,7642,133350,65874,3438,97277,101450,10075,56344,116821,50778,60547,98016,106135,13859,14255,16300,77373,173521,8285,45932,37426,4054,114295,55947,7703,39114,52,51119,128135,19714,60715,9554,50492,88180,2823,118271,52993,122625,97919,23859,37895,25040,33614,32102,20431,3577,9275,15686,43031,157741,110358,1884,40291,125391,13736,5008,64881,87336,77381,70711,43032,49155,118587,70494,4318,10168,30126,12580,10524,280104,104001,145413,2862,84140,6603,106005,13566,12780,11251,42830,571,179910,82443,13146,469,42714,32591,265217,424024,92553,54721,134100,6007,15242,114681,59030,16718,85465,200214,85982,55174,165013,23493,56964,82529,109150,32706,27568,82442,5350,14976,13165,44890,60021,21343,33978,17264,4655,22328,27819,75730,16567,55483,14510,17926,45827,150609,3704,7385,272531,161543,76904,122163,52405,2039,19165,41623,14423,228354,3369,176360,85491,7122,35789,303724,4465,13628,2233,55311,118771,20713,10006,221519,45115,71021,35650,29775,7337,10864,20665,21142,1746,15080,1624,32449,10905,105743,229797,7701,3940,22997,178467,57208,389057,39683,59403,63344,63125,54847,69691,18336,56448,3362,37202,18282,29648,138224,35867,10495,5911,28814,26653,31514,176702,26550,45621,11734,4525,40543,73944,121080,27858,155561,14887,44670,30742,8796,107455,113472,56369,75581,183777,240095,133699,153299,8768,160464,26058,49078,103971,21875,71486,44888,17156,9678,89541,123019,102337,3972,83930,21245,87852,109660,287918,183019,686,10100,39177,283941,11274,24736,26793,26214,25995,77011,141580,4070,23742,46285,46632,30700,26669,19056,35951,115575,174034,56097,35463,87425,24575,44245,38701,82317,85922,281616,100333,147697,61503,7730,84330,8530,59917,61597,17173,9092,32658,90288,193136,39023,20381,56654,31132,7779,1919,1375,117128,30819,11169,40938,23935,115201,101155,151034,4835,11231,74550,89388,59951,91704,107312,167882,115062,12732,72738,88703,464019,158267,57995,60496,737,14371,123867,4174,243339,159946,7568,16025,134556,110916,38103,191,80226,88794,29688,27230,10454,76308,57647,77409,113483,66864,14745,19808,12023,46583,84805,16015,17102,2231,20611,3547,95740,250131,34559,108894,8498,15853,159169,148920,20942,2813,93160,45188,210613,45531,52587,149062,39782,28194,57849,60965,84954,89766,84453,100927,16501,27658,165311,103841,54192,207341,19558,20084,319622,5672,205467,98462,61849,36279,13609,147177,24726,165015,209489,59591,31157,6551,117580,75060,141146,277310,21072,22023,106474,63041,137443,122965,68371,5383,42146,98961,113467,30863,23794,4843,99630,30392,82679,13699,241612,33601,93146,24319,18643,32155,95669,40440,15333,34089,67799,142144,58245,38633,114531,117400,77861,188726,5507,2568,8853,10987,107222,2663,2421,11530,13345,30075,41785,118661,104786,17459,12490,16281,71936,193555,17431,5944,71758,26485,77317,20803,367167,158,7362,93430,11735,172445,46002,11532,54482,930,62911,2235,23004,179236,4764,101859,208113,22477,55163,95579,14098,67320,162556,90709,156949,3826,57492,4025,34092,87442,104565,6718,186015,28214,14209,10039,107186,233912,58877,81637,55265,39828,6194,145813,50831,105849,4974,88319,122296,10272,197216,95714,51540,72418,23324,91555,8743,140452,250249,51666,34124,7229,38592,129641,78169,174242,22464,149964,51450,14034,10026,95376,26190,120062,14401,8700,265,31386,143573,7203,229889,61567,4227,140981,2466,72052,10787,10062,30958,6099,38471,30103,23202,208101,70847,467,58934,32271,32984,36637,24107,30771,17109,73353,13650,2098,157040,67366,66904,106018,265380,107238,18535,44025,32681,144983,62505,91295,56120,3082,77508,10322,63023,36700,81885,224127,16721,45023,239261,111272,13852,7866,149243,204199,32309,22084,42029,38316,126644,104973,14406,43454,67322,61310,15789,40285,24026,181047,6301,70927,23319,115823,27248,66693,115875,278566,63007,146844,56841,59007,87368,180001,22370,42114,80605,12022,10374,308,25079,14689,12618,63368,7936,264973,212291,136713,95999,105801,18965,32075,48700,52230,35119,96912,32992,8586,16606,101333,101812,14969,39930,759,193090,27387,42914,12937,5058,62646,64528,38624,25743,37502,3716,4435,30352,178687,26461,132611,42002,138442,35833,59582,16345,8048,60319,49349,309,47800,49739,90482,26405,34470,63786,32479,85028,39866,47846,11649,23934,29466,2816,42864,31828,7410,74885,49632,47629,111801,90749,19536,18767,105764,59606,21223,10746,76298,22220,39408,7190,79654,64856,11602,82156,272765,17079,70089,245473,51813,184407,384678,1576,122249,5064,27481,6188,25790,74361,27541,318284,45430,31488,620,93579,45723,192118,22670,51913,4162,70244,35966,26397,16199,50899,209613,121702,287507,2993,36101,132229,67345,33062,76295,118628,78705,52316,34375,107083,107454,44863,127561,33964,3073,154010,190914,55967,39074,6272,31047,5550,41123,26154,98638,47110,19998,148091,50229,31329,59900,195442,19106,61347,73497,70015,682,45850,25776,38022,148951,6288,37411,232526,109277,27286,32342,9262,5220,16651,23175,46740,129438,78614,121925,66914,88710,127952,5563,21500,34521,10739,14863,191006,62956,17359,16749,67027,56284,69134,43301,35039,58883,54466,60823,404451,75743,59856,86979,7923,34273,83785,32142,7693,268986,197428,282681,17049,22346,22990,92245,107180,3357,37104,96724,49153,7683,31197,43267,82231,164276,23696,20848,188364,22309,24821,158707,1018,22514,70922,27792,45589,59709,10765,736,35218,63479,51987,24275,63588,55361,92929,81964,4658,20122,12330,44058,13065,311456,72224,8337,211229,38979,22590,138478,52757,32595,133600,8838,31549,94412,43391,90056,1585,94802,127271,6223,31889,137038,132910,2165,57616,230152,6080,10748,36737,74579,134062,50525,180532,119270,34556,76155,82394,52595,29258,31435,87820,67996,26943,183878,38007,2410,13526,180297,69856,3503,187396,167700,7838,16701,9199,56267,3661,37407,65994,23767,5708,62508,221700,67088,86978,46776,84434,32088,5612,9149,88244,21685,95151,46750,189612,2979,506311,2594,3628,40074,105039,78243,28523,6651,38058,71999,30992,12764,68261,108991,6165,26450,61961,13400,22426,7490,60890,109623,2070,12958,50355,67979,257096,7213,42578,52121,35716,65461,7516,124758,39268,302,64712,14977,1467,219452,2840,34229,11121,21602,19270,63574,8024,1532,17331,79839,78885,52029,180767,57957,6069,91265,61380,55767,8927,32881,287603,22149,35029,68876,6428,199567,46926,13412,104132,21434,366616,45060,110046,81924,128910,45886,52821,130416,29416,77342,21762,67329,121432,79924,11724,38625,81006,102033,28338,13326,3250,82056,82526,38212,21112,12382,111495,3263,7414,86274,93490,40844,30224,45212,24019,48411,71367,24941,76729,57776,3769,38114,202019,197745,31953,237533,33270,201580,255648,100798,44741,32241,98468,106931,10085,15090,170358,33154,66787,18819,69760,25061,234005,82660,6295,131975,16874,9076,4094,25005,17740,40908,19533,220019,44330,99792,50040,19619,13950,55228,24423,31253,95308,103177,184795,28590,82285,5059,3210,75525,49894,70007,56178,10580,36051,139681,21617,98736,3555,106306,164189,37352,63915,47824,24883,145530,61904,28444,11483,19837,145446,30420,112972,85939,11835,191233,2262,20705,58630,1753,148334,1197,144714,6887,11223,107667,60879,77914,4151,57417,81594,96681,169430,1784,20444,95138,254041,27038,596,7117,72808,13759,3353,126776,21074,55322,27081,36942,39547,139830,179275,4453,713,8722,71399,19204,25785,22794,23923,104114,11291,25458,102309,88396,75288,230440,206396,104551,58447,130857,37247,94734,31548,176529,226077,65159,20104,10096,66881,94191,237909,27109,37404,1520,27421,25220,113003,23423,24884,50585,6286,231877,150800,11789,3226,90004,60642,5053,202400,61442,132531,175329,57138,30116,103847,9973,75367,16452,32360,59119,21246,10191,164804,23305,61051,37348,154530,13214,5468,50403,66754,130976,50559,80515,14436,155492,84017,5472,43107,41240,2890,90431,70188,382,76234,48040,50211,281038,237007,32115,142178,1536,22761,96429,1811,31243,1679,49143,55209,17402,235054,61494,7462,77030,34925,87609,78002,9499,9027,73289,201078,101379,63544,27666,5469,10642,30029,49816,132979,95620,58086,351930,116300,2110,2043,30845,6154,11279,16727,4122,2277,27281,4971,3650,39060,61970,65951,39674,75686,38151,11370,130809,177895,32665,63725,122267,7857,39618,118483,44792,157755,178624,136994,24260,41308,22471,12404,21707,12486,30473,52781,50246,20247,39065,909,56825,103158,128603,31542,1089,41935,32744,12428,37963,84420,33134,72921,208449,42622,168151,127335,147107,46699,38216,12591,94342,85814,31423,24944,2605,87542,67473,192551,4496,56321,91819,17630,6300,256183,114569,202090,33209,35289,34897,24967,40520,43470,5344,10199,34810,14283,10381,10017,62923,49924,23233,64539,13051,35686,19698,11570,135555,120868,44924,87065,52318,52335,47586,140906,245885,109834,78668,9065,46990,25258,72022,61243,40838,4545,146387,10537,11557,17470,36930,68104,46711,24264,79401,81043,18225,120488,24746,84338,81652,28266,13776,21878,46973,1047,230465,73357,95777,24973,210160,62210,58404,110633,169651,6937,41870,9909,26822,191062,76553,27519,96256,239070,2478,205678,67955,58532,20601,50120,19148,78501,195724,110740,8249,109665,27446,30568,57631,31425,49752,32820,65504,50079,3663,102256,219898,23849,211315,14645,4359,91767,9528,12449,49366,7941,49763,107848,8930,27086,50686,9744,10447,81935,39513,46514,1670,29229,6172,22312,137280,97759,9806,14445,22976,56458,73391,34983,93760,174219,52573,33149,59747,2429,136277,75123,165263,91040,7446,57632,48633,97140,246081,84766,151684,79918,93268,120346,54059,54875,77858,32996,103590,45276,11968,19600,25849,17159,132907,42828,16817,4913,99462,103303,27395,5737,74184,20749,21160,14377,77062,131403,158735,10999,27799,77785,9320,34366,51593,61070,33746,47048,29268,36675,30262,53297,9832,82e3,20188,122292,39917,7331,18160,68301,185935,134830,15031,4935,10004,165845,185534,46923,30109,44134,122631,18874,22903,112790,26561,18549,348902,82871,140345,255565,135390,63556,103747,145055,179600,145662,296111,61661,211987,23952,52342,126343,48450,32919,44277,82185,9591,62139,205363,376969,394874,108461,18040,120885,14798,39863,16571,16794,58271,81025,55206,14640,118656,6361,44092,85970,6262,153863,108244,180200,72264,79947,38044,10050,5735,61221,80712,5471,115689,11391,11661,184257,20010,60116,30320,19327,134598,45455,27542,18004,125092,452272,1549,91523,46567,180063,156026,2608,11174,58848,37788,65907,80194,30490,5786,40775,119519,106241,11323,156297,8425,61495,2617,29675,2425,59886,112582,49142,59618,4863,50597,86710,50650,168632,27693,85641,83643,18993,25768,84284,28090,93592,36627,312804,43381,9887,9402,100931,97165,3311,173330,66805,28935,4963,184460,3201,78102,19126,21607,37496,24938,22615,16153,32862,134792,153318,61120,6067,2812,12826,12792,23825,37559,64662,202250,102694,155488,85881,149193,46233,65383,15521,106982,11358,176786,25752,39717,34208,24510,32464,77742,39371,72028,138229,60688,71386,102834,132477,2208,11548,63670,271279,28351,30338,38620,32491,99845,143885,152266,13252,2825,178663,108097,1775,78201,14897,113573,163346,62292,171129,22183,96598,38733,64971,166776,117445,9968,146393,44677,74867,20908,97328,12761,25656,26785,9148,112344,26115,99176,110121,22437,49547,6180,79320,5835,31392,43328,33377,75870,119860,69497,80273,7325,155219,43167,111173,28347,20222,3763,71752,55041,47252,14618,28088,15012,97805,194698,54636,2036,41349,6173,96604,61530,51859,43782,13361,24334,22668,24792,7070,23441,16789,3209,36211,208475,26242,32880,122181,182407,21444,31060,88459,29929,77907,12716,10934,97005,20599,31690,8403,58445,30303,22700,10336,86731,103115,337709,72556,46788,112566,47684,67089,53548,36874,56487,41387,125985,26893,40071,106683,73712,18787,40105,72992,67246,137276,50802,36790,70328,138827,22466,39263,183295,29858,50975,9322,57397,10654,24364,30383,55799,41600,23584,127295,296610,129078,143558,244131,86397,36049,1085,80677,3820,108139,5476,34767,24683,7758,13060,7239,131671,250593,59556,103392,29810,4188,252323,39404,116877,7651,43600,40338,13554,157253,39196,25978,144387,61211,234,50104,6129,10449,93777,9240,356378,274148,4439,72970,3724,147770,78680,62570,115877,40027,40547,36817,224392,64609,34795,165027,67440,2477,37206,23431,50754,164797,46018,94995,170982,27051,7957,22767,3674,27900,56419,18930,60701,41302,2692,84749,339721,61996,111094,80221,50129,1045,8153,62945,19202,8250,37208,37418,32560,79477,41106,88569,33963,36693,5892,30570,1581,66471,49647,11922,160717,29442,5643,114865,82962,95982,132098,22633,22838,94726,54556,28566,205039,162340,33216,16849,35847,221339,94851,26533,71469,1805,3804,12935,45483,71020,36310,65381,192960,34240,35165,59773,1248,46954,155332,96864,4246,388800,16129,57133,74592,44807,442014,38203,42574,80818,91592,26377,36424,65760,977,77387,22628,147610,28018,30561,98454,6969,119628,63648,18170,36854,26601,64018,22027,37279,51395,152934,21153,9430,58760,194742,5330,55115,34158,28917,174111,13171,122326,1526,43896,66094,25325,4234,148354,11450,275,18999,112191,44365,22723,68409,8733,57746,96565,75007,14196,108844,29475,88599,177563,100792,106156,86323,93726,14248,135341,194131,40126,47099,14779,8272,39597,95983,171398,65882,28052,10393,47213,40689,22120,72212,106829,34964,109146,753,648,21660,30047,17527,181025,5619,145357,4085,216883,9359,186951,24779,53931,24545,36197,223296,62628,168101,4243,107313,30321,26642,13049,51059,31027,107912,807,73550,26551,84369,122422,165872,49754,74213,234264,33151,52014,33100,87183,22365,52500,40013,23302,5652,72723,21404,26107,48434,587,94049,168493,96418,32871,70860,31709,25128,443,71597,166253,15670,70994,26341,133675,28280,75491,54756,47955,56028,26182,11952,113272,472197,64640,110753,17919,337,50642,22576,142,87371,53391,93210,126694,15285,19642,85667,14148,1506,42092,52962,33243,11970,20734,135843,57044,58880,13002,219134,22876,64754,232519,4257,43120,321573,24799,64526,124728,52579,81472,70831,276848,17403,74359,23021,182101,74597,23744,148267,12055,7976,5349,11772,67540,167347,65318,18720,127832,108238,22828,90233,9987,259080,118185,73209,79270,13775,90100,137742,90799,70569,15699,19961,9087,67475,57872,39731,8810,134897,131868,146849,19898,3334,2281,167061,91073,60356,467742,74712,188,53179,137679,92769,29241,9537,132595,80119,1041,88962,5976,40171,44911,102859,139059,104558,98987,47761,19272,71472,113864,175377,73338,10857,23402,23758,1591,139864,5644,4076,118760,16427,134198,18853,20291,100849,37423,22038,36677,19071,195521,57445,11069,31869,55718,66882,148490,44,41296,75242,49704,166810,9906,20943,122258,49112,105667,15969,10344,6408,187694,21399,72742,58970,14867,14376,81889,41856,23225,15042,56993,16074,131389,74276,72407,53875,383108,53597,37363,68993,44854,122548,430927,198279,38430,80409,12245,2981,628,2818,17760,37437,238229,7968,46892,2200,3730,34190,65983,37959,112291,87850,70827,6522,20750,73913,111621,41652,19587,2780,58668,25916,85259,18200,168962,95781,42445,102050,7776,57662,103313,47742,96358,41964,66174,100396,29069,204735,19679,27978,7479,40264,22534,61183,36081,107436,58223,14680,23002,101311,24716,124108,12908,5646,31750,40380,14215,232799,102772,14122,96775,61398,50917,12096,149880,67833,598749,124194,155871,49216,790,14677,65319,56917,7440,145744,95701,12206,49405,129269,76199,45732,9767,11058,9047,210885,11051,7392,26307,2130,8132,147526,20802,232698,115660,50060,59789,57344,107623,80343,112676,23291,9866,160971,34032,118291,15719,59730,164911,28975,2659,58046,78480,21854,66209,53863,109085,116045,29021,46481,107552,22130,18764,70254,31272,11300,52460,43933,84738,20721,53869,190840,79673,105300,7561,321817,66924,13940,33281,101046,183181,32176,71878,5678,62924,79535,56646,40303,19559,27703,93042,73368,42187,3670,37376,46440,7023,36816,109628,20680,5940,276440,275233,170848,112093,136996,14984,20226,111441,77693,112960,48577,39370,55707,50314,123404,26570,54281,61372,123391,4857,35928,246740,132507,106646,44241,7196,92258,9825,37688,51197,303141,5590,15476,132986,10955,85782,34486,26696,7991,28813,18858,39546,11703,11365,38185,5716,93555,11925,40121,60002,6985,10976,171384,3887,43394,13337,56346,6381,252336,39573,75042,53711,1028,31781,44295,95925,131713,7214,68125,43571,70954,213234,1628,8760,13391,65485,17320,56038,1710,25248,60803,57399,19839,3870,326,281556,50945,72400,21460,316244,75619,56246,98775,481,13513,55765,50427,7388,123519,32929,57908,27124,61316,101097,57467,30228,48792,10788,20402,37318,50526,155730,34456,158065,145305,17832,43733,64052,4506,35072,205355,177028,184004,187081,68616,35938,83703,10367,36892,93186,260137,51934,89970,4985,23445,26755,21558,7948,78741,23376,124405,85594,68596,57536,49351,12619,56593,132668,99924,109728,71844,71935,196018,65464,17617,14987,89701,143773,33997,8687,22701,33258,2914,4436,72108,85610,9671,49067,2327,82988,1361,1672,44033,35777,30269,24057,10605,82236,616,15793,13919,47249,112086,116698,9484,80207,90574,33304,68624,93127,56101,42210,160929,4827,38995,38095,4701,125119,5027,33680,9236,231236,14135,87837,23318,70261,78893,30151,81482,14332,1084,74256,27532,46644,79185,3148,62615,6981,55672,31668,36825,1849,14536,37446,14738,23779,43058,162749,72199,1168,21346,5592,85932,85302,9668,18351,57135,150360,2080,228015,77953,34670,119302,151751,31009,106725,84265,45214,59289,74178,113071,263206,111009,4021,44449,188119,192629,123592,392506,292847,114487,12831,205858,9852,20780,79648,75767,357014,97721,18166,21005,67950,33226,204009,16536,2987,11335,66717,144910,47950,17262,55060,15063,2934,51038,26775,178497,66008,3427,49433,128592,20036,157553,63861,3089,23015,51210,28696,35933,49942,71135,231518,99620,17248,21835,176536,20676,16944,38700,165831,233253,295625,36723,13023,52745,10907,19423,67972,125868,95473,82875,1183,108455,52685,33417,64095,21433,52438,33191,127809,44505,211823,7810,2752,95548,162031,7185,91196,47563,61721,33359,17897,23682,42806,178101,22874,49707,199897,75419,82456,8618,11171,79712,116847,18783,44190,46564,5346,59046,95032,7893,14916,3214,26800,24172,121453,34362,10250,17408,18888,4840,68696,22831,13162,36005,32512,14800,62357,41723,45046,27247,37486,5372,2564,34261,298500,66509,133920,89138,31305,117697,19097,108304,81386,84106,23802,46411,63304,946,51417,41777,41041,19501,115864,60743,294354,37955,94165,18116,1156,17937,20645,57114,90804,58042,48643,92288,9861,2557,88546,61333,101008,12853,5148,87856,4152,144503,73841,18718,9789,147565,10846,42085,12789,30223,8993,56352,67203,2448,28215,6052,23540,126319,75933,36689,80235,23231,23561,21383,38800,77548,102798,21234,31468,158608,46188,63960,191679,8051,67014,11185,170078,42186,28827,34777,41930,212079,12421,34750,24111,110344,73918,45171,70826,141949,40063,23979,24254,37309,26724,27179,24718,83648,54938,14591,17425,29525,102675,48975,48654,12316,8929,60640,41709,50168,63264,89812,50716,48632,38755,138583,160123,55579,71829,24230,233277,46322,39650,166388,34718,24108,98252,7031,106695,62498,18258,35062,217827,78731,34824,33354,19520,60852,2432,60224,8587,2836,62955,702,20227,42285,40560,95592,62486,11094,53035,143291,18842,46177,77994,1770,9657,107422,172915,32655,128716,25886,25164,156740,119928,165875,85817,11007,89110,33956,12652,65156,180266,8494,36889,19958,20955,96,1264,118288,135769,44754,86671,5632,19026,168220,289120,33569,93821,66144,70635,7687,5642,2714,55445,56636,71545,184182,93133,7332,37389,12643,52315,22729,11014,158742,17050,152889,50178,34601,41945,52136,9948,26914,63548,95721,115951,40759,8960,158258,38938,49232,48325,42234,81523,253019,66128,40978,20048,238048,38760,62928,122560,118532,43687,137472,163689,26680,9878,17448,51035,16211,60834,36749,29178,14241,59868,150086,2305,26477,42422,34342,165341,83279,33894,14257,29928,12743,13957,125571,89134,66712,10952,16507,147839,30146,7249,16565,45399,39874,114565,215780,31990,230881,171477,102,196546,44538,10880,84948,281705,86651,10617,31395,2342,453658,43569,60561,132901,21845,17727,58556,258242,22262,58728,4008,77997,11806,37431,30599,81375,109137,185787,114085,217292,97453,169085,30593,60212,11544,102056,65580,2384,91655,4855,95725,7295,157994,16228,20669,53276,141590,105246,17334,25440,76067,17967,39321,38911,11362,28559,63807,21627,26468,85816,40120,1025,15234,58319,69516,66512,124548,75845,78873,22137,46681,51242,85683,32909,76747,35555,43396,101465,1765,73094,1077,2962,39028,66777,57831,42048,15828,13962,36041,63657,52412,5242,58846,2141,5506,219012,134451,3936,182230,17558,17153,152237,22621,49377,170216,35257,68233,65374,6510,11126,212151,7184,2480,22517,3437,33073,30156,16557,3768,55067,86829,91e3,12350,148650,66017,79424,70885,49066,28250,21369,51213,34533,11510,3258,18176,18465,84413,6315,36411,163765,4346,356,107618,598,13727,285026,162695,8749,14583,7132,63521,184253,32378,25991,5604,30961,53675,4874,84693,5086,34811,26978,56564,7904,33519,51221,113942,69253,6664,125563,22055,220680,102008,742,51930,19494,176108,44424,35123,13025,75685,11759,74335,22250,181453,131147,16984,132115,154311,11991,76452,52609,85351,196,30969,9198,74919,2529,56838,71779,29187,116304,3504,62330,41190,86153,28393,254926,104228,105189,13264,84359,3574,12415,8534,57147,10175,188174,59504,60932,66318,16407,107921,17638,99103,49278,28403,39786,145865,8462,3558,43406,142271,29139,21989,36552,93955,72365,7176,13556,106185,37957,321774,17782,129017,51154,27938,24952,1935,39366,2791,33489,41582,56078,24558,9311,5449,218786,27808,190429,68013,36020,86003,29735,3404,87348,119357,115714,2324,86796,81973,40992,43376,93621,28784,16808,36367,2517,2909,191926,24978,55303,53308,205724,60068,3098,21375,64784,23949,26579,63121,12319,80145,39967,97861,6757,70143,67642,37082,34698,69140,122883,46151,62187,80934,429,19437,135071,137885,222647,13331,154065,327,61778,74257,40116,37493,14855,85079,237641,42342,102164,199965,71204,4662,29368,5042,113914,122214,8955,13149,102503,43173,5659,163787,69003,307084,63392,171080,21390,81918,86666,36622,24126,28887,5736,28054,207170,163428,79891,346467,95363,38980,111806,80828,9200,19288,294896,114468,87405,111715,141705,7015,72754,68463,48738,243147,33397,101210,37051,98801,82847,20397,4940,185559,18716,54718,83491,11725,40803,1128,12128,23060,5174,7745,67007,46701,1571,27807,180186,256996,18975,16837,7877,212758,250379,15440,87954,57755,24719,124057,83461,258,50864,8874,29038,71289,31627,15429,9005,4061,113851,107716,82819,13651,79656,117851,17539,111446,12938,39724,190787,4352,15402,21070,62708,8539,23777,73853,13552,38810,86117,16285,56400,1718,75342,142863,29033,378,110113,180321,32586,23606,26393,160984,207987,23783,8406,16904,24596,47274,11693,46539,60524,78595,48423,31718,20170,9009,146268,15183,191060,172765,1349,138436,37365,10970,40509,225817,20021,70394,152138,21541,66559,66544,89352,2725,17258,91345,7313,3815,115868,8660,40362,4071,103524,39388,118275,21950,6549,38226,32754,209574,29201,43495,18028,20296,40597,18370,47520,202450,24134,2219,8195,69545,38041,136934,46374,19041,159811,84865,58620,846,98749,13569,30714,97246,32186,4479,27355,92973,35214,151491,75963,37631,1561,27200,238083,23182,60756,12291,25766,39355,102333,87362,65741,59906,19538,201575,48772,102938,24438,292580,39964,66366,9004,61379,50548,37622,38732,28379,68180,76622,17488,69849,5963,7219,48143,43413,55358,540,58691,29506,19245,52193,48621,5518,13048,118625,44755,191081,42061,89197,2259,60665,66994,71210,51232,3585,142096,55024,7892,8345,58653,463307,65658,64319,137941,136323,53499,12746,43492,6978,95163,29925,60175,5128,7352,41463,184756,121146,20473,18426,4598,5309,54580,14277,121151,10691,56711,43880,63409,76682,11830,172218,264898,32632,66536,81062,31649,25788,92774,60222,11100,63159,9432,224657,25240,53613,152,138620,163829,2397,85345,12501,37507,64932,38575,43522,65789,80198,78796,35226,3851,108891,73311,3060,28391,93671,39663,46142,30982,66041,37281,68157,26553,71872,81142,211527,39747,118119,22695,2859,11066,20232,168911,7933,197005,17066,111071,44434,133994,120798,12766,227798,45756,132852,29917,36076,55352,65281,129800,41958,18944,84678,18580,168093,132621,39997,54092,27740,32354,3770,114118,103242,43918,15899,18574,145944,3190,123469,219903,24169,100571,62403,16776,92779,14535,17168,16475,14304,37231,1712,28218,242754,61688,28980,1318,51359,222657,99200,67989,31772,23932,35351,201251,49041,27306,19128,40135,3986,77333,19649,120683,151927,21081,7076,78375,77501,101599,8011,89585,96715,58179,5378,102138,106793,26051,217276,4197,16297,27014,46721,13322,22806,5278,29629,70632,9647,71519,58818,40603,128530,8903,36770,56900,31483,26935,43845,34265,34920,87658,6114,84767,64250,47318,50720,19264,162514,33357,13117,6705,46696,75032,71054,87004,42035,69138,11903,99854,102328,19611,34525,69312,6431,49842,101600,133178,108751,41829,89939,225664,48916,99556,9195,130387,5960,36857,116724,53518,94002,39077,53996,6945,22261,64291,8314,152785,57588,16522,9091,5048,87671,35441,39509,1945,12423,158923,178413,37549,14095,1475,73188,62878,4819,24012,68534,42606,4010,120809,57497,59564,101758,103718,32701,80116,12345,95834,46918,21468,53213,15665,31200,3867,5140,96013,250744,21016,10069,13968,35449,180829,27683,39704,59956,22893,3115,26293,32785,75934,62445,141162,62720,2018,83638,19949,114012,95006,3330,99829,130935,309272,9565,55874,121727,37017,23586,319858,40970,27602,8625,112329,61060,100088,118525,25922,16232,1907,60671,51583,44553,80993,5262,94679,8676,940,20736,11823,3020,16476,12340,152600,97416,3703,25744,66826,16245,16876,46446,84798,74227,176020,45192,61955,75496,23946,23626,40372,26036,6149,11822,30582,16541,41914,82385,232823,40921,80773,14930,3631,7517,39619,4348,36180,126106,138939,62611,1477,113512,47321,25052,14546,118881,29060,23589,128322,36795,18401,137921,104699,267929,36194,172791,18113,4766,188215,30083,332586,94089,5805,77909,22194,68234,154976,43220,40660,70001,184893,138095,11128,103010,22663,5108,212615,8485,5565,49222,54614,26530,42639,16319,55062,152662,105595,21114,22216,10294,68158,10436,86950,7206,62115,3977,3657,59874,456,118617,18156,106663,112229,80992,17442,8217,55551,5133,34344,251927,51153,39364,201321,7816,66803,23057,156724,145664,14276,95705,979,2796,6875,13429,212525,50602,26276,28284,3424,19465,52397,46963,31420,51399,206476,92317,48851,637,100820,83349,10317,60227,21972,6908,282439,32857,224767,95629,83882,42106,87338,69757,29840,68709,37665,45244,114577,49188,175943,54009,186746,106158,70168,3358,234002,50555,9221,129338,9562,20118,32923,78479,118280,65752,4977,10474,102174,60947,129006,10570,83451,8598,8078,159367,123785,80438,16742,5905,5281,181513,42402,6977,163136,93179,42191,14968,50421,112401,105440,33456,57347,121611,4221,94954,36517,24046,27796,6255,33394,72990,135408,116627,1233,57874,25654,95419,68156,401399,313338,55208,45573,93124,119251,47200,38196,11909,130667,45391,73904,64964,167846,4137,115606,52036,62214,7969,160925,7187,1132,134835,40309,73195,64494,80472,444841,61111,26500,45323,40743,53625,52797,22659,15631,29739,36706,28841,39147,102836,26794,10536,14845,87305,45874,12241,127587,83833,57183,79722,30844,41304,84655,20825,92500,3722,25655,27811,10157,81634,31362,34088,92487,70123,22190,185100,72658,139035,192523,88241,2078,230490,44528,85638,100198,22088,29982,291233,241062,13865,4445,137791,37835,107218,31726,19718,38234,72528,23046,19177,66695,5109,17251,28077,5617,21554,47839,72425,133825,1486,73065,181275,141508,21768,62971,63082,2512,34200,9904,120309,6392,91243,68416,268253,41199,116757,138551,185526,41246,28986,4093,19057,17295,4148,245766,122360,35356,112075,20301,75441,10998,7977,19769,62922,937,63547,100196,26427,157820,20983,236696,22935,8140,90315,156004,47204,140973,7726,45097,52725,22636,23436,257282,105247,522,88389,216031,202204,46812,211666,19693,68828,81691,45925,11256,30292,372,5236,167826,88328,232776,151611,5360,82104,18841,80393,25465,18285,20320,72377,31730,33160,45803,38715,27705,37379,24163,18360,103586,4015,32305,269494,91252,20080,36567,54650,7797,57073,12650,31164,42209,6375,261663,105528,81661,106002,2800,5375,17247,43151,4442,15727,194619,100855,144898,62320,78465,39929,16454,1967,28311,61363,17219,9395,8745,121445,76939,80385,162380,22009,54191,44248,16299,122830,48151,74429,78291,64755,14238,44966,2511,17712,67954,93583,829,105899,49935,84750,11591,33185,85447,42717,27409,208542,28965,62052,52525,5597,25694,65594,16343,63224,276188,12475,9331,127507,38522,57287,24128,133161,79723,105548,133695,48917,27558,43278,46520,13778,141954,110785,83366,17715,46317,105763,66298,147013,41086,94180,16478,220447,44611,730,19722,78975,117889,125643,26254,16574,18480,65006,15806,38549,246418,46052,36056,8440,34984,30170,3163,59800,4458,115442,4283,41970,33507,104078,1653,22,121158,276486,3655,6338,24048,133421,23641,2161,24422,36006,8086,10675,181474,12307,29514,59143,14729,52509,87128,122470,19446,80852,33314,24573,119864,14237,9652,57779,6612,51851,15284,98871,90581,124466,156831,21190,22015,71380,161906,87247,69201,18392,17908,108470,72962,40719,14338,17911,95260,43339,20610,78916,20710,72451,11315,31448,17263,58853,178878,48111,116002,45497,80506,82605,85880,36300,121755,25215,36118,301929,88728,405223,276136,553,34704,212438,49970,78329,922,20711,25036,257130,38295,145369,18128,15385,30829,55656,48345,8012,3561,28004,122041,192900,58338,112508,41085,29976,87040,47117,23905,4336,92061,138880,97407,42083,172121,6256,25192,172671,5,93568,1420,12677,31605,56743,40620,6015,78415,231077,31298,80026,13902,19048,24924,170586,32955,176119,87859,36731,6773,27711,24658,26475,115216,133207,93250,95820,88522,8317,5714,124047,55219,86860,19677,23961,22928,162209,8904,225992,359835,56084,96201,29392,96558,86071,93643,55114,13347,8183,95129,82012,2017,123336,34219,115554,157159,47747,101684,41008,18735,193781,104151,226906,7552,179874,124113,31159,21162,44010,14771,51268,166128,31382,73124,77438,92830,205709,12113,1292,38937,13114,1334,2118,15597,69581,14449,21934,76618,48728,67038,14967,51495,24243,87736,147249,26720,11119,46063,43749,5843,44147,152629,133428,65703,14269,45604,57982,28672,55616,45957,8438,95433,37698,220862,132034,39456,61870,4161,26501,73560,56418,9845,4654,20916,10456,88920,119358,9015,65931,96507,48029,38534,21676,109081,43078,34943,25089,6131,28766,23665,5477,10255,16695,67,45778,42443,42770,29534,23733,100513,62617,42630,48746,14191,43753,50295,26007,8792,57243,43119,54725,164253,58250,112304,131796,25165,4651,3188,24831,47748,3705,19540,13211,102095,5593,18699,23666,32005,117571,33541,60584,74573,86311,99443,25172,27222,168938,7143,11853,53560,18834,19960,86522,28217,53266,117700,72989,34323,18721,66450,34346,74056,47217,202002,46269,9429,68582,75458,37823,82843,96652,32549,145144,27958,19820,158086,31955,201406,135379,31207,192545,12950,51704,9094,248263,76147,64028,110009,79407,89345,99284,223492,47966,26848,15359,201137,2861,110507,71231,72297,31851,118777,71039,151051,240855,16333,50766,14727,7939,4149,80908,418780,88378,59276,1327,7284,38576,79814,65820,42199,84860,49574,62596,12396,70598,40117,8648,7994,16836,7630,14047,359699,106878,525,29037,28064,13380,11675,50669,74216,103539,180314,27449,56299,172344,19274,7301,246099,32043,19422,36506,129317,6806,30140,4614,46639,66926,932,86600,6322,27847,233103,10541,39025,34887,3517,12972,26220,2031,66561,115015,48658,47596,12714,33845,3893,16165,35237,89983,14769,11962,147224,47018,29977,27979,5552,82338,86023,131368,1218,24853,237840,132193,15455,40873,3668,65351,53388,15229,59889,272245,47934,11858,34347,18038,90853,86981,300602,19343,114181,29362,84921,6095,106059,79472,38015,1206,48741,6208,8e4,21916,17423,6002,108083,24479,34931,56661,9511,26995,100694,163853,35997,81254,58321,18919,171890,86877,91341,74503,70477,53412,7027,59281,39892,131302,5864,15947,61301,67466,162369,47956,27874,35624,282324,21270,111847,102548,41482,30955,116737,28264,8592,55458,22301,75090,29821,30697,51709,3041,19208,8038,24634,30467,87509,126428,19389,18814,152686,20701,83474,45832,80891,105808,11378,153223,120770,98186,150633,49838,9141,12755,30962,5260,74490,21256,31678,65062,33326,289838,187831,20595,89768,2805,58535,10844,70085,12090,2451,138068,98544,24461,4511,6754,41684,28203,3383,65355,82833,30161,83924,234361,128424,28921,222594,33975,125491,34069,11508,67464,144226,41850,98703,34371,7901,21254,38398,65651,23549,53883,213340,123269,12028,71764,177701,28758,2623,68395,11549,15232,68603,9660,63116,36079,57093,31198,20475,48467,89984,35619,186847,107469,31389,43631,73867,41949,68841,114250,1605,30564,63403,17588,27680,99533,12641,70325,50428,73426,78379,11855,91651,72081,91720,60198,15743,12065,83398,140046,6761,46598,45900,5068,886,62448,148968,37347,19405,9680,15819,43496,63370,75667,163700,37639,3633,22774,34341,183131,134335,37200,23915,7054,14194,12970,26438,13350,285521,25594,8219,104410,91039,168804,138480,149734,15907,33818,61132,60082,4622,110187,56736,13551,73571,3945,73463,65498,17758,263266,17593,2710,27585,54469,38200,45367,63754,28881,3473,12791,98287,31895,65787,4463,94536,24951,36332,59901,28803,52130,86403,7668,181822,74831,18977,9850,177206,145485,109798,7292,31421,26280,77211,58511,12507,127004,11113,147,8729,56208,43066,79926,129937,31345,83947,39915,46146,98763,42566,1337,13192,18323,105163,80570,117753,16555,72883,11077,159438,40764,70933,83329,26066,12276,72059,21655,173836,126713,69454,153482,91585,70644,102558,110483,6764,127864,190133,3961,101798,20945,71138,82402,90884,69669,44753,923,16939,59700,164258,25969,27082,31399,43846,6306,246093,51342,6153,151581,202801,182731,56475,162188,89426,141356,14355,121815,27536,28023,65257,77523,106668,127314,24947,12790,38796,169698,23555,10725,44573,183083,42088,62716,43265,105958,32050,44067,50118,1668,3874,6243,318411,16599,1691,94999,52378,28671,216728,123258,2059,34969,69225,5913,136280,171443,141515,91662,22175,135282,80020,92270,1663,4808,4482,3495,34691,5226,109830,108512,17342,107488,11606,123190,100247,29666,146527,113014,15794,30894,13224,39585,243192,22351,9903,7836,47699,11078,25468,122291,48821,26780,122679,75521,81450,630,4895,92900,55074,74293,17441,3563,111657,103102,51613,12318,52370,36191,68245,34269,40445,41354,122901,168604,182500,62012,42557,11259,24428,115113,86345,12362,3909,78430,86852,134602,20459,47853,93879,22577,7659,3688,38555,13349,17381,56715,91639,12493,10895,92438,3142,37057,28928,2004,36427,32268,34222,209974,10432,67436,41989,173518,107930,27079,62729,30908,55558,5828,45031,14902,53546,8204,144263,60255,14520,88212,86582,109589,69356,8064,47449,8505,66558,16886,4844,52817,111260,215129,12941,91118,650,20770,6273,73089,40618,62790,2873,35002,14023,97208,19386,102646,36993,143736,135457,35385,113601,17893,32627,84439,100619,56016,6581,57264,172160,45452,111710,203627,70131,24100,322787,1996,35665,70078,22358,90922,83658,4097,63200,58499,14542,99153,52159,6615,12414,63415,31986,16823,1579,65405,137809,8841,16898,48082,259,33014,42375,12260,179850,73667,91389,98882,29532,17311,326251,41092,5928,20742,44964,48019,43505,9317,49265,6643,192712,48424,163487,19861,20113,70848,31928,105333,23685,78563,14638,54755,7158,24142,44018,20774,125255,20331,24280,10163,1285,2336,39851,4299,117269,46714,63816,87779,159624,11731,9971,990,137317,108831,50994,74554,162680,23640,131597,146962,170620,34829,91205,21184,1913,63616,18427,93136,156592,17519,67565,115882,138220,78622,88535,18115,2711,33554,109492,54298,971,24914,25863,36363,45715,27099,194995,14299,178181,111488,72395,322385,157719,130787,11897,81843,83999,11369,49280,118604,40922,61332,110343,53407,75639,40582,300440,54722,25637,13694,48248,48278,194521,56203,52779,48783,72627,10953,376,16733,280238,26351,230789,15132,25168,137270,3588,63704,73376,94031,74284,19443,159557,9697,39901,13351,119050,15406,146455,3460,29556,75195,37673,102524,92329,47289,98413,15311,100684,56345,7116,95480,11590,7200,167,23610,58426,17730,136656,27944,53151,2701,8824,103124,3017,90744,113588,53216,79736,65940,26931,498,29568,80540,143543,21292,1740,59268,16561,180816,42323,50174,40890,52866,10703,57169,4700,17191,4424,93511,49698,166650,26972,48631,165169,82879,69326,202970,4007,2376,231325,139592,22119,62851,37504,68816,58345,67398,186643,43331,277416,53749,15746,23102,17432,4793,151138,48822,54265,48203,198688,14305,54287,2291,18018,113378,123260,7180,97549,87027,120085,2920,76080,8190,102005,5641,64580,14955,59802,54028,58884,19367,81779,412567,85957,97053,103637,78871,29364,27637,141728,4767,30686,112738,130146,42745,12730,105040,14844,232,210944,36581,152317,135543,29744,3129,55647,58149,46319,27265,17499,28005,59948,7170,34138,5702,293047,110892,408,91760,218674,18469,46095,81403,14389,4610,35672,73060,11006,74848,104820,118143,190357,20043,105358,141735,5115,27093,45924,123073,52599,29433,9616,238350,78610,24851,58858,26769,31969,24613,18294,4982,32735,39639,143563,112073,202205,12567,4873,88601,44897,81503,101648,81362,34662,85277,17574,48173,21435,221188,40215,39576,80786,26544,64668,81841,10731,37733,247986,149188,127703,495,18382,54388,72446,43071,30974,198723,89608,41360,190,33045,8386,31658,19992,237838,119015,137622,50890,100913,6460,116233,267230,26621,104129,65114,14190,41542,14888,85962,23342,23041,26453,43725,71809,45186,4770,46452,53894,56616,221286,18973,9038,109299,55365,19366,26863,18808,60909,69353,41738,83463,12100,68561,72860,3980,13796,49340,12332,31311,27418,4255,53430,18976,45523,510,14224,30477,26581,4530,3651,101663,139840,22709,150861,31996,63923,120623,262522,3076,10528,2929,14672,130238,18087,9816,121894,100308,25085,55111,14565,18952,53293,2042,369988,23674,61789,133529,28783,108293,35477,47119,36448,71049,40015,33055,78598,198442,1833,159937,40654,77444,189245,113153,8621,18599,38553,35223,166072,2375,11659,21786,89523,6032,12116,63046,159398,18454,3678,32521,47626,11411,103527,38896,42946,15696,26370,10185,8413,37080,165583,4331,63555,14907,72220,50056,6623,62236,36565,49783,10049,17503,100581,55951,146244,24724,9626,17969,25524,109300,173965,99994,101056,46459,43647,53737,277968,8347,123521,74858,33829,44762,77574,877,81377,222525,123532,30602,43881,53145,2973,16284,81940,61281,127044,63620,9875,14756,114829,19032,9202,52759,119141,23928,120551,19607,3599,33401,76821,73233,117430,39968,36539,7071,5446,121735,194059,15206,45283,6706,15603,65615,1207,165723,92275,34773,104447,8396,32353,205240,164323,13600,60555,79205,25532,22907,33410,57480,107111,69630,32137,47832,70913,33161,20321,2371,117348,10714,86246,1625,11763,17900,268,78457,99175,97940,101092,86660,32221,14041,128504,125080,53744,124263,31017,13897,403,31859,21964,5633,111630,5547,77329,17961,18241,84995,25984,12983,67491,62168,47262,5241,297,51191,7351,8967,147212,82060,16821,782,11033,82431,62957,5026,43459,77963,203477,53528,6247,191852,87774,74164,215654,13467,1522,219964,28589,244104,16242,117821,67725,72570,156792,17186,15979,26990,44128,193014,35276,57125,16212,166451,68017,6905,77608,16364,53777,75921,76426,37975,26203,269296,64099,84122,12077,38533,830,4407,20139,963,43028,38902,42911,37503,83343,85045,16979,1165,60835,137387,58380,86990,110066,134540,56331,193845,81238,17922,163093,38744,110641,12502,56404,34862,26865,125964,12965,111648,25547,7771,27196,136980,9555,29551,107158,57885,18831,37705,35505,101742,13970,102109,62548,124657,23328,11124,89592,146376,248050,6241,22033,18337,80685,29898,11908,216623,67721,106162,146610,21377,15085,91552,42041,62560,122532,125336,102365,121537,142559,29693,223919,11515,110495,18776,22494,5895,185059,103592,229351,51220,100102,37027,257855,29359,54123,36066,106493,12244,79258,32002,432,56205,94836,90182,6726,14762,29391,48938,26864,38083,60364,3310,60192,14766,205567,57504,110760,22649,24666,46333,21517,3430,13135,28873,27052,158809,11597,20529,6695,23138,22960,37137,45574,6545,305877,43423,26153,24769,59844,14501,10430,134352,56169,13213,103432,49523,35181,13435,12408,129475,64620,230854,77390,51990,15653,83248,33466,44571,117828,51481,2187,10559,68019,18021,54895,48247,18354,33737,4554,108595,37288,39767,116707,9175,3726,108877,21616,83684,49862,1938,8543,276466,20134,108498,48770,102254,31914,131520,185291,100559,51890,209,19526,76471,50544,71814,99351,8172,198526,28816,20419,9109,98389,136777,76479,75596,30635,165417,48216,120220,25955,211071,39314,24308,32164,2559,146280,43403,9233,17947,90585,1786,86920,125662,2457,64741,32152,32918,122882,78538,44001,31723,56426,23375,103172,88177,145697,52506,49319,68016,31664,41488,18486,110400,7030,28241,986,109199,19900,42147,56864,65287,49183,7858,24e3,30453,840,16673,25907,68916,89927,6309,158335,36407,199737,130464,13137,59603,201778,195292,21015,42466,179062,172561,89492,11075,180407,31868,72493,20998,60217,9865,19530,39274,130266,54539,21623,12535,13505,40641,73375,4087,85633,2153,3117,70680,55788,92096,47509,98493,37490,271936,151475,3032,16171,96642,34106,78425,125761,19591,3366,19316,54508,24183,50786,194248,91528,33253,34622,108355,41741,705,3814,3883,108929,13203,67831,10142,59754,68208,29128,84820,56880,38794,24972,48571,40821,40476,18137,164254,24064,236309,79181,11282,395,39169,2013,51587,28551,9645,701,109513,115899,113566,12762,62045,58322,103726,41343,40866,244102,143816,2490,70346,40973,52618,15412,30720,104315,38917,42027,93676,17513,107418,20706,123890,13399,97727,24044,87962,65606,44250,98044,65276,74790,101473,19350,91570,1326,87790,172042,7577,100813,86896,85891,41512,108130,27794,14875,71431,12835,156250,58135,3759,22476,42176,115873,34686,56523,73643,108505,51491,20838,12721,32863,45700,29496,13700,34294,55360,29206,155942,123812,7706,163234,203,132720,49358,144431,8130,175788,35818,3270,76832,25710,54095,97274,28779,94621,74396,19092,128242,58067,20885,14670,93255,15107,63291,23654,126900,129421,59294,262659,9798,3251,67344,28600,44629,50672,29072,26999,31526,23183,49175,165843,175455,17282,175411,32022,45989,30298,90690,78118,83156,23749,35636,31317,7069,80381,94561,133756,14960,97404,6138,41065,78041,32843,16601,34123,9559,146529,123377,96395,54441,42012,84257,123541,10745,22139,106459,11720,150883,172651,154996,110538,4728,53447,25704,2009,71152,119354,21166,66604,1429,216162,8637,122250,63520,27180,29172,36124,276428,107787,77184,4680,14952,104903,24418,14793,51561,52931,8371,26342,48526,7118,92066,67280,40653,8847,34597,105438,14198,50163,61188,146286,50315,41205,170829,161496,585,197359,95056,1687,365794,91349,48507,5804,49263,5146,104902,96365,117343,132222,46084,96919,16875,8073,262381,79982,52663,13928,16056,153908,15145,109256,132308,18763,24904,167644,13618,40750,18686,147124,114709,150038,52849,2938,12568,48617,8778,5459,44202,44591,74914,17183,248689,13878,7822,80060,23116,194037,18487,2067,7798,43077,33678,244028,31320,74273,2794,19466,8218,36280,183997,48124,19416,29656,19280,98734,7715,18311,30701,133602,150307,126956,7378,2933,79903,13178,12593,86571,26604,92446,13574,44205,65699,427599,21118,8245,14407,27877,47936,33542,7916,26460,117762,21596,37818,2249,127359,209394,60044,47677,308089,36791,154971,31417,6998,150042,174360,12255,43009,29335,48739,3912,101398,53340,2580,146939,151295,45360,125275,15273,45383,27456,48761,23314,8750,60801,85823,104759,27894,123685,66968,39480,26917,55290,83305,2696,98390,57569,145853,340733,4919,20024,52268,30884,7413,203685,70989,112855,4129,50536,349518,68205,332641,159581,135361,236026,37563,176404,64899,6578,122033,63871,1850,85234,82089,66124,74145,121098,107351,12687,36881,117334,13136,14698,85933,93866,18047,32620,310,15094,46e3,88451,23632,36645,27940,87618,80520,58892,20976,27702,140090,96075,67841,103292,238964,87778,107338,17019,83427,67522,7302,8261,47570,116787,8730,80484,61772,174422,56005,131193,52875,14588,28471,59817,9586,15720,158155,51307,109734,15196,11025,59331,3884,52626,102602,84797,25158,27314,4437,20488,76214,189248,35023,114952,157376,2827,62439,102878,129749,36405,10329,109339,108633,36662,1254,13267,5470,87105,58004,15397,10434,159667,21864,52022,179464,3013,32147,31496,116832,18494,105502,129227,107267,50033,13481,9954,24267,22141,16257,116154,36185,950,115685,11305,176708,2048,178671,112573,287867,162328,497663,95170,50979,193861,50987,30368,136257,31830,46549,15119,169876,23788,17462,249887,57377,1949,35448,14791,43769,210091,3783,34612,282103,88380,245190,5457,20491,98908,11402,86899,117916,16028,162584,60644,320177,156096,31065,55876,22e3,77655,9992,23397,13757,317623,63978,215255,2443,17648,93231,27388,104529,93807,55505,140477,12046,112040,70887,40152,94365,112353,25063,114679,266061,71248,119555,15589,2244,617,14129,211431,70110,100652,7777,4383,85911,89221,21010,120615,58357,86405,37554,41647,18,15143,69662,60491,14714,186134,148344,42347,5410,168175,44535,42449,343894,129417,99682,20659,27272,140483,63455,222159,17536,13722,42637,62324,11976,114691,148109,2283,32057,182393,4295,147364,33705,2075,44303,30274,28331,63740,69740,29148,10346,44862,33716,73937,153333,12930,38784,247159,2515,41053,20256,83368,256189,54639,115240,5096,24661,175419,153552,26516,141,138176,63885,34115,47222,55709,2765,28479,38875,236608,12229,22921,77291,54426,45388,2860,57787,114579,295139,105782,17826,71066,19119,54364,69385,16568,12323,28057,33346,34919,124763,155533,101386,31644,8627,49001,303600,29868,63213,9103,77280,71333,9696,138789,37059,24823,5057,21352,32368,114208,56803,19424,10445,58514,8661,209508,26187,171838,10460,63454,14016,122504,41328,21329,46618,32493,38225,7855,31763,7945,29876,8734,6438,24205,97490,139977,130740,47323,33195,85390,57194,13813,60600,21313,96251,7699,27584,170521,139271,1363,4402,336738,129223,84983,69150,13147,3590,163929,207225,155260,55916,20288,4503,8398,98490,11773,27512,37113,84976,86558,28365,11756,116005,182148,13733,115313,47644,67208,85069,9347,14995,226141,14704,101835,41159,35314,13113,63526,214039,29978,50446,83339,17440,129441,72522,118641,97816,24907,73844,15717,118884,167255,96509,162793,30847,36849,51297,78974,77793,10427,1873,2972,9999,35074,28190,64297,146836,46298,60038,163007,108919,61219,2403,75022,127339,4233,110389,69022,9833,128097,88016,79390,222936,22570,94657,28462,56956,38803,81536,30474,152794,19566,16481,147408,74574,81895,20731,1918,1366,76367,187321,54494,24366,21690,61696,33283,107477,77499,31112,414383,74362,18463,218441,120929,59848,258629,201924,69269,454,19989,13054,59894,3623,58908,20681,35723,78523,102680,38988,184112,108087,50944,132704,52966,21699,18860,96349,201411,82697,85395,95658,5093,6427,177894,44191,32755,26961,155739,6249,31310,81030,26574,84311,120155,86730,113535,7424,48888,13516,45747,98098,20077,183995,81945,43210,26704,40420,75831,45648,11180,6855,57927,65528,124096,34851,2598,156633,107572,127352,38169,123845,60142,62722,105584,232364,23211,68120,1601,22169,89299,747,258039,80572,7258,152249,11862,101204,8834,121434,33761,19175,133142,46343,40178,48723,3589,41977,30210,38868,62257,10087,82658,87827,90646,16415,47552,351723,28298,72225,91146,272760,1701,11295,1652,109651,300747,51863,198800,29446,11794,32345,37538,22356,33102,37590,113544,37970,11478,179743,25454,103417,59905,221970,105196,145604,7817,164809,102360,16974,75840,255333,56902,6659,1954,645,59400,67769,7689,18675,5215,13793,20536,27852,3387,29523,259718,16860,94625,43143,29245,15848,233581,22685,63631,78557,22836,133302,84513,1348,51826,47129,98836,58284,1830,1749,94642,10933,6145,12506,10975,13879,103781,144434,10268,28409,32346,52968,121567,107374,77268,23686,35097,10501,155275,15303,47136,21102,168741,55332,90385,15996,84817,681,137803,25054,142275,6163,38175,8056,124296,240642,65621,4934,178205,16101,62803,60964,18230,100622,76465,44689,14545,9543,47514,16852,93380,28048,12047,107106,37575,101485,77047,57326,34819,96137,76916,6469,46264,115983,75768,87668,69942,13027,165,8373,114231,26434,52844,42799,182044,23580,146254,38081,43236,33883,146220,382894,14606,46035,36481,166621,35417,95382,2957,59384,60428,36358,66343,75378,22267,22950,83528,17577,56474,25285,4619,179691,75355,95836,53295,34588,171410,4487,14679,84208,44015,18562,109133,54101,11531,86052,174479,303157,28095,9953,35642,14564,39802,16145,77606,117406,53038,121117,53624,22062,1212,7632,127157,237292,189087,10478,127345,102515,181997,86752,87623,10966,121602,68783,68681,83042,114380,138349,191305,67176,50085,39016,1427,42384,1412,67118,122616,72389,25260,2237,13576,137346,19938,20304,2191,68759,5373,61364,238507,75814,23931,69565,38993,131741,38364,12528,87762,5679,129853,5310,186831,32653,90338,260176,389531,108118,26843,43985,50175,30563,25106,56965,18130,140428,4542,165503,117991,24219,229605,1819,129663,1240,3797,76093,18398,71339,51919,93043,27175,47060,216257,6483,35051,1217,16512,80798,129064,13225,69339,8548,237079,72298,2575,34280,51379,117910,55671,53345,247552,29486,39328,140821,34681,57045,60177,5004,90269,78522,2479,322607,48474,61296,13057,31558,4678,59271,6699,27044,31988,35944,12503,83480,4389,136508,3781,114121,70279,4488,155829,42214,2898,68191,75695,305850,45041,74344,106509,30087,17429,93292,12477,290,23080,114802,35714,18751,26554,105424,17775,2144,2412,100610,65192,113975,52975,180272,135050,129815,76238,106483,21440,63186,4260,46189,9711,28249,4169,23429,23390,8324,141585,63809,67668,38457,38063,39226,59972,1189,203916,62368,14403,16949,61767,85801,1739,40147,35049,76757,33124,62102,15780,103593,103009,53484,22952,67973,114645,6566,5245,50462,7601,8288,3513,194571,80276,1908,54592,5124,58571,2513,6800,273997,193904,1119,17991,117245,2508,129156,82366,26278,71465,63341,56943,39662,106116,94966,156875,9736,2204,122308,94418,27134,1280,24539,49022,45314,3764,50904,46424,30699,28087,293839,9400,33646,40165,822,147499,50263,116179,29085,11863,31314,5578,17797,5104,12454,1604,15342,219206,10232,67800,94261,25872,13565,90339,78971,75377,26649,41184,47695,11514,35369,20767,14227,41953,309396,148270,147938,33074,14453,27499,109019,39018,25738,240196,158931,52820,8612,95853,21524,137010,84901,70869,70021,116794,48404,38771,6732,1070,70990,187297,49140,5238,576,3564,253975,16027,16483,2811,37775,19034,25259,4053,2e3,70083,95774,19713,33431,92703,91314,42381,288770,48194,95985,3991,77418,13406,241328,245086,56533,35275,62725,9246,51924,70181,95331,16163,31410,79016,39312,120878,119371,275987,80124,27712,9186,220,23598,146167,85209,68238,282190,57048,31273,30555,80913,17594,75779,59160,135002,101219,189377,29225,96735,60126,62522,104e3,27620,86814,17240,147533,11001,5425,43682,410,49460,87270,69480,46315,59448,1816,76201,9431,11788,87960,29063,65539,47347,11678,33846,7008,196704,9895,6753,8633,120892,59970,572824,115934,6646,202559,892,48351,37611,251282,57823,67263,57750,26527,34485,90747,7685,88370,6144,64182,1709,41969,21458,62327,181657,49247,225330,122600,114574,107124,85361,111833,63243,71420,15655,191178,72430,18063,51425,54002,12364,53225,86557,18193,97580,41232,138398,67821,128724,8944,233212,101353,52099,42127,14006,120107,32789,32132,3498,18123,33758,56058,5779,128760,59888,98869,18445,84702,51911,13234,218379,20093,39031,8074,70195,20708,23462,24355,131384,60189,26390,10403,41060,7140,10781,49410,42261,87202,82566,41663,43105,60276,2768,5733,74176,28329,2297,145430,131632,83615,122915,105441,655,224102,5284,136426,67763,16294,188511,32538,61049,27893,3394,13951,159099,28542,17930,145360,9492,190122,32285,78855,26440,13570,58648,73908,4239,124561,2444,74172,53131,11468,10794,73566,11623,35343,64710,30481,4163,10328,38309,29901,10538,154377,76132,92405,24839,11679,3465,13449,11637,7824,2337,57754,1260,14458,41118,19878,38661,13416,159180,37074,163164,54137,28627,52134,184900,8520,40385,29546,30502,22386,66527,107458,6850,24022,47983,30603,35083,8934,304066,39500,9,28261,33026,77251,9374,44833,116312,34990,29236,63563,125639,135405,165398,159055,55690,88141,69643,236964,31983,25572,20436,36746,60896,31850,16179,11828,5888,3043,66368,9750,31167,7915,53111,36430,1333,64344,93659,20061,60596,180191,51630,6792,30244,43509,101058,22409,420,44210,109783,43223,27030,72477,72831,32679,29235,7675,47556,12258,39907,149412,84926,118247,24692,71717,105038,86009,45941,41189,89453,29856,52543,30627,226798,67303,59230,67415,34408,1367,99685,16867,128419,52147,4111,125381,117881,16173,44093,102224,31575,23234,24870,83790,127407,239098,3200,994,1255,100903,242275,117266,55116,38205,16140,29662,11307,40414,208793,123355,56470,4862,75600,30119,58218,70828,24075,26974,7802,192353,4851,5475,78720,66596,3409,28573,64396,30381,30690,59859,88256,5406,99945,103064,34463,37727,24238,86643,60088,4057,23741,5967,162904,38240,28356,93858,25510,122879,6897,3278,7057,11971,4400,35461,211413,21395,59615,39471,87233,55795,128426,3051,22470,41950,14705,3974,180108,80476,78442,204996,91987,15634,67610,139015,142373,35611,51134,10387,4353,153456,57749,181039,14183,68447,151532,21107,36452,20551,3186,46247,46383,129666,88736,140662,146243,2066,8360,7978,64818,106963,17896,47801,10723,114821,223295,74192,3293,3393,16987,74064,11277,91622,4270,29828,27951,387869,103235,1374,61988,120083,477,145892,128378,11779,211263,61354,18221,17869,46530,83061,108538,157981,90608,67199,95080,49064,195814,12302,66307,10348,231346,160732,112859,63633,146558,21271,31037,198802,47622,12862,95710,3910,77850,73961,85585,34752,61e3,4082,24595,103679,71107,8208,79568,150019,16615,24961,139857,32664,197366,4559,54735,32696,4126,162019,75698,13916,70108,159638,19834,9349,24675,175560,49643,18206,52459,27992,10809,88865,401975,133172,29e3,34558,30915,3658,25834,42430,36562,125265,18182,10155,40149,97082,208980,19575,60853,90529,66545,9600,789,46420,2317,88593,55595,98980,115302,5742,169155,1073,177901,3472,11189,63711,78643,65472,50459,127979,93,42202,67053,21720,157650,11145,141378,42033,22824,85705,79114,35584,15974,1510,54172,28562,12451,104226,19190,97151,73024,20948,5151,81741,21499,29006,84183,198074,54003,45120,170125,26240,35177,28389,64863,79974,60778,176915,232183,45342,2038,80253,41564,40703,32689,5430,100689,5366,23007,134279,14266,26712,73993,24934,64242,52113,102887,61801,46415,201049,54251,62133,122757,164883,30815,139966,2319,30842,766,13362,10287,134518,86111,81665,82440,28333,43019,18963,8804,161944,23439,102144,101145,80029,39052,248708,30350,117340,11878,128467,974,138625,63961,5237,74778,61834,67040,43814,13690,65947,33809,232476,115258,181745,28824,94013,9510,10246,93722,81976,7217,114383,3493,16014,69045,72692,12145,80981,9507,6692,1620,60820,330444,35474,33962,4797,7053,295463,46445,27026,12491,77988,49524,35675,90947,29114,166705,101385,133782,32704,6186,84595,176031,185623,45966,151302,63069,1699,107491,947,15458,74452,196212,6046,10498,12163,10239,35191,243951,9277,9090,29539,54460,22820,26514,112549,60372,51753,48756,21812,70861,260326,41,44222,10441,16961,48148,138771,216194,5914,52153,53400,212036,56519,26245,10117,45888,15294,138019,90913,26368,43842,42111,23348,6082,194845,161089,156206,51546,11647,30759,302912,262094,8635,78876,26535,35283,54183,31183,85484,147873,12989,5197,6356,72894,65347,20150,27370,73787,1493,45918,12366,190217,20724,13858,10981,67449,81213,7553,14115,72242,271517,11842,48310,88743,143726,22177,3290,243231,58452,62937,12592,1654,40066,33477,13751,9921,128442,15868,7106,75236,83773,10775,36938,10482,170465,17368,17469,161508,32752,98340,800,19824,264456,3901,87319,2867,26782,9630,113102,185815,24197,44584,86366,40224,3636,140916,31731,267731,9567,53678,72984,29389,27963,17106,50282,284911,60170,8322,12608,23374,89652,5268,39044,229766,8869,151350,31436,177342,12269,183212,120418,116270,2843,78888,69192,7865,184099,1086,129897,18383,70508,20242,18508,229924,124569,35749,50589,55626,9884,83115,40971,30671,18135,14452,38861,17844,201826,5549,26413,17189,13561,38539,10679,143331,3314,36785,171194,49685,187713,67506,4618,104039,17060,195080,50648,33159,19238,67559,134840,28599,157523,17130,38064,117398,94355,31918,13575,34538,40326,13997,3494,348283,62481,26862,3603,104426,244363,153709,112487,304612,199674,41239,35545,54869,293005,28223,26277,26899,4533,18518,15492,38587,80488,70485,160395,263,60162,11382,222152,4696,250751,51921,182609,10707,48463,46243,1227,49111,111564,46502,33342,56846,68541,63559,858,139927,16654,229375,76759,26478,33205,95828,23399,92945,2637,35630,28470,143992,50214,14174,21456,166191,65665,1711,21594,78019,97599,111701,36,147151,110246,189022,43021,30397,40757,131935,42065,73335,48039,26596,28984,15102,2361,7421,202167,69744,43766,52826,3642,83304,33873,75140,63169,192389,36551,92748,13039,123959,233220,21738,84447,77230,20228,187852,19095,25799,92136,108774,29237,53947,2299,118106,2687,8830,42331,202924,33667,2023,73763,30704,19363,19779,16737,35629,48081,24068,101013,162338,291912,13749,24745,328289,167679,70086,48299,23306,16732,17801,43322,54589,3586,63653,43624,53474,925,109177,251316,43805,13082,19511,86565,142182,92461,17117,101033,103319,64589,4022,4351,235897,5352,82705,107142,46391,156084,5860,61365,10558,13045,7717,18357,33922,12590,33065,6928,46993,783,46937,67846,8952,26295,6107,119656,18799,17458,50747,4229,179559,112727,118080,20683,41464,125468,51560,49749,44231,7359,35339,62988,136487,67015,5208,29150,24956,105186,48858,6143,18097,6972,16404,73489,58742,97196,36357,164616,5834,32267,13746,147733,15113,132091,34127,106298,39729,106426,22294,9780,15602,36213,71502,42808,66802,599,60755,5851,39120,67363,108623,126368,72770,91263,32486,30596,151717,7951,52002,43103,11768,68942,40901,39344,24037,127500,116890,48403,16926,86750,17745,48648,159545,34460,58419,5634,114317,67865,31462,23352,24010,98185,125708,69686,68337,13610,26271,70691,2980,4768,27225,102402,75453,28106,8104,6931,1176,6274,6475,112635,22498,6176,238686,26832,28893,90319,14441,15682,15087,39517,45270,109134,104440,45965,47645,81772,7876,52683,87720,12898,4505,185665,2769,113401,15664,57592,105229,137381,97059,119268,6876,43309,33886,128363,35476,144249,67013,143587,83367,25703,91436,59347,53236,2289,16519,19844,46309,58558,99834,23313,218816,231303,36388,51333,183535,109792,139277,54306,90139,18235,8275,32710,37677,82464,86025,92204,88842,117723,37570,128723,234242,76350,73795,34896,148247,58424,11105,11744,45746,63372,17118,49772,199520,81902,38004,22911,33752,3125,1995,53792,4689,26909,108150,146062,69674,41811,161444,84855,8999,28561,16731,93937,3189,21967,24890,22943,1356,145300,51569,28802,517,118679,31703,40607,48098,108854,25003,10233,73969,177495,5248,24516,215347,146192,48712,60626,69188,40735,5866,586,101541,6509,47590,52129,5969,222045,110933,25733,24223,65339,62812,2414,155418,35819,16022,78423,43138,20995,128255,240673,46745,236093,72176,57085,97841,61248,107,36068,193177,105427,55726,215229,20446,47228,100420,87091,14429,121708,23605,21157,187721,21880,2997,203976,99166,95068,25877,7724,98925,83401,4829,13182,18229,13718,239662,38653,116505,153497,30589,89029,38962,181302,43853,78872,180301,4786,248240,7401,106136,112590,77745,19731,60880,77789,125748,135487,5975,48627,34084,12419,215770,47557,254582,10364,106495,21856,67539,88981,38805,21428,48732,42316,12149,16078,52808,25327,51322,33850,51147,12253,122354,46077,56483,254553,115417,81834,150991,94662,86668,7381,12841,100650,18218,15741,22372,68294,50705,15535,84660,61887,22553,72299,31361,24824,17743,46820,64288,31582,77006,111674,116384,30760,80920,86149,77192,51979,79691,60342,122805,103800,240873,160744,233114,78962,54920,8608,3484,316104,72548,24337,5088,230040,21926,10172,36838,26,86221,83458,102176,12062,17571,41929,41170,28428,68239,41750,103930,2634,18313,53019,34825,97837,63115,24606,73157,152474,14715,91439,37033,109806,140259,30668,174760,380,135597,95673,136073,65073,134249,13829,17279,122305,4420,46444,10237,64848,203623,70728,10349,182885,65075,24519,25783,40318,34139,22222,63394,55266,102764,41422,20126,65100,90408,53640,35128,48932,11192,38935,96839,34782,39492,19396,41332,6250,5511,19492,51304,25936,104466,54099,73771,86115,5080,7669,30891,111700,13931,25276,72289,135447,14820,258641,25265,31005,281179,75286,393,95359,14623,13584,6680,101227,80173,44933,76666,54542,13244,39348,458,25379,109451,134348,81143,6959,65554,12027,51311,8716,57589,140731,28467,23316,17272,30458,25980,55229,77197,83798,28302,114784,7428,34548,26241,14712,39336,103304,18928,54080,12870,334,87722,15208,16895,142098,114262,39820,83913,57817,28682,7721,14900,108672,11250,62246,42849,415188,1724,26555,24549,25505,26443,107450,145899,61035,43528,6901,60726,65906,267741,21338,147590,42079,18924,73017,135236,15393,5206,4026,84185,1531,5988,113890,82647,303391,7386,69844,71611,189865,76523,31877,13315,19314,198575,32821,1928,67641,25913,104475,103489,3297,70391,18406,15446,113347,19295,93790,27856,1792,167471,116449,8541,4408,41757,63233,25765,86680,64501,27034,24816,34975,6079,4486,49693,36229,16917,21581,62426,27862,11612,54284,35702,194034,355,24277,48262,87411,70504,310164,118018,12516,47559,43502,57433,107139,9290,66533,80863,14634,34312,91725,28606,21342,67241,72355,43244,375789,37402,174015,105070,8342,44167,67494,1890,16365,11723,271002,1865,47918,8350,45564,27742,25110,125803,8553,49504,81925,62211,4534,15491,19011,80373,206920,667,102405,128623,245524,5553,113309,192739,65766,19567,22832,261958,29679,21293,71134,20962,105123,24721,860,21752,33448,18372,157167,94822,35770,173224,232737,75729,28937,46828,28062,25453,5207,140366,36665,30652,6169,67920,150458,92040,23186,184604,92330,20891,176492,49427,27828,38305,42495,143982,49560,25503,90043,29747,65328,47830,12932,11068,77721,9003,25213,94205,140426,46090,89945,138173,192691,33329,112232,129905,35709,27514,1841,19957,31411,127476,53572,17497,173549,55063,175135,19841,69314,5192,237921,117660,150697,4060,273045,50414,98940,65348,153665,164423,58804,156695,48994,213928,86036,28608,8355,39574,34540,16927,135680,18374,151587,10830,53805,16878,16623,4282,48030,8537,14986,46102,13062,72897,72,33050,108227,39451,45935,651,113320,40535,95176,57450,48843,5003,19019,10407,211163,3848,1068,4988,32091,30095,41692,15099,43602,107434,50744,7627,171349,16313,150832,352665,207750,33937,38256,51091,156e3,87889,90663,84175,24908,114900,50365,31494,83829,5398,169342,47521,54818,18935,8356,43094,41212,174536,10082,92550,6678,60614,23355,69721,14796,34149,128830,58187,3179,208,40325,28399,225029,401412,51150,31580,207268,6657,10993,69818,64282,289845,23308,12961,38447,6681,52944,31855,2572,47646,120728,179148,37240,45196,218274,4816,3695,21961,50084,35209,18073,51452,27004,6100,33941,1377,84831,171214,85,141510,9078,99227,32610,6417,11718,49868,65579,87902,73018,49062,46280,61742,21512,40862,107733,15941,29168,157765,144919,14487,5767,158014,140070,7241,573,71584,16921,223566,40331,179473,35081,47926,140885,41508,52104,59180,42310,32811,29048,123517,102413,80208,10104,14746,12649,153641,126022,37965,113017,4171,83,142592,2809,6362,50416,71323,116894,260776,16204,1524,5760,30351,12658,20703,54403,36083,45408,74772,4946,14485,50759,111222,10890,2195,167147,92962,130534,16283,177256,35016,15472,210156,151187,73922,117691,43250,52051,37392,24811,24358,30830,5775,818,21969,1476,127322,151783,58392,31021,106913,65215,89407,90802,28531,11690,20234,95249,44602,37256,18707,11928,5161,4410,26571,51903,49768,22008,25252,65780,209499,68769,203726,13249,137363,48845,86823,6658,5674,31881,1083,1823,108676,34518,166752,13791,14287,91576,91429,8665,11529,26401,16191,91972,30964,5254,28486,54697,79613,66520,18447,22870,45203,194466,22822,51703,12278,76716,44595,73455,33546,12235,144843,36154,51247,11116,33040,3180,225753,60864,1972,28469,12891,28879,10338,144157,56294,353058,38302,41447,87532,110616,27065,168438,6557,1213,50804,144643,24817,2390,136531,38174,247513,16190,4059,122791,131994,137430,39506,57650,16305,5188,54309,106128,20628,88071,67394,395446,250285,66176,91254,1399,114196,43915,60230,44853,27206,106353,43013,18733,345105,226453,51202,16607,57106,117175,35492,10476,89598,127439,15187,39624,13688,61570,10615,31111,59370,6238,175252,32143,224492,41388,95408,34384,148238,78307,38959,9340,160091,61443,15737,11216,41244,170,38299,102443,113097,26382,14027,33707,3957,76300,66160,19431,18900,6952,1717,108656,82206,188021,257335,27295,43999,41210,31777,46956,57457,12657,11489,15697,48060,204748,53583,82422,284790,30503,137341,8120,19615,220311,15991,10217,63424,9808,67431,70976,98221,4491,15177,28535,144789,751,13230,2394,1504,33977,132104,30316,22230,931,97193,185240,24826,22687,174322,15307,22988,1390,188745,180325,29580,59068,74903,18994,29195,79,15436,7622,38462,11566,138710,44828,45774,37768,99236,68137,84083,19282,22698,17134,74807,126662,173497,46248,16938,119735,3212,28292,213652,49013,9975,32180,45660,86250,4801,68788,95490,77482,113751,11994,44624,94452,46839,128497,100316,5798,58588,73184,202987,65417,37790,88524,1606,43156,97964,105717,34947,11203,100060,37742,130074,93653,107799,94311,196106,41347,8035,10780,16390,27883,118236,167395,1979,25006,19375,31628,18916,144723,78502,114047,103107,86492,107686,5844,20934,206963,23556,22591,16562,146333,20167,10471,117434,33085,2863,9740,36669,41849,37271,22790,18209,28979,8231,12952,54408,21731,25130,45208,55748,138120,75826,414,29593,9925,292865,25999,683,123149,7036,92159,86055,61827,103680,23176,54918,58466,57578,13305,5709,86479,16697,31064,17660,200919,10770,49793,33423,32370,52047,16488,62555,6459,8426,83493,7763,59725,82812,18628,67760,79405,68557,9612,7673,28102,56517,69620,171797,32458,29541,15870,81109,32080,207644,71495,21202,11039,91036,61230,2810,130800,32260,4613,60590,37112,75214,33979,126402,155062,30642,63875,12810,194463,82799,47664,16725,36685,43367,61099,449,172150,102867,21691,301838,36745,7130,18671,57316,34852,38034,54182,35578,65900,99486,19771,3456,2658,16914,99866,28390,28109,8262,21147,34353,20006,4228,137085,1675,203023,283196,198286,214375,163329,290603,152574,40471,83506,30068,14730,23177,131539,34759,27668,32178,71896,104799,116305,85430,119262,42860,25160,8911,23428,49437,105322,6519,16203,6349,74711,1230,38045,8540,75165,44736,25909,51026,317034,4984,32281,91312,27060,44431,17817,45363,155937,239085,35697,59784,91993,29531,126740,213757,76560,167776,285273,24262,8237,65030,41160,74437,48804,118916,13159,37842,1031,75349,1478,11655,108777,23435,277425,101734,67469,70231,124711,43532,28514,65526,54956,1e3,21882,17728,25302,40952,52214,149632,1999,2111,3259,63362,89961,220561,39777,26335,9063,10572,12416,34551,34623,38604,24723,5947,15588,69927,66252,119177,69173,46629,28714,70715,212408,20521,406913,74380,11716,50659,50862,37009,88460,130101,7210,53853,538,65120,151950,55806,163748,52837,13153,21100,16674,64536,6091,138201,44837,58547,3723,163,2177,32288,85454,34033,8497,14282,25742,10535,10741,79559,117493,243787,49337,100718,79495,40139,42956,7551,55433,15421,31509,23034,45081,547,61176,53434,328001,8470,36263,30145,4519,74173,53935,11845,73774,60211,78025,3,4102,73782,109293,315332,48412,26683,13714,6865,20128,18490,104141,325,39470,171970,115860,15707,7268,73301,74336,31370,2368,111827,107757,136231,142844,97138,96638,84053,38691,23801,1588,10573,122098,77039,240,186135,146101,11996,18143,112963,46171,155836,348769,47795,121213,116266,132515,3344,144804,31286,99187,255838,129694,35894,48779,55235,148582,71967,65282,15174,13920,47080,6147,108242,157593,125025,7136,1286,28957,127956,28402,98813,20805,7532,109417,40610,5041,32958,15142,18408,108596,33543,50517,27748,80114,233434,91447,487,37094,100048,30541,43477,10639,89862,155868,37667,8726,60684,237903,73408,99589,12190,38739,97348,3914,13594,2680,149016,13907,30171,28343,23530,115225,61104,35821,147679,14337,4297,244282,24085,326976,56428,7851,21303,131620,71446,83253,68692,111870,5224,15813,38197,49026,45057,13660,3306,76345,40671,27905,91072,996,68527,62085,91351,122634,55109,168209,2024,27560,112707,17352,8306,167115,169921,166958,5031,46020,11844,67284,19130,76185,6920,32849,5450,14610,22451,21002,17392,31872,66682,84796,13709,40210,59898,12029,8719,53564,21462,91884,21647,88379,194428,12754,37797,132826,160016,22567,54383,53186,77611,31107,8339,4694,19185,90355,23597,17222,140675,28442,23668,55977,9128,61555,28774,155229,17658,9390,24379,69357,15752,127381,239631,62460,93181,55913,45133,140155,18676,25249,33164,29581,82837,67223,22362,29975,7317,52813,1943,29613,20012,207130,49617,49651,5636,15334,36313,29226,28084,95247,72072,19e3,224932,15811,114,32127,38097,37508,88507,37225,27359,91626,12193,69279,20608,11055,88156,92808,2152,57259,55275,72789,24475,104414,1708,9882,3818,48661,66897,1631,34806,227930,85815,87753,18321,250664,72733,25107,206797,50891,8082,196411,92596,96764,152823,65514,22819,387277,62176,51225,40329,15563,189,3659,73670,64357,51793,275136,33482,86653,74615,67058,11318,125720,15388,22388,8267,1730,102663,170910,40784,7144,85373,13040,7088,94309,583,44224,140424,77439,18496,164026,36578,4722,9151,5824,63365,26510,35199,40500,79277,32495,44614,35233,9566,203293,152144,7097,2330,183480,98629,13423,330887,44130,68600,30939,97829,31012,345465,56747,94879,4939,160027,149761,99423,46099,32251,15332,8761,96094,128555,5763,235318,222223,55729,30241,55420,201746,3987,81382,8259,49325,23287,7719,24633,251100,92311,18591,110533,64759,170260,393860,7175,21144,132887,3593,75346,101277,91109,16387,259187,11627,57459,173829,44694,55780,49797,89192,120443,62622,3904,14814,23887,1027,112258,64955,99800,11132,66353,36202,48624,18158,88481,96882,43059,11040,2455,7077,21651,181159,99126,100434,61388,68186,19161,110468,120052,8819,55324,41494,7014,37689,3618,87729,92615,207943,9823,128657,12587,15857,6379,67628,51216,71775,157617,63244,1503,3864,218754,110864,5769,21492,7243,1192,87921,85529,31512,18537,42698,35350,73510,84474,34301,8991,21013,35034,566,38832,19838,35586,37216,39413,55006,12178,59742,856,84563,6900,25632,17437,49786,30723,13847,70845,4044,7843,23944,235976,55530,48942,6518,20939,73769,192653,52936,95207,23895,132542,142982,22632,87452,48042,54018,178468,10728,26230,23559,363,81269,142012,5718,346258,31456,84333,246476,51018,66692,101804,120570,39962,30373,70593,2864,60541,19425,54209,104092,7201,31545,48018,25865,15442,46257,40443,8328,6451,111782,47527,97754,33046,470,245116,31095,39,91934,87208,73470,36708,36521,12801,70624,36272,8892,79768,12427,55454,103756,5908,52390,62962,22720,141138,94634,41689,128402,126390,6628,106394,35527,134394,82727,254651,194502,148064,89549,3202,28359,957,21954,27906,49840,142747,8307,24206,48978,1186,71728,133038,71474,91306,6333,110959,74600,70387,18983,62609,56057,22970,1147,135850,1321,28834,3578,59715,102227,32827,81415,99952,55636,257598,390,22702,35701,85872,402916,39216,189795,14929,19467,10112,144422,61514,5279,63421,134686,41436,8424,51925,10598,132295,124416,4604,194739,210929,57866,31829,51626,50007,9976,91878,61906,56168,81906,60918,61859,40017,23059,16887,40927,62064,12785,32893,32913,21782,93965,20169,44387,79084,38463,11457,93950,27127,157050,2697,337088,5116,54128,48255,33279,8821,27352,25515,124022,65710,28906,38557,33390,1722,104435,72215,38551,12094,30978,25113,6671,37355,175109,42862,98024,65406,221276,59624,118012,64637,78760,86697,21426,1639,40350,12584,67193,84144,31396,7863,143011,69629,63112,9454,28666,65798,46372,134721,6314,51402,30837,151922,2847,38676,38008,92823,136245,17540,5504,109295,205242,37606,5211,214892,1586,20670,208711,137743,19328,40652,16995,20023,14657,154919,34422,12996,13918,38221,47690,16398,2959,37680,89122,6721,198469,91876,172043,83898,101992,26084,94570,3635,76958,22853,76497,38266,176590,168403,44464,142840,79180,184594,1984,41806,83147,11985,6546,366068,59732,24533,271505,8736,39084,222992,93429,28962,58985,86665,8432,30028,14548,32439,54424,165029,55175,27458,69046,121277,46168,33732,20661,24581,135574,123110,37556,79260,72611,16957,12939,46162,58238,44907,72936,253758,41324,32518,96480,11949,124438,65280,43256,34107,53533,43531,37037,28366,45970,32741,173438,6121,194202,62969,26355,30314,58370,28455,1848,50519,82830,90393,21761,295490,10936,256940,133568,44050,20269,4089,27457,21610,219460,36743,14821,101388,52005,13124,30979,140816,167362,26054,18458,60789,34917,40447,26606,33422,9066,3452,83614,5761,20263,137238,25038,91310,101,52322,74548,42572,38084,214054,186568,31802,17665,30620,141936,37730,14420,4265,187218,49640,188208,51441,55388,96452,66659,40869,42039,60967,221027,19234,178581,29105,96050,9165,196118,157335,3738,40354,117436,2965,34136,59659,15570,50843,230035,31444,71260,43886,18316,5387,38500,168508,17406,32174,8828,103373,143806,90367,3560,18719,122310,16508,26719,2541,105429,6645,37998,73190,10591,235916,49737,87112,233941,53188,32193,79154,4544,52905,126477,7580,63501,57314,3216,31337,6541,103083,60846,49,9756,15481,1355,43840,14319,13743,27486,10222,73114,230718,418644,16706,6674,279748,23058,45273,295831,86306,2743,5535,88773,21829,35253,120938,31153,3169,16839,42847,8751,80974,33942,36867,35514,16485,26474,77775,56877,5391,48346,3882,108713,31403,27804,55248,26235,43821,136104,40118,175507,28034,203908,18732,1788,34030,106427,36958,54359,7251,44936,15356,69139,455,157915,22173,140291,50348,43275,82066,49621,54952,15216,36226,96695,66855,6936,1987,8227,196087,4631,68827,99004,47541,110265,17953,147605,110242,58520,31312,38724,329975,642,3155,34497,75937,6207,73843,6120,17249,51429,117746,3218,910,68961,319671,14938,29555,34700,1649,66673,72268,9655,76800,153087,6941,210168,27130,35398,1780,73242,3135,56689,19556,165307,8765,35967,121458,13333,70453,17350,117253,22265,13340,44265,39869,441,3742,135025,23581,33309,16543,17731,13291,157637,283005,21408,101360,63887,52312,83873,5338,233779,23759,186949,34531,177320,38069,156465,91004,19353,59852,68160,14891,1338,1072,29823,1950,28901,81407,313445,73038,84807,162348,240257,37162,138934,16111,58013,41253,102951,16457,96056,19541,56402,67217,41638,94381,89674,29481,37456,80815,151579,13937,13683,132537,19699,134545,67020,29816,222341,141235,427578,48868,129557,233342,23077,87871,16213,18728,16184,9469,37913,19680,2798,171356,178328,13216,50049,72690,71904,124644,55455,7504,29052,41036,266546,19899,30391,188755,8659,59469,16,104298,112943,53865,76203,138226,68857,139953,14125,107625,119795,173133,4398,50273,48808,54390,16466,122086,31835,67035,50971,48859,7508,46427,66477,73021,84615,39985,83076,46779,201569,53336,36443,60865,168164,143810,51393,25548,169307,32896,24485,38424,21837,29087,275813,51674,6714,64883,46169,187369,55186,76192,12852,12018,62134,31067,118303,16542,12125,10579,4928,26291,43854,7091,10946,253716,109062,39283,17261,113012,258512,47764,125126,32646,55892,80279,201623,149872,3192,385,1208,48750,5376,58738,22335,5427,82416,47811,32435,143086,38930,94128,59975,156037,37977,38224,62485,7698,50405,71027,16462,21559,136153,34131,107506,162069,63703,3101,215029,40407,4178,3774,9187,80019,17880,97926,67579,2600,18405,8351,47924,86638,70820,92206,86453,29610,42241,119200,3198,15466,67813,57863,35454,4779,99518,4649,104641,144269,33730,38073,65864,6838,109456,193298,154007,5623,45741,30846,182578,25573,157224,1543,58575,138703,146140,44971,49356,18275,59064,20300,13122,11848,24453,11973,9797,86843,2919,25530,49210,1130,161220,76788,75373,85604,34926,36014,17777,17255,51533,11676,92226,51845,119859,21525,5936,18507,28050,1140,31418,14857,34207,47859,10750,36382,32079,106909,59426,87757,38393,110042,15965,97104,33757,35344,97993,53979,33651,45407,41884,82515,173089,7177,58371,35365,47543,51927,35587,10670,23544,29306,84233,39976,76076,62097,9007,8668,28119,78281,120790,19835,143020,54968,18670,64959,20649,34469,42570,33001,136570,87796,120044,1106,58700,63951,127623,12805,83057,40212,31773,49850,7361,54336,347524,101314,23751,19569,48791,29174,49369,20467,7465,75842,38281,623,112457,60210,28849,51003,94720,6426,90047,85560,43761,3579,85105,34607,90410,118528,7224,42907,111163,18168,6960,161135,191298,5247,100584,127552,171568,20121,91173,12636,54615,20199,63730,98105,2396,40387,14438,125012,4765,33235,12865,45299,37728,82098,77872,114037,59253,19675,24838,398016,102561,11446,17069,57508,178277,65836,99941,26114,2585,271882,136866,50126,11027,155648,118367,14585,8910,123015,335383,40434,41016,53021,14439,87098,176860,201543,121888,2358,9286,5739,22666,54270,37884,169381,33984,93859,16124,89364,72207,51639,76366,99029,65812,2198,12147,174891,194289,6986,30252,88822,21284,11445,288337,160821,33034,100869,43852,25761,52882,1144,103809,1924,84458,86079,43411,13542,139276,18141,34978,41298,7276,26481,173800,33210,17951,142652,33616,33677,2210,19941,98568,2486,192414,80136,12058,235883,50963,249638,29572,27221,47034,6124,72107,63346,97620,158513,299699,40388,23235,37176,224244,198386,121323,67992,23827,63170,17838,106622,158590,26807,5345,23489,91891,55474,74834,37981,13058,5977,72552,34706,26828,145172,19904,21367,34043,960,77092,91381,4733,47446,7680,41697,5170,16960,14741,46101,13656,473,51842,37433,11103,11551,121951,13191,97536,165932,50397,51628,129028,9069,44885,6590,59195,47045,32940,225472,90345,21833,13303,29407,96615,141951,5198,6028,18395,7181,3861,14966,156358,167182,36529,55253,25942,173153,30959,27261,50691,150176,162201,38467,48462,80602,42163,118482,168,108756,26011,17166,54149,456538,22512,91374,13816,90358,131615,18132,226707,1824,28139,26860,42253,93877,77351,65575,8980,80574,22020,27948,40422,91324,76376,13528,39281,91685,82215,122541,144066,1983,193851,17283,26320,2739,194978,4790,26845,42627,61300,65815,174612,55133,4200,191130,79771,158321,52280,166796,221620,62461,11278,4067,88152,83409,31717,121367,13522,47325,37945,10406,174348,249321,154101,64912,29938,51775,17220,15776,166138,78890,84425,54121,42861,16368,24572,291647,10197,32073,22651,11677,97509,26952,35787,18424,41910,71614,94977,72318,41594,70024,275419,37702,60199,7335,39107,61315,18271,18394,33768,87884,104277,123724,7277,56288,71981,189803,49320,3352,6798,14240,8954,69220,94433,57372,28620,68863,193727,85575,42309,41667,67689,42081,22543,44824,12719,28540,114236,101553,27638,27296,4300,5353,4663,19379,94098,3758,95888,95144,80344,87320,28447,259518,12718,71391,152731,37063,24132,31911,104896,15672,103782,1521,4945,72541,23717,122632,15619,87175,206120,29428,189780,61416,28350,44457,972,1175,47233,198738,95789,41907,21953,97034,59341,22864,53713,16873,32971,20693,20954,31336,21477,16169,38370,16412,9019,3841,24599,21938,17085,6484,81198,76413,5849,72514,12320,65247,276175,37234,59796,52642,16312,57349,198507,94148,46134,18958,125552,1747,18725,151873,14901,5490,68287,29470,3689,64794,40814,26018,25692,54450,2703,88278,124886,173087,174e3,24159,179477,24276,46004,201876,209202,445,52876,31948,30206,157610,39180,18439,44124,50469,5774,96278,222758,200216,50290,45486,20435,46986,46276,140133,142326,15569,13363,47522,92583,2182,7135,16853,22998,30272,4952,63263,35623,39096,53789,44864,20053,110392,124213,4630,16087,28221,127787,25839,77481,44693,13464,113146,6983,27069,55717,50102,4760,7107,26186,66507,59145,36032,104182,71328,29425,64317,50781,47465,94298,69706,74899,22754,120756,25108,93077,56834,73286,39928,16218,41699,176763,7555,70819,50083,26895,23315,26014,16773,123079,41712,5719,31516,90427,158540,85051,183128,40864,27505,55392,9058,45224,96857,30901,136622,96557,56304,120061,11501,151448,5773,89743,7769,86069,2935,18471,41628,10114,33660,110170,49479,26745,92846,33221,26731,18795,87076,8550,2100,29972,120289,3077,72490,33784,2630,208722,50861,63483,79029,6419,39467,14302,45286,64207,9686,67513,44170,1050,77246,59266,17055,53801,7150,11111,42432,4278,94579,362117,36175,42902,41933,39002,98489,22913,74161,84773,57036,17556,162288,74485,178760,93867,73635,128860,50362,261,67455,80001,46080,35662,4368,25247,19230,74393,22588,1822,27682,235324,13798,85998,13194,235067,23514,71669,147632,23191,134748,214683,105101,1518,25489,247114,7380,54842,26922,3971,26361,20844,68642,170517,77339,123255,8963,77818,150998,48466,36806,2732,23261,11741,236162,18243,126216,28690,50546,16385,92760,197383,246558,201295,88255,67588,71687,176076,172653,169058,33906,63747,24835,157621,43338,30050,46152,132741,2770,51371,94835,6614,15112,11749,56936,1250,19027,399017,58036,100215,23388,55815,308768,124152,94803,9521,64186,8971,28,30427,62163,7616,103838,35079,29203,131235,7743,17389,10882,37420,61460,228512,85363,41581,131077,62822,119647,10130,54445,26925,19968,29016,24446,74028,24176,61448,67185,9254,8563,119129,9771,99184,37716,39514,10532,221512,258753,218630,55980,23394,32141,61924,66749,32411,3741,36475,26678,77010,44946,91203,128749,116953,20476,49625,53116,13735,102335,29376,51946,83407,67892,59212,34685,21083,1546,112982,32972,74397,1078,190545,16082,86140,58591,89611,101531,10061,105104,76319,20035,17551,52611,169061,190842,100780,23907,90413,115619,9675,34710,193435,49443,129734,11183,258877,16318,136182,126808,44635,27304,192375,2599,125648,47051,12091,23814,721,58800,40137,66726,97930,60877,74487,7942,54326,9841,41428,13762,8211,85383,6950,99177,79806,201786,296464,124087,13144,29741,41721,47634,55088,254286,106408,17041,99064,12942,64086,45233,14005,2612,55827,255,7984,13980,38574,12776,46654,73499,249951,2101,26676,25996,132326,116415,119062,50449,31033,23038,11589,179252,20007,14860,129270,21143,17796,144715,60106,70758,69842,34674,282133,44014,16774,57268,38528,24053,46373,201667,28327,471023,51889,102667,21193,114909,84132,69317,96723,67969,16134,68145,15058,28765,32035,2524,101089,98664,25045,76571,14957,86040,118506,262428,154764,81573,39681,283900,73287,127825,544,80448,52347,38512,175971,15180,45467,33086,46552,48894,81107,43213,36672,54025,76703,8053,7608,13299,56619,20752,238099,54164,105133,1444,32942,953,37564,8e3,66316,119463,106817,404,13667,149108,128597,31267,10269,49836,106150,1484,52330,76965,160486,171648,38456,31263,22424,37738,66245,67467,143369,60471,75610,20895,115528,86070,60854,40796,49347,18989,15030,11371,37578,15779,79867,10187,86462,46402,155626,93200,40229,7090,57547,108053,99598,11088,47505,41218,206017,2173,20988,30219,22919,80563,57566,42369,93141,41675,2407,182519,120495,27154,16702,29456,14349,7958,16688,117177,140375,42467,261919,74916,153569,10836,34742,49526,7621,105997,12212,2270,392377,7755,17959,25086,232152,138791,33847,13860,35316,5811,1344,71259,50452,207539,92635,50359,5821,33674,30255,2086,2587,96264,17543,42,6029,9580,43007,139248,82831,12917,29607,25786,51467,42137,85161,100698,31561,88989,121990,278500,3602,109344,37982,15279,116442,28936,30880,87894,58079,128661,126731,67392,28051,146885,4861,16216,97344,42827,147561,153948,22684,21335,47685,1853,43349,15185,59642,10229,25520,187921,108972,5579,98037,24945,6697,19193,63734,137934,75056,89740,19767,224268,56138,63643,151661,39313,70618,84031,89723,84074,13703,85626,35460,8867,64845,3439,57906,99776,63968,49270,81130,34356,16210,23547,36446,34090,140028,72439,2221,22163,57058,363492,113754,18913,95451,48663,54464,54037,176097,68425,3023,34906,29482,117389,341780,80431,58330,16753,92616,60907,94846,147486,4498,48646,7773,46801,7778,18946,464978,47558,33223,177444,7328,15626,63337,94700,11743,9351,255024,39098,16447,42647,96230,39769,58840,10068,63439,35800,65843,58823,413844,9156,51258,7434,61791,85018,6872,3692,28096,7121,33024,6009,75532,31997,192535,9661,3304,9547,14753,31987,25314,55689,15896,20430,39472,31340,99744,25398,115569,54883,28719,205423,23071,57855,64638,149867,25671,82403,37616,20668,39989,77996,74948,140555,175248,64810,36515,46595,4958,248773,24045,28728,136673,168704,20804,114833,100325,27135,21205,96151,153134,45992,7093,13992,76047,1980,19432,145001,75159,87462,17710,1013,45556,34297,144882,20648,26061,11319,129567,108555,18872,464580,33386,22717,65948,167189,5603,135042,79542,8801,202632,18114,91882,5973,5239,67315,4431,60916,47819,71693,32597,32606,18183,45072,80329,76385,24749,51305,40314,156514,14693,130345,13168,66214,18029,12858,34801,27628,14544,10823,40522,40185,33739,148694,23548,9923,61012,28859,17933,19442,34364,99849,164107,141167,30629,21054,6744,36491,8096,42474,41706,155060,30650,10600,163442,1143,96655,61390,52359,7559,51568,64256,203854,4467,22453,14504,436398,7878,6980,8293,63610,293747,16167,35763,19627,147603,15419,18032,110744,51346,33681,54571,40472,48615,39073,21604,13754,173027,92560,11083,47299,63062,11813,52007,29883,9734,139722,15953,1550,20651,13616,49306,16113,90089,92326,7584,30712,72424,164858,6831,152871,55746,197721,34167,196442,6022,112107,55215,7538,123381,4920,43539,77165,8939,50392,34192,20225,79762,22505,58667,40770,29788,97180,82835,4568,8579,13273,363569,35898,49983,436,36598,3237,131691,62418,35591,8101,4073,379438,65218,76072,33887,2968,27573,212619,288680,68278,72851,150504,217896,6913,121339,22017,35340,51072,43616,75043,31437,10833,81487,4364,22968,41454,106687,85446,19863,109625,149241,524,141850,214404,54376,657,237023,9401,108137,53800,32474,49712,53334,126876,27337,45552,177696,8269,15036,12097,42240,2328,125374,119295,99715,2500,19624,39441,27220,102691,60957,94543,39101,18566,67362,13975,78230,25017,34017,239007,90027,39351,41681,35354,43822,1043,916,58587,141983,94818,38799,75459,41114,67432,16195,36606,59568,22272,126769,31424,68659,12287,134302,257977,5756,207285,95637,47248,117689,19583,77451,22373,12200,54993,117118,34244,29386,34562,53819,71267,64172,77665,49368,7716,59301,25749,45426,194789,17297,2650,1766,32501,45198,20403,20984,6600,14171,94604,19037,5402,29896,9938,59935,109708,88081,145182,44844,39167,352626,164173,35374,45982,6122,154,73419,220487,53834,53601,17992,8609,229321,5610,68098,66815,71012,95069,140968,27396,8957,134489,24656,86659,56598,134852,17316,123838,255436,6613,41610,138033,81452,32023,32396,123687,63398,8693,29712,30407,19296,121188,3551,36099,20032,111948,56624,16547,27453,35916,15378,52039,56849,13489,22214,73177,53097,277349,2157,14029,187886,10260,141743,246460,91880,50869,3788,49486,133566,54950,33120,129337,53768,18333,9525,26902,312251,10297,9020,70759,16647,112432,59260,84609,9818,82766,73569,468,46001,75780,55028,52106,11498,43645,108069,17150,17753,29417,16705,31799,9606,289,122254,115975,8620,6133,255357,56908,14456,133464,43554,79224,11247,29630,160,12756,25464,65960,350428,62521,321796,100359,67358,35169,46172,113128,48988,88868,31094,33266,6847,60887,98188,49659,69117,92977,220228,13947,80181,35103,62170,97351,13475,2440,199768,19498,36597,46971,25234,67806,62881,84717,73648,181966,10488,94149,21550,26655,63436,48375,14405,165650,9621,24439,28043,42735,4490,29963,56674,45373,1934,262446,50855,67098,26898,5261,52696,40644,33900,9440,180286,87162,22940,19704,26936,69769,10254,101759,27406,12243,48e3,73926,113215,54935,5726,192787,4312,106216,9366,11550,52949,23457,212271,277152,133895,108374,6191,96477,29980,218916,58024,54696,40853,91124,65894,91170,65908,252552,6793,29212,15389,44516,122515,52617,35058,9017,103536,39510,49136,19242,130652,662077,74699,47024,31422,8517,73351,24399,13867,128360,4810,4434,61779,111983,61036,17798,110240,59722,102960,39688,10001,23803,23039,176498,56659,44814,134295,17188,77577,74466,226175,102472,154333,63900,111747,18062,41171,79669,32773,408933,42562,28931,30907,107388,43487,2946,240310,23938,24354,319,184983,7927,6488,1422,10790,68809,68209,64775,4361,202,17123,59634,51200,44391,18188,17843,2619,74278,3230,9540,47187,21702,36274,56894,43907,16310,34790,16866,6150,5561,13587,107545,108873,126867,86986,28640,33427,19017,5762,80637,17430,46903,2047,131055,25958,13558,5444,47152,13900,44563,122857,45348,70863,39593,54332,38068,33637,318,40310,143467,18502,24520,11377,62013,28942,27246,28269,83545,17999,59015,90707,30065,15161,34720,1263,37008,2012,6060,98575,92933,5721,299,199555,24578,29223,2985,743,115825,109523,136657,47454,26378,53586,3733,174945,93340,244456,5693,37386,28782,89767,27545,23573,18798,136425,34320,84778,20041,48453,38215,7477,71958,40621,8773,5874,187927,105965,51100,43533,18083,8443,10180,43597,2003,183999,69689,12216,129696,146188,62389,34044,68410,12765,43273,26949,266807,3345,34477,79197,5688,47539,213110,21634,22257,50092,32222,42346,39530,63668,98,134978,74022,5152,59088,174145,37220,9934,9545,118937,5724,87240,19875,15784,40143,23263,87513,181654,285152,37881,263241,4966,43934,10433,186657,6470,74416,225854,25908,142677,246262,32280,6192,75890,45546,143264,135305,29742,47013,77787,11732,126658,8763,37950,21806,57557,113464,89465,108995,164574,23894,22996,23169,15369,23117,17642,130607,40503,36239,280990,44666,9981,40427,147487,26869,168452,32886,32991,46798,240839,15111,70502,65697,88548,44145,28701,48767,31139,206777,35659,181164,166262,14554,171445,31786,66523,76607,17956,6507,31279,90476,116611,167918,6560,1243,115324,80128,41867,55897,187323,37069,32596,189444,145931,13390,105530,65709,26805,6999,55714,41300,22915,68951,22138,21120,22264,10058,19945,33635,56123,99085,10032,5818,6016,46649,57476,35264,94413,112522,262288,93686,83038,14341,23204,28807,66084,77987,6101,126673,7133,38126,5923,122091,170240,97772,46874,215746,43948,41622,3272,55596,8332,146411,251315,13533,8561,81521,115449,48616,175175,2063,186556,3036,134537,75772,29728,82360,22973,186559,86348,89100,38388,82297,45610,2613,87082,9986,177812,57884,23591,47485,42543,33582,44713,74439,257444,252451,31825,35631,38540,33066,5147,13973,4343,51830,70378,22827,26448,95560,36896,241741,48067,203953,298860,61620,20450,3220,67272,6586,107662,100160,108684,6929,57226,4762,7457,1320,40404,77204,99309,62750,208653,59977,44e3,74315,34332,5819,172217,64904,114077,18147,84012,1791,98456,90930,21446,116669,103938,7422,85140,59713,5768,326211,16239,75411,13229,29398,10758,236107,1539,112472,95979,152154,151294,306,21196,38146,10700,6891,84282,109646,56492,40539,6589,119491,51354,30685,140209,136906,29622,73617,49553,70525,51671,166869,139616,74395,37439,49595,45678,11959,33211,86560,52434,9282,62690,112155,130810,5243,108261,99970,265613,72551,80049,6391,33365,90721,66737,69872,87011,1860,9032,112544,60905,37371,89015,140351,19076,850,373531,2802,36725,218795,72062,28990,16550,24614,7815,6187,26336,33373,32162,42791,73555,32062,23386,10244,56392,49442,27076,136262,12412,14883,1134,33675,97153,199281,15608,100152,74072,47942,254301,36451,16026,10687,65067,56708,254030,30290,50490,13864,57941,259331,35588,23485,43486,24869,21620,92971,22072,88645,1048,182050,13343,32452,14825,19509,3325,216938,45740,99716,189082,53740,78245,25609,24311,176777,47340,308354,40669,66085,14102,125339,9225,128709,97207,1271,200933,78439,113451,88975,18324,46521,11819,18570,141756,72512,170020,52754,63550,118515,103073,93330,32736,50499,14722,31600,68452,398867,29316,172786,18417,104924,2606,5670,84818,16288,67106,59580,82929,607401,291,85829,359,15897,35830,50696,65630,52672,22115,356968,29895,40837,231192,34024,38957,26722,406,23335,124952,72068,68804,13268,147101,164740,276569,162596,66943,11569,26654,66358,4777,23229,102127,5848,978,2921,59666,5371,28212,90108,42938,39320,2499,4271,108792,33510,125072,71653,65239,38250,66357,38577,13964,86251,35708,50755,36010,29448,12209,3844,38222,206337,100876,67827,137088,14167,252225,84163,195270,1306,5703,54198,779,46802,22028,51124,86759,70560,113164,35685,162145,45471,34561,422,2611,6464,47486,19223,38246,9191,18331,89942,243642,212364,15893,17518,22617,6409,30046,126182,59716,36560,104428,18846,26592,19458,50793,147333,30826,1388,27647,10922,14495,33545,19269,135828,39727,41601,46931,233379,49169,131130,182112,16276,82381,118209,142445,128310,19672,28740,82907,33436,3118,102206,28723,24819,41937,38854,5157,3881,111491,1142,9776,421673,152241,29309,14961,87854,6054,15424,3796,82656,54996,2108,55367,239450,154525,9643,118103,106041,64601,68549,48707,30266,25772,18740,9462,229669,91798,112152,191327,14493,72828,8175,66636,236474,25817,87351,129027,76653,20422,22983,71240,27846,44661,12399,46158,77704,53101,35032,11072,17300,109294,33638,24408,1895,11241,760,17584,82479,125877,63150,141075,34259,23274,81698,15732,43577,48340,91584,14688,16379,24481,150280,96420,262050,48635,43727,61819,56268,72003,88178,17281,79912,13218,122519,125295,166396,11811,2171,118930,67746,17636,178278,174656,95661,173039,83845,79689,17473,98555,127696,203415,54730,22925,232239,9309,12136,175026,20740,180188,10747,39816,314017,266131,10040,175732,112550,220651,31974,37393,888,23008,86799,4303,64905,148467,75337,251,3284,370102,50264,9835,5438,23655,4481,29851,329,12855,7162,64931,78141,12804,42372,296771,83547,18624,34874,86271,3360,48665,77735,88767,11463,63527,28889,22258,29140,194315,113924,25499,6406,31334,1845,4802,49184,43455,35469,127594,92970,61038,115005,38840,87761,106838,8811,20572,55637,11162,96721,132425,108925,2948,125457,36356,3502,75270,27622,127192,2561,123095,49394,61155,16897,110064,9699,89448,53356,19628,220310,21622,83036,9885,112214,6087,26713,17901,161912,91492,3440,68594,9266,92238,8087,6866,150194,72175,80701,13459,31836,43243,239700,95846,44749,50647,21945,230538,120612,132371,244604,5193,105637,34661,41341,68775,85393,1874,8771,33718,49672,77403,595452,99507,6490,58895,128742,7704,39239,73217,43816,62824,37804,199976,22361,80005,87514,94832,14089,4574,139975,59142,75523,100268,43906,53442,15152,2547,186002,17011,19513,204282,3343,60568,128318,119250,4298,51871,41336,71759,21921,45074,98169,145889,99427,11350,1237,5520,28799,7803,53702,21026,136352,38293,128690,12158,90132,44600,10184,26957,39459,126025,78904,82999,59373,39301,150198,120529,153042,20177,50089,14764,271571,30530,123161,38975,101562,22941,5648,124654,109243,69817,71675,49162,106884,21241,107795,30258,16572,188262,141456,7688,60718,8271,11044,32440,104608,103419,236109,93156,43293,128929,42107,67180,25201,115254,185488,130954,72813,167547,20537,39969,38432,22582,184022,1139,27199,5655,17767,97412,122606,209377,27070,35871,326617,188954,42680,73512,80911,22629,3011,95021,315242,157737,383,41821,41808,19335,27950,15674,25677,110950,35375,76835,59108,57370,35262,16569,160415,37706,78086,32041,49691,137143,9782,172080,50148,77917,6323,10110,69172,17711,21795,59511,76184,135114,31046,132319,59105,157578,20549,80778,57649,158421,65143,4575,72235,21899,10797,92745,34035,106079,80159,4508,78304,25350,75457,46458,32937,25623,47,8531,104751,84953,8138,36508,187199,66310,115274,13253,32461,38536,1916,42007,187160,35055,26325,84394,35963,94216,45590,97782],at={get(t=globalThis){const e=t.crypto;if(null==e||null==e.subtle)throw Object.assign(new Error("Missing Web Crypto API. The most likely cause of this error is that this page is being accessed from an insecure context (i.e. not HTTPS). For more information and possible resolutions see https://github.com/libp2p/js-libp2p-crypto/blob/master/README.md#web-crypto-api"),{code:"ERR_MISSING_WEB_CRYPTO"});return e}};r(22);var ct=r(5736);var ut,lt,ht,dt;(function(t){t["RSA"]="RSA",t["Ed25519"]="Ed25519",t["Secp256k1"]="Secp256k1"})(ut||(ut={})),function(t){t[t["RSA"]=0]="RSA",t[t["Ed25519"]=1]="Ed25519",t[t["Secp256k1"]=2]="Secp256k1"}(lt||(lt={})),function(t){t.codec=()=>(0,l.Ji)(lt)}(ut||(ut={})),function(t){t.codec=()=>(0,l.yw)({1:{name:"Type",codec:ut.codec()},2:{name:"Data",codec:l.aI}}),t.encode=e=>(0,l.LE)(e,t.codec()),t.decode=e=>(0,l.C6)(e,t.codec())}(ht||(ht={})),function(t){t.codec=()=>(0,l.yw)({1:{name:"Type",codec:ut.codec()},2:{name:"Data",codec:l.aI}}),t.encode=e=>(0,l.LE)(e,t.codec()),t.decode=e=>(0,l.C6)(e,t.codec())}(dt||(dt={}));r(1041),r(1352);r(4292),r(5970);function ft(t,e){let r=Uint8Array.from(t.abs().toByteArray());if(r=0===r[0]?r.slice(1):r,null!=e){if(r.length>e)throw new Error("byte array longer than desired length");r=(0,y.z)([new Uint8Array(e-r.length),r])}return(0,g.B)(r,"base64url")}function pt(t){const e=gt(t);return new ct.jsbn.BigInteger((0,g.B)(e,"base16"),16)}function gt(t,e){let r=(0,p.m)(t,"base64urlpad");if(null!=e){if(r.length>e)throw new Error("byte array longer than desired length");r=(0,y.z)([new Uint8Array(e-r.length),r])}return r}var yt=r(4141);const mt={"P-256":256,"P-384":384,"P-521":521},wt=Object.keys(mt);wt.join(" / ");var vt=r(1058);function Et(t){const e=t?.algorithm??"AES-GCM";let r=t?.keyLength??16;const n=t?.nonceLength??12,i=t?.digest??"SHA-256",s=t?.saltLength??16,o=t?.iterations??32767,a=at.get();async function c(t,c){const u=a.getRandomValues(new Uint8Array(s)),l=a.getRandomValues(new Uint8Array(n)),h={name:e,iv:l};"string"===typeof c&&(c=(0,p.m)(c));const d={name:"PBKDF2",salt:u,iterations:o,hash:{name:i}},f=await a.subtle.importKey("raw",c,{name:"PBKDF2"},!1,["deriveKey","deriveBits"]),g=await a.subtle.deriveKey(d,f,{name:e,length:r},!0,["encrypt"]),m=await a.subtle.encrypt(h,g,t);return(0,y.z)([u,h.iv,new Uint8Array(m)])}async function u(t,c){const u=t.slice(0,s),l=t.slice(s,s+n),h=t.slice(s+n),d={name:e,iv:l};"string"===typeof c&&(c=(0,p.m)(c));const f={name:"PBKDF2",salt:u,iterations:o,hash:{name:i}},g=await a.subtle.importKey("raw",c,{name:"PBKDF2"},!1,["deriveKey","deriveBits"]),y=await a.subtle.deriveKey(f,g,{name:e,length:r},!0,["decrypt"]),m=await a.subtle.decrypt(d,y,h);return new Uint8Array(m)}r*=8;const l={encrypt:c,decrypt:u};return l}r(2328);var bt=r(1809);function St(t){if(isNaN(t)||t<=0)throw X(new Error("random bytes length must be a Number bigger than 0"),"ERR_INVALID_LENGTH");return bt(t)}r(5070);function _t(t){const e=ct.asn1.fromDer((0,g.B)(t,"ascii")),r=ct.pki.privateKeyFromAsn1(e);return{kty:"RSA",n:ft(r.n),e:ft(r.e),d:ft(r.d),p:ft(r.p),q:ft(r.q),dp:ft(r.dP),dq:ft(r.dQ),qi:ft(r.qInv),alg:"RS256"}}function Rt(t){if(null==t.n||null==t.e||null==t.d||null==t.p||null==t.q||null==t.dp||null==t.dq||null==t.qi)throw X(new Error("JWK was missing components"),"ERR_INVALID_PARAMETERS");const e=ct.pki.privateKeyToAsn1({n:pt(t.n),e:pt(t.e),d:pt(t.d),p:pt(t.p),q:pt(t.q),dP:pt(t.dp),dQ:pt(t.dq),qInv:pt(t.qi)});return(0,p.m)(ct.asn1.toDer(e).getBytes(),"ascii")}function It(t){const e=ct.asn1.fromDer((0,g.B)(t,"ascii")),r=ct.pki.publicKeyFromAsn1(e);return{kty:"RSA",n:ft(r.n),e:ft(r.e)}}function Ct(t){if(null==t.n||null==t.e)throw X(new Error("JWK was missing components"),"ERR_INVALID_PARAMETERS");const e=ct.pki.publicKeyToAsn1({n:pt(t.n),e:pt(t.e)});return(0,p.m)(ct.asn1.toDer(e).getBytes(),"ascii")}function At(t,e){return e.map((e=>pt(t[e])))}function Tt(t){return ct.pki.setRsaPrivateKey(...At(t,["n","e","d","p","q","dp","dq","qi"]))}function kt(t){return ct.pki.setRsaPublicKey(...At(t,["n","e"]))}async function Pt(t){const e=await at.get().subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign","verify"]),r=await Ot(e);return{privateKey:r[0],publicKey:r[1]}}async function Nt(t){const e=await at.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["sign"]),r=[e,await Bt(t)],n=await Ot({privateKey:r[0],publicKey:r[1]});return{privateKey:n[0],publicKey:n[1]}}async function Lt(t,e){const r=await at.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["sign"]),n=await at.get().subtle.sign({name:"RSASSA-PKCS1-v1_5"},r,Uint8Array.from(e));return new Uint8Array(n,0,n.byteLength)}async function Dt(t,e,r){const n=await at.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]);return await at.get().subtle.verify({name:"RSASSA-PKCS1-v1_5"},n,e,r)}async function Ot(t){if(null==t.privateKey||null==t.publicKey)throw X(new Error("Private and public key are required"),"ERR_INVALID_PARAMETERS");return await Promise.all([at.get().subtle.exportKey("jwk",t.privateKey),at.get().subtle.exportKey("jwk",t.publicKey)])}async function Bt(t){return await at.get().subtle.importKey("jwk",{kty:t.kty,n:t.n,e:t.e},{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["verify"])}function xt(t,e,r,n){const i=e?kt(t):Tt(t),s=(0,g.B)(Uint8Array.from(r),"ascii"),o=n(s,i);return(0,p.m)(o,"ascii")}function Ut(t,e){return xt(t,!0,e,((t,e)=>e.encrypt(t)))}function Mt(t,e){return xt(t,!1,e,((t,e)=>e.decrypt(t)))}async function Vt(t,e){const r=Et(),n=await r.encrypt(t,e);return vt.base64.encode(n)}class Kt{constructor(t){this._key=t}async verify(t,e){return await Dt(this._key,e,t)}marshal(){return Ct(this._key)}get bytes(){return ht.encode({Type:ut.RSA,Data:this.marshal()})}encrypt(t){return Ut(this._key,t)}equals(t){return(0,yt.f)(this.bytes,t.bytes)}async hash(){const{bytes:t}=await c.sha256.digest(this.bytes);return t}}class Ft{constructor(t,e){this._key=t,this._publicKey=e}genSecret(){return St(16)}async sign(t){return await Lt(this._key,t)}get public(){if(null==this._publicKey)throw X(new Error("public key not provided"),"ERR_PUBKEY_NOT_PROVIDED");return new Kt(this._publicKey)}decrypt(t){return Mt(this._key,t)}marshal(){return Rt(this._key)}get bytes(){return dt.encode({Type:ut.RSA,Data:this.marshal()})}equals(t){return(0,yt.f)(this.bytes,t.bytes)}async hash(){const{bytes:t}=await c.sha256.digest(this.bytes);return t}async id(){const t=await this.public.hash();return(0,g.B)(t,"base58btc")}async export(t,e="pkcs-8"){if("pkcs-8"===e){const e=new ct.util.ByteBuffer(this.marshal()),r=ct.asn1.fromDer(e),n=ct.pki.privateKeyFromAsn1(r),i={algorithm:"aes256",count:1e4,saltSize:16,prfAlgorithm:"sha512"};return ct.pki.encryptRsaPrivateKey(n,t,i)}if("libp2p-key"===e)return await Vt(this.bytes,t);throw X(new Error(`export format '${e}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}}async function jt(t){const e=_t(t),r=await Nt(e);return new Ft(r.privateKey,r.publicKey)}function qt(t){const e=It(t);return new Kt(e)}async function Ht(t){const e=await Nt(t);return new Ft(e.privateKey,e.publicKey)}async function Gt(t){const e=await Pt(t);return new Ft(e.privateKey,e.publicKey)}var zt=r(8334),$t=r(7041),Wt=r(1099);const Yt=32,Qt=64,Xt=32;async function Jt(){const t=Wt.P6.randomPrivateKey(),e=await Wt.$3(t),r=re(t,e);return{privateKey:r,publicKey:e}}async function Zt(t){if(t.length!==Xt)throw new TypeError('"seed" must be 32 bytes in length.');if(!(t instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, or Uint8Array.');const e=t,r=await Wt.$3(e),n=re(e,r);return{privateKey:n,publicKey:r}}async function te(t,e){const r=t.slice(0,Xt);return await Wt.Xx(e,r)}async function ee(t,e,r){return await Wt.T(e,r,t)}function re(t,e){const r=new Uint8Array(Qt);for(let n=0;n<Xt;n++)r[n]=t[n],r[Xt+n]=e[n];return r}class ne{constructor(t){this._key=ue(t,Yt)}async verify(t,e){return await ee(this._key,e,t)}marshal(){return this._key}get bytes(){return ht.encode({Type:ut.Ed25519,Data:this.marshal()})}equals(t){return(0,yt.f)(this.bytes,t.bytes)}async hash(){const{bytes:t}=await c.sha256.digest(this.bytes);return t}}class ie{constructor(t,e){this._key=ue(t,Qt),this._publicKey=ue(e,Yt)}async sign(t){return await te(this._key,t)}get public(){return new ne(this._publicKey)}marshal(){return this._key}get bytes(){return dt.encode({Type:ut.Ed25519,Data:this.marshal()})}equals(t){return(0,yt.f)(this.bytes,t.bytes)}async hash(){const{bytes:t}=await c.sha256.digest(this.bytes);return t}async id(){const t=await $t.identity.digest(this.public.bytes);return zt.base58btc.encode(t.bytes).substring(1)}async export(t,e="libp2p-key"){if("libp2p-key"===e)return await Vt(this.bytes,t);throw X(new Error(`export format '${e}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}}function se(t){if(t.length>Qt){t=ue(t,Qt+Yt);const e=t.slice(0,Qt),r=t.slice(Qt,t.length);return new ie(e,r)}t=ue(t,Qt);const e=t.slice(0,Qt),r=t.slice(Yt);return new ie(e,r)}function oe(t){return t=ue(t,Yt),new ne(t)}async function ae(){const{privateKey:t,publicKey:e}=await Jt();return new ie(t,e)}async function ce(t){const{privateKey:e,publicKey:r}=await Zt(t);return new ie(e,r)}function ue(t,e){if(t=Uint8Array.from(t??[]),t.length!==e)throw X(new Error(`Key must be a Uint8Array of length ${e}, got ${t.length}`),"ERR_INVALID_KEY_TYPE");return t}var le=r(4618);function he(){return le.P6.randomPrivateKey()}async function de(t,e){const{digest:r}=await c.sha256.digest(e);try{return await le.Xx(r,t)}catch(n){throw X(n,"ERR_INVALID_INPUT")}}async function fe(t,e,r){try{const{digest:n}=await c.sha256.digest(r);return le.T(e,n,t)}catch(n){throw X(n,"ERR_INVALID_INPUT")}}function pe(t){const e=le.E9.fromHex(t).toRawBytes(!0);return e}function ge(t){try{le.$3(t,!0)}catch(e){throw X(e,"ERR_INVALID_PRIVATE_KEY")}}function ye(t){try{le.E9.fromHex(t)}catch(e){throw X(e,"ERR_INVALID_PUBLIC_KEY")}}function me(t){try{return le.$3(t,!0)}catch(e){throw X(e,"ERR_INVALID_PRIVATE_KEY")}}class we{constructor(t){ye(t),this._key=t}async verify(t,e){return await fe(this._key,e,t)}marshal(){return pe(this._key)}get bytes(){return ht.encode({Type:ut.Secp256k1,Data:this.marshal()})}equals(t){return(0,yt.f)(this.bytes,t.bytes)}async hash(){const{bytes:t}=await c.sha256.digest(this.bytes);return t}}class ve{constructor(t,e){this._key=t,this._publicKey=e??me(t),ge(this._key),ye(this._publicKey)}async sign(t){return await de(this._key,t)}get public(){return new we(this._publicKey)}marshal(){return this._key}get bytes(){return dt.encode({Type:ut.Secp256k1,Data:this.marshal()})}equals(t){return(0,yt.f)(this.bytes,t.bytes)}async hash(){const{bytes:t}=await c.sha256.digest(this.bytes);return t}async id(){const t=await this.public.hash();return(0,g.B)(t,"base58btc")}async export(t,e="libp2p-key"){if("libp2p-key"===e)return await Vt(this.bytes,t);throw X(new Error(`export format '${e}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}}function Ee(t){return new ve(t)}function be(t){return new we(t)}async function Se(){const t=await he();return new ve(t)}const _e={rsa:n,ed25519:i,secp256k1:s};function Re(t){const e=Object.keys(_e).join(" / ");return X(new Error(`invalid or unsupported key type ${t}. Must be ${e}`),"ERR_UNSUPPORTED_KEY_TYPE")}function Ie(t){if(t=t.toLowerCase(),"rsa"===t||"ed25519"===t||"secp256k1"===t)return _e[t];throw Re(t)}function Ce(t,e){return e=(e??"rsa").toLowerCase(),Ie(e),t.bytes}r(2515);var Ae=r(7285);const Te=15;class ke{constructor(t){const{peerRouting:e,routingTable:r,refreshInterval:n,refreshQueryTimeout:i,lan:s}=t;this.log=(0,Q.kg)(`libp2p:kad-dht:${s?"lan":"wan"}:routing-table:refresh`),this.peerRouting=e,this.routingTable=r,this.refreshInterval=n??B,this.refreshQueryTimeout=i??x,this.commonPrefixLengthRefreshedAt=[],this.refreshTable=this.refreshTable.bind(this)}init(t){}async start(){this.log(`refreshing routing table every ${this.refreshInterval}ms`),this.refreshTable(!0)}async stop(){null!=this.refreshTimeoutId&&clearTimeout(this.refreshTimeoutId)}refreshTable(t=!1){this.log("refreshing routing table");const e=this._maxCommonPrefix(),r=this._getTrackedCommonPrefixLengthsForRefresh(e);this.log(`max common prefix length ${e}`),this.log(`tracked CPLs [ ${r.map((t=>t.toISOString())).join(", ")} ]`),Promise.all(r.map((async(n,i)=>{try{if(await this._refreshCommonPrefixLength(i,n,t),0===this._numPeersForCpl(e)){const e=Math.min(2*(i+1),r.length-1);for(let r=i+1;r<e+1;r++)try{await this._refreshCommonPrefixLength(r,n,t)}catch(s){this.log.error(s)}}}catch(s){this.log.error(s)}}))).catch((t=>{this.log.error(t)})).then((()=>{this.refreshTimeoutId=setTimeout(this.refreshTable,this.refreshInterval),null!=this.refreshTimeoutId.unref&&this.refreshTimeoutId.unref()})).catch((t=>{this.log.error(t)}))}async _refreshCommonPrefixLength(t,e,r){if(!r&&e.getTime()>Date.now()-this.refreshInterval)return void this.log("not running refresh for cpl %s as time since last refresh not above interval",t);const n=await this._generateRandomPeerId(t);this.log("starting refreshing cpl %s with key %p (routing table size was %s)",t,n,this.routingTable.size);const i=new Y.TimeoutController(this.refreshQueryTimeout);try{const e=await Ae(this.peerRouting.getClosestPeers(n.toBytes(),{signal:i.signal}));this.log(`found ${e} peers that were close to imaginary peer %p`,n),this.log("finished refreshing cpl %s with key %p (routing table size is now %s)",t,n,this.routingTable.size)}finally{i.clear()}}_getTrackedCommonPrefixLengthsForRefresh(t){t>Te&&(t=Te);const e=[];for(let r=0;r<=t;r++)e[r]=this.commonPrefixLengthRefreshedAt[r]??new Date;return e}async _generateRandomPeerId(t){if(null==this.routingTable.kb)throw new Error("Routing table not started");const e=St(2),r=(e[1]<<8)+e[0],n=await this._makePeerId(this.routingTable.kb.localNodeId,r,t);return(0,w.cv)(n)}async _makePeerId(t,e,r){if(r>Te)throw new Error(`Cannot generate peer ID for common prefix length greater than ${Te}`);const n=new DataView(t.buffer,t.byteOffset,t.byteLength),i=n.getUint16(0,!1),s=i^32768>>r,o=65535<<16-(r+1),a=s&o|e&~o,u=ot[a],l=new ArrayBuffer(34),h=new DataView(l,0,l.byteLength);return h.setUint8(0,c.sha256.code),h.setUint8(1,32),h.setUint32(2,u,!1),new Uint8Array(h.buffer,h.byteOffset,h.byteLength)}_maxCommonPrefix(){let t=0;for(const e of this._prefixLengths())e>t&&(t=e);return t}_numPeersForCpl(t){let e=0;for(const r of this._prefixLengths())r===t&&e++;return e}*_prefixLengths(){if(null!=this.routingTable.kb)for(const{id:t}of this.routingTable.kb.toIterable()){const e=(0,st.d)(this.routingTable.kb.localNodeId,t);let r=0;for(const t of e){if(0!==t)break;r++}yield r}}}var Pe,Ne,Le=r(9174),De=r(4291),Oe=r(9164),Be=r(4461),xe=r(3839);(function(t){t.codec=()=>(0,l.yw)({1:{name:"key",codec:l.aI,optional:!0},2:{name:"value",codec:l.aI,optional:!0},3:{name:"author",codec:l.aI,optional:!0},4:{name:"signature",codec:l.aI,optional:!0},5:{name:"timeReceived",codec:l.Z_,optional:!0}}),t.encode=e=>(0,l.LE)(e,t.codec()),t.decode=e=>(0,l.C6)(e,t.codec())})(Pe||(Pe={})),function(t){let e,r,n,i,s;(function(t){t["PUT_VALUE"]="PUT_VALUE",t["GET_VALUE"]="GET_VALUE",t["ADD_PROVIDER"]="ADD_PROVIDER",t["GET_PROVIDERS"]="GET_PROVIDERS",t["FIND_NODE"]="FIND_NODE",t["PING"]="PING"})(e=t.MessageType||(t.MessageType={})),function(t){t[t["PUT_VALUE"]=0]="PUT_VALUE",t[t["GET_VALUE"]=1]="GET_VALUE",t[t["ADD_PROVIDER"]=2]="ADD_PROVIDER",t[t["GET_PROVIDERS"]=3]="GET_PROVIDERS",t[t["FIND_NODE"]=4]="FIND_NODE",t[t["PING"]=5]="PING"}(r||(r={})),function(t){t.codec=()=>(0,l.Ji)(r)}(e=t.MessageType||(t.MessageType={})),function(t){t["NOT_CONNECTED"]="NOT_CONNECTED",t["CONNECTED"]="CONNECTED",t["CAN_CONNECT"]="CAN_CONNECT",t["CANNOT_CONNECT"]="CANNOT_CONNECT"}(n=t.ConnectionType||(t.ConnectionType={})),function(t){t[t["NOT_CONNECTED"]=0]="NOT_CONNECTED",t[t["CONNECTED"]=1]="CONNECTED",t[t["CAN_CONNECT"]=2]="CAN_CONNECT",t[t["CANNOT_CONNECT"]=3]="CANNOT_CONNECT"}(i||(i={})),function(t){t.codec=()=>(0,l.Ji)(i)}(n=t.ConnectionType||(t.ConnectionType={})),function(e){e.codec=()=>(0,l.yw)({1:{name:"id",codec:l.aI,optional:!0},2:{name:"addrs",codec:l.aI,repeats:!0},3:{name:"connection",codec:t.ConnectionType.codec(),optional:!0}}),e.encode=t=>(0,l.LE)(t,e.codec()),e.decode=t=>(0,l.C6)(t,e.codec())}(s=t.Peer||(t.Peer={})),t.codec=()=>(0,l.yw)({1:{name:"type",codec:t.MessageType.codec(),optional:!0},10:{name:"clusterLevelRaw",codec:l.LB,optional:!0},2:{name:"key",codec:l.aI,optional:!0},3:{name:"record",codec:l.aI,optional:!0},8:{name:"closerPeers",codec:t.Peer.codec(),repeats:!0},9:{name:"providerPeers",codec:t.Peer.codec(),repeats:!0}}),t.encode=e=>(0,l.LE)(e,t.codec()),t.decode=e=>(0,l.C6)(e,t.codec())}(Ne||(Ne={}));const Ue=Ne.MessageType,Me=Ne.ConnectionType,Ve=Object.keys(Ue);class Ke{constructor(t,e,r){if(!(e instanceof Uint8Array))throw new Error("Key must be a Uint8Array");this.type=t,this.key=e,this.clusterLevelRaw=r,this.closerPeers=[],this.providerPeers=[],this.record=void 0}get clusterLevel(){const t=this.clusterLevelRaw-1;return t<0?0:t}set clusterLevel(t){this.clusterLevelRaw=t}serialize(){return Ne.encode({key:this.key,type:this.type,clusterLevelRaw:this.clusterLevelRaw,closerPeers:this.closerPeers.map(Fe),providerPeers:this.providerPeers.map(Fe),record:null==this.record?void 0:this.record.serialize()})}static deserialize(t){const e=Ne.decode(t),r=new Ke(e.type??Ne.MessageType.PUT_VALUE,e.key??Uint8Array.from([]),e.clusterLevelRaw??0);return r.closerPeers=e.closerPeers.map(je),r.providerPeers=e.providerPeers.map(je),null!=e.record?.length&&(r.record=f.deserialize(e.record)),r}}function Fe(t){const e={id:t.id.toBytes(),addrs:(t.multiaddrs??[]).map((t=>t.bytes)),connection:Me.CONNECTED};return e}function je(t){if(null==t.id)throw new Error("Invalid peer in message");return{id:(0,w.cv)(t.id),multiaddrs:(t.addrs??[]).map((t=>new xe.sc(t))),protocols:[]}}var qe,He=function(t,e,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(t):n?n.value:e.get(t)};class Ge extends EventTarget{constructor(){super(...arguments),qe.set(this,new Map)}listenerCount(t){const e=He(this,qe,"f").get(t);return null==e?0:e.length}addEventListener(t,e,r){super.addEventListener(t,e,r);let n=He(this,qe,"f").get(t);null==n&&(n=[],He(this,qe,"f").set(t,n)),n.push({callback:e,once:(!0!==r&&!1!==r&&r?.once)??!1})}removeEventListener(t,e,r){super.removeEventListener(t.toString(),e??null,r);let n=He(this,qe,"f").get(t);null!=n&&(n=n.filter((({callback:t})=>t!==e)),He(this,qe,"f").set(t,n))}dispatchEvent(t){const e=super.dispatchEvent(t);let r=He(this,qe,"f").get(t.type);return null==r||(r=r.filter((({once:t})=>!t)),He(this,qe,"f").set(t.type,r)),e}}qe=new WeakMap;class ze extends Event{constructor(t,e){super(t,e),this.detail=e?.detail}}const $e=globalThis.CustomEvent??ze;function We(t){return{...t,name:"SENDING_QUERY",type:0,messageName:t.type,messageType:Ve.indexOf(t.type.toString())}}function Ye(t){return{...t,name:"PEER_RESPONSE",type:1,messageName:t.messageType,closer:null!=t.closer?t.closer:[],providers:null!=t.providers?t.providers:[]}}function Qe(t){return{...t,name:"FINAL_PEER",type:2}}function Xe(t){return{...t,name:"QUERY_ERROR",type:3}}function Je(t){return{...t,name:"PROVIDER",type:4}}function Ze(t){return{...t,name:"VALUE",type:5}}function tr(t){return{...t,name:"DIALING_PEER",type:7}}var er=r(43);class rr extends Ge{constructor(t){super(),this.components=new tt;const{protocol:e,lan:r}=t;this.log=(0,Q.kg)(`libp2p:kad-dht:${r?"lan":"wan"}:network`),this.running=!1,this.protocol=e}init(t){this.components=t}async start(){this.running||(this.running=!0)}async stop(){this.running=!1}isStarted(){return this.running}async*sendRequest(t,e,r={}){if(!this.running)return;let n;this.log("sending %s to %p",e.type,t),yield tr({peer:t}),yield We({to:t,type:e.type});try{const i=await this.components.getConnectionManager().openConnection(t,r),s=await i.newStream(this.protocol,r);n=s.stream;const o=await this._writeReadMessage(n,e.serialize(),r);yield Ye({from:t,messageType:o.type,closer:o.closerPeers,providers:o.providerPeers,record:o.record})}catch(i){yield Xe({from:t,error:i})}finally{null!=n&&n.close()}}async*sendMessage(t,e,r={}){if(!this.running)return;let n;this.log("sending %s to %p",e.type,t),yield tr({peer:t}),yield We({to:t,type:e.type});try{const i=await this.components.getConnectionManager().openConnection(t,r),s=await i.newStream(this.protocol,r);n=s.stream,await this._writeMessage(n,e.serialize(),r),yield Ye({from:t,messageType:e.type})}catch(i){yield Xe({from:t,error:i})}finally{null!=n&&n.close()}}async _writeMessage(t,e,r){null!=r.signal&&(t=(0,er.D7)(t,r.signal)),await(0,Le.zG)([e],De.cv(),t,Oe)}async _writeReadMessage(t,e,r){null!=r.signal&&(t=(0,er.D7)(t,r.signal));const n=await(0,Le.zG)([e],De.cv(),t,De.Jx(),(async t=>{const e=await Be(t);if(null!=e)return e;throw X(new Error("No message received"),"ERR_NO_MESSAGE_RECEIVED")})),i=Ke.deserialize(n);return i.closerPeers.forEach((t=>{this.dispatchEvent(new $e("peer",{detail:t}))})),i.providerPeers.forEach((t=>{this.dispatchEvent(new $e("peer",{detail:t}))})),i}}function nr(t,e){const r=e.key,n=(0,g.B)(r),i=n.split("/");if(i.length<3)return;const s=t[i[1].toString()];if(null==s){const t="Invalid record keytype";throw X(new Error(t),"ERR_INVALID_RECORD_KEY_TYPE")}return s(r,e.value)}const ir=async(t,e)=>{if(!(t instanceof Uint8Array))throw X(new Error('"key" must be a Uint8Array'),"ERR_INVALID_RECORD_KEY_NOT_BUFFER");if(t.byteLength<5)throw X(new Error("invalid public key record"),"ERR_INVALID_RECORD_KEY_TOO_SHORT");const r=(0,g.B)(t.subarray(0,4));if("/pk/"!==r)throw X(new Error("key was not prefixed with /pk/"),"ERR_INVALID_RECORD_KEY_BAD_PREFIX");const n=t.slice(4),i=await c.sha256.digest(e);if(!(0,yt.f)(n,i.bytes))throw X(new Error("public key does not match passed in key"),"ERR_INVALID_RECORD_HASH_MISMATCH")},sr={pk:ir};function or(t,e,r){if(0===r.length){const t="No records given";throw X(new Error(t),"ERR_NO_RECORDS_RECEIVED")}const n=(0,g.B)(e),i=n.split("/");if(i.length<3){const t="Record key does not have a selector function";throw X(new Error(t),"ERR_NO_SELECTOR_FUNCTION_FOR_RECORD_KEY")}const s=t[i[1].toString()];if(null==s){const t=`Unrecognized key prefix: ${i[1]}`;throw X(new Error(t),"ERR_UNRECOGNIZED_KEY_PREFIX")}return 1===r.length?0:s(e,r)}function ar(t,e){return 0}const cr={pk:ar};var ur=r(9310),lr=r(9927);class hr{constructor(t){this.components=new tt;const{validators:e,selectors:r,peerRouting:n,queryManager:i,routingTable:s,network:o,lan:a}=t;this.log=(0,Q.kg)(`libp2p:kad-dht:${a?"lan":"wan"}:content-fetching`),this.validators=e,this.selectors=r,this.peerRouting=n,this.queryManager=i,this.routingTable=s,this.network=o}init(t){this.components=t}async putLocal(t,e){const r=q(t);await this.components.getDatastore().put(r,e)}async getLocal(t){this.log("getLocal %b",t);const e=q(t);this.log("fetching record for key %k",e);const r=await this.components.getDatastore().get(e);this.log("found %k in local datastore",e);const n=f.deserialize(r);return await nr(this.validators,n),n}async*sendCorrectionRecord(t,e,r,n={}){this.log("sendCorrection for %b",t);const i=await $(t,r);for(const{value:o,from:a}of e){if((0,yt.f)(o,r)){this.log("record was ok");continue}if(this.components.getPeerId().equals(a)){try{const e=q(t);this.log(`Storing corrected record for key ${e.toString()}`),await this.components.getDatastore().put(e,i)}catch(s){this.log.error("Failed error correcting self",s)}continue}let e=!1;const c=new Ke(Ue.PUT_VALUE,t,0);c.record=f.deserialize(i);for await(const t of this.network.sendRequest(a,c,n))"PEER_RESPONSE"===t.name&&null!=t.record&&(0,yt.f)(t.record.value,f.deserialize(i).value)&&(e=!0),yield t;e||(yield Xe({from:a,error:X(new Error("value not put correctly"),"ERR_PUT_VALUE_INVALID")})),this.log.error("Failed error correcting entry")}}async*put(t,e,r={}){this.log("put key %b value %b",t,e);const n=await $(t,e),i=q(t);this.log(`storing record for key ${i.toString()}`),await this.components.getDatastore().put(i,n),yield*(0,Le.zG)(this.peerRouting.getClosestPeers(t,{signal:r.signal}),(e=>lr(e,(e=>async()=>{if("FINAL_PEER"!==e.name)return[e];const i=[],s=new Ke(Ue.PUT_VALUE,t,0);s.record=f.deserialize(n),this.log("send put to %p",e.peer.id);for await(const t of this.network.sendRequest(e.peer.id,s,r))i.push(t),"PEER_RESPONSE"===t.name&&(null!=t.record&&(0,yt.f)(t.record.value,f.deserialize(n).value)||i.push(Xe({from:e.peer.id,error:X(new Error("value not put correctly"),"ERR_PUT_VALUE_INVALID")})));return i}))),(t=>ur(t,{ordered:!1,concurrency:L})),(async function*(t){for await(const e of t)yield*e}))}async*get(t,e={}){this.log("get %b",t);const r=[];for await(const a of this.getMany(t,e))"VALUE"===a.name&&r.push(a),yield a;if(0===r.length)return;const n=r.map((t=>t.value));let i=0;try{i=or(this.selectors,t,n)}catch(o){if("ERR_NO_SELECTOR_FUNCTION_FOR_RECORD_KEY"!==o.code)throw o}const s=n[i];if(this.log("GetValue %b %b",t,s),null==s)throw X(new Error("best value was not found"),"ERR_NOT_FOUND");yield*this.sendCorrectionRecord(t,r,s,e),yield r[i]}async*getMany(t,e={}){this.log("getMany values for %b",t);try{const e=await this.getLocal(t);yield Ze({value:e.value,from:this.components.getPeerId()})}catch(o){this.log("error getting local value for %b",t,o)}const r=await F(t),n=this.routingTable.closestPeers(r);this.log("found %d peers in routing table",n.length);const i=this,s=async function*({peer:e,signal:r}){for await(const n of i.peerRouting.getValueOrPeers(e,t,{signal:r}))yield n,"PEER_RESPONSE"===n.name&&null!=n.record&&(yield Ze({from:e,value:n.record.value}))};yield*this.queryManager.run(t,n,s,e)}}class dr{constructor(t){this.components=new tt;const{network:e,peerRouting:r,queryManager:n,routingTable:i,providers:s,lan:o}=t;this.log=(0,Q.kg)(`libp2p:kad-dht:${o?"lan":"wan"}:content-routing`),this.network=e,this.peerRouting=r,this.queryManager=n,this.routingTable=i,this.providers=s}init(t){this.components=t}async*provide(t,e,r={}){this.log("provide %s",t),await this.providers.addProvider(t,this.components.getPeerId());const n=new Ke(Ue.ADD_PROVIDER,t.bytes,0);n.providerPeers=[{id:this.components.getPeerId(),multiaddrs:e,protocols:[]}];let i=0;const s=e=>async()=>{if("FINAL_PEER"!==e.name)return[e];const s=[];this.log("putProvider %s to %p",t,e.peer.id);try{this.log("sending provider record for %s to %p",t,e.peer.id);for await(const o of this.network.sendMessage(e.peer.id,n,r))"PEER_RESPONSE"===o.name&&(this.log("sent provider record for %s to %p",t,e.peer.id),i++),s.push(o)}catch(o){this.log.error("error sending provide record to peer %p",e.peer.id,o),s.push(Xe({from:e.peer.id,error:o}))}return s};yield*(0,Le.zG)(this.peerRouting.getClosestPeers(t.multihash.bytes,r),(t=>lr(t,(t=>s(t)))),(t=>ur(t,{ordered:!1,concurrency:L})),(async function*(t){for await(const e of t)yield*e})),this.log("sent provider records to %d peers",i)}async*findProviders(t,e){const r=this.routingTable.kBucketSize,n=t.multihash.bytes,i=await F(n),s=this;this.log("findProviders %c",t);const o=await this.providers.getProviders(t);if(o.length>0){const t=[];for(const e of o.slice(0,r))t.push({id:e,multiaddrs:(await this.components.getPeerStore().addressBook.get(e)??[]).map((t=>t.multiaddr)),protocols:[]});yield Ye({from:this.components.getPeerId(),messageType:Ue.GET_PROVIDERS,providers:t}),yield Je({from:this.components.getPeerId(),providers:t})}if(o.length>=r)return;const a=async function*({peer:t,signal:e}){const r=new Ke(Ue.GET_PROVIDERS,n,0);yield*s.network.sendRequest(t,r,{signal:e})},c=new Set(o.map((t=>t.toString())));for await(const u of this.queryManager.run(n,this.routingTable.closestPeers(i),a,e))if(yield u,"PEER_RESPONSE"===u.name){this.log("Found %d provider entries for %c and %d closer peers",u.providers.length,t,u.closer.length);const e=[];for(const t of u.providers)c.has(t.id.toString())||(c.add(t.id.toString()),e.push(t));if(e.length>0&&(yield Je({from:u.from,providers:e})),c.size===r)return}}}function fr(t,e){for(let r=0;r<t.byteLength;r++){if(t[r]<e[r])return-1;if(t[r]>e[r])return 1}return t.byteLength>e.byteLength?1:t.byteLength<e.byteLength?-1:0}class pr{constructor(t,e){this.originDhtKey=t,this.capacity=e,this.peerDistances=[]}get length(){return this.peerDistances.length}get peers(){return this.peerDistances.map((t=>t.peerId))}async add(t){if(null!=this.peerDistances.find((e=>e.peerId.equals(t))))return;const e=await j(t),r={peerId:t,distance:(0,st.d)(this.originDhtKey,e)};this.peerDistances.push(r),this.peerDistances.sort(((t,e)=>fr(t.distance,e.distance))),this.peerDistances=this.peerDistances.slice(0,this.capacity)}async anyCloser(t){if(0===t.length)return!1;if(0===this.length)return!0;const e=await Promise.all(t.map(j)),r=this.peerDistances[this.peerDistances.length-1].distance;for(const n of e){const t=(0,st.d)(this.originDhtKey,n);if(fr(t,r)<0)return!0}return!1}}class gr{constructor(t){this.components=new tt;const{routingTable:e,network:r,validators:n,queryManager:i,lan:s}=t;this.routingTable=e,this.network=r,this.validators=n,this.queryManager=i,this.log=(0,Q.kg)(`libp2p:kad-dht:${s?"lan":"wan"}:peer-routing`)}init(t){this.components=t}async findPeerLocal(t){let e;const r=await this.routingTable.find(t);if(null!=r){this.log("findPeerLocal found %p in routing table",t);try{e=await this.components.getPeerStore().get(r)}catch(n){if("ERR_NOT_FOUND"!==n.code)throw n}}if(null==e)try{e=await this.components.getPeerStore().get(t)}catch(n){if("ERR_NOT_FOUND"!==n.code)throw n}if(null!=e)return this.log("findPeerLocal found %p in peer store",t),{id:e.id,multiaddrs:e.addresses.map((t=>t.multiaddr)),protocols:[]}}async*_getValueSingle(t,e,r={}){const n=new Ke(Ue.GET_VALUE,e,0);yield*this.network.sendRequest(t,n,r)}async*getPublicKeyFromNode(t,e={}){const r=H(t);for await(const n of this._getValueSingle(t,r,e))if(yield n,"PEER_RESPONSE"===n.name&&null!=n.record){const e=await(0,w.y5)(Ce({bytes:n.record.value}));if(!e.equals(t))throw X(new Error("public key does not match id"),"ERR_PUBLIC_KEY_DOES_NOT_MATCH_ID");if(null==e.publicKey)throw X(new Error("public key missing"),"ERR_PUBLIC_KEY_MISSING");yield Ze({from:t,value:e.publicKey})}throw X(new Error(`Node not responding with its public key: ${t.toString()}`),"ERR_INVALID_RECORD")}async*findPeer(t,e={}){this.log("findPeer %p",t);const r=await this.findPeerLocal(t);if(null!=r)return this.log("found local"),void(yield Qe({from:this.components.getPeerId(),peer:r}));const n=await j(t),i=this.routingTable.closestPeers(n),s=i.find((e=>e.equals(t)));if(null!=s)try{const e=await this.components.getPeerStore().get(t);return this.log("found in peerStore"),void(yield Qe({from:this.components.getPeerId(),peer:{id:e.id,multiaddrs:e.addresses.map((t=>t.multiaddr)),protocols:[]}}))}catch(u){if("ERR_NOT_FOUND"!==u.code)throw u}const o=this,a=async function*({peer:e,signal:r}){const n=new Ke(Ue.FIND_NODE,t.toBytes(),0);for await(const i of o.network.sendRequest(e,n,{signal:r}))if(yield i,"PEER_RESPONSE"===i.name){const e=i.closer.find((e=>e.id.equals(t)));null!=e&&(yield Qe({from:i.from,peer:e}))}};let c=!1;for await(const l of this.queryManager.run(t.toBytes(),i,a,e))"FINAL_PEER"===l.name&&(c=!0),yield l;c||(yield Xe({from:this.components.getPeerId(),error:X(new Error("Not found"),"ERR_NOT_FOUND")}))}async*getClosestPeers(t,e={}){this.log("getClosestPeers to %b",t);const r=await F(t),n=this.routingTable.closestPeers(r),i=this,s=new pr(r,this.routingTable.kBucketSize);await Promise.all(n.map((async t=>await s.add(t))));const o=async function*({peer:e,signal:r}){i.log("closerPeersSingle %s from %p",(0,g.B)(t,"base32"),e);const n=new Ke(Ue.FIND_NODE,t,0);yield*i.network.sendRequest(e,n,{signal:r})};for await(const a of this.queryManager.run(t,n,o,e))yield a,"PEER_RESPONSE"===a.name&&await Promise.all(a.closer.map((async t=>await s.add(t.id))));this.log("found %d peers close to %b",s.length,t);for(const a of s.peers)yield Qe({from:this.components.getPeerId(),peer:{id:a,multiaddrs:(await this.components.getPeerStore().addressBook.get(a)??[]).map((t=>t.multiaddr)),protocols:[]}})}async*getValueOrPeers(t,e,r={}){for await(const i of this._getValueSingle(t,e,r)){if("PEER_RESPONSE"===i.name&&null!=i.record)try{await this._verifyRecordOnline(i.record)}catch(n){const t="invalid record received, discarded";this.log(t),yield Xe({from:i.from,error:X(new Error(t),"ERR_INVALID_RECORD")});continue}yield i}}async _verifyRecordOnline(t){if(null==t.timeReceived)throw X(new Error("invalid record received"),"ERR_INVALID_RECORD");await nr(this.validators,new f(t.key,t.value,t.timeReceived))}async getCloserPeersOffline(t,e){const r=await F(t),n=this.routingTable.closestPeers(r),i=[];for(const o of n)if(!o.equals(e))try{const t=await this.components.getPeerStore().addressBook.get(o),e=await this.components.getPeerStore().protoBook.get(o);i.push({id:o,multiaddrs:t.map((t=>t.multiaddr)),protocols:e})}catch(s){if("ERR_NOT_FOUND"!==s.code)throw s}return i.length>0?this.log("getCloserPeersOffline found %d peer(s) closer to %b than %p",i.length,t,e):this.log("getCloserPeersOffline could not find peer closer to %b than %p",t,e),i}}var yr=r(8694),mr=r(2611);const wr=(0,Q.kg)("libp2p:kad-dht:providers");class vr{constructor(t={}){this.components=new tt;const{cacheSize:e,cleanupInterval:r,provideValidity:n}=t;this.cleanupInterval=r??P,this.provideValidity=n??k,this.cache=yr(e??T),this.syncQueue=new W.Z({concurrency:1}),this.started=!1}init(t){this.components=t}isStarted(){return this.started}async start(){this.started||(this.started=!0,this.cleaner=setInterval((()=>{this._cleanup().catch((t=>{wr.error(t)}))}),this.cleanupInterval))}async stop(){this.started=!1,null!=this.cleaner&&(clearInterval(this.cleaner),this.cleaner=void 0)}async _cleanup(){return await this.syncQueue.add((async()=>{const t=Date.now();let e=0,r=0;const n=new Map,i=this.components.getDatastore().batch(),s=this.components.getDatastore().query({prefix:A});for await(const a of s)try{const{cid:t,peerId:s}=Sr(a.key),o=Rr(a.value).getTime(),c=Date.now(),u=c-o,l=u>this.provideValidity;if(wr("comparing: %d - %d = %d > %d %s",c,o,u,this.provideValidity,l?"(expired)":""),l){r++,i.delete(a.key);const e=n.get(t)??new Set;e.add(s),n.set(t,e)}e++}catch(o){wr.error(o.message)}n.size>0?(wr("deleting %d / %d entries",r,e),await i.commit()):wr("nothing to delete");for(const[a,c]of n){const t=Er(a),e=this.cache.get(t);if(null!=e){for(const t of c)e.delete(t);0===e.size?this.cache.remove(t):this.cache.set(t,e)}}wr("Cleanup successful (%dms)",Date.now()-t)}))}async _getProvidersMap(t){const e=Er(t);let r=this.cache.get(e);return null==r&&(r=await _r(this.components.getDatastore(),t),this.cache.set(e,r)),r}async addProvider(t,e){return await this.syncQueue.add((async()=>{wr("%p provides %s",e,t);const r=await this._getProvidersMap(t);wr("loaded %s provs",r.size);const n=new Date;r.set(e.toString(),n);const i=Er(t);this.cache.set(i,r),await br(this.components.getDatastore(),t,e,n)}))}async getProviders(t){return await this.syncQueue.add((async()=>{wr("get providers for %s",t);const e=await this._getProvidersMap(t);return[...e.keys()].map((t=>(0,w.jE)(t)))}))}}function Er(t){const e="string"===typeof t?t:(0,g.B)(t.multihash.bytes,"base32");return`${A}/${e}`}async function br(t,e,r,n){const i=[Er(e),"/",r.toString()].join(""),s=new u.s(i),o=Uint8Array.from(mr.encode(n.getTime()));return await t.put(s,o)}function Sr(t){const e=t.toString().split("/");if(5!==e.length)throw new Error(`incorrectly formatted provider entry key in datastore: ${t.toString()}`);return{cid:e[3],peerId:e[4]}}async function _r(t,e){const r=new Map,n=t.query({prefix:Er(e)});for await(const i of n){const{peerId:t}=Sr(i.key);r.set(t,Rr(i.value))}return r}function Rr(t){return new Date(mr.decode(t))}var Ir=r(4908),Cr=r(4622);const Ar=BigInt("0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF");async function*Tr(t){const{key:e,startingPeer:r,ourPeerId:n,signal:i,query:s,alpha:o,pathIndex:a,numPaths:c,cleanUp:u,queryFuncTimeout:l,log:h}=t,d=new W.Z({concurrency:o}),f=await F(e),p=new Set;function y(t,r){if(null==t)return;p.add(t.toString());const o=BigInt("0x"+(0,g.B)((0,st.d)(r,f),"base16"));d.add((async()=>{let r;const u=[i];null!=l&&(r=new Y.TimeoutController(l),u.push(r.signal));const m=(0,Ir.anySignal)(u);try{for await(const r of s({key:e,peer:t,signal:m,pathIndex:a,numPaths:c})){if(m.aborted)return;if("PEER_RESPONSE"===r.name)for(const i of r.closer){if(p.has(i.id.toString())){h("already seen %p in query",i.id);continue}if(n.equals(i.id)){h("not querying ourselves");continue}const r=await j(i.id),s=BigInt("0x"+(0,g.B)((0,st.d)(r,f),"base16"));s>o?h("skipping %p as they are not closer to %b than %p",i.id,e,t):(h("querying closer peer %p",i.id),y(i.id,r))}d.emit("completed",r)}r?.clear()}catch(w){i.aborted?d.emit("error",w):d.emit("completed",Xe({from:t,error:w}))}finally{r?.clear()}}),{priority:Ar-o}).catch((t=>{h.error(t)}))}y(r,await j(r)),yield*kr(d,i,u,h)}async function*kr(t,e,r,n){let i=(0,Cr.Z)(),s=!0;const o=[],a=()=>{s&&(n("clean up queue, results %d, queue size %d, pending tasks %d",o.length,t.size,t.pending),s=!1,t.clear(),o.splice(0,o.length))};t.on("completed",(t=>{o.push(t),i.resolve()})),t.on("error",(t=>{n("queue error",t),a(),i.reject(t)})),t.on("idle",(()=>{n("queue idle"),s=!1,i.resolve()})),e.addEventListener("abort",(()=>{n("abort queue");const t=s;a(),t&&i.reject(X(new Error("Query aborted"),"ERR_QUERY_ABORTED"))})),r.addEventListener("cleanup",(()=>{a(),i.resolve()}));while(s){await i.promise,i=(0,Cr.Z)();while(o.length>0){const t=o.shift();null!=t&&(yield t)}}yield*o}var Pr=r(940),Nr=r(3793);const Lr="running-queries";class Dr{constructor(t){this.components=new tt;const{lan:e=!1,disjointPaths:r=N,alpha:n=L}=t;this.disjointPaths=r??N,this.controllers=new Set,this.running=!1,this.alpha=n??L,this.lan=e,this.queries=0}init(t){this.components=t}isStarted(){return this.running}async start(){this.running=!0}async stop(){this.running=!1;for(const t of this.controllers)t.abort();this.controllers.clear()}async*run(t,e,r,n={}){if(!this.running)throw new Error("QueryManager not started");let i;if(null==n.signal){i=new Y.TimeoutController(U),n.signal=i.signal;try{null!=Nr.setMaxListeners&&(0,Nr.setMaxListeners)(1/0,i.signal)}catch{}}const s=new AbortController;this.controllers.add(s);const o=[s.signal];null!=n.signal&&o.push(n.signal);const a=(0,Ir.anySignal)(o);try{null!=Nr.setMaxListeners&&(0,Nr.setMaxListeners)(1/0,a)}catch{}const c=(0,Q.kg)(`libp2p:kad-dht:${this.lan?"lan":"wan"}:query:`+(0,g.B)(t,"base58btc")),u=e.slice(0,Math.min(this.disjointPaths,e.length)),l=Date.now(),h=new Ge;try{if(c("query:start"),this.queries++,this.components.getMetrics()?.updateComponentMetric({system:"libp2p",component:"kad-dht-"+(this.lan?"lan":"wan"),metric:Lr,value:this.queries}),0===e.length)return void c.error("Running query with no peers");const o=u.map(((e,i)=>Tr({key:t,startingPeer:e,ourPeerId:this.components.getPeerId(),signal:a,query:r,pathIndex:i,numPaths:u.length,alpha:this.alpha,cleanUp:h,queryFuncTimeout:n.queryFuncTimeout,log:c})));for await(const t of Pr(...o))yield t,"QUERY_ERROR"===t.name&&c("error",t.error)}catch(d){if(this.running||"ERR_QUERY_ABORTED"!==d.code)throw d}finally{this.controllers.delete(s),null!=i&&i.clear(),this.queries--,this.components.getMetrics()?.updateComponentMetric({system:"libp2p",component:"kad-dht-"+(this.lan?"lan":"wan"),metric:Lr,value:this.queries}),h.dispatchEvent(new $e("cleanup")),c("query:done in %dms",Date.now()-l)}}}var Or=r(9329);const Br=(0,Q.kg)("libp2p:kad-dht:rpc:handlers:add-provider");class xr{constructor(t){const{providers:e}=t;this.providers=e}init(){}async handle(t,e){if(Br("start"),null==e.key||0===e.key.length)throw X(new Error("Missing key"),"ERR_MISSING_KEY");let r;try{r=Or.k.decode(e.key)}catch(n){throw X(new Error("Invalid CID"),"ERR_INVALID_CID")}null!=e.providerPeers&&0!==e.providerPeers.length||Br.error("no providers found in message"),await Promise.all(e.providerPeers.map((async e=>{e.id.equals(t)?e.multiaddrs.length<1?Br("no valid addresses for provider %p. Ignore",t):(Br("received provider %p for %s (addrs %s)",t,r,e.multiaddrs.map((t=>t.toString()))),await this.providers.addProvider(r,e.id)):Br("invalid provider peer %p from %p",e.id,t)})))}}var Ur=r(6861);const Mr=(0,Q.kg)("libp2p:kad-dht:rpc:handlers:find-node");class Vr{constructor(t){this.components=new tt;const{peerRouting:e,lan:r}=t;this.peerRouting=e,this.lan=Boolean(r)}init(t){this.components=t}async handle(t,e){Mr("incoming request from %p for peers closer to %b",t,e.key);let r=[];r=(0,Ur.fS)(this.components.getPeerId().toBytes(),e.key)?[{id:this.components.getPeerId(),multiaddrs:this.components.getAddressManager().getAddresses().map((t=>t.decapsulateCode((0,xe.a_)("p2p").code))),protocols:[]}]:await this.peerRouting.getCloserPeersOffline(e.key,t),r=r.map(this.lan?K:V).filter((({multiaddrs:t})=>t.length));const n=new Ke(e.type,new Uint8Array(0),e.clusterLevel);return r.length>0?n.closerPeers=r:Mr("could not find any peers closer to %b than %p",e.key,t),n}}const Kr=(0,Q.kg)("libp2p:kad-dht:rpc:handlers:get-providers");class Fr{constructor(t){this.components=new tt;const{peerRouting:e,providers:r,lan:n}=t;this.peerRouting=e,this.providers=r,this.lan=Boolean(n)}init(t){this.components=t}async handle(t,e){let r;try{r=Or.k.decode(e.key)}catch(c){throw X(new Error("Invalid CID"),"ERR_INVALID_CID")}Kr("%p asking for providers for %s",t,r);const[n,i]=await Promise.all([this.providers.getProviders(r),this.peerRouting.getCloserPeersOffline(e.key,t)]),s=await this._getPeers(n),o=await this._getPeers(i.map((({id:t})=>t))),a=new Ke(e.type,e.key,e.clusterLevel);return s.length>0&&(a.providerPeers=s),o.length>0&&(a.closerPeers=o),Kr("got %s providers %s closerPeers",s.length,o.length),a}async _getAddresses(t){const e=await this.components.getPeerStore().addressBook.get(t);return e.map((t=>t.multiaddr))}async _getPeers(t){const e=[],r=this.lan?K:V;for(const n of t){const t=r({id:n,multiaddrs:await this._getAddresses(n),protocols:[]});t.multiaddrs.length>0&&e.push(t)}return e}}const jr=(0,Q.kg)("libp2p:kad-dht:rpc:handlers:get-value");class qr{constructor(t){this.components=new tt;const{peerRouting:e}=t;this.peerRouting=e}init(t){this.components=t}async handle(t,e){const r=e.key;if(jr("%p asked for key %b",t,r),null==r||0===r.length)throw X(new Error("Invalid key"),"ERR_INVALID_KEY");const n=new Ke(Ue.GET_VALUE,r,e.clusterLevel);if(G(r)){jr("is public key");const t=z(r);let e;try{const r=await this.components.getPeerStore().keyBook.get(t);if(null==r)throw X(new Error("No public key found in key book"),"ERR_NOT_FOUND");e=r}catch(o){if("ERR_NOT_FOUND"!==o.code)throw o}if(null!=e)return jr("returning found public key"),n.record=new f(r,e,new Date),n}const[i,s]=await Promise.all([this._checkLocalDatastore(r),this.peerRouting.getCloserPeersOffline(e.key,t)]);return null!=i&&(jr("had record for %b in local datastore",r),n.record=i),s.length>0&&(jr("had %s closer peers in routing table",s.length),n.closerPeers=s),n}async _checkLocalDatastore(t){jr("checkLocalDatastore looking for %b",t);const e=q(t);let r;try{r=await this.components.getDatastore().get(e)}catch(i){if("ERR_NOT_FOUND"===i.code)return;throw i}const n=f.deserialize(r);if(null==n)throw X(new Error("Invalid record"),"ERR_INVALID_RECORD");if(!(null==n.timeReceived||Date.now()-n.timeReceived.getTime()>S))return n;await this.components.getDatastore().delete(e)}}const Hr=(0,Q.kg)("libp2p:kad-dht:rpc:handlers:ping");class Gr{async handle(t,e){return Hr("ping from %p",t),e}init(){}}class zr{constructor(t){this.components=new tt;const{validators:e}=t;this.log=(0,Q.kg)("libp2p:kad-dht:rpc:handlers:put-value"),this.validators=e}init(t){this.components=t}async handle(t,e){const r=e.key;this.log("%p asked us to store value for key %b",t,r);const n=e.record;if(null==n){const e=`Empty record from: ${t.toString()}`;throw this.log.error(e),X(new Error(e),"ERR_EMPTY_RECORD")}try{await nr(this.validators,n),n.timeReceived=new Date;const t=q(n.key);await this.components.getDatastore().put(t,n.serialize()),this.log("put record for %b into datastore under key %k",r,t)}catch(i){this.log("did not put record for key %b into datastore %o",r,i)}return e}}class $r{constructor(t){const{providers:e,peerRouting:r,validators:n,lan:i}=t;this.log=(0,Q.kg)("libp2p:kad-dht:rpc"),this.routingTable=t.routingTable,this.handlers={[Ue.GET_VALUE]:new qr({peerRouting:r}),[Ue.PUT_VALUE]:new zr({validators:n}),[Ue.FIND_NODE]:new Vr({peerRouting:r,lan:i}),[Ue.ADD_PROVIDER]:new xr({providers:e}),[Ue.GET_PROVIDERS]:new Fr({peerRouting:r,providers:e,lan:i}),[Ue.PING]:new Gr}}init(t){for(const e of Object.values(this.handlers))e.init(t)}async handleMessage(t,e){try{await this.routingTable.add(t)}catch(n){this.log.error("Failed to update the kbucket store",n)}const r=this.handlers[e.type];if(null!=r)return await r.handle(t,e);this.log.error(`no handler found for message type: ${e.type}`)}onIncomingStream(t){Promise.resolve().then((async()=>{const{stream:e,connection:r}=t,n=r.remotePeer;try{await this.routingTable.add(n)}catch(s){this.log.error(s)}const i=this;await(0,Le.zG)(e,De.Jx(),(async function*(t){for await(const e of t){const t=Ke.deserialize(e);i.log("incoming %s from %p",t.type,n);const r=await i.handleMessage(n,t);null!=r&&(yield r.serialize())}}),De.cv(),e)})).catch((t=>{this.log.error(t)}))}}const Wr=Symbol.for("@libp2p/topology");const Yr=()=>{};class Qr{constructor(t){this.min=t.min??0,this.max=t.max??1/0,this.peers=new Set,this.onConnect=t.onConnect??Yr,this.onDisconnect=t.onDisconnect??Yr}get[Symbol.toStringTag](){return Wr.toString()}get[Wr](){return!0}async setRegistrar(t){this.registrar=t}disconnect(t){this.onDisconnect(t)}}function Xr(t){return new Qr(t)}class Jr extends Ge{constructor(t){super(),this.components=new tt;const{protocol:e,lan:r}=t;this.log=(0,Q.kg)("libp2p:kad-dht:topology-listener:"+(r?"lan":"wan")),this.running=!1,this.protocol=e}init(t){this.components=t}isStarted(){return this.running}async start(){if(this.running)return;this.running=!0;const t=Xr({onConnect:t=>{this.log("observed peer %p with protocol %s",t,this.protocol),this.dispatchEvent(new $e("peer",{detail:t}))}});this.registrarId=await this.components.getRegistrar().register(this.protocol,t)}stop(){this.running=!1,null!=this.registrarId&&(this.components.getRegistrar().unregister(this.registrarId),this.registrarId=void 0)}}var Zr=r(6855);class tn{constructor(t){this.components=new tt;const{peerRouting:e,lan:r,count:n,interval:i,queryTimeout:s}=t;this.log=(0,Q.kg)(`libp2p:kad-dht:${r?"lan":"wan"}:query-self`),this.running=!1,this.peerRouting=e,this.count=n??N,this.interval=i??D,this.queryTimeout=s??O}init(t){this.components=t}isStarted(){return this.running}async start(){this.running||(this.running=!0,this._querySelf())}async stop(){this.running=!1,null!=this.timeoutId&&clearTimeout(this.timeoutId),null!=this.controller&&this.controller.abort()}_querySelf(){Promise.resolve().then((async()=>{const t=new Y.TimeoutController(this.queryTimeout);try{this.controller=new AbortController;const e=(0,Ir.anySignal)([this.controller.signal,t.signal]);try{null!=Nr.setMaxListeners&&(0,Nr.setMaxListeners)(1/0,e)}catch{}const r=await(0,Le.zG)(this.peerRouting.getClosestPeers(this.components.getPeerId().toBytes(),{signal:e}),(t=>Zr(t,this.count)),(async t=>await Ae(t)));this.log("query ran successfully - found %d peers",r)}catch(e){this.log("query error",e)}finally{this.timeoutId=setTimeout(this._querySelf.bind(this),this.interval),t.clear()}})).catch((t=>{this.log("query error",t)}))}}const en=Symbol.for("@libp2p/peer-discovery");class rn extends Ge{constructor(t){super(),this.components=new tt;const{kBucketSize:e,clientMode:r,validators:n,selectors:i,querySelfInterval:s,lan:o,protocolPrefix:a,pingTimeout:c,pingConcurrency:u}=t;this.running=!1,this.lan=Boolean(o),this.log=(0,Q.kg)("libp2p:kad-dht:"+(!0===o?"lan":"wan")),this.protocol=`${a??R}${!0===o?_:""}${I}`,this.kBucketSize=e??20,this.clientMode=r??!0,this.routingTable=new it({kBucketSize:e,lan:this.lan,pingTimeout:c,pingConcurrency:u,protocol:this.protocol}),this.providers=new vr,this.validators={...sr,...n},this.selectors={...cr,...i},this.network=new rr({protocol:this.protocol,lan:this.lan}),this.queryManager=new Dr({disjointPaths:Math.ceil(this.kBucketSize/2),lan:o}),this.peerRouting=new gr({routingTable:this.routingTable,network:this.network,validators:this.validators,queryManager:this.queryManager,lan:this.lan}),this.contentFetching=new hr({validators:this.validators,selectors:this.selectors,peerRouting:this.peerRouting,queryManager:this.queryManager,routingTable:this.routingTable,network:this.network,lan:this.lan}),this.contentRouting=new dr({network:this.network,peerRouting:this.peerRouting,queryManager:this.queryManager,routingTable:this.routingTable,providers:this.providers,lan:this.lan}),this.routingTableRefresh=new ke({peerRouting:this.peerRouting,routingTable:this.routingTable,lan:this.lan}),this.rpc=new $r({routingTable:this.routingTable,providers:this.providers,peerRouting:this.peerRouting,validators:this.validators,lan:this.lan}),this.topologyListener=new Jr({protocol:this.protocol,lan:this.lan}),this.querySelf=new tn({peerRouting:this.peerRouting,interval:s,lan:this.lan}),this.network.addEventListener("peer",(t=>{const e=t.detail;this.onPeerConnect(e).catch((t=>{this.log.error("could not add %p to routing table",e.id,t)})),this.dispatchEvent(new $e("peer",{detail:e}))})),this.topologyListener.addEventListener("peer",(t=>{const e=t.detail;Promise.resolve().then((async()=>{const t=await this.components.getPeerStore().addressBook.get(e),r={id:e,multiaddrs:t.map((t=>t.multiaddr)),protocols:[]};await this.onPeerConnect(r)})).catch((t=>{this.log.error("could not add %p to routing table",e,t)}))}))}get[en](){return!0}get[Symbol.toStringTag](){return"@libp2p/kad-dht"}init(t){this.components=t,this.routingTable.init(t),this.providers.init(t),this.network.init(t),this.queryManager.init(t),this.peerRouting.init(t),this.contentFetching.init(t),this.contentRouting.init(t),this.routingTableRefresh.init(t),this.rpc.init(t),this.topologyListener.init(t),this.querySelf.init(t)}async onPeerConnect(t){if(this.log("peer %p connected with protocols %s",t.id,t.protocols),t=this.lan?K(t):V(t),0!==t.multiaddrs.length)try{await this.routingTable.add(t.id)}catch(e){this.log.error("could not add %p to routing table",t.id,e)}else this.log("ignoring %p as they do not have any %s addresses in %s",t.id,this.lan?"private":"public",t.multiaddrs.map((t=>t.toString())))}isStarted(){return this.running}async getMode(){return this.clientMode?"client":"server"}async setMode(t){await this.components.getRegistrar().unhandle(this.protocol),"client"===t?(this.log("enabling client mode"),this.clientMode=!0):(this.log("enabling server mode"),this.clientMode=!1,await this.components.getRegistrar().handle(this.protocol,this.rpc.onIncomingStream.bind(this.rpc)))}async start(){this.running=!0,await this.setMode(this.clientMode?"client":"server"),await Promise.all([this.providers.start(),this.queryManager.start(),this.network.start(),this.routingTable.start(),this.topologyListener.start(),this.querySelf.start()]),await this.routingTableRefresh.start()}async stop(){this.running=!1,await Promise.all([this.providers.stop(),this.queryManager.stop(),this.network.stop(),this.routingTable.stop(),this.routingTableRefresh.stop(),this.topologyListener.stop(),this.querySelf.stop()])}async*put(t,e,r={}){yield*this.contentFetching.put(t,e,r)}async*get(t,e={}){yield*this.contentFetching.get(t,e)}async*provide(t,e={}){yield*this.contentRouting.provide(t,this.components.getAddressManager().getAddresses(),e)}async*findProviders(t,e={}){yield*this.contentRouting.findProviders(t,e)}async*findPeer(t,e={}){yield*this.peerRouting.findPeer(t,e)}async*getClosestPeers(t,e={}){yield*this.peerRouting.getClosestPeers(t,e)}async refreshRoutingTable(){await this.routingTableRefresh.refreshTable(!0)}}const nn=(0,Q.kg)("libp2p:kad-dht");class sn extends Ge{constructor(t,e){super(),this.components=new tt,this.wan=t,this.lan=e,this.wan.addEventListener("peer",(t=>{this.dispatchEvent(new $e("peer",{detail:t.detail}))})),this.lan.addEventListener("peer",(t=>{this.dispatchEvent(new $e("peer",{detail:t.detail}))}))}get[en](){return!0}get[Symbol.toStringTag](){return"@libp2p/dual-kad-dht"}init(t){this.components=t,this.wan.init(t),this.lan.init(t)}isStarted(){return this.wan.isStarted()&&this.lan.isStarted()}async getMode(){return await this.wan.getMode()}async setMode(t){await this.wan.setMode(t)}async start(){await Promise.all([this.lan.start(),this.wan.start()])}async stop(){await Promise.all([this.lan.stop(),this.wan.stop()])}async*put(t,e,r={}){for await(const n of Pr(this.lan.put(t,e,r),this.wan.put(t,e,r)))yield n}async*get(t,e={}){let r=!1,n=!1;for await(const i of Pr(this.lan.get(t,e),this.wan.get(t,e)))yield i,"DIALING_PEER"===i.name&&(r=!0),"VALUE"===i.name&&(r=!0,null!=i.value&&(n=!0)),"SENDING_QUERY"===i.name&&(r=!0);if(!r)throw X(new Error("No peers found in routing table!"),"ERR_NO_PEERS_IN_ROUTING_TABLE");n||(yield Xe({from:this.components.getPeerId(),error:X(new Error("Not found"),"ERR_NOT_FOUND")}))}async*provide(t,e={}){let r=0,n=0;const i=[],s=[this.lan];"server"===await this.wan.getMode()&&s.push(this.wan);for await(const o of Pr(...s.map((r=>r.provide(t,e)))))yield o,"SENDING_QUERY"===o.name&&r++,"QUERY_ERROR"===o.name&&i.push(o.error),"PEER_RESPONSE"===o.name&&"ADD_PROVIDER"===o.messageName&&(nn("sent provider record for %s to %p",t,o.from),n++);if(0===n){if(i.length>0)throw X(new Error(`Failed to provide to ${i.length} of ${r} peers`),"ERR_PROVIDES_FAILED",{errors:i});throw X(new Error("Failed to provide - no peers found"),"ERR_PROVIDES_FAILED")}}async*findProviders(t,e={}){yield*Pr(this.lan.findProviders(t,e),this.wan.findProviders(t,e))}async*findPeer(t,e={}){let r=!1;for await(const n of Pr(this.lan.findPeer(t,e),this.wan.findPeer(t,e)))yield n,"SENDING_QUERY"!==n.name&&"FINAL_PEER"!==n.name||(r=!0);if(!r)throw X(new Error("Peer lookup failed"),"ERR_LOOKUP_FAILED")}async*getClosestPeers(t,e={}){yield*Pr(this.lan.getClosestPeers(t,e),this.wan.getClosestPeers(t,e))}async refreshRoutingTable(){await Promise.all([this.lan.refreshRoutingTable(),this.wan.refreshRoutingTable()])}}class on extends sn{constructor(t){super(new rn({protocolPrefix:"/ipfs",...t,lan:!1}),new rn({protocolPrefix:"/ipfs",...t,clientMode:!1,lan:!0}))}}},2656:function(t,e,r){"use strict";r.d(e,{kg:function(){return a}});var n=r(5652),i=r(8334),s=r(2056),o=r(1058);function a(t){return Object.assign(n(t),{error:n(`${t}:error`),trace:n(`${t}:trace`)})}n.formatters.b=t=>null==t?"undefined":i.base58btc.baseEncode(t),n.formatters.t=t=>null==t?"undefined":s.base32.baseEncode(t),n.formatters.m=t=>null==t?"undefined":o.base64.baseEncode(t),n.formatters.p=t=>null==t?"undefined":t.toString(),n.formatters.c=t=>null==t?"undefined":t.toString(),n.formatters.k=t=>null==t?"undefined":t.toString()},3804:function(t,e,r){"use strict";r.d(e,{U:function(){return H}});r(8675),r(3462),r(1703);var n=r(9174);class i{constructor(t){if(!(t>0)||0!==(t-1&t))throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(t),this.mask=t-1,this.top=0,this.btm=0,this.next=null}push(t){return void 0===this.buffer[this.top]&&(this.buffer[this.top]=t,this.top=this.top+1&this.mask,!0)}shift(){const t=this.buffer[this.btm];if(void 0!==t)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,t}isEmpty(){return void 0===this.buffer[this.btm]}}class s{constructor(t={}){this.hwm=t.splitLimit??16,this.head=new i(this.hwm),this.tail=this.head,this.size=0,this.objectMode=Boolean(t.objectMode)}push(t){if(null!=t?.value)if(this.objectMode)null!=t.value&&this.size++;else{if(!(t.value instanceof Uint8Array))throw new Error("objectMode was false but tried to push non-Uint8Array value");this.size+=t.value.byteLength}if(!this.head.push(t)){const e=this.head;this.head=e.next=new i(2*this.head.buffer.length),this.head.push(t)}}shift(){let t=this.tail.shift();if(void 0===t&&null!=this.tail.next){const e=this.tail.next;this.tail.next=null,this.tail=e,t=this.tail.shift()}if(null!=t?.value)if(this.objectMode)this.size--;else{if(!(t.value instanceof Uint8Array))throw new Error("objectMode was false but tried to shift non-Uint8Array value");this.size-=t.value.byteLength}return t}isEmpty(){return this.head.isEmpty()}}function o(t={}){const e=t=>{const e=t.shift();if(null==e)return{done:!0};if(null!=e.error)throw e.error;return{done:!0===e.done,value:e.value}};return c(e,t)}function a(t={}){const e=t=>{let e;const r=[];while(!t.isEmpty()){if(e=t.shift(),null==e)break;if(null!=e.error)throw e.error;!1===e.done&&r.push(e.value)}return null==e?{done:!0}:{done:!0===e.done,value:r}};return c(e,t)}function c(t,e){e=e??{};let r,n,i,o=e.onEnd,a=new s(e);const c=async()=>a.isEmpty()?i?{done:!0}:await new Promise(((e,i)=>{n=s=>{n=null,a.push(s);try{e(t(a))}catch(o){i(o)}return r}})):t(a),u=t=>null!=n?n(t):(a.push(t),r),l=t=>(a=new s,null!=n?n({error:t}):(a.push({error:t}),r)),h=t=>i?r:u({done:!1,value:t}),d=t=>i?r:(i=!0,null!=t?l(t):u({done:!0})),f=()=>(a=new s,d(),{done:!0}),p=t=>(d(t),{done:!0});if(r={[Symbol.asyncIterator](){return this},next:c,return:f,throw:p,push:h,end:d,get readableLength(){return a.size}},null==o)return r;const g=r;return r={[Symbol.asyncIterator](){return this},next(){return g.next()},throw(t){return g.throw(t),null!=o&&(o(t),o=void 0),{done:!0}},return(){return g.return(),null!=o&&(o(),o=void 0),{done:!0}},push:h,end(t){return g.end(t),null!=o&&(o(t),o=void 0),r},get readableLength(){return g.readableLength}},r}var u,l=r(43),h=r(2611);(function(t){t[t["NEW_STREAM"]=0]="NEW_STREAM",t[t["MESSAGE_RECEIVER"]=1]="MESSAGE_RECEIVER",t[t["MESSAGE_INITIATOR"]=2]="MESSAGE_INITIATOR",t[t["CLOSE_RECEIVER"]=3]="CLOSE_RECEIVER",t[t["CLOSE_INITIATOR"]=4]="CLOSE_INITIATOR",t[t["RESET_RECEIVER"]=5]="RESET_RECEIVER",t[t["RESET_INITIATOR"]=6]="RESET_INITIATOR"})(u||(u={}));const d=Object.freeze({0:"NEW_STREAM",1:"MESSAGE_RECEIVER",2:"MESSAGE_INITIATOR",3:"CLOSE_RECEIVER",4:"CLOSE_INITIATOR",5:"RESET_RECEIVER",6:"RESET_INITIATOR"}),f=Object.freeze({NEW_STREAM:u.NEW_STREAM,MESSAGE:u.MESSAGE_INITIATOR,CLOSE:u.CLOSE_INITIATOR,RESET:u.RESET_INITIATOR}),p=Object.freeze({MESSAGE:u.MESSAGE_RECEIVER,CLOSE:u.CLOSE_RECEIVER,RESET:u.RESET_RECEIVER}),g=10240;function y(t){return null!=globalThis.Buffer?Buffer.allocUnsafe(t):new Uint8Array(t)}class m{constructor(){this._pool=y(g),this._poolOffset=0}write(t){const e=this._pool;let r=this._poolOffset;h.encode(t.id<<3|t.type,e,r),r+=h.encode.bytes,t.type!==u.NEW_STREAM&&t.type!==u.MESSAGE_INITIATOR&&t.type!==u.MESSAGE_RECEIVER||null==t.data?h.encode(0,e,r):h.encode(t.data.length,e,r),r+=h.encode.bytes;const n=e.slice(this._poolOffset,r);return g-r<100?(this._pool=y(g),this._poolOffset=0):this._poolOffset=r,t.type!==u.NEW_STREAM&&t.type!==u.MESSAGE_INITIATOR&&t.type!==u.MESSAGE_RECEIVER||null==t.data?[n]:[n,t.data instanceof Uint8Array?t.data:t.data.slice()]}}const w=new m;async function*v(t){for await(const e of t)if(Array.isArray(e))for(const t of e)yield*w.write(t);else yield*w.write(e)}var E=r(9109);class b{constructor(){this._buffer=new E.H,this._headerInfo=null}write(t){if(null==t||0===t.length)return[];this._buffer.append(t);const e=[];while(0!==this._buffer.length){if(null==this._headerInfo)try{this._headerInfo=this._decodeHeader(this._buffer)}catch(r){break}const{id:t,type:n,length:i,offset:s}=this._headerInfo,o=this._buffer.length-s;if(o<i)break;const a={id:t,type:n};n!==u.NEW_STREAM&&n!==u.MESSAGE_INITIATOR&&n!==u.MESSAGE_RECEIVER||(a.data=this._buffer.slice(s,s+i)),e.push(a),this._buffer.consume(s+i),this._headerInfo=null}return e}_decodeHeader(t){const{value:e,offset:r}=R(t),{value:n,offset:i}=R(t,r),s=7&e;if(null==d[s])throw new Error(`Invalid type received: ${s}`);return{id:e>>3,type:s,offset:r+i,length:n}}}const S=128,_=127;function R(t,e=0){let r,n=0,i=0,s=e;const o=t.length;do{if(s>=o||i>49)throw e=0,new RangeError("Could not decode varint");r=t.get(s++),n+=i<28?(r&_)<<i:(r&_)*Math.pow(2,i),i+=7}while(r>=S);return e=s-e,{value:n,offset:e}}async function*I(t){const e=new b;for await(const r of t){const t=e.write(r);t.length>0&&(yield t)}}const C=1<<20;function A(t){const e=t??C,r=t=>{if((t.type===u.NEW_STREAM||t.type===u.MESSAGE_INITIATOR||t.type===u.MESSAGE_RECEIVER)&&t.data.byteLength>e)throw Object.assign(new Error("message size too large!"),{code:"ERR_MSG_TOO_BIG"})};return t=>async function*(){for await(const e of t)Array.isArray(e)?(e.forEach(r),yield*e):(r(e),yield e)}()}var T=r(9998),k=r(4908),P=r(2259),N=r(2656);const L=(0,N.kg)("libp2p:mplex:stream"),D="ERR_MPLEX_STREAM_RESET",O="ERR_MPLEX_STREAM_ABORT",B="ERR_MPLEX_SINK_ENDED";function x(t){const{id:e,name:r,send:n,onEnd:i,type:s="initiator",maxMsgSize:a=C}=t,c=new AbortController,u=new AbortController,h=new AbortController,d="initiator"===s?f:p,g="initiator"===s?`i${e}`:`r${e}`,y=`${null==r?e:r}`;let m,w=!1,v=!1;const b={open:Date.now()},S=t=>{w||(w=!0,L.trace("%s stream %s source end - err: %o",s,y,t),null!=t&&null==m&&(m=t),v&&(R.timeline.close=Date.now(),null!=i&&i(m)))},_=t=>{v||(v=!0,L.trace("%s stream %s sink end - err: %o",s,y,t),null!=t&&null==m&&(m=t),w&&(b.close=Date.now(),null!=i&&i(m)))},R={close:()=>{L.trace("%s stream %s close",s,y),R.closeRead(),R.closeWrite()},closeRead:()=>{L.trace("%s stream %s closeRead",s,y),w||R.source.end()},closeWrite:()=>{if(L.trace("%s stream %s closeWrite",s,y),!v){h.abort();try{n({id:e,type:d.CLOSE})}catch(t){L.trace("%s stream %s error sending close",s,r,t)}_()}},abort:t=>{L.trace("%s stream %s abort",s,y,t),R.source.end(t),c.abort(),_(t)},reset:()=>{const t=T(new Error("stream reset"),D);u.abort(),R.source.end(t),_(t)},sink:async t=>{if(v)throw T(new Error("stream closed for writing"),B);t=(0,l.wJ)(t,(0,k.anySignal)([c.signal,u.signal,h.signal]));try{"initiator"===s&&n({id:e,type:f.NEW_STREAM,data:(0,P.m)(y)});const r=new E.H;for await(const i of t){r.append(i);while(0!==r.length){if(r.length<=a){n({id:e,type:d.MESSAGE,data:r.subarray()}),r.consume(r.length);break}const t=r.length-a;n({id:e,type:d.MESSAGE,data:r.subarray(0,t)}),r.consume(t)}}}catch(i){if("aborted"===i.type&&"The operation was aborted"===i.message){if(h.signal.aborted)return;u.signal.aborted&&(i.message="stream reset",i.code=D),c.signal.aborted&&(i.message="stream aborted",i.code=O)}if(i.code===D)L.trace("%s stream %s reset",s,r);else{L.trace("%s stream %s error",s,r,i);try{n({id:e,type:d.RESET})}catch(i){L.trace("%s stream %s error sending reset",s,r,i)}}return R.source.end(i),void _(i)}try{n({id:e,type:d.CLOSE})}catch(i){L.trace("%s stream %s error sending close",s,r,i)}_()},source:o({onEnd:S}),timeline:b,id:g};return R}var U=r(6861),M=r(7108);const V=(0,N.kg)("libp2p:mplex"),K=1024,F=4194304;function j(t){const e={...t,type:`${d[t.type]} (${t.type})`};return t.type===u.NEW_STREAM&&(e.data=(0,U.BB)(t.data instanceof Uint8Array?t.data:t.data.slice())),t.type!==u.MESSAGE_INITIATOR&&t.type!==u.MESSAGE_RECEIVER||(e.data=(0,U.BB)(t.data instanceof Uint8Array?t.data:t.data.slice(),"base16")),e}class q{constructor(t,e){this.protocol="/mplex/6.7.0",e=e??{},this._streamId=0,this._streams={initiators:(0,M.s)({metrics:t.getMetrics(),component:"mplex",metric:"initiatorStreams"}),receivers:(0,M.s)({metrics:t.getMetrics(),component:"mplex",metric:"receiverStreams"})},this._init=e,this.sink=this._createSink();const r=this._createSource();this._source=r,this.source=r}init(t){}get streams(){const t=[];return this._streams.initiators.forEach((e=>{t.push(e)})),this._streams.receivers.forEach((e=>{t.push(e)})),t}newStream(t){const e=this._streamId++;t=null==t?e.toString():t.toString();const r=this._streams.initiators;return this._newStream({id:e,name:t,type:"initiator",registry:r})}_newReceiverStream(t){const{id:e,name:r}=t,n=this._streams.receivers;return this._newStream({id:e,name:r,type:"receiver",registry:n})}_newStream(t){const e=this._init.maxStreamsPerConnection??K;if(this._streams.initiators.size+this._streams.receivers.size===e)throw T(new Error("Too many streams open"),"ERR_TOO_MANY_STREAMS");const{id:r,name:n,type:i,registry:s}=t;if(V("new %s stream %s %s",i,r,n),s.has(r))throw new Error(`${i} stream ${r} already exists!`);const o=t=>{if(!s.has(r))throw T(new Error("the stream is not in the muxer registry, it may have already been closed"),"ERR_STREAM_DOESNT_EXIST");V.enabled&&V.trace("%s stream %s send",i,r,j(t)),t.type!==u.NEW_STREAM&&t.type!==u.MESSAGE_INITIATOR&&t.type!==u.MESSAGE_RECEIVER||(t.data=t.data instanceof Uint8Array?t.data:t.data.slice()),this._source.push(t)},a=()=>{V("%s stream %s %s ended",i,r,n),s.delete(r),null!=this._init.onStreamEnd&&this._init.onStreamEnd(c)},c=x({id:r,name:n,send:o,type:i,onEnd:a,maxMsgSize:this._init.maxMsgSize});return s.set(r,c),c}_createSink(){const t=async t=>{null!=this._init.signal&&(t=(0,l.wJ)(t,this._init.signal));try{await(0,n.zG)(t,I,A(this._init.maxMsgSize),(async t=>{for await(const e of t)this._handleIncoming(e)})),this._source.end()}catch(e){V("error in sink",e),this._source.end(e)}};return t}_createSource(){const t=t=>{const{initiators:e,receivers:r}=this._streams;for(const n of e.values())null!=t?n.abort(t):n.close();for(const n of r.values())null!=t?n.abort(t):n.close()},e=a({objectMode:!0,onEnd:t});return Object.assign(v(e),{push:e.push,end:e.end,return:e.return})}_handleIncoming(t){const{id:e,type:r}=t;if(V.enabled&&V.trace("incoming message",j(t)),t.type===u.NEW_STREAM){const r=this._newReceiverStream({id:e,name:(0,U.BB)(t.data instanceof Uint8Array?t.data:t.data.slice())});return void(null!=this._init.onIncomingStream&&this._init.onIncomingStream(r))}const n=1===(1&r)?this._streams.initiators:this._streams.receivers,i=n.get(e);if(null==i)return void V("missing stream %s",e);const s=this._init.maxStreamBufferSize??F;switch(r){case u.MESSAGE_INITIATOR:case u.MESSAGE_RECEIVER:if(i.source.readableLength>s){this._source.push({id:t.id,type:r===u.MESSAGE_INITIATOR?u.RESET_RECEIVER:u.RESET_INITIATOR});const e=T(new Error("Input buffer full - increase Mplex maxBufferSize to accomodate slow consumers"),"ERR_STREAM_INPUT_BUFFER_FULL");return void i.abort(e)}i.source.push(t.data.slice());break;case u.CLOSE_INITIATOR:case u.CLOSE_RECEIVER:i.closeRead();break;case u.RESET_INITIATOR:case u.RESET_RECEIVER:i.reset();break;default:V("unknown message type %s",r)}}}class H{constructor(t={}){this.protocol="/mplex/6.7.0",this.init=t}createStreamMuxer(t,e={}){return new q(t,{...e,...this.init})}}},5095:function(t,e,r){"use strict";r.d(e,{ji:function(){return s},fd:function(){return o}});var n=r(9412);function i(t,e){const r={[Symbol.iterator]:()=>r,next:()=>{const r=t.next(),n=r.value;if(!0===r.done||null==n){const t={done:!0,value:void 0};return t}return{done:!1,value:e(n)}}};return r}class s{constructor(t){if(this.map=new Map,null!=t)for(const[e,r]of t.entries())this.map.set(e.toString(),r)}[Symbol.iterator](){return this.entries()}clear(){this.map.clear()}delete(t){this.map.delete(t.toString())}entries(){return i(this.map.entries(),(t=>[(0,n.jE)(t[0]),t[1]]))}forEach(t){this.map.forEach(((e,r)=>{t(e,(0,n.jE)(r),this)}))}get(t){return this.map.get(t.toString())}has(t){return this.map.has(t.toString())}set(t,e){this.map.set(t.toString(),e)}keys(){return i(this.map.keys(),(t=>(0,n.jE)(t)))}values(){return this.map.values()}get size(){return this.map.size}}class o{constructor(t){if(this.set=new Set,null!=t)for(const e of t)this.set.add(e.toString())}get size(){return this.set.size}[Symbol.iterator](){return this.values()}add(t){this.set.add(t.toString())}clear(){this.set.clear()}delete(t){this.set.delete(t.toString())}entries(){return i(this.set.entries(),(t=>{const e=(0,n.jE)(t[0]);return[e,e]}))}forEach(t){this.set.forEach((e=>{const r=(0,n.jE)(e);t(r,r,this)}))}has(t){return this.set.has(t.toString())}values(){return i(this.set.values(),(t=>(0,n.jE)(t)))}}Symbol.iterator},9412:function(t,e,r){"use strict";r.d(e,{cv:function(){return S},y5:function(){return R},vL:function(){return E},jE:function(){return b}});r(8675),r(3462),r(1703);var n=r(9329),i=r(958),s=r(8334),o=r(5226),a=r(7041),c=r(4141),u=r(1919),l=r(9998);const h=Symbol.for("@libp2p/peer-id");const d=Object.values(i.gh).map((t=>t.decoder)).reduce(((t,e)=>t.or(e)),i.gh.identity.decoder),f=114,p=36,g=37;class y{constructor(t){this.type=t.type,this.multihash=t.multihash,this.privateKey=t.privateKey,Object.defineProperty(this,"string",{enumerable:!1,writable:!0})}get[Symbol.toStringTag](){return`PeerId(${this.toString()})`}get[h](){return!0}toString(){return null==this.string&&(this.string=s.base58btc.encode(this.multihash.bytes).slice(1)),this.string}toCID(){return n.k.createV1(f,this.multihash)}toBytes(){return this.multihash.bytes}toJSON(){return this.toString()}equals(t){if(t instanceof Uint8Array)return(0,c.f)(this.multihash.bytes,t);if("string"===typeof t)return b(t).equals(this);if(null!=t?.multihash?.bytes)return(0,c.f)(this.multihash.bytes,t.multihash.bytes);throw new Error("not valid Id")}}class m extends y{constructor(t){super({...t,type:"RSA"}),this.type="RSA",this.publicKey=t.publicKey}}class w extends y{constructor(t){super({...t,type:"Ed25519"}),this.type="Ed25519",this.publicKey=t.multihash.digest}}class v extends y{constructor(t){super({...t,type:"secp256k1"}),this.type="secp256k1",this.publicKey=t.multihash.digest}}function E(t){const e=l(new Error("Not a PeerId"),"ERR_INVALID_PARAMETERS");if("RSA"===t.type)return new m(t);if("Ed25519"===t.type)return new w(t);if("secp256k1"===t.type)return new v(t);throw e}function b(t,e){if(e=e??d,"1"===t.charAt(0)||"Q"===t.charAt(0)){const e=o.Jx(s.base58btc.decode(`z${t}`));return t.startsWith("12D")?new w({multihash:e}):t.startsWith("16U")?new v({multihash:e}):new m({multihash:e})}return S(d.decode(t))}function S(t){try{const e=o.Jx(t);if(e.code===a.identity.code){if(e.digest.length===p)return new w({multihash:e});if(e.digest.length===g)return new v({multihash:e})}if(e.code===u.sha256.code)return new m({multihash:e})}catch{return _(n.k.decode(t))}throw new Error("Supplied PeerID CID is invalid")}function _(t){if(null==t||null==t.multihash||null==t.version||1===t.version&&t.code!==f)throw new Error("Supplied PeerID CID is invalid");const e=t.multihash;if(e.code===u.sha256.code)return new m({multihash:t.multihash});if(e.code===a.identity.code){if(e.digest.length===p)return new w({multihash:t.multihash});if(e.digest.length===g)return new v({multihash:t.multihash})}throw new Error("Supplied PeerID CID is invalid")}async function R(t,e){return t.length===p?new w({multihash:o.Ue(a.identity.code,t),privateKey:e}):t.length===g?new v({multihash:o.Ue(a.identity.code,t),privateKey:e}):new m({multihash:await u.sha256.digest(t),publicKey:t,privateKey:e})}},7108:function(t,e,r){"use strict";r.d(e,{s:function(){return i}});class n extends Map{constructor(t){super();const{system:e,component:r,metric:n,metrics:i}=t;this.system=e??"libp2p",this.component=r,this.metric=n,this.metrics=i,this.updateComponentMetric()}set(t,e){return super.set(t,e),this.updateComponentMetric(),this}delete(t){const e=super.delete(t);return this.updateComponentMetric(),e}clear(){super.clear(),this.updateComponentMetric()}updateComponentMetric(){this.metrics.updateComponentMetric({system:this.system,component:this.component,metric:this.metric,value:this.size})}}function i(t){const{system:e,component:r,metric:i,metrics:s}=t;let o;return o=null!=s?new n({system:e,component:r,metric:i,metrics:s}):new Map,o}},6596:function(t,e,r){"use strict";r.d(e,{x:function(){return Ne}});var n={};r.r(n),r.d(n,{Decoder:function(){return St},Encoder:function(){return bt},PacketType:function(){return Et},protocol:function(){return vt}});r(1703);var i=r(2656),s=r(9998),o=r(43),a=r(3839),c=r(9222);const u=421,l=290,h=2e3;var d=r(2793);function f(t,e="",r){let n=t;r=r||"undefined"!==typeof location&&location,null==t&&(t=r.protocol+"//"+r.host),"string"===typeof t&&("/"===t.charAt(0)&&(t="/"===t.charAt(1)?r.protocol+t:r.host+t),/^(https?|wss?):\/\//.test(t)||(t="undefined"!==typeof r?r.protocol+"//"+t:"https://"+t),n=d(t)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const i=-1!==n.host.indexOf(":"),s=i?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+s+":"+n.port+e,n.href=n.protocol+"://"+s+(r&&r.port===n.port?"":":"+n.port),n}var p=r(2742),g=(()=>"undefined"!==typeof self?self:"undefined"!==typeof window?window:Function("return this")())();function y(t){const e=t.xdomain;try{if("undefined"!==typeof XMLHttpRequest&&(!e||p))return new XMLHttpRequest}catch(r){}if(!e)try{return new(g[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(r){}}function m(t,...e){return e.reduce(((e,r)=>(t.hasOwnProperty(r)&&(e[r]=t[r]),e)),{})}const w=setTimeout,v=clearTimeout;function E(t,e){e.useNativeTimers?(t.setTimeoutFn=w.bind(g),t.clearTimeoutFn=v.bind(g)):(t.setTimeoutFn=setTimeout.bind(g),t.clearTimeoutFn=clearTimeout.bind(g))}var b=r(6764);const S=Object.create(null);S["open"]="0",S["close"]="1",S["ping"]="2",S["pong"]="3",S["message"]="4",S["upgrade"]="5",S["noop"]="6";const _=Object.create(null);Object.keys(S).forEach((t=>{_[S[t]]=t}));const R={type:"error",data:"parser error"},I="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),C="function"===typeof ArrayBuffer,A=t=>"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,T=({type:t,data:e},r,n)=>I&&e instanceof Blob?r?n(e):k(e,n):C&&(e instanceof ArrayBuffer||A(e))?r?n(e):k(new Blob([e]),n):n(S[t]+(e||"")),k=(t,e)=>{const r=new FileReader;return r.onload=function(){const t=r.result.split(",")[1];e("b"+t)},r.readAsDataURL(t)};for(var P=T,N=(r(8675),r(3462),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),L="undefined"===typeof Uint8Array?[]:new Uint8Array(256),D=0;D<N.length;D++)L[N.charCodeAt(D)]=D;var O=function(t){var e,r,n,i,s,o=.75*t.length,a=t.length,c=0;"="===t[t.length-1]&&(o--,"="===t[t.length-2]&&o--);var u=new ArrayBuffer(o),l=new Uint8Array(u);for(e=0;e<a;e+=4)r=L[t.charCodeAt(e)],n=L[t.charCodeAt(e+1)],i=L[t.charCodeAt(e+2)],s=L[t.charCodeAt(e+3)],l[c++]=r<<2|n>>4,l[c++]=(15&n)<<4|i>>2,l[c++]=(3&i)<<6|63&s;return u};const B="function"===typeof ArrayBuffer,x=(t,e)=>{if("string"!==typeof t)return{type:"message",data:M(t,e)};const r=t.charAt(0);if("b"===r)return{type:"message",data:U(t.substring(1),e)};const n=_[r];return n?t.length>1?{type:_[r],data:t.substring(1)}:{type:_[r]}:R},U=(t,e)=>{if(B){const r=O(t);return M(r,e)}return{base64:!0,data:t}},M=(t,e)=>{switch(e){case"blob":return t instanceof ArrayBuffer?new Blob([t]):t;case"arraybuffer":default:return t}};var V=x;const K=String.fromCharCode(30),F=(t,e)=>{const r=t.length,n=new Array(r);let i=0;t.forEach(((t,s)=>{P(t,!1,(t=>{n[s]=t,++i===r&&e(n.join(K))}))}))},j=(t,e)=>{const r=t.split(K),n=[];for(let i=0;i<r.length;i++){const t=V(r[i],e);if(n.push(t),"error"===t.type)break}return n},q=4;class H extends b.Q{constructor(t){super(),this.writable=!1,E(this,t),this.opts=t,this.query=t.query,this.readyState="",this.socket=t.socket}onError(t,e){const r=new Error(t);return r.type="TransportError",r.description=e,super.emit("error",r),this}open(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(t){"open"===this.readyState&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emit("open")}onData(t){const e=V(t,this.socket.binaryType);this.onPacket(e)}onPacket(t){super.emit("packet",t)}onClose(){this.readyState="closed",super.emit("close")}}var G=r(7755),z=r(6327);class $ extends H{constructor(){super(...arguments),this.polling=!1}get name(){return"polling"}doOpen(){this.poll()}pause(t){this.readyState="pausing";const e=()=>{this.readyState="paused",t()};if(this.polling||!this.writable){let t=0;this.polling&&(t++,this.once("pollComplete",(function(){--t||e()}))),this.writable||(t++,this.once("drain",(function(){--t||e()})))}else e()}poll(){this.polling=!0,this.doPoll(),this.emit("poll")}onData(t){const e=t=>{if("opening"===this.readyState&&"open"===t.type&&this.onOpen(),"close"===t.type)return this.onClose(),!1;this.onPacket(t)};j(t,this.socket.binaryType).forEach(e),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState&&this.poll())}doClose(){const t=()=>{this.write([{type:"close"}])};"open"===this.readyState?t():this.once("open",t)}write(t){this.writable=!1,F(t,(t=>{this.doWrite(t,(()=>{this.writable=!0,this.emit("drain")}))}))}uri(){let t=this.query||{};const e=this.opts.secure?"https":"http";let r="";!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=G()),this.supportsBinary||t.sid||(t.b64=1),this.opts.port&&("https"===e&&443!==Number(this.opts.port)||"http"===e&&80!==Number(this.opts.port))&&(r=":"+this.opts.port);const n=z.encode(t),i=-1!==this.opts.hostname.indexOf(":");return e+"://"+(i?"["+this.opts.hostname+"]":this.opts.hostname)+r+this.opts.path+(n.length?"?"+n:"")}}function W(){}const Y=function(){const t=new y({xdomain:!1});return null!=t.responseType}();class Q extends ${constructor(t){if(super(t),"undefined"!==typeof location){const e="https:"===location.protocol;let r=location.port;r||(r=e?"443":"80"),this.xd="undefined"!==typeof location&&t.hostname!==location.hostname||r!==t.port,this.xs=t.secure!==e}const e=t&&t.forceBase64;this.supportsBinary=Y&&!e}request(t={}){return Object.assign(t,{xd:this.xd,xs:this.xs},this.opts),new X(this.uri(),t)}doWrite(t,e){const r=this.request({method:"POST",data:t});r.on("success",e),r.on("error",(t=>{this.onError("xhr post error",t)}))}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(t=>{this.onError("xhr poll error",t)})),this.pollXhr=t}}class X extends b.Q{constructor(t,e){super(),E(this,e),this.opts=e,this.method=e.method||"GET",this.uri=t,this.async=!1!==e.async,this.data=void 0!==e.data?e.data:null,this.create()}create(){const t=m(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this.opts.xd,t.xscheme=!!this.opts.xs;const e=this.xhr=new y(t);try{e.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){e.setDisableHeaderCheck&&e.setDisableHeaderCheck(!0);for(let t in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(t)&&e.setRequestHeader(t,this.opts.extraHeaders[t])}}catch(r){}if("POST"===this.method)try{e.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(r){}try{e.setRequestHeader("Accept","*/*")}catch(r){}"withCredentials"in e&&(e.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(e.timeout=this.opts.requestTimeout),e.onreadystatechange=()=>{4===e.readyState&&(200===e.status||1223===e.status?this.onLoad():this.setTimeoutFn((()=>{this.onError("number"===typeof e.status?e.status:0)}),0))},e.send(this.data)}catch(r){return void this.setTimeoutFn((()=>{this.onError(r)}),0)}"undefined"!==typeof document&&(this.index=X.requestsCount++,X.requests[this.index]=this)}onSuccess(){this.emit("success"),this.cleanup()}onData(t){this.emit("data",t),this.onSuccess()}onError(t){this.emit("error",t),this.cleanup(!0)}cleanup(t){if("undefined"!==typeof this.xhr&&null!==this.xhr){if(this.xhr.onreadystatechange=W,t)try{this.xhr.abort()}catch(e){}"undefined"!==typeof document&&delete X.requests[this.index],this.xhr=null}}onLoad(){const t=this.xhr.responseText;null!==t&&this.onData(t)}abort(){this.cleanup()}}if(X.requestsCount=0,X.requests={},"undefined"!==typeof document)if("function"===typeof attachEvent)attachEvent("onunload",J);else if("function"===typeof addEventListener){const t="onpagehide"in g?"pagehide":"unload";addEventListener(t,J,!1)}function J(){for(let t in X.requests)X.requests.hasOwnProperty(t)&&X.requests[t].abort()}const Z=(()=>{const t="function"===typeof Promise&&"function"===typeof Promise.resolve;return t?t=>Promise.resolve().then(t):(t,e)=>e(t,0)})(),tt=g.WebSocket||g.MozWebSocket,et=!0,rt="arraybuffer",nt="undefined"!==typeof navigator&&"string"===typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class it extends H{constructor(t){super(t),this.supportsBinary=!t.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const t=this.uri(),e=this.opts.protocols,r=nt?{}:m(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=et&&!nt?e?new tt(t,e):new tt(t):new tt(t,e,r)}catch(n){return this.emit("error",n)}this.ws.binaryType=this.socket.binaryType||rt,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=this.onClose.bind(this),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let e=0;e<t.length;e++){const r=t[e],n=e===t.length-1;P(r,this.supportsBinary,(t=>{const e={};if(!et&&(r.options&&(e.compress=r.options.compress),this.opts.perMessageDeflate)){const r="string"===typeof t?Buffer.byteLength(t):t.length;r<this.opts.perMessageDeflate.threshold&&(e.compress=!1)}try{et?this.ws.send(t):this.ws.send(t,e)}catch(i){}n&&Z((()=>{this.writable=!0,this.emit("drain")}),this.setTimeoutFn)}))}}doClose(){"undefined"!==typeof this.ws&&(this.ws.close(),this.ws=null)}uri(){let t=this.query||{};const e=this.opts.secure?"wss":"ws";let r="";this.opts.port&&("wss"===e&&443!==Number(this.opts.port)||"ws"===e&&80!==Number(this.opts.port))&&(r=":"+this.opts.port),this.opts.timestampRequests&&(t[this.opts.timestampParam]=G()),this.supportsBinary||(t.b64=1);const n=z.encode(t),i=-1!==this.opts.hostname.indexOf(":");return e+"://"+(i?"["+this.opts.hostname+"]":this.opts.hostname)+r+this.opts.path+(n.length?"?"+n:"")}check(){return!!tt&&!("__initialize"in tt&&this.name===it.prototype.name)}}const st={websocket:it,polling:Q};class ot extends b.Q{constructor(t,e={}){super(),t&&"object"===typeof t&&(e=t,t=null),t?(t=d(t),e.hostname=t.host,e.secure="https"===t.protocol||"wss"===t.protocol,e.port=t.port,t.query&&(e.query=t.query)):e.host&&(e.hostname=d(e.host).host),E(this,e),this.secure=null!=e.secure?e.secure:"undefined"!==typeof location&&"https:"===location.protocol,e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.hostname=e.hostname||("undefined"!==typeof location?location.hostname:"localhost"),this.port=e.port||("undefined"!==typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=e.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},e),this.opts.path=this.opts.path.replace(/\/$/,"")+"/","string"===typeof this.opts.query&&(this.opts.query=z.decode(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,"function"===typeof addEventListener&&(this.opts.closeOnBeforeunload&&addEventListener("beforeunload",(()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())}),!1),"localhost"!==this.hostname&&(this.offlineEventListener=()=>{this.onClose("transport close")},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(t){const e=at(this.opts.query);e.EIO=q,e.transport=t,this.id&&(e.sid=this.id);const r=Object.assign({},this.opts.transportOptions[t],this.opts,{query:e,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new st[t](r)}open(){let t;if(this.opts.rememberUpgrade&&ot.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))t="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn((()=>{this.emitReserved("error","No transports available")}),0);t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(e){return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",(()=>{this.onClose("transport close")}))}probe(t){let e=this.createTransport(t),r=!1;ot.priorWebsocketSuccess=!1;const n=()=>{r||(e.send([{type:"ping",data:"probe"}]),e.once("packet",(t=>{if(!r)if("pong"===t.type&&"probe"===t.data){if(this.upgrading=!0,this.emitReserved("upgrading",e),!e)return;ot.priorWebsocketSuccess="websocket"===e.name,this.transport.pause((()=>{r||"closed"!==this.readyState&&(u(),this.setTransport(e),e.send([{type:"upgrade"}]),this.emitReserved("upgrade",e),e=null,this.upgrading=!1,this.flush())}))}else{const t=new Error("probe error");t.transport=e.name,this.emitReserved("upgradeError",t)}})))};function i(){r||(r=!0,u(),e.close(),e=null)}const s=t=>{const r=new Error("probe error: "+t);r.transport=e.name,i(),this.emitReserved("upgradeError",r)};function o(){s("transport closed")}function a(){s("socket closed")}function c(t){e&&t.name!==e.name&&i()}const u=()=>{e.removeListener("open",n),e.removeListener("error",s),e.removeListener("close",o),this.off("close",a),this.off("upgrading",c)};e.once("open",n),e.once("error",s),e.once("close",o),this.once("close",a),this.once("upgrading",c),e.open()}onOpen(){if(this.readyState="open",ot.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade&&this.transport.pause){let t=0;const e=this.upgrades.length;for(;t<e;t++)this.probe(this.upgrades[t])}}onPacket(t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn((()=>{this.onClose("ping timeout")}),this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emitReserved("flush"))}write(t,e,r){return this.sendPacket("message",t,e,r),this}send(t,e,r){return this.sendPacket("message",t,e,r),this}sendPacket(t,e,r,n){if("function"===typeof e&&(n=e,e=void 0),"function"===typeof r&&(n=r,r=null),"closing"===this.readyState||"closed"===this.readyState)return;r=r||{},r.compress=!1!==r.compress;const i={type:t,data:e,options:r};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),n&&this.once("flush",n),this.flush()}close(){const t=()=>{this.onClose("forced close"),this.transport.close()},e=()=>{this.off("upgrade",e),this.off("upgradeError",e),t()},r=()=>{this.once("upgrade",e),this.once("upgradeError",e)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(()=>{this.upgrading?r():t()})):this.upgrading?r():t()),this}onError(t){ot.priorWebsocketSuccess=!1,this.emitReserved("error",t),this.onClose("transport error",t)}onClose(t,e){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"===typeof removeEventListener&&removeEventListener("offline",this.offlineEventListener,!1),this.readyState="closed",this.id=null,this.emitReserved("close",t,e),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(t){const e=[];let r=0;const n=t.length;for(;r<n;r++)~this.transports.indexOf(t[r])&&e.push(t[r]);return e}}function at(t){const e={};for(let r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}ot.protocol=q;ot.protocol;const ct="function"===typeof ArrayBuffer,ut=t=>"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,lt=Object.prototype.toString,ht="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===lt.call(Blob),dt="function"===typeof File||"undefined"!==typeof File&&"[object FileConstructor]"===lt.call(File);function ft(t){return ct&&(t instanceof ArrayBuffer||ut(t))||ht&&t instanceof Blob||dt&&t instanceof File}function pt(t,e){if(!t||"object"!==typeof t)return!1;if(Array.isArray(t)){for(let e=0,r=t.length;e<r;e++)if(pt(t[e]))return!0;return!1}if(ft(t))return!0;if(t.toJSON&&"function"===typeof t.toJSON&&1===arguments.length)return pt(t.toJSON(),!0);for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&pt(t[r]))return!0;return!1}function gt(t){const e=[],r=t.data,n=t;return n.data=yt(r,e),n.attachments=e.length,{packet:n,buffers:e}}function yt(t,e){if(!t)return t;if(ft(t)){const r={_placeholder:!0,num:e.length};return e.push(t),r}if(Array.isArray(t)){const r=new Array(t.length);for(let n=0;n<t.length;n++)r[n]=yt(t[n],e);return r}if("object"===typeof t&&!(t instanceof Date)){const r={};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=yt(t[n],e));return r}return t}function mt(t,e){return t.data=wt(t.data,e),t.attachments=void 0,t}function wt(t,e){if(!t)return t;if(t&&t._placeholder)return e[t.num];if(Array.isArray(t))for(let r=0;r<t.length;r++)t[r]=wt(t[r],e);else if("object"===typeof t)for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(t[r]=wt(t[r],e));return t}const vt=5;var Et;(function(t){t[t["CONNECT"]=0]="CONNECT",t[t["DISCONNECT"]=1]="DISCONNECT",t[t["EVENT"]=2]="EVENT",t[t["ACK"]=3]="ACK",t[t["CONNECT_ERROR"]=4]="CONNECT_ERROR",t[t["BINARY_EVENT"]=5]="BINARY_EVENT",t[t["BINARY_ACK"]=6]="BINARY_ACK"})(Et||(Et={}));class bt{encode(t){return t.type!==Et.EVENT&&t.type!==Et.ACK||!pt(t)?[this.encodeAsString(t)]:(t.type=t.type===Et.EVENT?Et.BINARY_EVENT:Et.BINARY_ACK,this.encodeAsBinary(t))}encodeAsString(t){let e=""+t.type;return t.type!==Et.BINARY_EVENT&&t.type!==Et.BINARY_ACK||(e+=t.attachments+"-"),t.nsp&&"/"!==t.nsp&&(e+=t.nsp+","),null!=t.id&&(e+=t.id),null!=t.data&&(e+=JSON.stringify(t.data)),e}encodeAsBinary(t){const e=gt(t),r=this.encodeAsString(e.packet),n=e.buffers;return n.unshift(r),n}}class St extends b.Q{constructor(){super()}add(t){let e;if("string"===typeof t)e=this.decodeString(t),e.type===Et.BINARY_EVENT||e.type===Et.BINARY_ACK?(this.reconstructor=new Rt(e),0===e.attachments&&super.emitReserved("decoded",e)):super.emitReserved("decoded",e);else{if(!ft(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");e=this.reconstructor.takeBinaryData(t),e&&(this.reconstructor=null,super.emitReserved("decoded",e))}}decodeString(t){let e=0;const r={type:Number(t.charAt(0))};if(void 0===Et[r.type])throw new Error("unknown packet type "+r.type);if(r.type===Et.BINARY_EVENT||r.type===Et.BINARY_ACK){const n=e+1;while("-"!==t.charAt(++e)&&e!=t.length);const i=t.substring(n,e);if(i!=Number(i)||"-"!==t.charAt(e))throw new Error("Illegal attachments");r.attachments=Number(i)}if("/"===t.charAt(e+1)){const n=e+1;while(++e){const r=t.charAt(e);if(","===r)break;if(e===t.length)break}r.nsp=t.substring(n,e)}else r.nsp="/";const n=t.charAt(e+1);if(""!==n&&Number(n)==n){const n=e+1;while(++e){const r=t.charAt(e);if(null==r||Number(r)!=r){--e;break}if(e===t.length)break}r.id=Number(t.substring(n,e+1))}if(t.charAt(++e)){const n=_t(t.substr(e));if(!St.isPayloadValid(r.type,n))throw new Error("invalid payload");r.data=n}return r}static isPayloadValid(t,e){switch(t){case Et.CONNECT:return"object"===typeof e;case Et.DISCONNECT:return void 0===e;case Et.CONNECT_ERROR:return"string"===typeof e||"object"===typeof e;case Et.EVENT:case Et.BINARY_EVENT:return Array.isArray(e)&&e.length>0;case Et.ACK:case Et.BINARY_ACK:return Array.isArray(e)}}destroy(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}function _t(t){try{return JSON.parse(t)}catch(e){return!1}}class Rt{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const t=mt(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function It(t,e,r){return t.on(e,r),function(){t.off(e,r)}}const Ct=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class At extends b.Q{constructor(t,e,r){super(),this.connected=!1,this.disconnected=!0,this.receiveBuffer=[],this.sendBuffer=[],this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=e,r&&r.auth&&(this.auth=r.auth),this.io._autoConnect&&this.open()}subEvents(){if(this.subs)return;const t=this.io;this.subs=[It(t,"open",this.onopen.bind(this)),It(t,"packet",this.onpacket.bind(this)),It(t,"error",this.onerror.bind(this)),It(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io["_reconnecting"]||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...e){if(Ct.hasOwnProperty(t))throw new Error('"'+t+'" is a reserved event name');e.unshift(t);const r={type:Et.EVENT,data:e,options:{}};if(r.options.compress=!1!==this.flags.compress,"function"===typeof e[e.length-1]){const t=this.ids++,n=e.pop();this._registerAckCallback(t,n),r.id=t}const n=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable,i=this.flags.volatile&&(!n||!this.connected);return i||(this.connected?this.packet(r):this.sendBuffer.push(r)),this.flags={},this}_registerAckCallback(t,e){const r=this.flags.timeout;if(void 0===r)return void(this.acks[t]=e);const n=this.io.setTimeoutFn((()=>{delete this.acks[t];for(let e=0;e<this.sendBuffer.length;e++)this.sendBuffer[e].id===t&&this.sendBuffer.splice(e,1);e.call(this,new Error("operation has timed out"))}),r);this.acks[t]=(...t)=>{this.io.clearTimeoutFn(n),e.apply(this,[null,...t])}}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){"function"==typeof this.auth?this.auth((t=>{this.packet({type:Et.CONNECT,data:t})})):this.packet({type:Et.CONNECT,data:this.auth})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t){this.connected=!1,this.disconnected=!0,delete this.id,this.emitReserved("disconnect",t)}onpacket(t){const e=t.nsp===this.nsp;if(e)switch(t.type){case Et.CONNECT:if(t.data&&t.data.sid){const e=t.data.sid;this.onconnect(e)}else this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Et.EVENT:this.onevent(t);break;case Et.BINARY_EVENT:this.onevent(t);break;case Et.ACK:this.onack(t);break;case Et.BINARY_ACK:this.onack(t);break;case Et.DISCONNECT:this.ondisconnect();break;case Et.CONNECT_ERROR:this.destroy();const e=new Error(t.data.message);e.data=t.data.data,this.emitReserved("connect_error",e);break}}onevent(t){const e=t.data||[];null!=t.id&&e.push(this.ack(t.id)),this.connected?this.emitEvent(e):this.receiveBuffer.push(Object.freeze(e))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const e=this._anyListeners.slice();for(const r of e)r.apply(this,t)}super.emit.apply(this,t)}ack(t){const e=this;let r=!1;return function(...n){r||(r=!0,e.packet({type:Et.ACK,id:t,data:n}))}}onack(t){const e=this.acks[t.id];"function"===typeof e&&(e.apply(this,t.data),delete this.acks[t.id])}onconnect(t){this.id=t,this.connected=!0,this.disconnected=!1,this.emitBuffered(),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach((t=>this.emitEvent(t))),this.receiveBuffer=[],this.sendBuffer.forEach((t=>this.packet(t))),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach((t=>t())),this.subs=void 0),this.io["_destroy"](this)}disconnect(){return this.connected&&this.packet({type:Et.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const e=this._anyListeners;for(let r=0;r<e.length;r++)if(t===e[r])return e.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}}var Tt=r(7706);class kt extends b.Q{constructor(t,e){var r;super(),this.nsps={},this.subs=[],t&&"object"===typeof t&&(e=t,t=void 0),e=e||{},e.path=e.path||"/socket.io",this.opts=e,E(this,e),this.reconnection(!1!==e.reconnection),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(r=e.randomizationFactor)&&void 0!==r?r:.5),this.backoff=new Tt({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==e.timeout?2e4:e.timeout),this._readyState="closed",this.uri=t;const i=e.parser||n;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=!1!==e.autoConnect,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection}reconnectionAttempts(t){return void 0===t?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var e;return void 0===t?this._reconnectionDelay:(this._reconnectionDelay=t,null===(e=this.backoff)||void 0===e||e.setMin(t),this)}randomizationFactor(t){var e;return void 0===t?this._randomizationFactor:(this._randomizationFactor=t,null===(e=this.backoff)||void 0===e||e.setJitter(t),this)}reconnectionDelayMax(t){var e;return void 0===t?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,null===(e=this.backoff)||void 0===e||e.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new ot(this.uri,this.opts);const e=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const n=It(e,"open",(function(){r.onopen(),t&&t()})),i=It(e,"error",(e=>{r.cleanup(),r._readyState="closed",this.emitReserved("error",e),t?t(e):r.maybeReconnectOnOpen()}));if(!1!==this._timeout){const t=this._timeout;0===t&&n();const r=this.setTimeoutFn((()=>{n(),e.close(),e.emit("error",new Error("timeout"))}),t);this.opts.autoUnref&&r.unref(),this.subs.push((function(){clearTimeout(r)}))}return this.subs.push(n),this.subs.push(i),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(It(t,"ping",this.onping.bind(this)),It(t,"data",this.ondata.bind(this)),It(t,"error",this.onerror.bind(this)),It(t,"close",this.onclose.bind(this)),It(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){this.decoder.add(t)}ondecoded(t){this.emitReserved("packet",t)}onerror(t){this.emitReserved("error",t)}socket(t,e){let r=this.nsps[t];return r||(r=new At(this,t,e),this.nsps[t]=r),r}_destroy(t){const e=Object.keys(this.nsps);for(const r of e){const t=this.nsps[r];if(t.active)return}this._close()}_packet(t){const e=this.encoder.encode(t);for(let r=0;r<e.length;r++)this.engine.write(e[r],t.options)}cleanup(){this.subs.forEach((t=>t())),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(t){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const e=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn((()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),t.skipReconnect||t.open((e=>{e?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",e)):t.onreconnect()})))}),e);this.opts.autoUnref&&r.unref(),this.subs.push((function(){clearTimeout(r)}))}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const Pt={};function Nt(t,e){"object"===typeof t&&(e=t,t=void 0),e=e||{};const r=f(t,e.path||"/socket.io"),n=r.source,i=r.id,s=r.path,o=Pt[i]&&s in Pt[i]["nsps"],a=e.forceNew||e["force new connection"]||!1===e.multiplex||o;let c;return a?c=new kt(n,e):(Pt[i]||(Pt[i]=new kt(n,e)),c=Pt[i]),r.query&&!e.query&&(e.query=r.queryKey),c.socket(r.path,e)}Object.assign(Nt,{Manager:kt,Socket:At,io:Nt,connect:Nt});var Lt,Dt=r(4622),Ot=function(t,e,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(t):n?n.value:e.get(t)};class Bt extends EventTarget{constructor(){super(...arguments),Lt.set(this,new Map)}listenerCount(t){const e=Ot(this,Lt,"f").get(t);return null==e?0:e.length}addEventListener(t,e,r){super.addEventListener(t,e,r);let n=Ot(this,Lt,"f").get(t);null==n&&(n=[],Ot(this,Lt,"f").set(t,n)),n.push({callback:e,once:(!0!==r&&!1!==r&&r?.once)??!1})}removeEventListener(t,e,r){super.removeEventListener(t,e,r);let n=Ot(this,Lt,"f").get(t);null!=n&&(n=n.filter((({callback:t})=>t!==e)),Ot(this,Lt,"f").set(t,n))}dispatchEvent(t){const e=super.dispatchEvent(t);let r=Ot(this,Lt,"f").get(t.type);return null==r||(r=r.filter((({once:t})=>!t)),Ot(this,Lt,"f").set(t.type,r)),e}}Lt=new WeakMap;class xt extends Event{constructor(t,e){super(t,e),this.detail=e?.detail}}const Ut=globalThis.CustomEvent??xt;var Mt=r(1809),Vt=r(6523),Kt=r(6312);const Ft=65536,jt=5e3;class qt{constructor(t,e){this.label=t.label,this.open=(0,Dt.Z)(),this.channel=t,this.channel.binaryType="arraybuffer",this.log=e.log,"number"===typeof this.channel.bufferedAmountLowThreshold&&(this.channel.bufferedAmountLowThreshold=Ft),t.addEventListener("message",(t=>{e.onMessage(t)})),t.addEventListener("bufferedamountlow",(()=>{this.log("stop backpressure: bufferedAmount %d",this.channel.bufferedAmount),this.open.resolve()})),t.addEventListener("open",(()=>{this.open.resolve(),e.onOpen()})),t.addEventListener("close",(()=>{e.onClose()})),t.addEventListener("error",(r=>{if("Transport channel closed"===r.error?.message)return this.close();e.log.error('channel encounter an error in state "%s" message: "%s" detail: "%s',t.readyState,r.error?.message,r.error?.errorDetail);const n=r.error instanceof Error?r.error:new Error(`datachannel error: ${r.error?.message} ${r.error?.errorDetail}`);e.onError(s(n,"ERR_DATA_CHANNEL"))}));let r=!1;this.closingInterval=setInterval((()=>{"closing"===t.readyState?(r&&e.onClose(),r=!0):r=!1}),jt)}async send(t){await this.open.promise,this.channel.send(t),this.channel.bufferedAmount>Ft&&(this.log("start backpressure: bufferedAmount %d",this.channel.bufferedAmount),this.open=(0,Dt.Z)())}close(){clearInterval(this.closingInterval),this.channel.close()}get bufferedAmount(){return this.channel.bufferedAmount}}var Ht=r(8592);const Gt={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}]};function zt(){if("undefined"===typeof globalThis)throw s(new Error("No WebRTC support detected"),"ERR_WEBRTC_SUPPORT");const t={RTCPeerConnection:globalThis.RTCPeerConnection??globalThis.mozRTCPeerConnection??globalThis.webkitRTCPeerConnection,RTCSessionDescription:globalThis.RTCSessionDescription??globalThis.mozRTCSessionDescription??globalThis.webkitRTCSessionDescription,RTCIceCandidate:globalThis.RTCIceCandidate??globalThis.mozRTCIceCandidate??globalThis.webkitRTCIceCandidate};if(null==t.RTCPeerConnection)throw s(new Error("No WebRTC support detected"),"ERR_WEBRTC_SUPPORT");return t}class $t extends Bt{constructor(t){super(),this.id=t.id??(0,Vt.B)(Mt(4),"hex").slice(0,7),this.log=(0,i.kg)(`libp2p:webrtc-peer:${t.logPrefix}:${this.id}`),this.wrtc=t.wrtc??zt(),this.peerConnection=new this.wrtc.RTCPeerConnection(Object.assign({},Gt,t.peerConnectionConfig)),this.closed=!1,this.connected=(0,Dt.Z)(),this.source=(0,Kt.d)(),this.sink=async t=>{if(await this.connected.promise,null==this.channel)throw s(new Error("Connected but no channel?!"),"ERR_DATA_CHANNEL");for await(const e of t)await this.channel.send(e);await this.close()}}handleDataChannelEvent(t){const e=t.channel;null!=e?this.channel=new qt(e,{log:this.log,onMessage:t=>{this.source.push(new Uint8Array(t.data))},onOpen:()=>{this.connected.resolve(),this.dispatchEvent(new Ut("ready"))},onClose:()=>{this.close().catch((t=>{this.log("error closing connection after channel close",t)}))},onError:t=>{this.close(t).catch((t=>{this.log("error closing connection after channel error",t)}))}}):this.close(s(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL")).catch((t=>{this.log("Error closing after event channel was found to be null",t)}))}async close(t){if(this.closed=!0,null==t&&null!=this.channel)while(this.channel.bufferedAmount>0)await Ht(100);this.channel?.close(),this.peerConnection.close(),this.source.end(t),this.dispatchEvent(new Ut("close"))}}class Wt extends Bt{constructor(t){super(),this.log=t.log,this.peerConnection=t.peerConnection,this.wrtc=t.wrtc,this.status="idle",this.peerConnection.addEventListener("negotiationneeded",(()=>{this.log("peer connection negotiation needed"),this.handleRenegotiate({type:"renegotiate"}).catch((t=>{this.log.error("could not renegotiate %o",t)}))}))}async handleSignal(t){return this.log('incoming signal "%s"',t.type),"offer"===t.type?await this.handleOffer(t):"answer"===t.type?await this.handleAnswer(t):"candidate"===t.type?await this.handleCandidate(t):"renegotiate"===t.type?await this.handleRenegotiate(t):"goodbye"===t.type?await this.handleGoodye(t):void this.log(`Unknown signal type ${t.type}`)}async handleOffer(t){}async handleAnswer(t){}async handleRenegotiate(t){}async handleGoodye(t){this.peerConnection.close()}async handleCandidate(t){const e=new this.wrtc.RTCIceCandidate(t.candidate);try{await this.peerConnection.addIceCandidate(e)}catch(r){if(null!=e.address&&!e.address.endsWith(".local"))throw s(r,"ERR_ADD_ICE_CANDIDATE");this.log("ignoring unsupported ICE candidate.")}}}const Yt=(0,i.kg)("libp2p:webrtc-peer:receiver");class Qt extends $t{constructor(t={}){super({...t,logPrefix:"receiver"}),this.handshake=new Xt({log:this.log,peerConnection:this.peerConnection,wrtc:this.wrtc,answerOptions:t.answerOptions}),this.handshake.addEventListener("signal",(t=>this.dispatchEvent(new Ut("signal",{detail:t.detail})))),this.peerConnection.addEventListener("datachannel",(t=>{this.handleDataChannelEvent(t)}))}handleSignal(t){this.handshake.handleSignal(t).catch((e=>{this.log("error handling signal %o %o",t,e)}))}}class Xt extends Wt{constructor(t){super(t),this.options=t,this.status="idle",this.iceCandidates=[]}async handleRenegotiate(){Yt.trace("renegotiate"),this.dispatchEvent(new Ut("signal",{detail:{type:"renegotiate"}}))}async handleOffer(t){await this.peerConnection.setRemoteDescription(new this.wrtc.RTCSessionDescription(t));for(const r of this.iceCandidates)await this.handleCandidate(r);this.iceCandidates=[];const e=await this.peerConnection.createAnswer(this.options.answerOptions);await this.peerConnection.setLocalDescription(e),Yt.trace("handle offer",this.peerConnection.localDescription),this.dispatchEvent(new Ut("signal",{detail:this.peerConnection.localDescription??e}))}async handleCandidate(t){null!=this.peerConnection.remoteDescription&&null!=this.peerConnection.remoteDescription.type?await super.handleCandidate(t):this.iceCandidates.push(t)}}var Jt=r(8713);const Zt=t=>{const e=t.on||t.addListener||t.addEventListener,r=t.off||t.removeListener||t.removeEventListener;if(!e||!r)throw new TypeError("Emitter is not compatible");return{addListener:e.bind(t),removeListener:r.bind(t)}};function te(t,e,r){let n;const i=new Promise(((i,s)=>{if(r={rejectionEvents:["error"],multiArgs:!1,resolveImmediately:!1,...r},!(r.count>=0)||r.count!==Number.POSITIVE_INFINITY&&!Number.isInteger(r.count))throw new TypeError("The `count` option should be at least 0 or more");const o=[e].flat(),a=[],{addListener:c,removeListener:u}=Zt(t),l=(...t)=>{const e=r.multiArgs?t:t[0];r.filter&&!r.filter(e)||(a.push(e),r.count===a.length&&(n(),i(a)))},h=t=>{n(),s(t)};n=()=>{for(const t of o)u(t,l);for(const t of r.rejectionEvents)u(t,h)};for(const t of o)c(t,l);for(const t of r.rejectionEvents)c(t,h);r.resolveImmediately&&i(a)}));if(i.cancel=n,"number"===typeof r.timeout){const t=(0,Jt.Z)(i,r.timeout);return t.cancel=n,t}return i}function ee(t,e,r){"function"===typeof r&&(r={filter:r}),r={...r,count:1,resolveImmediately:!1};const n=te(t,e,r),i=n.then((t=>t[0]));return i.cancel=n.cancel,i}const re=(0,i.kg)("libp2p:webrtc-peer:initator"),ne=1e3;class ie extends $t{constructor(t={}){super({...t,logPrefix:"initiator"}),this.handleDataChannelEvent({channel:this.peerConnection.createDataChannel(t.dataChannelLabel??(0,Vt.B)(Mt(20),"hex").slice(0,7),t.dataChannelInit)}),this.handshake=new se({log:this.log,peerConnection:this.peerConnection,wrtc:this.wrtc,offerOptions:t.offerOptions}),this.handshake.addEventListener("signal",(t=>{this.dispatchEvent(new Ut("signal",{detail:t.detail}))}))}handleSignal(t){this.handshake.handleSignal(t).catch((e=>{this.log("error handling signal %o %o",t,e)}))}}class se extends Wt{constructor(t){super(t),this.options=t,this.status="idle",this.peerConnection.addEventListener("icecandidate",(t=>{if(null==t.candidate)return;const e={type:"candidate",candidate:{candidate:t.candidate.candidate,sdpMLineIndex:t.candidate.sdpMLineIndex,sdpMid:t.candidate.sdpMid}};re.trace("create candidate",e),this.dispatchEvent(new Ut("signal",{detail:e})),this.dispatchEvent(new Ut("ice-candidate"))}))}async handleRenegotiate(){if("negotiating"===this.status)return void this.log("already negotiating, queueing");this.status="negotiating";const t=await this.peerConnection.createOffer(this.options.offerOptions);await this.peerConnection.setLocalDescription(t),await ee(this,"ice-candidate"),await Ht(ne),re.trace("renegotiate",this.peerConnection.localDescription),this.dispatchEvent(new Ut("signal",{detail:this.peerConnection.localDescription??t}))}async handleAnswer(t){re.trace("handle answer",t),await this.peerConnection.setRemoteDescription(new this.wrtc.RTCSessionDescription(t)),this.status="idle"}}const oe=(0,i.kg)("libp2p:webrtc-star:socket");function ae(t,e){const{sink:r,source:n}=t,i={remoteAddr:e.remoteAddr,async sink(t){null!=e.signal&&(t=(0,o.wJ)(t,e.signal));try{await r(t)}catch(n){"aborted"!==n.type&&oe.error(n)}},source:null!=e.signal?(0,o.wJ)(n,e.signal):n,timeline:{open:Date.now()},async close(){if(t.closed)return;const e=Date.now(),r=setTimeout((()=>{if(null!=i.remoteAddr){const{host:t,port:r}=i.remoteAddr.toOptions();oe("timeout closing socket to %s:%s after %dms, destroying it manually",t,r,Date.now()-e)}t.closed||t.close().catch((t=>{oe.error("could not close socket",t)}))}),h);try{await t.close()}finally{clearTimeout(r)}}};return t.addEventListener("close",(()=>{null==i.timeline.close&&(i.timeline.close=Date.now())}),{once:!0}),i}function ce(t){const e=t.toString().split("/"),r=t.protos()[1].name,n=t.protos()[2].name,i=t.stringTuples()[1][1];if("tcp"!==r||"ws"!==n&&"wss"!==n)throw new Error(`invalid multiaddr: ${t.toString()}`);if(!a.sc.isName(t))return`http://${e[2]}:${e[4]}`;if("ws"===n)return`http://${e[2]}${null==i||"80"===i?"":`:${i}`}`;if("wss"===n)return`https://${e[2]}${null==i||"443"===i?"":`:${i}`}`;throw new Error("invalid multiaddr: "+t.toString())}function ue(t){const e="/libp2p-webrtc-star";if(t.startsWith(e)){t=t.substring(e.length,t.length);let r=new a.sc(t);const n=r.stringTuples().filter((t=>421===t[0]))[0];if(null==n[1])throw new Error("invalid multiaddr: "+t);r=r.decapsulate("p2p"),r=r.encapsulate("/p2p-webrtc-star"),r=r.encapsulate(`/p2p/${n[1]}`),t=r.toString()}return t}var le,he=function(t,e,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(t):n?n.value:e.get(t)};class de extends EventTarget{constructor(){super(...arguments),le.set(this,new Map)}listenerCount(t){const e=he(this,le,"f").get(t);return null==e?0:e.length}addEventListener(t,e,r){super.addEventListener(t,e,r);let n=he(this,le,"f").get(t);null==n&&(n=[],he(this,le,"f").set(t,n)),n.push({callback:e,once:(!0!==r&&!1!==r&&r?.once)??!1})}removeEventListener(t,e,r){super.removeEventListener(t,e,r);let n=he(this,le,"f").get(t);null!=n&&(n=n.filter((({callback:t})=>t!==e)),he(this,le,"f").set(t,n))}dispatchEvent(t){const e=super.dispatchEvent(t);let r=he(this,le,"f").get(t.type);return null==r||(r=r.filter((({once:t})=>!t)),he(this,le,"f").set(t.type,r)),e}}le=new WeakMap;class fe extends Event{constructor(t,e){super(t,e),this.detail=e?.detail}}const pe=globalThis.CustomEvent??fe,ge=(0,i.kg)("libp2p:webrtc-star:listener"),ye={transports:["websocket"],"force new connection":!0,path:"/socket.io-next/"};class me extends de{constructor(t,e,r,n,i){super(),this.signallingAddr=e,this.socket=Nt(t,ye),this.connections=[],this.channels=new Map,this.pendingSignals=new Map,this.upgrader=r,this.handler=n,this.channelOptions=i,this.handleWsHandshake=this.handleWsHandshake.bind(this),this.socket.once("connect_error",(t=>{this.dispatchEvent(new pe("error",{detail:t}))})),this.socket.once("error",(t=>{this.dispatchEvent(new pe("error",{detail:t}))})),this.socket.on("ws-handshake",this.handleWsHandshake),this.socket.on("ws-peer",(t=>{this.dispatchEvent(new pe("peer",{detail:t}))})),this.socket.on("connect",(()=>this.socket.emit("ss-join",e.toString()))),this.socket.once("connect",(()=>{this.dispatchEvent(new pe("listening"))}))}_createChannel(t,e,r){const n={...this.channelOptions},i=new Qt(n),s=t=>{const e=t.detail;ge.error("incoming connection errored",e)};return i.addEventListener("error",s),i.addEventListener("close",(()=>{i.removeEventListener("error",s)}),{once:!0}),i.addEventListener("signal",(n=>{const i=n.detail;this.socket.emit("ss-handshake",{intentId:t,srcMultiaddr:e,dstMultiaddr:r,answer:!0,signal:i})})),i.addEventListener("ready",(()=>{const e=ae(i,{remoteAddr:this.signallingAddr});ge("new inbound connection %s",e.remoteAddr);try{this.upgrader.upgradeInbound(e).then((r=>{ge("inbound connection %s upgraded",e.remoteAddr),this.connections.push(e);const n=()=>{this.connections=this.connections.filter((t=>t!==e)),this.channels.delete(t),this.pendingSignals.delete(t)};i.addEventListener("close",n,{once:!0}),this.dispatchEvent(new pe("connection",{detail:r})),this.handler(r)})).catch((t=>{ge.error("inbound connection failed to upgrade",t),e.close().catch((t=>{ge.error("inbound connection failed to close after failing to upgrade",t)}))}))}catch(r){ge.error("inbound connection failed to upgrade",r),e.close().catch((t=>{ge.error("inbound connection failed to close after failing to upgrade",t)}))}}),{once:!0}),i}handleWsHandshake(t){if(ge('incoming handshake. signal type "%s" is answer %s',t.signal.type,t.answer),!0===t.answer||null!=t.err||null==t.intentId)return;const e=t.intentId;let r=this.pendingSignals.get(e);null==r&&(r=[],this.pendingSignals.set(e,r)),r.push(t);let n=this.channels.get(e);if(null==n){if("offer"!==t.signal.type)return void ge("handshake is not an offer and channel does not exist, buffering until we receive an offer");ge("creating new channel to handle offer handshake"),n=this._createChannel(t.intentId,t.srcMultiaddr,t.dstMultiaddr),this.channels.set(e,n)}else ge("channel already exists, using it to handle handshake");while(r.length>0){const t=r.shift();null!=t?.signal&&n.handleSignal(t.signal)}}async close(){this.socket.emit("ss-leave",this.signallingAddr.toString()),this.socket.removeAllListeners(),this.socket.close(),await Promise.all([...this.connections.map((async t=>await t.close())),...Array.from(this.channels.values()).map((async t=>await t.close()))]),this.dispatchEvent(new pe("close"))}}class we extends de{constructor(t,e,r,n,i){super(),this.upgrader=t,this.handler=e,this.peerId=r,this.transport=n,this.options=i}async listen(t){if(null!=this.listeningAddr)throw s(new Error("listener already in use"),"ERR_ALREADY_LISTENING");const e=(0,Dt.Z)();let r;this.listeningAddr=t,r=t.protoCodes().includes(u)?t:t.encapsulate(`/p2p/${this.peerId.toString()}`),this.signallingUrl=ce(t),ge("connecting to signalling server on: %s",this.signallingUrl);const n=new me(this.signallingUrl,r,this.upgrader,this.handler,this.options.channelOptions);return n.addEventListener("error",(t=>{const r=t.detail;ge("error connecting to signalling server %o",r),n.close().catch((t=>{ge.error("error closing server after error",t)})),e.reject(r)})),n.addEventListener("listening",(()=>{ge("connected to signalling server"),this.dispatchEvent(new pe("listening")),e.resolve()})),n.addEventListener("peer",(t=>{this.transport.peerDiscovered(t.detail)})),n.addEventListener("connection",(e=>{const r=e.detail;if(null==r.remoteAddr)try{r.remoteAddr=t.decapsulateCode(u).encapsulate(`/p2p/${r.remotePeer.toString()}`)}catch(n){ge.error("could not determine remote address",n)}this.dispatchEvent(new pe("connection",{detail:r}))})),this.transport.sigServers.set(this.signallingUrl,n),await e.promise}async close(){if(null!=this.signallingUrl){const t=this.transport.sigServers.get(this.signallingUrl);null!=t&&(await t.close(),this.transport.sigServers.delete(this.signallingUrl))}this.dispatchEvent(new pe("close")),this.listeningAddr=void 0}getAddrs(){return null!=this.listeningAddr?[this.listeningAddr]:[]}}function ve(t,e,r,n,i){return new we(t,e,r,n,i)}var Ee=r(6861),be=r(9412);const Se=Symbol.for("@libp2p/transport");function _e(t){return null!=t&&"function"===typeof t.start&&"function"===typeof t.stop}function Re(t){return null!=t&&"function"===typeof t.init}class Ie{constructor(t={}){this.started=!1,null!=t.peerId&&this.setPeerId(t.peerId),null!=t.addressManager&&this.setAddressManager(t.addressManager),null!=t.peerStore&&this.setPeerStore(t.peerStore),null!=t.upgrader&&this.setUpgrader(t.upgrader),null!=t.metrics&&this.setMetrics(t.metrics),null!=t.registrar&&this.setRegistrar(t.registrar),null!=t.connectionManager&&this.setConnectionManager(t.connectionManager),null!=t.transportManager&&this.setTransportManager(t.transportManager),null!=t.connectionGater&&this.setConnectionGater(t.connectionGater),null!=t.contentRouting&&this.setContentRouting(t.contentRouting),null!=t.peerRouting&&this.setPeerRouting(t.peerRouting),null!=t.datastore&&this.setDatastore(t.datastore),null!=t.connectionProtector&&this.setConnectionProtector(t.connectionProtector),null!=t.dht&&this.setDHT(t.dht),null!=t.pubsub&&this.setPubSub(t.pubsub)}isStarted(){return this.started}async beforeStart(){await Promise.all(Object.values(this).filter((t=>_e(t))).map((async t=>{null!=t.beforeStart&&await t.beforeStart()})))}async start(){await Promise.all(Object.values(this).filter((t=>_e(t))).map((async t=>{await t.start()}))),this.started=!0}async afterStart(){await Promise.all(Object.values(this).filter((t=>_e(t))).map((async t=>{null!=t.afterStart&&await t.afterStart()})))}async beforeStop(){await Promise.all(Object.values(this).filter((t=>_e(t))).map((async t=>{null!=t.beforeStop&&await t.beforeStop()})))}async stop(){await Promise.all(Object.values(this).filter((t=>_e(t))).map((async t=>{await t.stop()}))),this.started=!1}async afterStop(){await Promise.all(Object.values(this).filter((t=>_e(t))).map((async t=>{null!=t.afterStop&&await t.afterStop()})))}setPeerId(t){return this.peerId=t,t}getPeerId(){if(null==this.peerId)throw s(new Error("peerId not set"),"ERR_SERVICE_MISSING");return this.peerId}setMetrics(t){return this.metrics=t,Re(t)&&t.init(this),t}getMetrics(){return this.metrics}setAddressManager(t){return this.addressManager=t,Re(t)&&t.init(this),t}getAddressManager(){if(null==this.addressManager)throw s(new Error("addressManager not set"),"ERR_SERVICE_MISSING");return this.addressManager}setPeerStore(t){return this.peerStore=t,Re(t)&&t.init(this),t}getPeerStore(){if(null==this.peerStore)throw s(new Error("peerStore not set"),"ERR_SERVICE_MISSING");return this.peerStore}setUpgrader(t){return this.upgrader=t,Re(t)&&t.init(this),t}getUpgrader(){if(null==this.upgrader)throw s(new Error("upgrader not set"),"ERR_SERVICE_MISSING");return this.upgrader}setRegistrar(t){return this.registrar=t,Re(t)&&t.init(this),t}getRegistrar(){if(null==this.registrar)throw s(new Error("registrar not set"),"ERR_SERVICE_MISSING");return this.registrar}setConnectionManager(t){return this.connectionManager=t,Re(t)&&t.init(this),t}getConnectionManager(){if(null==this.connectionManager)throw s(new Error("connectionManager not set"),"ERR_SERVICE_MISSING");return this.connectionManager}setTransportManager(t){return this.transportManager=t,Re(t)&&t.init(this),t}getTransportManager(){if(null==this.transportManager)throw s(new Error("transportManager not set"),"ERR_SERVICE_MISSING");return this.transportManager}setConnectionGater(t){return this.connectionGater=t,Re(t)&&t.init(this),t}getConnectionGater(){if(null==this.connectionGater)throw s(new Error("connectionGater not set"),"ERR_SERVICE_MISSING");return this.connectionGater}setContentRouting(t){return this.contentRouting=t,Re(t)&&t.init(this),t}getContentRouting(){if(null==this.contentRouting)throw s(new Error("contentRouting not set"),"ERR_SERVICE_MISSING");return this.contentRouting}setPeerRouting(t){return this.peerRouting=t,Re(t)&&t.init(this),t}getPeerRouting(){if(null==this.peerRouting)throw s(new Error("peerRouting not set"),"ERR_SERVICE_MISSING");return this.peerRouting}setDatastore(t){return this.datastore=t,Re(t)&&t.init(this),t}getDatastore(){if(null==this.datastore)throw s(new Error("datastore not set"),"ERR_SERVICE_MISSING");return this.datastore}setConnectionProtector(t){return this.connectionProtector=t,Re(t)&&t.init(this),t}getConnectionProtector(){return this.connectionProtector}setDHT(t){return this.dht=t,Re(t)&&t.init(this),t}getDHT(){if(null==this.dht)throw s(new Error("dht not set"),"ERR_SERVICE_MISSING");return this.dht}setPubSub(t){return this.pubsub=t,Re(t)&&t.init(this),t}getPubSub(){if(null==this.pubsub)throw s(new Error("pubsub not set"),"ERR_SERVICE_MISSING");return this.pubsub}}const Ce=Symbol.for("@libp2p/peer-discovery");const Ae="RTCPeerConnection"in globalThis,Te=(0,i.kg)("libp2p:webrtc-star"),ke=()=>{};class Pe extends de{constructor(){super(...arguments),this.started=!1}get[Ce](){return!0}get[Symbol.toStringTag](){return"@libp2p/webrtc-star-discovery"}isStarted(){return this.started}async start(){this.started=!0}async stop(){this.started=!1}dispatchEvent(t){return!!this.isStarted()&&super.dispatchEvent(t)}}class Ne{constructor(t){this.components=new Ie,null!=t?.wrtc&&(this.wrtc=t.wrtc),this.sigServers=new Map,this.discovery=new Pe,this.peerDiscovered=this.peerDiscovered.bind(this)}get[Se](){return!0}get[Symbol.toStringTag](){return"@libp2p/webrtc-star"}init(t){this.components=t}async dial(t,e){const r=await this._connect(t,e),n=ae(r,{remoteAddr:t,signal:e.signal});Te("new outbound connection %s",n.remoteAddr);const i=await e.upgrader.upgradeOutbound(n);return Te("outbound connection %s upgraded",n.remoteAddr),i}async _connect(t,e){if(!0===e.signal?.aborted)throw new o._L;const r={...e.channelOptions??{}};null!=this.wrtc&&(r.wrtc=this.wrtc);const n=t.toOptions(),i=(0,Ee.BB)(Mt(36),"hex");return await new Promise(((a,c)=>{const u=this.sigServers.get(ce(t));if(null==u?.socket)return c(s(new Error("unknown signal server to use"),"ERR_UNKNOWN_SIGNAL_SERVER"));let l=!1;Te("dialing %s:%s",n.host,n.port);const h=new ie(r),d=t=>{const e=t.detail;if(!l){const t=`connection error ${n.host}:${n.port}: ${e.message}`;Te.error(t),g(e)}},f=()=>{l=!0,Te("connection opened %s:%s",n.host,n.port),g()},p=()=>{Te.error("connection aborted %s:%s",n.host,n.port),h.close().finally((()=>{g(new o._L)}))},g=t=>{h.removeEventListener("ready",f),e.signal?.removeEventListener("abort",p),null==t?a(h):c(t)};h.addEventListener("ready",f,{once:!0}),h.addEventListener("close",(()=>{h.removeEventListener("error",d)})),e.signal?.addEventListener("abort",p),h.addEventListener("signal",(e=>{const r=e.detail;u.socket.emit("ss-handshake",{intentId:i,srcMultiaddr:u.signallingAddr.toString(),dstMultiaddr:t.toString(),signal:r})})),u.socket.on("ws-handshake",(t=>{t.intentId===i&&null!=t.err&&h.close().finally((()=>{c(s(new Error(t.err),"ERR_SIGNALLING_FAILED"))})),t.intentId!==i||null==t.answer||h.closed||h.handleSignal(t.signal)}))}))}createListener(t){if(!Ae&&null==this.wrtc)throw s(new Error("no WebRTC support"),"ERR_NO_WEBRTC_SUPPORT");return t.channelOptions=t.channelOptions??{},null!=this.wrtc&&(t.channelOptions.wrtc=this.wrtc),ve(t.upgrader,t.handler??ke,this.components.getPeerId(),this,t)}filter(t){return t=Array.isArray(t)?t:[t],t.filter((t=>!t.protoCodes().includes(l)&&c.xk.matches(t)))}peerDiscovered(t){Te("peer discovered: %s",t),t=ue(t);const e=new a.sc(t),r=e.getPeerId();if(null==r)return;const n=(0,be.jE)(r);this.discovery.dispatchEvent(new pe("peer",{detail:{id:n,multiaddrs:[e],protocols:[]}}))}}},9222:function(t,e,r){"use strict";r.d(e,{Ul:function(){return R},dx:function(){return _},xk:function(){return m}});var n=r(3839);const i=T("dns4"),s=T("dns6"),o=T("dnsaddr"),a=A(T("dns"),o,i,s),c=A(T("ip4"),T("ip6")),u=A(C(c,T("tcp")),C(a,T("tcp"))),l=C(c,T("udp")),h=C(l,T("utp")),d=C(l,T("quic")),f=A(C(u,T("ws")),C(a,T("ws"))),p=A(C(u,T("wss")),C(a,T("wss"))),g=A(C(u,T("http")),C(c,T("http")),C(a,T("http"))),y=A(C(u,T("https")),C(c,T("https")),C(a,T("https"))),m=A(C(f,T("p2p-webrtc-star"),T("p2p")),C(p,T("p2p-webrtc-star"),T("p2p")),C(f,T("p2p-webrtc-star")),C(p,T("p2p-webrtc-star"))),w=(A(C(f,T("p2p-websocket-star"),T("p2p")),C(p,T("p2p-websocket-star"),T("p2p")),C(f,T("p2p-websocket-star")),C(p,T("p2p-websocket-star"))),A(C(g,T("p2p-webrtc-direct"),T("p2p")),C(y,T("p2p-webrtc-direct"),T("p2p")),C(g,T("p2p-webrtc-direct")),C(y,T("p2p-webrtc-direct")))),v=A(f,p,g,y,m,w,u,h,d,a),E=(A(C(v,T("p2p-stardust"),T("p2p")),C(v,T("p2p-stardust"))),A(C(v,T("p2p")),m,w,T("p2p"))),b=A(C(E,T("p2p-circuit"),E),C(E,T("p2p-circuit")),C(T("p2p-circuit"),E),C(v,T("p2p-circuit")),C(T("p2p-circuit"),v),T("p2p-circuit")),S=()=>A(C(b,S),b),_=S(),R=A(C(_,E,_),C(E,_),C(_,E),_,E);function I(t){function e(e){let r;try{r=new n.sc(e)}catch(s){return!1}const i=t(r.protoNames());return null!==i&&(!0===i||!1===i?i:0===i.length)}return e}function C(...t){function e(e){if(e.length<t.length)return null;let r=e;return t.some((t=>(r="function"===typeof t?t().partialMatch(e):t.partialMatch(e),Array.isArray(r)&&(e=r),null===r))),r}return{toString:function(){return"{ "+t.join(" ")+" }"},input:t,matches:I(e),partialMatch:e}}function A(...t){function e(e){let r=null;return t.some((t=>{const n="function"===typeof t?t().partialMatch(e):t.partialMatch(e);return null!=n&&(r=n,!0)})),r}const r={toString:function(){return"{ "+t.join(" ")+" }"},input:t,matches:I(e),partialMatch:e};return r}function T(t){const e=t;function r(t){let r;try{r=new n.sc(t)}catch(s){return!1}const i=r.protoNames();return 1===i.length&&i[0]===e}function i(t){return 0===t.length?null:t[0]===e?t.slice(1):null}return{toString:function(){return e},matches:r,partialMatch:i}}},3839:function(t,e,r){"use strict";r.d(e,{sc:function(){return ct},a_:function(){return b.Ev}});r(8675),r(3462),r(1703);const n="[a-fA-F\\d:]",i=t=>t&&t.includeBoundaries?`(?:(?<=\\s|^)(?=${n})|(?<=${n})(?=\\s|$))`:"",s="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",o="[a-fA-F\\d]{1,4}",a=`\n(?:\n(?:${o}:){7}(?:${o}|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8\n(?:${o}:){6}(?:${s}|:${o}|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4\n(?:${o}:){5}(?::${s}|(?::${o}){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4\n(?:${o}:){4}(?:(?::${o}){0,1}:${s}|(?::${o}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4\n(?:${o}:){3}(?:(?::${o}){0,2}:${s}|(?::${o}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4\n(?:${o}:){2}(?:(?::${o}){0,3}:${s}|(?::${o}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4\n(?:${o}:){1}(?:(?::${o}){0,4}:${s}|(?::${o}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4\n(?::(?:(?::${o}){0,5}:${s}|(?::${o}){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4\n)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1\n`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),c=new RegExp(`(?:^${s}$)|(?:^${a}$)`),u=new RegExp(`^${s}$`),l=new RegExp(`^${a}$`),h=t=>t&&t.exact?c:new RegExp(`(?:${i(t)}${s}${i(t)})|(?:${i(t)}${a}${i(t)})`,"g");h.v4=t=>t&&t.exact?u:new RegExp(`${i(t)}${s}${i(t)}`,"g"),h.v6=t=>t&&t.exact?l:new RegExp(`${i(t)}${a}${i(t)}`,"g");var d=h;function f(t){return d({exact:!0}).test(t)}function p(t){return d.v6({exact:!0}).test(t)}function g(t){return d.v4({exact:!0}).test(t)}var y=r(6523);const m=g,w=p,v=function(t){let e,r=0;if(m(t))e=new Uint8Array(r+4),t.split(/\./g).forEach((t=>{e[r++]=255&parseInt(t,10)}));else if(w(t)){const n=t.split(":",8);let i;for(i=0;i<n.length;i++){const t=m(n[i]);let e;t&&(e=v(n[i]),n[i]=(0,y.B)(e.slice(0,2),"base16")),null!=e&&++i<8&&n.splice(i,0,(0,y.B)(e.slice(2,4),"base16"))}if(""===n[0])while(n.length<8)n.unshift("0");else if(""===n[n.length-1])while(n.length<8)n.push("0");else if(n.length<8){for(i=0;i<n.length&&""!==n[i];i++);const t=[i,1];for(i=9-n.length;i>0;i--)t.push("0");n.splice.apply(n,t)}for(e=new Uint8Array(r+16),i=0;i<n.length;i++){const t=parseInt(n[i],16);e[r++]=t>>8&255,e[r++]=255&t}}if(null==e)throw Error("Invalid ip address: "+t);return e},E=function(t,e,r){e=~~e,r=r??t.length-e;const n=[];let i="";const s=new DataView(t.buffer);if(4===r){for(let i=0;i<r;i++)n.push(t[e+i]);i=n.join(".")}else if(16===r){for(let t=0;t<r;t+=2)n.push(s.getUint16(e+t).toString(16));i=n.join(":"),i=i.replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3"),i=i.replace(/:{3,4}/,"::")}return i};var b=r(4108),S=r(9329),_=r(2056),R=r(8334),I=r(5226),C=r(2611),A=r(2259),T=r(5489);function k(t,e){const r=(0,b.Ev)(t);switch(r.code){case 4:case 41:return L(e);case 6:case 273:case 33:case 132:return O(e).toString();case 53:case 54:case 55:case 56:case 400:case 777:return x(e);case 421:return M(e);case 444:return F(e);case 445:return F(e);default:return(0,y.B)(e,"base16")}}function P(t,e){const r=(0,b.Ev)(t);switch(r.code){case 4:return N(e);case 41:return N(e);case 6:case 273:case 33:case 132:return D(parseInt(e,10));case 53:case 54:case 55:case 56:case 400:case 777:return B(e);case 421:return U(e);case 444:return V(e);case 445:return K(e);default:return(0,A.m)(e,"base16")}}function N(t){if(!f(t))throw new Error("invalid ip address");return v(t)}function L(t){const e=E(t,0,t.length);if(null==e||!f(e))throw new Error("invalid ip address");return e}function D(t){const e=new ArrayBuffer(2),r=new DataView(e);return r.setUint16(0,t),new Uint8Array(e)}function O(t){const e=new DataView(t.buffer);return e.getUint16(t.byteOffset)}function B(t){const e=(0,A.m)(t),r=Uint8Array.from(C.encode(e.length));return(0,T.z)([r,e],r.length+e.length)}function x(t){const e=C.decode(t);if(t=t.slice(C.decode.bytes),t.length!==e)throw new Error("inconsistent lengths");return(0,y.B)(t)}function U(t){let e;e="Q"===t[0]||"1"===t[0]?I.Jx(R.base58btc.decode(`z${t}`)).bytes:S.k.parse(t).multihash.bytes;const r=Uint8Array.from(C.encode(e.length));return(0,T.z)([r,e],r.length+e.length)}function M(t){const e=C.decode(t),r=t.slice(C.decode.bytes);if(r.length!==e)throw new Error("inconsistent lengths");return(0,y.B)(r,"base58btc")}function V(t){const e=t.split(":");if(2!==e.length)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(16!==e[0].length)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion address.`);const r=_.base32.decode("b"+e[0]),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");const i=D(n);return(0,T.z)([r,i],r.length+i.length)}function K(t){const e=t.split(":");if(2!==e.length)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(56!==e[0].length)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion3 address.`);const r=_.base32.decode(`b${e[0]}`),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");const i=D(n);return(0,T.z)([r,i],r.length+i.length)}function F(t){const e=t.slice(0,t.length-2),r=t.slice(t.length-2),n=(0,y.B)(e,"base32"),i=O(r);return`${n}:${i}`}function j(t){const e=[],r=t.split("/").slice(1);if(1===r.length&&""===r[0])return[];for(let n=0;n<r.length;n++){const i=r[n],s=(0,b.Ev)(i);if(0!==s.size){if(n++,n>=r.length)throw et("invalid address: "+t);if(!0===s.path){e.push([i,tt(r.slice(n).join("/"))]);break}e.push([i,r[n]])}else e.push([i])}return e}function q(t){const e=[];return t.map((t=>{const r=rt(t);return e.push(r.name),t.length>1&&null!=t[1]&&e.push(t[1]),null})),tt(e.join("/"))}function H(t){return t.map((t=>{Array.isArray(t)||(t=[t]);const e=rt(t);return t.length>1?[e.code,P(e.code,t[1])]:[e.code]}))}function G(t){return t.map((t=>{const e=rt(t);return null!=t[1]?[e.code,k(e.code,t[1])]:[e.code]}))}function z(t){return J((0,T.z)(t.map((t=>{const e=rt(t);let r=Uint8Array.from(C.encode(e.code));return t.length>1&&null!=t[1]&&(r=(0,T.z)([r,t[1]])),r}))))}function $(t,e){if(t.size>0)return t.size/8;if(0===t.size)return 0;{const t=C.decode(e);return t+C.decode.bytes}}function W(t){const e=[];let r=0;while(r<t.length){const n=C.decode(t,r),i=C.decode.bytes,s=(0,b.Ev)(n),o=$(s,t.slice(r+i));if(0===o){e.push([n]),r+=i;continue}const a=t.slice(r+i,r+i+o);if(r+=o+i,r>t.length)throw et("Invalid address Uint8Array: "+(0,y.B)(t,"base16"));e.push([n,a])}return e}function Y(t){const e=W(t),r=G(e);return q(r)}function Q(t){t=tt(t);const e=j(t),r=H(e);return z(r)}function X(t){return Q(t)}function J(t){const e=Z(t);if(null!=e)throw e;return Uint8Array.from(t)}function Z(t){try{W(t)}catch(e){return e}}function tt(t){return"/"+t.trim().split("/").filter((t=>t)).join("/")}function et(t){return new Error("Error parsing address: "+t)}function rt(t){const e=(0,b.Ev)(t[0]);return e}var nt=r(9998),it=r(4141);const st=Symbol.for("nodejs.util.inspect.custom"),ot=new Map,at=Symbol.for("@multiformats/js-multiaddr/multiaddr");class ct{constructor(t){if(null==t&&(t=""),Object.defineProperty(this,at,{value:!0}),t instanceof Uint8Array)this.bytes=J(t);else if("string"===typeof t){if(t.length>0&&"/"!==t.charAt(0))throw new Error(`multiaddr "${t}" must start with a "/"`);this.bytes=X(t)}else{if(!ct.isMultiaddr(t))throw new Error("addr must be a string, Buffer, or another Multiaddr");this.bytes=J(t.bytes)}}toString(){return Y(this.bytes)}toJSON(){return this.toString()}toOptions(){const t=this.toString().split("/"),e={family:"ip4"===t[1]?4:6,host:t[2],transport:t[3],port:parseInt(t[4])};return e}protos(){return this.protoCodes().map((t=>Object.assign({},(0,b.Ev)(t))))}protoCodes(){const t=[],e=this.bytes;let r=0;while(r<e.length){const n=C.decode(e,r),i=C.decode.bytes,s=(0,b.Ev)(n),o=$(s,e.slice(r+i));r+=o+i,t.push(n)}return t}protoNames(){return this.protos().map((t=>t.name))}tuples(){return W(this.bytes)}stringTuples(){const t=W(this.bytes);return G(t)}encapsulate(t){return t=new ct(t),new ct(this.toString()+t.toString())}decapsulate(t){const e=t.toString(),r=this.toString(),n=r.lastIndexOf(e);if(n<0)throw new Error(`Address ${this.toString()} does not contain subaddress: ${t.toString()}`);return new ct(r.slice(0,n))}decapsulateCode(t){const e=this.tuples();for(let r=e.length-1;r>=0;r--)if(e[r][0]===t)return new ct(z(e.slice(0,r)));return this}getPeerId(){try{const t=this.stringTuples().filter((t=>t[0]===b.R5.ipfs.code)),e=t.pop();if(null!=e?.[1]){const t=e[1];return"Q"===t[0]||"1"===t[0]?(0,y.B)(R.base58btc.decode(`z${t}`),"base58btc"):(0,y.B)(S.k.parse(t).multihash.bytes,"base58btc")}return null}catch(t){return null}}getPath(){let t=null;try{t=this.stringTuples().filter((t=>{const e=(0,b.Ev)(t[0]);return!0===e.path}))[0][1],null==t&&(t=null)}catch{t=null}return t}equals(t){return(0,it.f)(this.bytes,t.bytes)}async resolve(){const t=this.protos().find((t=>t.resolvable));if(null==t)return[this];const e=ot.get(t.name);if(null==e)throw nt(new Error(`no available resolver for ${t.name}`),"ERR_NO_AVAILABLE_RESOLVER");const r=await e(this);return r.map((t=>new ct(t)))}nodeAddress(){const t=this.protoCodes(),e=this.protoNames(),r=this.toString().split("/").slice(1);if(r.length<4)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6}/{address}/{tcp, udp}/{port}".');if(4!==t[0]&&41!==t[0]&&54!==t[0]&&55!==t[0])throw new Error(`no protocol with name: "'${e[0]}'". Must have a valid family name: "{ip4, ip6, dns4, dns6}".`);if("tcp"!==r[2]&&"udp"!==r[2])throw new Error(`no protocol with name: "'${e[1]}'". Must have a valid transport protocol: "{tcp, udp}".`);return{family:41===t[0]||55===t[0]?6:4,address:r[1],port:parseInt(r[3])}}isThinWaistAddress(t){const e=(t??this).protos();return 2===e.length&&((4===e[0].code||41===e[0].code)&&(6===e[1].code||273===e[1].code))}static fromNodeAddress(t,e){if(null==t)throw new Error("requires node address object");if(null==e)throw new Error("requires transport protocol");let r;switch(t.family){case 4:r="ip4";break;case 6:r="ip6";break;default:throw Error("Invalid addr family, should be 4 or 6.")}return new ct("/"+[r,t.address,e,t.port].join("/"))}static isName(t){return!!ct.isMultiaddr(t)&&t.protos().some((t=>t.resolvable))}static isMultiaddr(t){return Boolean(t?.[at])}[st](){return"<Multiaddr "+(0,y.B)(this.bytes,"base16")+" - "+Y(this.bytes)+">"}inspect(){return"<Multiaddr "+(0,y.B)(this.bytes,"base16")+" - "+Y(this.bytes)+">"}}ct.resolvers=ot},4108:function(t,e,r){"use strict";r.d(e,{Ev:function(){return c},R5:function(){return i}});r(1703);const n=-1,i={},s={},o=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,n,"ip6zone"],[53,n,"dns",!0],[54,n,"dns4",!0],[55,n,"dns6",!0],[56,n,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,n,"unix",!1,!0],[421,n,"ipfs"],[421,n,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,n,"garlic64"],[460,0,"quic"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,n,"memory"]];function a(t,e,r,n,i){return{code:t,size:e,name:r,resolvable:Boolean(n),path:Boolean(i)}}function c(t){if("number"===typeof t){if(null!=s[t])return s[t];throw new Error(`no protocol with code: ${t}`)}if("string"===typeof t){if(null!=i[t])return i[t];throw new Error(`no protocol with name: ${t}`)}throw new Error("invalid protocol id type: "+typeof t)}o.forEach((t=>{const e=a(...t);s[e.code]=e,i[e.name]=e}))},1099:function(t,e,r){"use strict";r.d(e,{$3:function(){return z},P6:function(){return Q},T:function(){return W},Xx:function(){return $}});r(1703),r(8675),r(3462);var n=r(7420);
/*! noble-ed25519 - MIT License (c) 2019 Paul Miller (paulmillr.com) */
const i=BigInt(0),s=BigInt(1),o=BigInt(2),a=BigInt(255),c=o**BigInt(252)+BigInt("27742317777372353535851937790883648493"),u={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),P:o**a-BigInt(19),l:c,n:c,h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960")},l=o**BigInt(256),h=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),d=(BigInt("6853475219497561581579357271197624642482790079785650197046958215289687604742"),BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235")),f=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),p=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),g=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952");class y{constructor(t,e,r,n){this.x=t,this.y=e,this.z=r,this.t=n}static fromAffine(t){if(!(t instanceof S))throw new TypeError("ExtendedPoint#fromAffine: expected Point");return t.equals(S.ZERO)?y.ZERO:new y(t.x,t.y,s,D(t.x*t.y))}static toAffineBatch(t){const e=B(t.map((t=>t.z)));return t.map(((t,r)=>t.toAffine(e[r])))}static normalizeZ(t){return this.toAffineBatch(t).map(this.fromAffine)}equals(t){m(t);const{x:e,y:r,z:n}=this,{x:i,y:s,z:o}=t,a=D(e*o),c=D(i*n),u=D(r*o),l=D(s*n);return a===c&&u===l}negate(){return new y(D(-this.x),this.y,this.z,D(-this.t))}double(){const{x:t,y:e,z:r}=this,{a:n}=u,i=D(t**o),s=D(e**o),a=D(o*D(r**o)),c=D(n*i),l=D(D((t+e)**o)-i-s),h=c+s,d=h-a,f=c-s,p=D(l*d),g=D(h*f),m=D(l*f),w=D(d*h);return new y(p,g,w,m)}add(t){m(t);const{x:e,y:r,z:n,t:s}=this,{x:a,y:c,z:u,t:l}=t,h=D((r-e)*(c+a)),d=D((r+e)*(c-a)),f=D(d-h);if(f===i)return this.double();const p=D(n*o*l),g=D(s*o*u),w=g+p,v=d+h,E=g-p,b=D(w*f),S=D(v*E),_=D(w*E),R=D(f*v);return new y(b,S,R,_)}subtract(t){return this.add(t.negate())}precomputeWindow(t){const e=1+256/t,r=[];let n=this,i=n;for(let s=0;s<e;s++){i=n,r.push(i);for(let e=1;e<2**(t-1);e++)i=i.add(n),r.push(i);n=i.double()}return r}wNAF(t,e){!e&&this.equals(y.BASE)&&(e=S.BASE);const r=e&&e._WINDOW_SIZE||1;if(256%r)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let n=e&&b.get(e);n||(n=this.precomputeWindow(r),e&&1!==r&&(n=y.normalizeZ(n),b.set(e,n)));let i=y.ZERO,o=y.ZERO;const a=1+256/r,c=2**(r-1),u=BigInt(2**r-1),l=2**r,h=BigInt(r);for(let d=0;d<a;d++){const e=d*c;let r=Number(t&u);if(t>>=h,r>c&&(r-=l,t+=s),0===r){let t=n[e];d%2&&(t=t.negate()),o=o.add(t)}else{let t=n[e+Math.abs(r)-1];r<0&&(t=t.negate()),i=i.add(t)}}return y.normalizeZ([i,o])[0]}multiply(t,e){return this.wNAF(q(t,u.l),e)}multiplyUnsafe(t){let e=q(t,u.l,!1);const r=y.BASE,n=y.ZERO;if(e===i)return n;if(this.equals(n)||e===s)return this;if(this.equals(r))return this.wNAF(e);let o=n,a=this;while(e>i)e&s&&(o=o.add(a)),a=a.double(),e>>=s;return o}isSmallOrder(){return this.multiplyUnsafe(u.h).equals(y.ZERO)}isTorsionFree(){return this.multiplyUnsafe(u.l).equals(y.ZERO)}toAffine(t=O(this.z)){const{x:e,y:r,z:n}=this,i=D(e*t),o=D(r*t),a=D(n*t);if(a!==s)throw new Error("invZ was invalid");return new S(i,o)}fromRistrettoBytes(){v()}toRistrettoBytes(){v()}fromRistrettoHash(){v()}}function m(t){if(!(t instanceof y))throw new TypeError("ExtendedPoint expected")}function w(t){if(!(t instanceof E))throw new TypeError("RistrettoPoint expected")}function v(){throw new Error("Legacy method: switch to RistrettoPoint")}y.BASE=new y(u.Gx,u.Gy,s,D(u.Gx*u.Gy)),y.ZERO=new y(i,s,s,i);class E{constructor(t){this.ep=t}static calcElligatorRistrettoMap(t){const{d:e}=u,r=D(h*t*t),n=D((r+s)*p);let i=BigInt(-1);const o=D((i-e*r)*D(r+e));let{isValid:a,value:c}=M(n,o),l=D(c*t);P(l)||(l=D(-l)),a||(c=l),a||(i=r);const f=D(i*(r-s)*g-o),m=c*c,w=D((c+c)*o),v=D(f*d),E=D(s-m),b=D(s+m);return new y(D(w*b),D(E*v),D(v*b),D(w*E))}static hashToCurve(t){t=j(t,64);const e=L(t.slice(0,32)),r=this.calcElligatorRistrettoMap(e),n=L(t.slice(32,64)),i=this.calcElligatorRistrettoMap(n);return new E(r.add(i))}static fromHex(t){t=j(t,32);const{a:e,d:r}=u,n="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",o=L(t);if(!F(k(o),t)||P(o))throw new Error(n);const a=D(o*o),c=D(s+e*a),l=D(s-e*a),h=D(c*c),d=D(l*l),f=D(e*r*h-d),{isValid:p,value:g}=V(D(f*d)),m=D(g*l),w=D(g*m*f);let v=D((o+o)*m);P(v)&&(v=D(-v));const b=D(c*w),S=D(v*b);if(!p||P(S)||b===i)throw new Error(n);return new E(new y(v,b,s,S))}toRawBytes(){let{x:t,y:e,z:r,t:n}=this.ep;const i=D(D(r+e)*D(r-e)),s=D(t*e),{value:a}=V(D(i*s**o)),c=D(a*i),u=D(a*s),l=D(c*u*n);let d;if(P(n*l)){let r=D(e*h),n=D(t*h);t=r,e=n,d=D(c*f)}else d=u;P(t*l)&&(e=D(-e));let p=D((r-e)*d);return P(p)&&(p=D(-p)),k(p)}toHex(){return C(this.toRawBytes())}toString(){return this.toHex()}equals(t){w(t);const e=this.ep,r=t.ep,n=D(e.x*r.y)===D(e.y*r.x),i=D(e.y*r.y)===D(e.x*r.x);return n||i}add(t){return w(t),new E(this.ep.add(t.ep))}subtract(t){return w(t),new E(this.ep.subtract(t.ep))}multiply(t){return new E(this.ep.multiply(t))}multiplyUnsafe(t){return new E(this.ep.multiplyUnsafe(t))}}E.BASE=new E(y.BASE),E.ZERO=new E(y.ZERO);const b=new WeakMap;class S{constructor(t,e){this.x=t,this.y=e}_setWindowSize(t){this._WINDOW_SIZE=t,b.delete(this)}static fromHex(t,e=!0){const{d:r,P:n}=u;t=j(t,32);const i=t.slice();i[31]=-129&t[31];const o=N(i);if(e&&o>=n)throw new Error("Expected 0 < hex < P");if(!e&&o>=l)throw new Error("Expected 0 < hex < 2**256");const a=D(o*o),c=D(a-s),h=D(r*a+s);let{isValid:d,value:f}=M(c,h);if(!d)throw new Error("Point.fromHex: invalid y coordinate");const p=(f&s)===s,g=0!==(128&t[31]);return g!==p&&(f=D(-f)),new S(f,o)}static async fromPrivateKey(t){return(await G(t)).point}toRawBytes(){const t=k(this.y);return t[31]|=this.x&s?128:0,t}toHex(){return C(this.toRawBytes())}toX25519(){const{y:t}=this,e=D((s+t)*O(s-t));return k(e)}isTorsionFree(){return y.fromAffine(this).isTorsionFree()}equals(t){return this.x===t.x&&this.y===t.y}negate(){return new S(D(-this.x),this.y)}add(t){return y.fromAffine(this).add(y.fromAffine(t)).toAffine()}subtract(t){return this.add(t.negate())}multiply(t){return y.fromAffine(this).multiply(t,this).toAffine()}}S.BASE=new S(u.Gx,u.Gy),S.ZERO=new S(i,s);class _{constructor(t,e){this.r=t,this.s=e,this.assertValidity()}static fromHex(t){const e=j(t,64),r=S.fromHex(e.slice(0,32),!1),n=N(e.slice(32,64));return new _(r,n)}assertValidity(){const{r:t,s:e}=this;if(!(t instanceof S))throw new Error("Expected Point instance");return q(e,u.l,!1),this}toRawBytes(){const t=new Uint8Array(64);return t.set(this.r.toRawBytes()),t.set(k(this.s),32),t}toHex(){return C(this.toRawBytes())}}function R(...t){if(!t.every((t=>t instanceof Uint8Array)))throw new Error("Expected Uint8Array list");if(1===t.length)return t[0];const e=t.reduce(((t,e)=>t+e.length),0),r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){const e=t[n];r.set(e,i),i+=e.length}return r}const I=Array.from({length:256},((t,e)=>e.toString(16).padStart(2,"0")));function C(t){if(!(t instanceof Uint8Array))throw new Error("Uint8Array expected");let e="";for(let r=0;r<t.length;r++)e+=I[t[r]];return e}function A(t){if("string"!==typeof t)throw new TypeError("hexToBytes: expected string, got "+typeof t);if(t.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const e=new Uint8Array(t.length/2);for(let r=0;r<e.length;r++){const n=2*r,i=t.slice(n,n+2),s=Number.parseInt(i,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");e[r]=s}return e}function T(t){const e=32,r=t.toString(16).padStart(2*e,"0");return A(r)}function k(t){return T(t).reverse()}function P(t){return(D(t)&s)===s}function N(t){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");return BigInt("0x"+C(Uint8Array.from(t).reverse()))}function L(t){return D(N(t)&o**a-s)}function D(t,e=u.P){const r=t%e;return r>=i?r:e+r}function O(t,e=u.P){if(t===i||e<=i)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let r=D(t,e),n=e,o=i,a=s,c=s,l=i;while(r!==i){const t=n/r,e=n%r,i=o-c*t,s=a-l*t;n=r,r=e,o=c,a=l,c=i,l=s}const h=n;if(h!==s)throw new Error("invert: does not exist");return D(o,e)}function B(t,e=u.P){const r=new Array(t.length),n=t.reduce(((t,n,s)=>n===i?t:(r[s]=t,D(t*n,e))),s),o=O(n,e);return t.reduceRight(((t,n,s)=>n===i?t:(r[s]=D(t*r[s],e),D(t*n,e))),o),r}function x(t,e){const{P:r}=u;let n=t;while(e-- >i)n*=n,n%=r;return n}function U(t){const{P:e}=u,r=BigInt(5),n=BigInt(10),i=BigInt(20),a=BigInt(40),c=BigInt(80),l=t*t%e,h=l*t%e,d=x(h,o)*h%e,f=x(d,s)*t%e,p=x(f,r)*f%e,g=x(p,n)*p%e,y=x(g,i)*g%e,m=x(y,a)*y%e,w=x(m,c)*m%e,v=x(w,c)*m%e,E=x(v,n)*p%e,b=x(E,o)*t%e;return{pow_p_5_8:b,b2:h}}function M(t,e){const r=D(e*e*e),n=D(r*r*e),i=U(t*n).pow_p_5_8;let s=D(t*r*i);const o=D(e*s*s),a=s,c=D(s*h),u=o===t,l=o===D(-t),d=o===D(-t*h);return u&&(s=a),(l||d)&&(s=c),P(s)&&(s=D(-s)),{isValid:u||l,value:s}}function V(t){return M(s,t)}async function K(...t){const e=await Q.sha512(R(...t)),r=N(e);return D(r,u.l)}function F(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function j(t,e){const r=t instanceof Uint8Array?Uint8Array.from(t):A(t);if("number"===typeof e&&r.length!==e)throw new Error(`Expected ${e} bytes`);return r}function q(t,e,r=!0){if(!e)throw new TypeError("Specify max value");if("number"===typeof t&&Number.isSafeInteger(t)&&(t=BigInt(t)),"bigint"===typeof t&&t<e)if(r){if(i<t)return t}else if(i<=t)return t;throw new TypeError("Expected valid scalar: 0 < scalar < max")}function H(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}async function G(t){if(t="bigint"===typeof t||"number"===typeof t?T(q(t,l)):j(t),32!==t.length)throw new Error("Expected 32 bytes");const e=await Q.sha512(t),r=H(e.slice(0,32)),n=e.slice(32,64),i=D(N(r),u.l),s=S.BASE.multiply(i),o=s.toRawBytes();return{head:r,prefix:n,scalar:i,point:s,pointBytes:o}}async function z(t){return(await G(t)).pointBytes}async function $(t,e){t=j(t);const{prefix:r,scalar:n,pointBytes:i}=await G(e),s=await K(r,t),o=S.BASE.multiply(s),a=await K(o.toRawBytes(),i,t),c=D(s+a*n,u.l);return new _(o,c).toRawBytes()}async function W(t,e,r){e=j(e),r instanceof S||(r=S.fromHex(r,!1));const{r:n,s:i}=t instanceof _?t.assertValidity():_.fromHex(t),s=y.BASE.multiplyUnsafe(i),o=await K(n.toRawBytes(),r.toRawBytes(),e),a=y.fromAffine(r).multiplyUnsafe(o),c=y.fromAffine(n).add(a);return c.subtract(s).multiplyUnsafe(u.h).equals(y.ZERO)}S.BASE._setWindowSize(8);const Y={node:n,web:"object"===typeof self&&"crypto"in self?self.crypto:void 0},Q={TORSION_SUBGROUP:["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"],bytesToHex:C,getExtendedPublicKey:G,mod:D,invert:O,hashToPrivateScalar:t=>{if(t=j(t),t.length<40||t.length>1024)throw new Error("Expected 40-1024 bytes of private key as per FIPS 186");const e=D(N(t),u.l);if(e===i||e===s)throw new Error("Invalid private key");return e},randomBytes:(t=32)=>{if(Y.web)return Y.web.getRandomValues(new Uint8Array(t));if(Y.node){const{randomBytes:e}=Y.node;return new Uint8Array(e(t).buffer)}throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>Q.randomBytes(32),sha512:async t=>{if(Y.web){const e=await Y.web.subtle.digest("SHA-512",t.buffer);return new Uint8Array(e)}if(Y.node)return Uint8Array.from(Y.node.createHash("sha512").update(t).digest());throw new Error("The environment doesn't have sha512 function")},precompute(t=8,e=S.BASE){const r=e.equals(S.BASE)?e:new S(e.x,e.y);return r._setWindowSize(t),r.multiply(o),r}}},4618:function(t,e,r){"use strict";r.d(e,{$3:function(){return W},E9:function(){return g},P6:function(){return it},T:function(){return rt},Xx:function(){return tt}});r(1703),r(8675),r(3462);var n=r(5856);
/*! noble-secp256k1 - MIT License (c) 2019 Paul Miller (paulmillr.com) */
const i=BigInt(0),s=BigInt(1),o=BigInt(2),a=BigInt(3),c=BigInt(8),u=o**BigInt(256),l={a:i,b:BigInt(7),P:u-o**BigInt(32)-BigInt(977),n:u-BigInt("432420386565659656852420866394968145599"),h:s,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")};function h(t){const{a:e,b:r}=l,n=L(t*t),i=L(n*t);return L(i+e*t+r)}const d=l.a===i;class f{constructor(t,e,r){this.x=t,this.y=e,this.z=r}static fromAffine(t){if(!(t instanceof g))throw new TypeError("JacobianPoint#fromAffine: expected Point");return new f(t.x,t.y,s)}static toAffineBatch(t){const e=x(t.map((t=>t.z)));return t.map(((t,r)=>t.toAffine(e[r])))}static normalizeZ(t){return f.toAffineBatch(t).map(f.fromAffine)}equals(t){if(!(t instanceof f))throw new TypeError("JacobianPoint expected");const{x:e,y:r,z:n}=this,{x:i,y:s,z:a}=t,c=L(n**o),u=L(a**o),l=L(e*u),h=L(i*c),d=L(L(r*a)*u),p=L(L(s*n)*c);return l===h&&d===p}negate(){return new f(this.x,L(-this.y),this.z)}double(){const{x:t,y:e,z:r}=this,n=L(t**o),i=L(e**o),s=L(i**o),u=L(o*(L((t+i)**o)-n-s)),l=L(a*n),h=L(l**o),d=L(h-o*u),p=L(l*(u-d)-c*s),g=L(o*e*r);return new f(d,p,g)}add(t){if(!(t instanceof f))throw new TypeError("JacobianPoint expected");const{x:e,y:r,z:n}=this,{x:s,y:a,z:c}=t;if(s===i||a===i)return this;if(e===i||r===i)return t;const u=L(n**o),l=L(c**o),h=L(e*l),d=L(s*u),p=L(L(r*c)*l),g=L(L(a*n)*u),y=L(d-h),m=L(g-p);if(y===i)return m===i?this.double():f.ZERO;const w=L(y**o),v=L(y*w),E=L(h*w),b=L(m**o-v-o*E),S=L(m*(E-b)-p*v),_=L(n*c*y);return new f(b,S,_)}subtract(t){return this.add(t.negate())}multiplyUnsafe(t){let e=N(t);f.BASE;const r=f.ZERO;if(e===i)return r;if(e===s)return this;if(!d){let t=r,n=this;while(e>i)e&s&&(t=t.add(n)),n=n.double(),e>>=s;return t}let{k1neg:n,k1:o,k2neg:a,k2:c}=V(e),u=r,h=r,p=this;while(o>i||c>i)o&s&&(u=u.add(p)),c&s&&(h=h.add(p)),p=p.double(),o>>=s,c>>=s;return n&&(u=u.negate()),a&&(h=h.negate()),h=new f(L(h.x*l.beta),h.y,h.z),u.add(h)}precomputeWindow(t){const e=d?128/t+1:256/t+1,r=[];let n=this,i=n;for(let s=0;s<e;s++){i=n,r.push(i);for(let e=1;e<2**(t-1);e++)i=i.add(n),r.push(i);n=i.double()}return r}wNAF(t,e){!e&&this.equals(f.BASE)&&(e=g.BASE);const r=e&&e._WINDOW_SIZE||1;if(256%r)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let n=e&&p.get(e);n||(n=this.precomputeWindow(r),e&&1!==r&&(n=f.normalizeZ(n),p.set(e,n)));let i=f.ZERO,o=f.ZERO;const a=1+(d?128/r:256/r),c=2**(r-1),u=BigInt(2**r-1),l=2**r,h=BigInt(r);for(let d=0;d<a;d++){const e=d*c;let r=Number(t&u);if(t>>=h,r>c&&(r-=l,t+=s),0===r){let t=n[e];d%2&&(t=t.negate()),o=o.add(t)}else{let t=n[e+Math.abs(r)-1];r<0&&(t=t.negate()),i=i.add(t)}}return{p:i,f:o}}multiply(t,e){let r,n,i=N(t);if(d){const{k1neg:t,k1:s,k2neg:o,k2:a}=V(i);let{p:c,f:u}=this.wNAF(s,e),{p:h,f:d}=this.wNAF(a,e);t&&(c=c.negate()),o&&(h=h.negate()),h=new f(L(h.x*l.beta),h.y,h.z),r=c.add(h),n=u.add(d)}else{const{p:t,f:s}=this.wNAF(i,e);r=t,n=s}return f.normalizeZ([r,n])[0]}toAffine(t=B(this.z)){const{x:e,y:r,z:n}=this,i=t,o=L(i*i),a=L(o*i),c=L(e*o),u=L(r*a),l=L(n*i);if(l!==s)throw new Error("invZ was invalid");return new g(c,u)}}f.BASE=new f(l.Gx,l.Gy,s),f.ZERO=new f(i,s,i);const p=new WeakMap;class g{constructor(t,e){this.x=t,this.y=e}_setWindowSize(t){this._WINDOW_SIZE=t,p.delete(this)}static fromCompressedHex(t){const e=32===t.length,r=k(e?t:t.subarray(1));if(!q(r))throw new Error("Point is not on curve");const n=h(r);let i=O(n);const o=(i&s)===s;if(e)o&&(i=L(-i));else{const e=1===(1&t[0]);e!==o&&(i=L(-i))}const a=new g(r,i);return a.assertValidity(),a}static fromUncompressedHex(t){const e=k(t.subarray(1,33)),r=k(t.subarray(33,65)),n=new g(e,r);return n.assertValidity(),n}static fromHex(t){const e=P(t),r=e.length,n=e[0];if(32===r||33===r&&(2===n||3===n))return this.fromCompressedHex(e);if(65===r&&4===n)return this.fromUncompressedHex(e);throw new Error(`Point.fromHex: received invalid point. Expected 32-33 compressed bytes or 65 uncompressed bytes, not ${r}`)}static fromPrivateKey(t){return g.BASE.multiply(G(t))}static fromSignature(t,e,r){t=P(t);const n=K(t),{r:s,s:o}=$(e);if(0!==r&&1!==r)throw new Error("Cannot recover signature: invalid recovery bit");if(n===i)throw new Error("Cannot recover signature: msgHash cannot be 0");const a=1&r?"03":"02",c=g.fromHex(a+R(s)),{n:u}=l,h=B(s,u),d=L(-n*h,u),f=L(o*h,u),p=g.BASE.multiplyAndAddUnsafe(c,d,f);if(!p)throw new Error("Cannot recover signature: point at infinify");return p.assertValidity(),p}toRawBytes(t=!1){return T(this.toHex(t))}toHex(t=!1){const e=R(this.x);if(t){const t=this.y&s?"03":"02";return`${t}${e}`}return`04${e}${R(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){const t="Point is not on elliptic curve",{x:e,y:r}=this;if(!q(e)||!q(r))throw new Error(t);const n=L(r*r),s=h(e);if(L(n-s)!==i)throw new Error(t)}equals(t){return this.x===t.x&&this.y===t.y}negate(){return new g(this.x,L(-this.y))}double(){return f.fromAffine(this).double().toAffine()}add(t){return f.fromAffine(this).add(f.fromAffine(t)).toAffine()}subtract(t){return this.add(t.negate())}multiply(t){return f.fromAffine(this).multiply(t,this).toAffine()}multiplyAndAddUnsafe(t,e,r){const n=f.fromAffine(this),i=n.multiply(e),s=f.fromAffine(t).multiplyUnsafe(r),o=i.add(s);return o.equals(f.ZERO)?void 0:o.toAffine()}}function y(t){return Number.parseInt(t[0],16)>=8?"00"+t:t}function m(t){if(t.length<2||2!==t[0])throw new Error(`Invalid signature integer tag: ${_(t)}`);const e=t[1],r=t.subarray(2,e+2);if(!e||r.length!==e)throw new Error("Invalid signature integer: wrong length");if(0===r[0]&&r[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:k(r),left:t.subarray(e+2)}}function w(t){if(t.length<2||48!=t[0])throw new Error(`Invalid signature tag: ${_(t)}`);if(t[1]!==t.length-2)throw new Error("Invalid signature: incorrect length");const{data:e,left:r}=m(t.subarray(2)),{data:n,left:i}=m(r);if(i.length)throw new Error(`Invalid signature: left bytes after parsing: ${_(i)}`);return{r:e,s:n}}g.BASE=new g(l.Gx,l.Gy),g.ZERO=new g(i,i);class v{constructor(t,e){this.r=t,this.s=e,this.assertValidity()}static fromCompact(t){const e=b(t),r="Signature.fromCompact";if("string"!==typeof t&&!e)throw new TypeError(`${r}: Expected string or Uint8Array`);const n=e?_(t):t;if(128!==n.length)throw new Error(`${r}: Expected 64-byte hex`);return new v(A(n.slice(0,64)),A(n.slice(64,128)))}static fromDER(t){const e=b(t);if("string"!==typeof t&&!e)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");const{r:r,s:n}=w(e?t:T(t));return new v(r,n)}static fromHex(t){return this.fromDER(t)}assertValidity(){const{r:t,s:e}=this;if(!j(t))throw new Error("Invalid Signature: r must be 0 < r < n");if(!j(e))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){const t=l.n>>s;return this.s>t}normalizeS(){return this.hasHighS()?new v(this.r,l.n-this.s):this}toDERRawBytes(t=!1){return T(this.toDERHex(t))}toDERHex(t=!1){const e=y(C(this.s));if(t)return e;const r=y(C(this.r)),n=C(r.length/2),i=C(e.length/2),s=C(r.length/2+e.length/2+4);return`30${s}02${n}${r}02${i}${e}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return T(this.toCompactHex())}toCompactHex(){return R(this.r)+R(this.s)}}function E(...t){if(!t.every(b))throw new Error("Uint8Array list expected");if(1===t.length)return t[0];const e=t.reduce(((t,e)=>t+e.length),0),r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){const e=t[n];r.set(e,i),i+=e.length}return r}function b(t){return t instanceof Uint8Array}const S=Array.from({length:256},((t,e)=>e.toString(16).padStart(2,"0")));function _(t){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");let e="";for(let r=0;r<t.length;r++)e+=S[t[r]];return e}function R(t){if(t>u)throw new Error("Expected number < 2^256");return t.toString(16).padStart(64,"0")}function I(t){return T(R(t))}function C(t){const e=t.toString(16);return 1&e.length?`0${e}`:e}function A(t){if("string"!==typeof t)throw new TypeError("hexToNumber: expected string, got "+typeof t);return BigInt(`0x${t}`)}function T(t){if("string"!==typeof t)throw new TypeError("hexToBytes: expected string, got "+typeof t);if(t.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+t.length);const e=new Uint8Array(t.length/2);for(let r=0;r<e.length;r++){const n=2*r,i=t.slice(n,n+2),s=Number.parseInt(i,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");e[r]=s}return e}function k(t){return A(_(t))}function P(t){return t instanceof Uint8Array?Uint8Array.from(t):T(t)}function N(t){if("number"===typeof t&&Number.isSafeInteger(t)&&t>0)return BigInt(t);if("bigint"===typeof t&&j(t))return t;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function L(t,e=l.P){const r=t%e;return r>=i?r:e+r}function D(t,e){const{P:r}=l;let n=t;while(e-- >i)n*=n,n%=r;return n}function O(t){const{P:e}=l,r=BigInt(6),n=BigInt(11),i=BigInt(22),s=BigInt(23),c=BigInt(44),u=BigInt(88),h=t*t*t%e,d=h*h*t%e,f=D(d,a)*d%e,p=D(f,a)*d%e,g=D(p,o)*h%e,y=D(g,n)*g%e,m=D(y,i)*y%e,w=D(m,c)*m%e,v=D(w,u)*w%e,E=D(v,c)*m%e,b=D(E,a)*d%e,S=D(b,s)*y%e,_=D(S,r)*h%e;return D(_,o)}function B(t,e=l.P){if(t===i||e<=i)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let r=L(t,e),n=e,o=i,a=s,c=s,u=i;while(r!==i){const t=n/r,e=n%r,i=o-c*t,s=a-u*t;n=r,r=e,o=c,a=u,c=i,u=s}const h=n;if(h!==s)throw new Error("invert: does not exist");return L(o,e)}function x(t,e=l.P){const r=new Array(t.length),n=t.reduce(((t,n,s)=>n===i?t:(r[s]=t,L(t*n,e))),s),o=B(n,e);return t.reduceRight(((t,n,s)=>n===i?t:(r[s]=L(t*r[s],e),L(t*n,e))),o),r}const U=(t,e)=>(t+e/o)/e,M=o**BigInt(128);function V(t){const{n:e}=l,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-s*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=r,a=U(o*t,e),c=U(-n*t,e);let u=L(t-a*r-c*i,e),h=L(-a*n-c*o,e);const d=u>M,f=h>M;if(d&&(u=e-u),f&&(h=e-h),u>M||h>M)throw new Error("splitScalarEndo: Endomorphism failed, k="+t);return{k1neg:d,k1:u,k2neg:f,k2:h}}function K(t){const{n:e}=l,r=t.length,n=8*r-256;let i=k(t);return n>0&&(i>>=BigInt(n)),i>=e&&(i-=e),i}class F{constructor(){this.v=new Uint8Array(32).fill(1),this.k=new Uint8Array(32).fill(0),this.counter=0}hmac(...t){return it.hmacSha256(this.k,...t)}hmacSync(...t){if("function"!==typeof it.hmacSha256Sync)throw new Error("utils.hmacSha256Sync is undefined, you need to set it");const e=it.hmacSha256Sync(this.k,...t);if(e instanceof Promise)throw new Error("To use sync sign(), ensure utils.hmacSha256 is sync");return e}incr(){if(this.counter>=1e3)throw new Error("Tried 1,000 k values for sign(), all were invalid");this.counter+=1}async reseed(t=new Uint8Array){this.k=await this.hmac(this.v,Uint8Array.from([0]),t),this.v=await this.hmac(this.v),0!==t.length&&(this.k=await this.hmac(this.v,Uint8Array.from([1]),t),this.v=await this.hmac(this.v))}reseedSync(t=new Uint8Array){this.k=this.hmacSync(this.v,Uint8Array.from([0]),t),this.v=this.hmacSync(this.v),0!==t.length&&(this.k=this.hmacSync(this.v,Uint8Array.from([1]),t),this.v=this.hmacSync(this.v))}async generate(){return this.incr(),this.v=await this.hmac(this.v),this.v}generateSync(){return this.incr(),this.v=this.hmacSync(this.v),this.v}}function j(t){return i<t&&t<l.n}function q(t){return i<t&&t<l.P}function H(t,e,r){const n=k(t);if(!j(n))return;const{n:o}=l,a=g.BASE.multiply(n),c=L(a.x,o);if(c===i)return;const u=L(B(n,o)*L(e+r*c,o),o);if(u===i)return;const h=new v(c,u),d=(a.x===h.r?0:2)|Number(a.y&s);return{sig:h,recovery:d}}function G(t){let e;if("bigint"===typeof t)e=t;else if("number"===typeof t&&Number.isSafeInteger(t)&&t>0)e=BigInt(t);else if("string"===typeof t){if(64!==t.length)throw new Error("Expected 32 bytes of private key");e=A(t)}else{if(!b(t))throw new TypeError("Expected valid private key");if(32!==t.length)throw new Error("Expected 32 bytes of private key");e=k(t)}if(!j(e))throw new Error("Expected private key: 0 < key < n");return e}function z(t){return t instanceof g?(t.assertValidity(),t):g.fromHex(t)}function $(t){if(t instanceof v)return t.assertValidity(),t;try{return v.fromDER(t)}catch(e){return v.fromCompact(t)}}function W(t,e=!1){return g.fromPrivateKey(t).toRawBytes(e)}function Y(t){const e=t.length>32?t.slice(0,32):t;return k(e)}function Q(t){const e=Y(t),r=L(e,l.n);return X(r<i?e:r)}function X(t){if("bigint"!==typeof t)throw new Error("Expected bigint");const e=R(t);return T(e)}function J(t,e,r){if(null==t)throw new Error(`sign: expected valid message hash, not "${t}"`);const n=P(t),i=G(e),s=[X(i),Q(n)];if(null!=r){!0===r&&(r=it.randomBytes(32));const t=P(r);if(32!==t.length)throw new Error("sign: Expected 32 bytes of extra data");s.push(t)}const o=E(...s),a=Y(n);return{seed:o,m:a,d:i}}function Z(t,e){let{sig:r,recovery:n}=t;const{canonical:i,der:s,recovered:o}=Object.assign({canonical:!0,der:!0},e);i&&r.hasHighS()&&(r=r.normalizeS(),n^=1);const a=s?r.toDERRawBytes():r.toCompactRawBytes();return o?[a,n]:a}async function tt(t,e,r={}){const{seed:n,m:i,d:s}=J(t,e,r.extraEntropy);let o;const a=new F;await a.reseed(n);while(!(o=H(await a.generate(),i,s)))await a.reseed();return Z(o,r)}const et={strict:!0};function rt(t,e,r,n=et){let s;try{s=$(t),e=P(e)}catch(w){return!1}const{r:o,s:a}=s;if(n.strict&&s.hasHighS())return!1;const c=K(e);if(c===i)return!1;let u;try{u=z(r)}catch(w){return!1}const{n:h}=l,d=B(a,h),f=L(c*d,h),p=L(o*d,h),y=g.BASE.multiplyAndAddUnsafe(u,f,p);if(!y)return!1;const m=L(y.x,h);return m===o}g.BASE._setWindowSize(8);const nt={node:n,web:"object"===typeof self&&"crypto"in self?self.crypto:void 0},it={isValidPrivateKey(t){try{return G(t),!0}catch(e){return!1}},hashToPrivateKey:t=>{if(t=P(t),t.length<40||t.length>1024)throw new Error("Expected 40-1024 bytes of private key as per FIPS 186");const e=L(k(t),l.n);if(e===i||e===s)throw new Error("Invalid private key");return I(e)},randomBytes:(t=32)=>{if(nt.web)return nt.web.getRandomValues(new Uint8Array(t));if(nt.node){const{randomBytes:e}=nt.node;return Uint8Array.from(e(t))}throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>it.hashToPrivateKey(it.randomBytes(40)),bytesToHex:_,mod:L,sha256:async t=>{if(nt.web){const e=await nt.web.subtle.digest("SHA-256",t.buffer);return new Uint8Array(e)}if(nt.node){const{createHash:e}=nt.node;return Uint8Array.from(e("sha256").update(t).digest())}throw new Error("The environment doesn't have sha256 function")},hmacSha256:async(t,...e)=>{if(nt.web){const r=await nt.web.subtle.importKey("raw",t,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),n=E(...e),i=await nt.web.subtle.sign("HMAC",r,n);return new Uint8Array(i)}if(nt.node){const{createHmac:r}=nt.node,n=r("sha256",t);return e.forEach((t=>n.update(t))),Uint8Array.from(n.digest())}throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,precompute(t=8,e=g.BASE){const r=e===g.BASE?e:new g(e.x,e.y);return r._setWindowSize(t),r.multiply(a),r}}},43:function(t,e,r){"use strict";r.d(e,{_L:function(){return n},D7:function(){return a},wJ:function(){return s}});r(1703);class n extends Error{constructor(t,e){super(t??"The operation was aborted"),this.type="aborted",this.code=e??"ABORT_ERR"}}function i(t){if(null!=t){if("function"===typeof t[Symbol.iterator])return t[Symbol.iterator]();if("function"===typeof t[Symbol.asyncIterator])return t[Symbol.asyncIterator]();if("function"===typeof t.next)return t}throw new Error("argument is not an iterator or iterable")}function s(t,e,r){const s=r??{},o=i(t);async function*a(){let r;const i=()=>{null!=r&&r()};e.addEventListener("abort",i);while(1){let c;try{if(e.aborted){const{abortMessage:t,abortCode:e}=s;throw new n(t,e)}const t=new Promise(((t,e)=>{r=()=>{const{abortMessage:t,abortCode:r}=s;e(new n(t,r))}}));c=await Promise.race([t,o.next()]),r=null}catch(a){e.removeEventListener("abort",i);const r="aborted"===a.type&&e.aborted;if(r&&null!=s.onAbort&&await s.onAbort(t),"function"===typeof o.return)try{const t=o.return();t instanceof Promise&&t.catch((t=>{null!=s.onReturnError&&s.onReturnError(t)}))}catch(a){null!=s.onReturnError&&s.onReturnError(a)}if(r&&!0===s.returnOnAbort)return;throw a}if(!0===c.done)break;yield c.value}e.removeEventListener("abort",i)}return a()}function o(t,e,r){return n=>t(s(n,e,r))}function a(t,e,r){return{sink:o(t.sink,e,{...r,onAbort:void 0}),source:s(t.source,e,r)}}},4676:function(t,e,r){"use strict";r.d(e,{s:function(){return u}});r(8675),r(3462),r(1703);var n=r(691),i=r(6523),s=r(2259);const o="/",a=(new TextEncoder).encode(o),c=a[0];class u{constructor(t,e){if("string"===typeof t)this._buf=(0,s.m)(t);else{if(!(t instanceof Uint8Array))throw new Error("Invalid key, should be String of Uint8Array");this._buf=t}if(null==e&&(e=!0),e&&this.clean(),0===this._buf.byteLength||this._buf[0]!==c)throw new Error("Invalid key")}toString(t="utf8"){return(0,i.B)(this._buf,t)}uint8Array(){return this._buf}get[Symbol.toStringTag](){return`Key(${this.toString()})`}static withNamespaces(t){return new u(t.join(o))}static random(){return new u((0,n.x0)().replace(/-/g,""))}static asKey(t){return t instanceof Uint8Array||"string"===typeof t?new u(t):t.uint8Array?new u(t.uint8Array()):null}clean(){if(this._buf&&0!==this._buf.byteLength||(this._buf=a),this._buf[0]!==c){const t=new Uint8Array(this._buf.byteLength+1);t.fill(c,0,1),t.set(this._buf,1),this._buf=t}while(this._buf.byteLength>1&&this._buf[this._buf.byteLength-1]===c)this._buf=this._buf.subarray(0,-1)}less(t){const e=this.list(),r=t.list();for(let n=0;n<e.length;n++){if(r.length<n+1)return!1;const t=e[n],i=r[n];if(t<i)return!0;if(t>i)return!1}return e.length<r.length}reverse(){return u.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){const t=this.namespaces();return t[t.length-1]}list(){return this.toString().split(o).slice(1)}type(){return l(this.baseNamespace())}name(){return h(this.baseNamespace())}instance(t){return new u(this.toString()+":"+t)}path(){let t=this.parent().toString();return t.endsWith(o)||(t+=o),t+=this.type(),new u(t)}parent(){const t=this.list();return 1===t.length?new u(o):new u(t.slice(0,-1).join(o))}child(t){return this.toString()===o?t:t.toString()===o?this:new u(this.toString()+t.toString(),!1)}isAncestorOf(t){return t.toString()!==this.toString()&&t.toString().startsWith(this.toString())}isDecendantOf(t){return t.toString()!==this.toString()&&this.toString().startsWith(t.toString())}isTopLevel(){return 1===this.list().length}concat(...t){return u.withNamespaces([...this.namespaces(),...d(t.map((t=>t.namespaces())))])}}function l(t){const e=t.split(":");return e.length<2?"":e.slice(0,-1).join(":")}function h(t){const e=t.split(":");return e[e.length-1]}function d(t){return[].concat(...t)}},8134:function(t,e,r){"use strict";r.d(e,{Y:function(){return a}});var n=r(7018),i=r(6312),s=r(4622),o=r(9927);function a(t){const e=(0,i.d)(),r=(0,n.r)(t.source),a=(0,s.Z)();let c;const u=t.sink(async function*(){yield*e;const t=await a.promise;yield*t}());u.catch((t=>{c=t}));const l={sink:async t=>null!=c?await Promise.reject(c):(a.resolve(t),await u),source:o(r,(t=>t.slice()))};return{reader:r,writer:e,stream:l,rest:()=>e.end(),write:e.push,read:async()=>{const t=await r.next();if(null!=t.value)return t.value.slice()}}}},4291:function(t,e,r){"use strict";r.d(e,{Jx:function(){return m},cv:function(){return u}});r(8675),r(3462);var n=r(9109),i=r(2611);const s=(t,e,r)=>{const n=i.encode(t,e,r);return s.bytes=i.encode.bytes,e??Uint8Array.from(n)};s.bytes=0;var o=r(6861);const a=8,c=10240;function u(t){t=t??{};const e=Math.max(t.poolSize??c,t.minPoolSize??a),r=t.lengthEncoder??s,n=async function*(t){let n=new Uint8Array(e),i=0;for await(const s of t){r(s.length,n,i);const t=n.slice(i,i+r.bytes);i+=r.bytes,n.length-i<a&&(n=new Uint8Array(e),i=0),yield(0,o.zo)([t,s.slice()],t.length+s.length)}};return n}u.single=(t,e)=>{e=e??{};const r=e.lengthEncoder??s;return new n.H(r(t.length),t.slice())};r(1703);const l=t=>{const e=i.decode(t);return l.bytes=i.decode.bytes,e};l.bytes=0;var h=r(9998);const d=8,f=4194304,p=new n.H,g={LENGTH:"readLength",DATA:"readData"},y={[g.LENGTH]:(t,e,r,i)=>{const s=i?.lengthDecoder??l,o=i?.maxLengthLength??d,a=i?.maxDataLength??f;let c;e.append(t);try{c=s(e.slice())}catch(u){if(e.length>o)throw h(new Error("message length too long"),"ERR_MSG_LENGTH_TOO_LONG");if(u instanceof RangeError)return{mode:g.LENGTH,buffer:e,chunk:void 0,state:void 0,data:void 0};throw u}if(c>a)throw h(new Error("message data too long"),"ERR_MSG_DATA_TOO_LONG");return t=e.subarray(s.bytes),e=new n.H,null!=i?.onLength&&i.onLength(c),c<=0?{mode:g.LENGTH,chunk:t,buffer:e,data:p}:{mode:g.DATA,chunk:t,buffer:e,state:{dataLength:c},data:void 0}},[g.DATA]:(t,e,r,i)=>{if(e.append(t),null==r)throw new Error("state is required");if(e.length<r.dataLength)return{mode:g.DATA,buffer:e,state:r,chunk:void 0,data:void 0};const{dataLength:s}=r,o=e.subarray(0,s),a=e.length>s?e.subarray(s):void 0;return e=new n.H,{mode:g.LENGTH,chunk:a,buffer:e,state:void 0,data:o}}};function m(t){const e=async function*(e){let r,i=new n.H,s=g.LENGTH;for await(const o of e){let e=new n.H(o);while(null!=e){const n=y[s](e,i,r,t);if(s=n.mode,e=n.chunk,i=n.buffer,r=n.state,null!=n.data){const e=n.data.slice();null!=t?.onData&&t.onData(e),yield e}}}if(i.length>0)throw h(new Error("unexpected end of input"),"ERR_UNEXPECTED_EOF")};return e}function w(t){return null!=globalThis?.Buffer?.allocUnsafe?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}m.fromReader=(t,e)=>{let r=1;const n=async function*(){while(1)try{const{done:e,value:n}=await t.next(r);if(!0===e)return;null!=n&&(yield n)}catch(e){if("ERR_UNDER_READ"===e.code)return{done:!0,value:null};throw e}finally{r=1}}(),i=t=>{r=t};return m({...e??{},onLength:i})(n)};const v=(t,e,r)=>{e=e??w(4);const n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setInt32(r??0,t,!1),e};v.bytes=4;const E=t=>{if(t.length<4)throw RangeError("Could not decode int32BE");const e=new DataView(t.buffer,t.byteOffset,t.byteLength);return e.getInt32(0,!1)};E.bytes=4},9174:function(t,e,r){"use strict";r.d(e,{zG:function(){return u}});var n=r(6312),i=r(940);const s=(...t)=>{let e;while(t.length>0)e=t.shift()(e);return e},o=t=>null!=t&&("function"===typeof t[Symbol.asyncIterator]||"function"===typeof t[Symbol.iterator]||"function"===typeof t.next),a=t=>null!=t&&"function"===typeof t.sink&&o(t.source),c=t=>e=>{const r=t.sink(e);if(null!=r.then){const e=(0,n.d)();r.then((()=>{e.end()}),(t=>{e.end(t)}));const s=async function*(){yield*t.source,e.end()};return i(e,s())}return t.source};function u(t,...e){if(a(t)){const e=t;t=()=>e.source}else if(o(t)){const e=t;t=()=>e}const r=[t,...e];if(r.length>1&&a(r[r.length-1])&&(r[r.length-1]=r[r.length-1].sink),r.length>2)for(let n=1;n<r.length-1;n++)a(r[n])&&(r[n]=c(r[n]));return s(...r)}},6312:function(t,e,r){"use strict";r.d(e,{d:function(){return s}});r(1703);class n{constructor(t){if(!(t>0)||0!==(t-1&t))throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(t),this.mask=t-1,this.top=0,this.btm=0,this.next=null}push(t){return void 0===this.buffer[this.top]&&(this.buffer[this.top]=t,this.top=this.top+1&this.mask,!0)}shift(){const t=this.buffer[this.btm];if(void 0!==t)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,t}isEmpty(){return void 0===this.buffer[this.btm]}}class i{constructor(t){this.hwm=t??16,this.head=new n(this.hwm),this.tail=this.head}push(t){if(!this.head.push(t)){const e=this.head;this.head=e.next=new n(2*this.head.buffer.length),this.head.push(t)}}shift(){const t=this.tail.shift();if(void 0===t&&null!=this.tail.next){const t=this.tail.next;return this.tail.next=null,this.tail=t,this.tail.shift()}return t}isEmpty(){return this.head.isEmpty()}}function s(t){const e=t=>{const e=t.shift();if(null==e)return{done:!0};if(null!=e.error)throw e.error;return{done:!0===e.done,value:e.value}};return o(e,t)}function o(t,e){e=e??{};let r,n,s,o=e.onEnd,a=new i;const c=async()=>a.isEmpty()?s?{done:!0}:await new Promise(((e,i)=>{n=s=>{n=null,a.push(s);try{e(t(a))}catch(o){i(o)}return r}})):t(a),u=t=>null!=n?n(t):(a.push(t),r),l=t=>(a=new i,null!=n?n({error:t}):(a.push({error:t}),r)),h=t=>s?r:u({done:!1,value:t}),d=t=>s?r:(s=!0,null!=t?l(t):u({done:!0})),f=()=>(a=new i,d(),{done:!0}),p=t=>(d(t),{done:!0});if(r={[Symbol.asyncIterator](){return this},next:c,return:f,throw:p,push:h,end:d},null==o)return r;const g=r;return r={[Symbol.asyncIterator](){return this},next(){return g.next()},throw(t){return g.throw(t),null!=o&&(o(t),o=void 0),{done:!0}},return(){return g.return(),null!=o&&(o(),o=void 0),{done:!0}},push:h,end(t){return g.end(t),null!=o&&(o(t),o=void 0),r}},r}},7018:function(t,e,r){"use strict";r.d(e,{r:function(){return i}});r(1703);var n=r(9109);function i(t){const e=async function*(){let e=yield,r=new n.H;for await(const i of t)if(null!=e){r.append(i);while(r.length>=e){const t=r.subarray(0,e);if(r.consume(e),e=yield t,null==e){r.length>0&&(e=yield r,r=new n.H);break}}}else r.append(i),e=yield r,r=new n.H;if(null!=e)throw Object.assign(new Error(`stream ended before ${e} bytes became available`),{code:"ERR_UNDER_READ",buffer:r})}();return e.next(),e}},5844:function(t,e,r){"use strict";r.d(e,{N:function(){return cs}});r(1703);var n,i=r(2656),s=function(t,e,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(t):n?n.value:e.get(t)};class o extends EventTarget{constructor(){super(...arguments),n.set(this,new Map)}listenerCount(t){const e=s(this,n,"f").get(t);return null==e?0:e.length}addEventListener(t,e,r){super.addEventListener(t,e,r);let i=s(this,n,"f").get(t);null==i&&(i=[],s(this,n,"f").set(t,i)),i.push({callback:e,once:(!0!==r&&!1!==r&&r?.once)??!1})}removeEventListener(t,e,r){super.removeEventListener(t,e,r);let i=s(this,n,"f").get(t);null!=i&&(i=i.filter((({callback:t})=>t!==e)),s(this,n,"f").set(t,i))}dispatchEvent(t){const e=super.dispatchEvent(t);let r=s(this,n,"f").get(t.type);return null==r||(r=r.filter((({once:t})=>!t)),s(this,n,"f").set(t.type,r)),e}}n=new WeakMap;class a extends Event{constructor(t,e){super(t,e),this.detail=e?.detail}}const c=globalThis.CustomEvent??a;function u(t){return null!=t&&"function"===typeof t.start&&"function"===typeof t.stop}var l=r(7192);const h=(t,e)=>async function*(){const r=await l(t);yield*r.sort(e)}();var d=r(9164),f=r(3726),p=r(6855);class g{open(){return Promise.reject(new Error(".open is not implemented"))}close(){return Promise.reject(new Error(".close is not implemented"))}put(t,e,r){return Promise.reject(new Error(".put is not implemented"))}get(t,e){return Promise.reject(new Error(".get is not implemented"))}has(t,e){return Promise.reject(new Error(".has is not implemented"))}delete(t,e){return Promise.reject(new Error(".delete is not implemented"))}async*putMany(t,e={}){for await(const{key:r,value:n}of t)await this.put(r,n,e),yield{key:r,value:n}}async*getMany(t,e={}){for await(const r of t)yield this.get(r,e)}async*deleteMany(t,e={}){for await(const r of t)await this.delete(r,e),yield r}batch(){let t=[],e=[];return{put(e,r){t.push({key:e,value:r})},delete(t){e.push(t)},commit:async r=>{await d(this.putMany(t,r)),t=[],await d(this.deleteMany(e,r)),e=[]}}}async*_all(t,e){throw new Error("._all is not implemented")}async*_allKeys(t,e){throw new Error("._allKeys is not implemented")}query(t,e){let r=this._all(t,e);if(null!=t.prefix&&(r=f(r,(e=>e.key.toString().startsWith(t.prefix)))),Array.isArray(t.filters)&&(r=t.filters.reduce(((t,e)=>f(t,e)),r)),Array.isArray(t.orders)&&(r=t.orders.reduce(((t,e)=>h(t,e)),r)),null!=t.offset){let e=0;r=f(r,(()=>e++>=t.offset))}return null!=t.limit&&(r=p(r,t.limit)),r}queryKeys(t,e){let r=this._allKeys(t,e);if(null!=t.prefix&&(r=f(r,(e=>e.toString().startsWith(t.prefix)))),Array.isArray(t.filters)&&(r=t.filters.reduce(((t,e)=>f(t,e)),r)),Array.isArray(t.orders)&&(r=t.orders.reduce(((t,e)=>h(t,e)),r)),null!=t.offset){let e=0;r=f(r,(()=>e++>=t.offset))}return null!=t.limit&&(r=p(r,t.limit)),r}}var y,m,w=r(4676),v=r(9998);function E(t){return t=t||new Error("Not Found"),v(t,"ERR_NOT_FOUND")}class b extends g{constructor(){super(),this.data={}}open(){return Promise.resolve()}close(){return Promise.resolve()}async put(t,e){this.data[t.toString()]=e}async get(t){const e=await this.has(t);if(!e)throw E();return this.data[t.toString()]}async has(t){return void 0!==this.data[t.toString()]}async delete(t){delete this.data[t.toString()]}async*_all(){yield*Object.entries(this.data).map((([t,e])=>({key:new w.s(t),value:e})))}async*_allKeys(){yield*Object.entries(this.data).map((([t])=>new w.s(t)))}}(function(t){t["NOT_STARTED_YET"]="The libp2p node is not started yet",t["DHT_DISABLED"]="DHT is not available",t["PUBSUB_DISABLED"]="PubSub is not available",t["CONN_ENCRYPTION_REQUIRED"]="At least one connection encryption module is required",t["ERR_TRANSPORTS_REQUIRED"]="At least one transport module is required",t["ERR_PROTECTOR_REQUIRED"]="Private network is enforced, but no protector was provided",t["NOT_FOUND"]="Not found"})(y||(y={})),function(t){t["DHT_DISABLED"]="ERR_DHT_DISABLED",t["ERR_PUBSUB_DISABLED"]="ERR_PUBSUB_DISABLED",t["PUBSUB_NOT_STARTED"]="ERR_PUBSUB_NOT_STARTED",t["DHT_NOT_STARTED"]="ERR_DHT_NOT_STARTED",t["CONN_ENCRYPTION_REQUIRED"]="ERR_CONN_ENCRYPTION_REQUIRED",t["ERR_TRANSPORTS_REQUIRED"]="ERR_TRANSPORTS_REQUIRED",t["ERR_PROTECTOR_REQUIRED"]="ERR_PROTECTOR_REQUIRED",t["ERR_PEER_DIAL_INTERCEPTED"]="ERR_PEER_DIAL_INTERCEPTED",t["ERR_CONNECTION_INTERCEPTED"]="ERR_CONNECTION_INTERCEPTED",t["ERR_INVALID_PROTOCOLS_FOR_STREAM"]="ERR_INVALID_PROTOCOLS_FOR_STREAM",t["ERR_CONNECTION_ENDED"]="ERR_CONNECTION_ENDED",t["ERR_CONNECTION_FAILED"]="ERR_CONNECTION_FAILED",t["ERR_NODE_NOT_STARTED"]="ERR_NODE_NOT_STARTED",t["ERR_ALREADY_ABORTED"]="ERR_ALREADY_ABORTED",t["ERR_TOO_MANY_ADDRESSES"]="ERR_TOO_MANY_ADDRESSES",t["ERR_NO_VALID_ADDRESSES"]="ERR_NO_VALID_ADDRESSES",t["ERR_RELAYED_DIAL"]="ERR_RELAYED_DIAL",t["ERR_DIALED_SELF"]="ERR_DIALED_SELF",t["ERR_DISCOVERED_SELF"]="ERR_DISCOVERED_SELF",t["ERR_DUPLICATE_TRANSPORT"]="ERR_DUPLICATE_TRANSPORT",t["ERR_ENCRYPTION_FAILED"]="ERR_ENCRYPTION_FAILED",t["ERR_HOP_REQUEST_FAILED"]="ERR_HOP_REQUEST_FAILED",t["ERR_INVALID_KEY"]="ERR_INVALID_KEY",t["ERR_INVALID_MESSAGE"]="ERR_INVALID_MESSAGE",t["ERR_INVALID_PARAMETERS"]="ERR_INVALID_PARAMETERS",t["ERR_INVALID_PEER"]="ERR_INVALID_PEER",t["ERR_MUXER_UNAVAILABLE"]="ERR_MUXER_UNAVAILABLE",t["ERR_NOT_FOUND"]="ERR_NOT_FOUND",t["ERR_TIMEOUT"]="ERR_TIMEOUT",t["ERR_TRANSPORT_UNAVAILABLE"]="ERR_TRANSPORT_UNAVAILABLE",t["ERR_TRANSPORT_DIAL_FAILED"]="ERR_TRANSPORT_DIAL_FAILED",t["ERR_UNSUPPORTED_PROTOCOL"]="ERR_UNSUPPORTED_PROTOCOL",t["ERR_PROTOCOL_HANDLER_ALREADY_REGISTERED"]="ERR_PROTOCOL_HANDLER_ALREADY_REGISTERED",t["ERR_INVALID_MULTIADDR"]="ERR_INVALID_MULTIADDR",t["ERR_SIGNATURE_NOT_VALID"]="ERR_SIGNATURE_NOT_VALID",t["ERR_FIND_SELF"]="ERR_FIND_SELF",t["ERR_NO_ROUTERS_AVAILABLE"]="ERR_NO_ROUTERS_AVAILABLE",t["ERR_CONNECTION_NOT_MULTIPLEXED"]="ERR_CONNECTION_NOT_MULTIPLEXED",t["ERR_NO_DIAL_TOKENS"]="ERR_NO_DIAL_TOKENS",t["ERR_KEYCHAIN_REQUIRED"]="ERR_KEYCHAIN_REQUIRED",t["ERR_INVALID_CMS"]="ERR_INVALID_CMS",t["ERR_MISSING_KEYS"]="ERR_MISSING_KEYS",t["ERR_NO_KEY"]="ERR_NO_KEY",t["ERR_INVALID_KEY_NAME"]="ERR_INVALID_KEY_NAME",t["ERR_INVALID_KEY_TYPE"]="ERR_INVALID_KEY_TYPE",t["ERR_KEY_ALREADY_EXISTS"]="ERR_KEY_ALREADY_EXISTS",t["ERR_INVALID_KEY_SIZE"]="ERR_INVALID_KEY_SIZE",t["ERR_KEY_NOT_FOUND"]="ERR_KEY_NOT_FOUND",t["ERR_OLD_KEY_NAME_INVALID"]="ERR_OLD_KEY_NAME_INVALID",t["ERR_NEW_KEY_NAME_INVALID"]="ERR_NEW_KEY_NAME_INVALID",t["ERR_PASSWORD_REQUIRED"]="ERR_PASSWORD_REQUIRED",t["ERR_PEM_REQUIRED"]="ERR_PEM_REQUIRED",t["ERR_CANNOT_READ_KEY"]="ERR_CANNOT_READ_KEY",t["ERR_MISSING_PRIVATE_KEY"]="ERR_MISSING_PRIVATE_KEY",t["ERR_MISSING_PUBLIC_KEY"]="ERR_MISSING_PUBLIC_KEY",t["ERR_INVALID_OLD_PASS_TYPE"]="ERR_INVALID_OLD_PASS_TYPE",t["ERR_INVALID_NEW_PASS_TYPE"]="ERR_INVALID_NEW_PASS_TYPE",t["ERR_INVALID_PASS_LENGTH"]="ERR_INVALID_PASS_LENGTH",t["ERR_NOT_IMPLEMENTED"]="ERR_NOT_IMPLEMENTED",t["ERR_WRONG_PING_ACK"]="ERR_WRONG_PING_ACK",t["ERR_INVALID_RECORD"]="ERR_INVALID_RECORD",t["ERR_ALREADY_SUCCEEDED"]="ERR_ALREADY_SUCCEEDED"}(m||(m={}));var S=r(9927);async function*_(t,e){yield*S(t,(async t=>(await e.addressBook.add(t.id,t.multiaddrs),t)))}function R(t){const e=new Set;return f(t,(t=>!e.has(t.id.toString())&&(e.add(t.id.toString()),!0)))}async function*I(t,e=1){let r=0;for await(const n of t)r++,yield n;if(r<e)throw v(new Error("not found"),"NOT_FOUND")}var C=r(2856),A=r(940),T=r(9174),k=r(4461),P=r(2407),N=r(3793);const L=(0,i.kg)("libp2p:peer-routing");class D{constructor(t,e){this.components=t,this.routers=e.routers,this.refreshManagerInit=e.refreshManager??{},this.started=!1,this._findClosestPeersTask=this._findClosestPeersTask.bind(this)}isStarted(){return this.started}async start(){this.started||0===this.routers.length||null!=this.timeoutId||!1===this.refreshManagerInit.enabled||(this.timeoutId=(0,P.setDelayedInterval)(this._findClosestPeersTask,this.refreshManagerInit.interval,this.refreshManagerInit.bootDelay),this.started=!0)}async _findClosestPeersTask(){if(null==this.abortController)try{this.abortController=new C.TimeoutController(this.refreshManagerInit.timeout??1e4);try{(0,N.setMaxListeners)?.(1/0,this.abortController.signal)}catch{}await d(this.getClosestPeers(this.components.getPeerId().toBytes(),{signal:this.abortController.signal}))}catch(t){L.error(t)}finally{this.abortController?.clear(),this.abortController=void 0}}async stop(){(0,P.clearDelayedInterval)(this.timeoutId),this.abortController?.abort(),this.started=!1}async findPeer(t,e){if(0===this.routers.length)throw v(new Error("No peer routers available"),m.ERR_NO_ROUTERS_AVAILABLE);if(t.toString()===this.components.getPeerId().toString())throw v(new Error("Should not try to find self"),m.ERR_FIND_SELF);const r=await(0,T.zG)(A(...this.routers.map((r=>async function*(){try{yield await r.findPeer(t,e)}catch(n){L.error(n)}}()))),(t=>f(t,Boolean)),(t=>_(t,this.components.getPeerStore())),(async t=>await k(t)));if(null!=r)return r;throw v(new Error(y.NOT_FOUND),m.ERR_NOT_FOUND)}async*getClosestPeers(t,e){if(0===this.routers.length)throw v(new Error("No peer routers available"),m.ERR_NO_ROUTERS_AVAILABLE);yield*(0,T.zG)(A(...this.routers.map((r=>r.getClosestPeers(t,e)))),(t=>_(t,this.components.getPeerStore())),(t=>R(t)),(t=>I(t)))}}class O{constructor(t,e){this.routers=e.routers??[],this.started=!1,this.components=t}isStarted(){return this.started}async start(){this.started=!0}async stop(){this.started=!1}async*findProviders(t,e={}){if(0===this.routers.length)throw v(new Error("No content this.routers available"),m.ERR_NO_ROUTERS_AVAILABLE);yield*(0,T.zG)(A(...this.routers.map((r=>r.findProviders(t,e)))),(t=>_(t,this.components.getPeerStore())),(t=>R(t)),(t=>I(t)))}async provide(t,e={}){if(0===this.routers.length)throw v(new Error("No content routers available"),m.ERR_NO_ROUTERS_AVAILABLE);await Promise.all(this.routers.map((async r=>await r.provide(t,e))))}async put(t,e,r){if(!this.isStarted())throw v(new Error(y.NOT_STARTED_YET),m.DHT_NOT_STARTED);const n=this.components.getDHT();null!=n&&await d(n.put(t,e,r))}async get(t,e){if(!this.isStarted())throw v(new Error(y.NOT_STARTED_YET),m.DHT_NOT_STARTED);const r=this.components.getDHT();if(null!=r)for await(const n of r.get(t,e))if("VALUE"===n.name)return n.value;throw v(new Error(y.NOT_FOUND),m.ERR_NOT_FOUND)}async*getMany(t,e,r){if(!this.isStarted())throw v(new Error(y.NOT_STARTED_YET),m.DHT_NOT_STARTED);if(null==e||0===e)return;let n=0;const i=this.components.getDHT();if(null!=i)for await(const s of i.get(t,r))if("VALUE"===s.name&&(yield{from:s.from,val:s.value},n++,n===e))break;if(0===n)throw v(new Error(y.NOT_FOUND),m.ERR_NOT_FOUND)}}var B=r(9412),x=r(3839);const U=Symbol.for("@libp2p/peer-id");function M(t){return null!=t&&Boolean(t[U])}function V(t){const e=t.getPeerId();if(null==e)throw v(new Error(`${t.toString()} does not have a valid peer type`),m.ERR_INVALID_MULTIADDR);try{return(0,B.jE)(e)}catch(r){throw v(new Error(`${t.toString()} is not a valid peer type`),m.ERR_INVALID_MULTIADDR)}}function K(t){if(M(t))return{id:t,multiaddrs:[],protocols:[]};let e;return"string"===typeof t&&(t=new x.sc(t)),x.sc.isMultiaddr(t)&&(e=t,t=V(t)),{id:t,multiaddrs:null!=e?[e]:[],protocols:[]}}const F=t=>t;class j extends o{constructor(t,e){super();const{listen:r=[],announce:n=[]}=e;this.components=t,this.listen=new Set(r.map((t=>t.toString()))),this.announce=new Set(n.map((t=>t.toString()))),this.observed=new Set,this.announceFilter=e.announceFilter??F}getListenAddrs(){return Array.from(this.listen).map((t=>new x.sc(t)))}getAnnounceAddrs(){return Array.from(this.announce).map((t=>new x.sc(t)))}getObservedAddrs(){return Array.from(this.observed).map((t=>new x.sc(t)))}addObservedAddr(t){let e=new x.sc(t);const r=e.getPeerId();if(null!=r){const t=(0,B.jE)(r);t.equals(this.components.getPeerId())&&(e=e.decapsulate(new x.sc(`/p2p/${this.components.getPeerId().toString()}`)))}const n=e.toString();this.observed.has(n)||(this.observed.add(n),this.dispatchEvent(new c("change:addresses")))}getAddresses(){let t=this.getAnnounceAddrs().map((t=>t.toString()));0===t.length&&(t=this.components.getTransportManager().getAddrs().map((t=>t.toString()))),t=t.concat(this.getObservedAddrs().map((t=>t.toString())));const e=new Set(t);return this.announceFilter(Array.from(e).map((t=>new x.sc(t)))).map((t=>t.getPeerId()===this.components.getPeerId().toString()?t:t.encapsulate(`/p2p/${this.components.getPeerId().toString()}`)))}}var q=r(535),H=q;const G=(0,i.kg)("libp2p:connection-manager:latency-monitor:visibility-change-emitter");class z extends o{constructor(){super(),this.hidden="hidden",this.visibilityChange="visibilityChange",null!=globalThis.document&&(this._initializeVisibilityVarNames(),this._addVisibilityChangeListener())}_initializeVisibilityVarNames(){let t="hidden",e="visibilitychange";"undefined"!==typeof globalThis.document.hidden?(t="hidden",e="visibilitychange"):"undefined"!==typeof globalThis.document.mozHidden?(t="mozHidden",e="mozvisibilitychange"):"undefined"!==typeof globalThis.document.msHidden?(t="msHidden",e="msvisibilitychange"):"undefined"!==typeof globalThis.document.webkitHidden&&(t="webkitHidden",e="webkitvisibilitychange"),this.hidden=t,this.visibilityChange=e}_addVisibilityChangeListener(){"undefined"===typeof globalThis.document.addEventListener||"undefined"===typeof document[this.hidden]?G("Checking page visibility requires a browser that supports the Page Visibility API."):globalThis.document.addEventListener(this.visibilityChange,this._handleVisibilityChange.bind(this),!1)}isVisible(){if(void 0!==this.hidden&&void 0!==document[this.hidden])return null==document[this.hidden]}_handleVisibilityChange(){const t=!1===globalThis.document[this.hidden];G(t?"Page Visible":"Page Hidden"),this.dispatchEvent(new c("visibilityChange",{detail:t}))}}const $=(0,i.kg)("libp2p:connection-manager:latency-monitor");class W extends o{constructor(t={}){super();const{latencyCheckIntervalMs:e,dataEmitIntervalMs:r,asyncTestFn:n,latencyRandomPercentage:i}=t;this.latencyCheckIntervalMs=e??500,this.latencyRandomPercentage=i??10,this.latencyCheckMultiply=this.latencyRandomPercentage/100*2*this.latencyCheckIntervalMs,this.latencyCheckSubtract=this.latencyCheckMultiply/2,this.dataEmitIntervalMs=null===r||0===r?void 0:r??5e3,$("latencyCheckIntervalMs: %s dataEmitIntervalMs: %s",this.latencyCheckIntervalMs,this.dataEmitIntervalMs),null!=this.dataEmitIntervalMs?$("Expecting ~%s events per summary",this.latencyCheckIntervalMs/this.dataEmitIntervalMs):$("Not emitting summaries"),this.asyncTestFn=n,null!=globalThis.process?.hrtime?($("Using process.hrtime for timing"),this.now=globalThis.process.hrtime,this.getDeltaMS=t=>{const e=this.now(t);return 1e3*e[0]+e[1]/1e6}):"undefined"!==typeof window&&null!=window.performance?.now?($("Using performance.now for timing"),this.now=window.performance.now.bind(window.performance),this.getDeltaMS=t=>Math.round(this.now()-t)):($("Using Date.now for timing"),this.now=Date.now,this.getDeltaMS=t=>this.now()-t),this.latencyData=this.initLatencyData()}start(){Y()&&(this.visibilityChangeEmitter=new z,this.visibilityChangeEmitter.addEventListener("visibilityChange",(t=>{const{detail:e}=t;e?this._startTimers():(this._emitSummary(),this._stopTimers())}))),!0===this.visibilityChangeEmitter?.isVisible()&&this._startTimers()}stop(){this._stopTimers()}_startTimers(){null==this.checkLatencyID&&(this.checkLatency(),null!=this.dataEmitIntervalMs&&(this.emitIntervalID=setInterval((()=>this._emitSummary()),this.dataEmitIntervalMs),"function"===typeof this.emitIntervalID.unref&&this.emitIntervalID.unref()))}_stopTimers(){null!=this.checkLatencyID&&(clearTimeout(this.checkLatencyID),this.checkLatencyID=void 0),null!=this.emitIntervalID&&(clearInterval(this.emitIntervalID),this.emitIntervalID=void 0)}_emitSummary(){const t=this.getSummary();t.events>0&&this.dispatchEvent(new c("data",{detail:t}))}getSummary(){const t={events:this.latencyData.events,minMs:this.latencyData.minMs,maxMs:this.latencyData.maxMs,avgMs:this.latencyData.events>0?this.latencyData.totalMs/this.latencyData.events:Number.POSITIVE_INFINITY,lengthMs:this.getDeltaMS(this.latencyData.startTime)};return this.latencyData=this.initLatencyData(),$.trace("Summary: %O",t),t}checkLatency(){const t=Math.random()*this.latencyCheckMultiply-this.latencyCheckSubtract,e={deltaOffset:Math.ceil(this.latencyCheckIntervalMs+t),startTime:this.now()},r=()=>{if(null==this.checkLatencyID)return;const t=this.getDeltaMS(e.startTime)-e.deltaOffset;this.checkLatency(),this.latencyData.events++,this.latencyData.minMs=Math.min(this.latencyData.minMs,t),this.latencyData.maxMs=Math.max(this.latencyData.maxMs,t),this.latencyData.totalMs+=t,$.trace("MS: %s Data: %O",t,this.latencyData)};$.trace("localData: %O",e),this.checkLatencyID=setTimeout((()=>{null!=this.asyncTestFn?(e.deltaOffset=0,e.startTime=this.now(),this.asyncTestFn(r)):(e.deltaOffset-=1,r())}),e.deltaOffset),"function"===typeof this.checkLatencyID.unref&&this.checkLatencyID.unref()}initLatencyData(){return{startTime:this.now(),minMs:Number.POSITIVE_INFINITY,maxMs:Number.NEGATIVE_INFINITY,events:0,totalMs:0}}}function Y(){return"undefined"!==typeof globalThis.window}var Q=r(3057),X=r(7108);function J(t){return null!=t&&"function"===typeof t.init}class Z{constructor(t={}){this.started=!1,null!=t.peerId&&this.setPeerId(t.peerId),null!=t.addressManager&&this.setAddressManager(t.addressManager),null!=t.peerStore&&this.setPeerStore(t.peerStore),null!=t.upgrader&&this.setUpgrader(t.upgrader),null!=t.metrics&&this.setMetrics(t.metrics),null!=t.registrar&&this.setRegistrar(t.registrar),null!=t.connectionManager&&this.setConnectionManager(t.connectionManager),null!=t.transportManager&&this.setTransportManager(t.transportManager),null!=t.connectionGater&&this.setConnectionGater(t.connectionGater),null!=t.contentRouting&&this.setContentRouting(t.contentRouting),null!=t.peerRouting&&this.setPeerRouting(t.peerRouting),null!=t.datastore&&this.setDatastore(t.datastore),null!=t.connectionProtector&&this.setConnectionProtector(t.connectionProtector),null!=t.dht&&this.setDHT(t.dht),null!=t.pubsub&&this.setPubSub(t.pubsub)}isStarted(){return this.started}async beforeStart(){await Promise.all(Object.values(this).filter((t=>u(t))).map((async t=>{null!=t.beforeStart&&await t.beforeStart()})))}async start(){await Promise.all(Object.values(this).filter((t=>u(t))).map((async t=>{await t.start()}))),this.started=!0}async afterStart(){await Promise.all(Object.values(this).filter((t=>u(t))).map((async t=>{null!=t.afterStart&&await t.afterStart()})))}async beforeStop(){await Promise.all(Object.values(this).filter((t=>u(t))).map((async t=>{null!=t.beforeStop&&await t.beforeStop()})))}async stop(){await Promise.all(Object.values(this).filter((t=>u(t))).map((async t=>{await t.stop()}))),this.started=!1}async afterStop(){await Promise.all(Object.values(this).filter((t=>u(t))).map((async t=>{null!=t.afterStop&&await t.afterStop()})))}setPeerId(t){return this.peerId=t,t}getPeerId(){if(null==this.peerId)throw v(new Error("peerId not set"),"ERR_SERVICE_MISSING");return this.peerId}setMetrics(t){return this.metrics=t,J(t)&&t.init(this),t}getMetrics(){return this.metrics}setAddressManager(t){return this.addressManager=t,J(t)&&t.init(this),t}getAddressManager(){if(null==this.addressManager)throw v(new Error("addressManager not set"),"ERR_SERVICE_MISSING");return this.addressManager}setPeerStore(t){return this.peerStore=t,J(t)&&t.init(this),t}getPeerStore(){if(null==this.peerStore)throw v(new Error("peerStore not set"),"ERR_SERVICE_MISSING");return this.peerStore}setUpgrader(t){return this.upgrader=t,J(t)&&t.init(this),t}getUpgrader(){if(null==this.upgrader)throw v(new Error("upgrader not set"),"ERR_SERVICE_MISSING");return this.upgrader}setRegistrar(t){return this.registrar=t,J(t)&&t.init(this),t}getRegistrar(){if(null==this.registrar)throw v(new Error("registrar not set"),"ERR_SERVICE_MISSING");return this.registrar}setConnectionManager(t){return this.connectionManager=t,J(t)&&t.init(this),t}getConnectionManager(){if(null==this.connectionManager)throw v(new Error("connectionManager not set"),"ERR_SERVICE_MISSING");return this.connectionManager}setTransportManager(t){return this.transportManager=t,J(t)&&t.init(this),t}getTransportManager(){if(null==this.transportManager)throw v(new Error("transportManager not set"),"ERR_SERVICE_MISSING");return this.transportManager}setConnectionGater(t){return this.connectionGater=t,J(t)&&t.init(this),t}getConnectionGater(){if(null==this.connectionGater)throw v(new Error("connectionGater not set"),"ERR_SERVICE_MISSING");return this.connectionGater}setContentRouting(t){return this.contentRouting=t,J(t)&&t.init(this),t}getContentRouting(){if(null==this.contentRouting)throw v(new Error("contentRouting not set"),"ERR_SERVICE_MISSING");return this.contentRouting}setPeerRouting(t){return this.peerRouting=t,J(t)&&t.init(this),t}getPeerRouting(){if(null==this.peerRouting)throw v(new Error("peerRouting not set"),"ERR_SERVICE_MISSING");return this.peerRouting}setDatastore(t){return this.datastore=t,J(t)&&t.init(this),t}getDatastore(){if(null==this.datastore)throw v(new Error("datastore not set"),"ERR_SERVICE_MISSING");return this.datastore}setConnectionProtector(t){return this.connectionProtector=t,J(t)&&t.init(this),t}getConnectionProtector(){return this.connectionProtector}setDHT(t){return this.dht=t,J(t)&&t.init(this),t}getDHT(){if(null==this.dht)throw v(new Error("dht not set"),"ERR_SERVICE_MISSING");return this.dht}setPubSub(t){return this.pubsub=t,J(t)&&t.init(this),t}getPubSub(){if(null==this.pubsub)throw v(new Error("pubsub not set"),"ERR_SERVICE_MISSING");return this.pubsub}}const tt="OPEN";class et extends Error{constructor(t="The operation was aborted"){super(t),this.code=et.code,this.type=et.type}static get code(){return"ABORT_ERR"}static get type(){return"aborted"}}var rt=r(4908),nt=r(1838);const it=(0,i.kg)("libp2p:dialer:dial-request");class st{constructor(t){const{addrs:e,dialAction:r,dialer:n}=t;this.addrs=e,this.dialer=n,this.dialAction=r}async run(t={}){const e=this.dialer.getTokens(this.addrs.length);if(e.length<1)throw v(new Error("No dial tokens available"),m.ERR_NO_DIAL_TOKENS);const r=new nt;for(const o of e)r.push(o).catch((t=>{it.error(t)}));const n=this.addrs.map((()=>{const t=new AbortController;try{(0,N.setMaxListeners)?.(1/0,t.signal)}catch{}return t}));if(null!=t.signal)try{(0,N.setMaxListeners)?.(1/0,t.signal)}catch{}let i=0,s=!1;try{return await Promise.any(this.addrs.map((async(o,a)=>{const c=await r.shift();if(s)throw this.dialer.releaseToken(e.splice(e.indexOf(c),1)[0]),v(new Error("dialAction already succeeded"),m.ERR_ALREADY_SUCCEEDED);const u=n[a];if(null==u)throw v(new Error("dialAction did not come with an AbortController"),m.ERR_INVALID_PARAMETERS);let l;try{const s=u.signal;l=await this.dialAction(o,{...t,signal:null!=t.signal?(0,rt.anySignal)([s,t.signal]):s}),n[a]=void 0}finally{i++,this.addrs.length-i>=e.length?r.push(c).catch((t=>{it.error(t)})):this.dialer.releaseToken(e.splice(e.indexOf(c),1)[0])}if(null==l)throw v(new Error("dialAction led to empty object"),m.ERR_TRANSPORT_DIAL_FAILED);return s=!0,l})))}finally{n.forEach((t=>{void 0!==t&&t.abort()})),e.forEach((t=>this.dialer.releaseToken(t)))}}}var ot=r(2645);function at(t){const{address:e}=t.nodeAddress();return Boolean(ot(e))}function ct(t,e){const r=at(t.multiaddr),n=at(e.multiaddr);return r&&!n?1:!r&&n||t.isCertified&&!e.isCertified?-1:!t.isCertified&&e.isCertified?1:0}const ut=3e4,lt=100,ht=4,dt=25,ft={computeThrottleMaxQueueSize:1e3,computeThrottleTimeout:2e3,movingAverageIntervals:[6e4,3e5,9e5],maxOldPeersRetention:50};var pt=r(640);const gt=(0,i.kg)("libp2p:dialer"),yt="dialler",mt="pending-dials",wt="pending-dial-targets";class vt{constructor(t={}){this.components=new Z,this.started=!1,this.addressSorter=t.addressSorter??ct,this.maxAddrsToDial=t.maxAddrsToDial??dt,this.timeout=t.dialTimeout??ut,this.maxDialsPerPeer=t.maxDialsPerPeer??ht,this.tokens=[...new Array(t.maxParallelDials??lt)].map(((t,e)=>e)),this.pendingDials=(0,X.s)({component:yt,metric:mt,metrics:t.metrics}),this.pendingDialTargets=(0,X.s)({component:yt,metric:wt,metrics:t.metrics});for(const[e,r]of Object.entries(t.resolvers??{}))x.sc.resolvers.set(e,r)}init(t){this.components=t}isStarted(){return this.started}async start(){this.started=!0}async stop(){this.started=!1;for(const e of this.pendingDials.values())try{e.controller.abort()}catch(t){gt.error(t)}this.pendingDials.clear();for(const e of this.pendingDialTargets.values())e.reject(new et("Dialer was destroyed"));this.pendingDialTargets.clear()}async dial(t,e={}){const{id:r,multiaddrs:n}=K(t);if(this.components.getPeerId().equals(r))throw v(new Error("Tried to dial self"),m.ERR_DIALED_SELF);if(gt("check multiaddrs %p",r),null!=n&&n.length>0&&(gt("storing multiaddrs %p",r,n),await this.components.getPeerStore().addressBook.add(r,n)),await this.components.getConnectionGater().denyDialPeer(r))throw v(new Error("The dial request is blocked by gater.allowDialPeer"),m.ERR_PEER_DIAL_INTERCEPTED);gt("creating dial target for %p",r);const i=await this._createCancellableDialTarget(r);if(0===i.addrs.length)throw v(new Error("The dial request has no valid addresses"),m.ERR_NO_VALID_ADDRESSES);const s=this.pendingDials.get(i.id)??this._createPendingDial(i,e);try{const t=await s.promise;return gt("dial succeeded to %s",i.id),t}catch(o){throw gt("dial failed to %s",i.id,o),s.controller.signal.aborted&&(o.code=m.ERR_TIMEOUT),gt.error(o),o}finally{s.destroy()}}async _createCancellableDialTarget(t){const e=`${parseInt(String(1e9*Math.random()),10).toString()}${Date.now()}`,r=new Promise(((t,r)=>{this.pendingDialTargets.set(e,{resolve:t,reject:r})}));try{const n=await Promise.race([this._createDialTarget(t),r]);return n}finally{this.pendingDialTargets.delete(e)}}async _createDialTarget(t){const e=await(0,T.zG)(await this.components.getPeerStore().addressBook.get(t),(e=>f(e,(async e=>!await this.components.getConnectionGater().denyDialMultiaddr(t,e.multiaddr)))),(t=>pt(t,this.addressSorter)),(e=>S(e,(e=>{const r=e.multiaddr;return t.toString()===r.getPeerId()?r:r.encapsulate(`/p2p/${t.toString()}`)}))),(async t=>await l(t))),r=[];for(const i of e){const t=await this._resolve(i);t.forEach((t=>r.push(t)))}const n=r.filter((t=>this.components.getTransportManager().transportForMultiaddr(t)));if(n.length>this.maxAddrsToDial)throw await this.components.getPeerStore().delete(t),v(new Error("dial with more addresses than allowed"),m.ERR_TOO_MANY_ADDRESSES);return{id:t.toString(),addrs:n}}_createPendingDial(t,e={}){const r=async(t,e={})=>{if(!0===e.signal?.aborted)throw v(new Error("already aborted"),m.ERR_ALREADY_ABORTED);return await this.components.getTransportManager().dial(t,e)},n=new st({addrs:t.addrs,dialAction:r,dialer:this}),i=new C.TimeoutController(this.timeout),s=[i.signal];null!=e.signal&&s.push(e.signal);const o=(0,rt.anySignal)(s);try{(0,N.setMaxListeners)?.(1/0,o)}catch{}const a={dialRequest:n,controller:i,promise:n.run({...e,signal:o}),destroy:()=>{i.clear(),this.pendingDials.delete(t.id)}};return this.pendingDials.set(t.id,a),a}getTokens(t){const e=Math.min(t,this.maxDialsPerPeer,this.tokens.length),r=this.tokens.splice(0,e);return gt("%d tokens request, returning %d, %d remaining",t,e,this.tokens.length),r}releaseToken(t){this.tokens.includes(t)||(gt("token %d released",t),this.tokens.push(t))}async _resolve(t){const e=t.protoNames().includes("dnsaddr");if(!e)return[t];const r=await this._resolveRecord(t),n=await Promise.all(r.map((async t=>await this._resolve(t)))),i=n.flat();return i.reduce(((t,e)=>(null==t.find((t=>t.equals(e)))&&t.push(e),t)),[])}async _resolveRecord(t){try{t=new x.sc(t.toString());const e=await t.resolve();return e}catch(e){return gt.error(`multiaddr ${t.toString()} could not be resolved`,e),[]}}}const Et=(0,i.kg)("libp2p:connection-manager"),bt={maxConnections:1/0,minConnections:0,maxData:1/0,maxSentData:1/0,maxReceivedData:1/0,maxEventLoopDelay:1/0,pollInterval:2e3,autoDialInterval:1e4,movingAverageInterval:6e4,defaultPeerValue:.5},St="connection-manager",_t="peer-connections",Rt="peer-values";class It extends o{constructor(t){if(super(),this.components=new Z,this.opts=H.call({ignoreUndefined:!0},bt,t),this.opts.maxConnections<this.opts.minConnections)throw v(new Error("Connection Manager maxConnections must be greater than minConnections"),m.ERR_INVALID_PARAMETERS);Et("options: %o",this.opts),this.peerValues=(0,X.s)({component:St,metric:Rt,metrics:this.components.getMetrics()}),this.connections=(0,X.s)({component:St,metric:_t,metrics:this.components.getMetrics()}),this.started=!1,this._checkMetrics=this._checkMetrics.bind(this),this.latencyMonitor=new W({latencyCheckIntervalMs:t.pollInterval,dataEmitIntervalMs:t.pollInterval});try{(0,N.setMaxListeners)?.(1/0,this)}catch{}this.dialer=new vt(this.opts),this.onConnect=this.onConnect.bind(this),this.onDisconnect=this.onDisconnect.bind(this)}init(t){this.components=t,this.dialer.init(t)}isStarted(){return this.started}async start(){null!=this.components.getMetrics()&&(this.timer=this.timer??Q(this._checkMetrics,this.opts.pollInterval)),this.latencyMonitor.start(),this._onLatencyMeasure=this._onLatencyMeasure.bind(this),this.latencyMonitor.addEventListener("data",this._onLatencyMeasure),await this.dialer.start(),this.started=!0,Et("started")}async afterStart(){this.components.getUpgrader().addEventListener("connection",this.onConnect),this.components.getUpgrader().addEventListener("connectionEnd",this.onDisconnect)}async beforeStop(){this.components.getUpgrader().removeEventListener("connection",this.onConnect),this.components.getUpgrader().removeEventListener("connectionEnd",this.onDisconnect)}async stop(){this.timer?.clear(),this.latencyMonitor.removeEventListener("data",this._onLatencyMeasure),this.latencyMonitor.stop(),await this.dialer.stop(),this.started=!1,await this._close(),Et("stopped")}async _close(){const t=[];for(const e of this.connections.values())for(const r of e)t.push((async()=>{try{await r.close()}catch(t){Et.error(t)}})());Et("closing %d connections",t.length),await Promise.all(t),this.connections.clear()}setPeerValue(t,e){if(e<0||e>1)throw new Error("value should be a number between 0 and 1");this.peerValues.set(t.toString(),e)}async _checkMetrics(){const t=this.components.getMetrics();if(null!=t)try{const e=t.getGlobal().getMovingAverages(),r=e.dataReceived[this.opts.movingAverageInterval].movingAverage;await this._checkMaxLimit("maxReceivedData",r);const n=e.dataSent[this.opts.movingAverageInterval].movingAverage;await this._checkMaxLimit("maxSentData",n);const i=r+n;await this._checkMaxLimit("maxData",i),Et.trace("metrics update",i)}finally{this.timer=Q(this._checkMetrics,this.opts.pollInterval)}}onConnect(t){this._onConnect(t).catch((t=>{Et.error(t)}))}async _onConnect(t){const{detail:e}=t;if(!this.started)return void await e.close();const r=e.remotePeer,n=r.toString(),i=this.connections.get(n);null!=i?i.push(e):this.connections.set(n,[e]),null!=r.publicKey&&await this.components.getPeerStore().keyBook.set(r,r.publicKey),this.peerValues.has(n)||this.peerValues.set(n,this.opts.defaultPeerValue);const s=this.getConnections().length,o=s-this.opts.maxConnections;await this._checkMaxLimit("maxConnections",s,o),this.dispatchEvent(new c("peer:connect",{detail:e}))}onDisconnect(t){const{detail:e}=t;if(!this.started)return;const r=e.remotePeer.toString();let n=this.connections.get(r);null!=n&&n.length>1?(n=n.filter((t=>t.id!==e.id)),this.connections.set(r,n)):null!=n&&(this.connections.delete(r),this.peerValues.delete(e.remotePeer.toString()),this.dispatchEvent(new c("peer:disconnect",{detail:e})),this.components.getMetrics()?.onPeerDisconnected(e.remotePeer))}getConnections(t){if(null!=t)return this.connections.get(t.toString())??[];let e=[];for(const r of this.connections.values())e=e.concat(r);return e}async openConnection(t,e){Et("dial to %p",t);const r=this.getConnections(t);if(r.length>0)return Et("had an existing connection to %p",t),r[0];const n=await this.dialer.dial(t,e);let i=this.connections.get(t.toString());null==i&&(i=[],this.connections.set(t.toString(),i));let s=!1;for(const o of i)o.id===n.id&&(s=!0);return s||i.push(n),n}async closeConnections(t){const e=this.connections.get(t.toString())??[];await Promise.all(e.map((async t=>await t.close())))}getAll(t){if(!M(t))throw v(new Error("peerId must be an instance of peer-id"),m.ERR_INVALID_PARAMETERS);const e=t.toString(),r=this.connections.get(e);return null!=r?r.filter((t=>t.stat.status===tt)):[]}_onLatencyMeasure(t){const{detail:e}=t;this._checkMaxLimit("maxEventLoopDelay",e.avgMs,1).catch((t=>{Et.error(t)}))}async _checkMaxLimit(t,e,r=1){const n=this.opts[t];Et.trace("checking limit of %s. current value: %d of %d",t,e,n),e>n&&(Et("%s: limit exceeded: %p, %d, pruning %d connection(s)",this.components.getPeerId(),t,e,r),await this._maybePruneConnections(r))}async _maybePruneConnections(t){const e=this.getConnections();if(e.length<=this.opts.minConnections||t<1)return;const r=Array.from(new Map([...this.peerValues.entries()].sort(((t,e)=>t[1]-e[1]))));Et.trace("sorted peer values: %j",r);const n=[];for(const[i]of r){Et("too many connections open - closing a connection to %p",i);for(const r of e)if(r.remotePeer.toString()===i&&n.push(r),n.length===t)break}await Promise.all(n.map((async t=>{try{await t.close()}catch(e){Et.error(e)}this.onDisconnect(new c("connectionEnd",{detail:t}))})))}}const Ct=(0,i.kg)("libp2p:connection-manager:auto-dialler"),At={enabled:!0,minConnections:0,autoDialInterval:1e4};class Tt{constructor(t,e){this.components=t,this.options=H.call({ignoreUndefined:!0},At,e),this.running=!1,this._autoDial=this._autoDial.bind(this),Ct("options: %j",this.options)}isStarted(){return this.running}async start(){this.options.enabled?(this.running=!0,this._autoDial().catch((t=>{Ct.error("could start autodial",t)})),Ct("started")):Ct("not enabled")}async stop(){this.options.enabled?(this.running=!1,null!=this.autoDialTimeout&&this.autoDialTimeout.clear(),Ct("stopped")):Ct("not enabled")}async _autoDial(){null!=this.autoDialTimeout&&this.autoDialTimeout.clear();const t=this.options.minConnections;if(this.components.getConnectionManager().getConnections().length>=t)return void(this.autoDialTimeout=Q(this._autoDial,this.options.autoDialInterval));const e=await this.components.getPeerStore().all(),r=await(0,T.zG)(e.sort((()=>Math.random()>.5?1:-1)),(t=>f(t,(t=>!t.id.equals(this.components.getPeerId())))),(t=>pt(t,((t,e)=>e.protocols.length>t.protocols.length||null!=e.id.publicKey&&null==t.id.publicKey?1:-1))),(async t=>await l(t)));for(let i=0;this.running&&i<r.length&&this.components.getConnectionManager().getConnections().length<t;i++){if(!this.running)return;const t=r[i];if(0===this.components.getConnectionManager().getConnections(t.id).length){Ct("connecting to a peerStore stored peer %p",t.id);try{await this.components.getConnectionManager().openConnection(t.id)}catch(n){Ct.error("could not connect to peerStore stored peer",n)}}}this.running&&(this.autoDialTimeout=Q(this._autoDial,this.options.autoDialInterval))}}var kt,Pt=r(9222),Nt=r(1860);(function(t){let e,r,n,i,s;(function(t){t["SUCCESS"]="SUCCESS",t["HOP_SRC_ADDR_TOO_LONG"]="HOP_SRC_ADDR_TOO_LONG",t["HOP_DST_ADDR_TOO_LONG"]="HOP_DST_ADDR_TOO_LONG",t["HOP_SRC_MULTIADDR_INVALID"]="HOP_SRC_MULTIADDR_INVALID",t["HOP_DST_MULTIADDR_INVALID"]="HOP_DST_MULTIADDR_INVALID",t["HOP_NO_CONN_TO_DST"]="HOP_NO_CONN_TO_DST",t["HOP_CANT_DIAL_DST"]="HOP_CANT_DIAL_DST",t["HOP_CANT_OPEN_DST_STREAM"]="HOP_CANT_OPEN_DST_STREAM",t["HOP_CANT_SPEAK_RELAY"]="HOP_CANT_SPEAK_RELAY",t["HOP_CANT_RELAY_TO_SELF"]="HOP_CANT_RELAY_TO_SELF",t["STOP_SRC_ADDR_TOO_LONG"]="STOP_SRC_ADDR_TOO_LONG",t["STOP_DST_ADDR_TOO_LONG"]="STOP_DST_ADDR_TOO_LONG",t["STOP_SRC_MULTIADDR_INVALID"]="STOP_SRC_MULTIADDR_INVALID",t["STOP_DST_MULTIADDR_INVALID"]="STOP_DST_MULTIADDR_INVALID",t["STOP_RELAY_REFUSED"]="STOP_RELAY_REFUSED",t["MALFORMED_MESSAGE"]="MALFORMED_MESSAGE"})(e=t.Status||(t.Status={})),function(t){t[t["SUCCESS"]=100]="SUCCESS",t[t["HOP_SRC_ADDR_TOO_LONG"]=220]="HOP_SRC_ADDR_TOO_LONG",t[t["HOP_DST_ADDR_TOO_LONG"]=221]="HOP_DST_ADDR_TOO_LONG",t[t["HOP_SRC_MULTIADDR_INVALID"]=250]="HOP_SRC_MULTIADDR_INVALID",t[t["HOP_DST_MULTIADDR_INVALID"]=251]="HOP_DST_MULTIADDR_INVALID",t[t["HOP_NO_CONN_TO_DST"]=260]="HOP_NO_CONN_TO_DST",t[t["HOP_CANT_DIAL_DST"]=261]="HOP_CANT_DIAL_DST",t[t["HOP_CANT_OPEN_DST_STREAM"]=262]="HOP_CANT_OPEN_DST_STREAM",t[t["HOP_CANT_SPEAK_RELAY"]=270]="HOP_CANT_SPEAK_RELAY",t[t["HOP_CANT_RELAY_TO_SELF"]=280]="HOP_CANT_RELAY_TO_SELF",t[t["STOP_SRC_ADDR_TOO_LONG"]=320]="STOP_SRC_ADDR_TOO_LONG",t[t["STOP_DST_ADDR_TOO_LONG"]=321]="STOP_DST_ADDR_TOO_LONG",t[t["STOP_SRC_MULTIADDR_INVALID"]=350]="STOP_SRC_MULTIADDR_INVALID",t[t["STOP_DST_MULTIADDR_INVALID"]=351]="STOP_DST_MULTIADDR_INVALID",t[t["STOP_RELAY_REFUSED"]=390]="STOP_RELAY_REFUSED",t[t["MALFORMED_MESSAGE"]=400]="MALFORMED_MESSAGE"}(r||(r={})),function(t){t.codec=()=>(0,Nt.Ji)(r)}(e=t.Status||(t.Status={})),function(t){t["HOP"]="HOP",t["STOP"]="STOP",t["STATUS"]="STATUS",t["CAN_HOP"]="CAN_HOP"}(n=t.Type||(t.Type={})),function(t){t[t["HOP"]=1]="HOP",t[t["STOP"]=2]="STOP",t[t["STATUS"]=3]="STATUS",t[t["CAN_HOP"]=4]="CAN_HOP"}(i||(i={})),function(t){t.codec=()=>(0,Nt.Ji)(i)}(n=t.Type||(t.Type={})),function(t){t.codec=()=>(0,Nt.yw)({1:{name:"id",codec:Nt.aI},2:{name:"addrs",codec:Nt.aI,repeats:!0}}),t.encode=e=>(0,Nt.LE)(e,t.codec()),t.decode=e=>(0,Nt.C6)(e,t.codec())}(s=t.Peer||(t.Peer={})),t.codec=()=>(0,Nt.yw)({1:{name:"type",codec:t.Type.codec(),optional:!0},2:{name:"srcPeer",codec:t.Peer.codec(),optional:!0},3:{name:"dstPeer",codec:t.Peer.codec(),optional:!0},4:{name:"code",codec:t.Status.codec(),optional:!0}}),t.encode=e=>(0,Nt.LE)(e,t.codec()),t.decode=e=>(0,Nt.C6)(e,t.codec())})(kt||(kt={}));r(8675),r(3462);var Lt=r(43);const Dt=(0,i.kg)("libp2p:stream:converter");function Ot(t,e={}){const{stream:r,remoteAddr:n}=t,{sink:i,source:s}=r,o={async sink(t){null!=e.signal&&(t=(0,Lt.wJ)(t,e.signal));try{await i(t),await a()}catch(r){"aborted"!==r.type&&Dt(r)}},source:null!=e.signal?(0,Lt.wJ)(s,e.signal):s,remoteAddr:n,timeline:{open:Date.now(),close:void 0},async close(){await i(async function*(){yield new Uint8Array(0)}()),await a()}};async function a(){return null==o.timeline.close&&(o.timeline.close=Date.now()),await Promise.resolve()}return o}const Bt="/libp2p/circuit/relay/0.1.0";function xt(t){const e=new Map;async function r(r){const n=r.toString().split("/p2p-circuit").find((t=>""!==t)),s=new x.sc(n),o=s.getPeerId();if(null==o)throw new Error("Could not determine relay peer from multiaddr");const a=(0,B.jE)(o);await t.peerStore.addressBook.add(a,[s]);const u=await t.connectionManager.openConnection(a),l=u.remoteAddr.encapsulate("/p2p-circuit");e.set(u.remotePeer.toString(),l),i.dispatchEvent(new c("listening"))}function n(){const t=[];for(const r of e.values())t.push(r);return t}const i=Object.assign(new o,{close:async()=>await Promise.resolve(),listen:r,getAddrs:n});return t.connectionManager.addEventListener("peer:disconnect",(t=>{const{detail:r}=t,n=e.delete(r.remotePeer.toString());n&&i.dispatchEvent(new c("close"))})),i}function Ut(t,e){t.write({type:kt.Type.STATUS,code:e})}function Mt(t,e){try{null!=t.dstPeer?.addrs&&t.dstPeer.addrs.forEach((t=>new x.sc(t)))}catch(r){throw Ut(e,t.type===kt.Type.HOP?kt.Status.HOP_DST_MULTIADDR_INVALID:kt.Status.STOP_DST_MULTIADDR_INVALID),r}try{null!=t.srcPeer?.addrs&&t.srcPeer.addrs.forEach((t=>new x.sc(t)))}catch(r){throw Ut(e,t.type===kt.Type.HOP?kt.Status.HOP_SRC_MULTIADDR_INVALID:kt.Status.STOP_SRC_MULTIADDR_INVALID),r}}var Vt=r(4291),Kt=r(8134);const Ft=(0,i.kg)("libp2p:circuit:stream-handler");class jt{constructor(t){const{stream:e,maxLength:r=4096}=t;this.stream=e,this.shake=(0,Kt.Y)(this.stream),this.decoder=Vt.Jx.fromReader(this.shake.reader,{maxDataLength:r})}async read(){const t=await this.decoder.next();if(null!=t.value){const e=kt.decode(t.value.slice());return Ft("read message type",e.type),e}Ft("read received no value, closing stream"),this.close()}write(t){Ft("write message type %s",t.type),this.shake.write(Vt.cv.single(kt.encode(t)).slice())}rest(){return this.shake.rest(),this.shake.stream}end(t){this.write(t),this.close()}close(){Ft("closing the stream"),this.rest().sink([]).catch((t=>{Ft.error(t)}))}}const qt=(0,i.kg)("libp2p:circuit:stop");function Ht(t){const{connection:e,request:r,streamHandler:n}=t;try{Mt(r,n)}catch(i){return void qt.error("invalid stop request via peer %p %o",e.remotePeer,i)}return qt("stop request is valid"),n.write({type:kt.Type.STATUS,code:kt.Status.SUCCESS}),n.rest()}async function Gt(t){const{connection:e,request:r}=t,{stream:n}=await e.newStream([Bt]);qt("starting stop request to %p",e.remotePeer);const i=new jt({stream:n});i.write(r);const s=await i.read();if(null!=s){if(s.code===kt.Status.SUCCESS)return qt("stop request to %p was successful",e.remotePeer),i.rest();qt("stop request failed with code %d",s.code),i.close()}else i.close()}const zt=(0,i.kg)("libp2p:circuit:hop");async function $t(t){const{connection:e,request:r,streamHandler:n,circuit:i,connectionManager:s}=t;if(!i.hopEnabled())return zt("HOP request received but we are not acting as a relay"),n.end({type:kt.Type.STATUS,code:kt.Status.HOP_CANT_SPEAK_RELAY});try{Mt(r,n)}catch(h){return void zt.error("invalid hop request via peer %p %o",e.remotePeer,h)}if(null==r.dstPeer)return void zt("HOP request received but we do not receive a dstPeer");const o=(0,B.cv)(r.dstPeer.id),a=s.getConnections(o);if(0===a.length&&!i.hopActive())return zt("HOP request received but we are not connected to the destination peer"),n.end({type:kt.Type.STATUS,code:kt.Status.HOP_NO_CONN_TO_DST});if(0===a.length)return zt("did not have connection to remote peer"),n.end({type:kt.Type.STATUS,code:kt.Status.HOP_NO_CONN_TO_DST});const c={type:kt.Type.STOP,dstPeer:r.dstPeer,srcPeer:r.srcPeer};let u;try{zt("performing STOP request");const t=await Gt({connection:a[0],request:c});if(null==t)throw new Error("Could not stop");u=t}catch(h){return void zt.error(h)}zt("hop request from %p is valid",e.remotePeer),n.write({type:kt.Type.STATUS,code:kt.Status.SUCCESS});const l=n.rest();return zt("creating related connections"),await(0,T.zG)(l,u,l)}async function Wt(t){const{connection:e,request:r}=t,{stream:n}=await e.newStream(Bt),i=new jt({stream:n});i.write(r);const s=await i.read();if(null==s)throw v(new Error("HOP request had no response"),m.ERR_HOP_REQUEST_FAILED);if(s.code===kt.Status.SUCCESS)return zt("hop request was successful"),i.rest();throw zt("hop request failed with code %d, closing stream",s.code),i.close(),v(new Error(`HOP request failed with code "${s.code??"unknown"}"`),m.ERR_HOP_REQUEST_FAILED)}async function Yt(t){const{connection:e}=t,{stream:r}=await e.newStream(Bt),n=new jt({stream:r});n.write({type:kt.Type.CAN_HOP});const i=await n.read();return await n.close(),null!=i&&i.code===kt.Status.SUCCESS}function Qt(t){const{connection:e,streamHandler:r,circuit:n}=t,i=n.hopEnabled();zt("can hop (%s) request from %p",i,e.remotePeer),r.end({type:kt.Type.STATUS,code:i?kt.Status.SUCCESS:kt.Status.HOP_CANT_SPEAK_RELAY})}const Xt=Symbol.for("@libp2p/transport");const Jt=(0,i.kg)("libp2p:circuit");class Zt{constructor(){this.components=new Z}init(t){this.components=t,this.components.getRegistrar().handle(Bt,(t=>{this._onProtocol(t).catch((t=>{Jt.error(t)}))})).catch((t=>{Jt.error(t)}))}hopEnabled(){return!0}hopActive(){return!0}get[Xt](){return!0}get[Symbol.toStringTag](){return"libp2p/circuit-relay-v1"}async _onProtocol(t){const{connection:e,stream:r}=t,n=new jt({stream:r}),i=await n.read();if(null==i)return Jt("request was invalid, could not read from stream"),n.write({type:kt.Type.STATUS,code:kt.Status.MALFORMED_MESSAGE}),void n.close();let s;switch(i.type){case kt.Type.CAN_HOP:Jt("received CAN_HOP request from %p",e.remotePeer),await Qt({circuit:this,connection:e,streamHandler:n});break;case kt.Type.HOP:Jt("received HOP request from %p",e.remotePeer),s=await $t({connection:e,request:i,streamHandler:n,circuit:this,connectionManager:this.components.getConnectionManager()});break;case kt.Type.STOP:Jt("received STOP request from %p",e.remotePeer),s=await Ht({connection:e,request:i,streamHandler:n});break;default:return Jt("Request of type %s not supported",i.type),n.write({type:kt.Type.STATUS,code:kt.Status.MALFORMED_MESSAGE}),void n.close()}if(null!=s){const t=new x.sc(i.dstPeer.addrs[0]),e=new x.sc(i.srcPeer.addrs[0]),r=Ot({stream:s,remoteAddr:t,localAddr:e}),n=i.type===kt.Type.HOP?"relay":"inbound";Jt("new %s connection %s",n,r.remoteAddr);const o=await this.components.getUpgrader().upgradeInbound(r);Jt("%s connection %s upgraded",n,r.remoteAddr),null!=this.handler&&this.handler(o)}}async dial(t,e={}){const r=t.toString().split("/p2p-circuit"),n=new x.sc(r[0]),i=new x.sc(r[r.length-1]),s=n.getPeerId(),o=i.getPeerId();if(null==s||null==o){const t="Circuit relay dial failed as addresses did not have peer id";throw Jt.error(t),v(new Error(t),m.ERR_RELAYED_DIAL)}const a=(0,B.jE)(s),c=(0,B.jE)(o);let u=!1;const l=this.components.getConnectionManager().getConnections(a);let h=l[0];null==h&&(await this.components.getPeerStore().addressBook.add(a,[n]),h=await this.components.getConnectionManager().openConnection(a,e),u=!0);try{const e=await Wt({connection:h,request:{type:kt.Type.HOP,srcPeer:{id:this.components.getPeerId().toBytes(),addrs:this.components.getAddressManager().getAddresses().map((t=>t.bytes))},dstPeer:{id:c.toBytes(),addrs:[new x.sc(i).bytes]}}}),r=n.encapsulate(`/p2p-circuit/p2p/${this.components.getPeerId().toString()}`),s=Ot({stream:e,remoteAddr:t,localAddr:r});return Jt("new outbound connection %s",s.remoteAddr),await this.components.getUpgrader().upgradeOutbound(s)}catch(d){throw Jt.error("Circuit relay dial failed",d),u&&await h.close(),d}}createListener(t){return this.handler=t.handler,xt({connectionManager:this.components.getConnectionManager(),peerStore:this.components.getPeerStore()})}filter(t){return t=Array.isArray(t)?t:[t],t.filter((t=>Pt.dx.matches(t)))}}var te=r(2259),ee=r(6523),re=r(9329),ne=r(1919);async function ie(t){const e=(new TextEncoder).encode(t),r=await ne.sha256.digest(e);return re.k.createV0(r)}const se=6e4,oe=15*se,ae=30*se,ce=290,ue="hop_relay",le="true",he="/libp2p/relay",de=(0,i.kg)("libp2p:auto-relay"),fe=()=>{};class pe{constructor(t,e){this.components=t,this.addressSorter=e.addressSorter??ct,this.maxListeners=e.maxListeners??1,this.listenRelays=new Set,this.onError=e.onError??fe,this._onProtocolChange=this._onProtocolChange.bind(this),this._onPeerDisconnected=this._onPeerDisconnected.bind(this),this.components.getPeerStore().addEventListener("change:protocols",(t=>{this._onProtocolChange(t).catch((t=>{de.error(t)}))})),this.components.getConnectionManager().addEventListener("peer:disconnect",this._onPeerDisconnected)}async _onProtocolChange(t){const{peerId:e,protocols:r}=t.detail,n=e.toString(),i=r.find((t=>t===Bt));if(null!=i){if(!this.listenRelays.has(n))try{const t=this.components.getConnectionManager().getConnections(e);if(0===t.length)return;const r=t[0];if(r.remoteAddr.protoCodes().includes(ce))return void de(`relayed connection to ${n} will not be used to hop on`);const i=await Yt({connection:r});i&&(await this.components.getPeerStore().metadataBook.setValue(e,ue,(0,te.m)(le)),await this._addListenRelay(r,n))}catch(s){this.onError(s)}}else this.listenRelays.has(n)&&await this._removeListenRelay(n)}_onPeerDisconnected(t){const e=t.detail,r=e.remotePeer,n=r.toString();this.listenRelays.has(n)&&this._removeListenRelay(n).catch((t=>{de.error(t)}))}async _addListenRelay(t,e){try{if(this.listenRelays.size>=this.maxListeners)return;const r=await(0,T.zG)(await this.components.getPeerStore().addressBook.get(t.remotePeer),(t=>pt(t,this.addressSorter)),(async t=>await l(t))),n=await Promise.all(r.map((async e=>{try{let r=e.multiaddr;return null==r.getPeerId()&&(r=r.encapsulate(`/p2p/${t.remotePeer.toString()}`)),r=r.encapsulate("/p2p-circuit"),await this.components.getTransportManager().listen([r]),!0}catch(r){de.error("error listening on circuit address",r),this.onError(r)}return!1})));n.includes(!0)&&this.listenRelays.add(e)}catch(r){this.onError(r),this.listenRelays.delete(e)}}async _removeListenRelay(t){this.listenRelays.delete(t)&&await this._listenOnAvailableHopRelays([t])}async _listenOnAvailableHopRelays(t=[]){if(this.listenRelays.size>=this.maxListeners)return;const e=[],r=await this.components.getPeerStore().all();for(const{id:i,metadata:s}of r){const r=i.toString();if(this.listenRelays.has(r))continue;if(t.includes(r))continue;const n=s.get(ue);if(null==n||(0,ee.B)(n)!==le)continue;const o=this.components.getConnectionManager().getConnections(i);if(0!==o.length){if(await this._addListenRelay(o[0],r),this.listenRelays.size>=this.maxListeners)return}else e.push(i)}for(const i of e)if(await this._tryToListenOnRelay(i),this.listenRelays.size>=this.maxListeners)return;try{const t=await ie(he);for await(const e of this.components.getContentRouting().findProviders(t)){if(0===e.multiaddrs.length)continue;const t=e.id;if(await this.components.getPeerStore().addressBook.add(t,e.multiaddrs),await this._tryToListenOnRelay(t),this.listenRelays.size>=this.maxListeners)return}}catch(n){this.onError(n)}}async _tryToListenOnRelay(t){try{const e=await this.components.getConnectionManager().openConnection(t);await this._addListenRelay(e,t.toString())}catch(e){de.error("Could not use %p as relay",t,e),this.onError(e,`could not connect and listen on known hop relay ${t.toString()}`)}}}const ge=(0,i.kg)("libp2p:relay");class ye{constructor(t,e){this.components=t,this.autoRelay=!1!==e.autoRelay?.enabled?new pe(t,{addressSorter:e.addressSorter,...e.autoRelay}):void 0,this.started=!1,this.init=e,this._advertiseService=this._advertiseService.bind(this)}isStarted(){return this.started}async start(){!1!==this.init.hop.enabled&&!1!==this.init.advertise.enabled&&(this.timeout=(0,P.setDelayedInterval)(this._advertiseService,this.init.advertise.ttl,this.init.advertise.bootDelay)),this.started=!0}async stop(){null!=this.timeout&&(0,P.clearDelayedInterval)(this.timeout),this.started=!1}async _advertiseService(){try{const t=await ie(he);await this.components.getContentRouting().provide(t)}catch(t){t.code===m.ERR_NO_ROUTERS_AVAILABLE?(ge.error("a content router, such as a DHT, must be provided in order to advertise the relay service",t),await this.stop()):ge.error(t)}}}var me=r(4840),we=(r(7323),r(1352),r(5736));r(8410);const ve=we.pki,Ee=(t,e)=>{const r=ve.rsa.setPublicKey(e.n,e.e),n=ve.createCertificate();n.publicKey=r,n.serialNumber="01",n.validity.notBefore=new Date,n.validity.notAfter=new Date,n.validity.notAfter.setFullYear(n.validity.notBefore.getFullYear()+10);const i=[{name:"organizationName",value:"ipfs"},{shortName:"OU",value:"keystore"},{name:"commonName",value:t.id}];return n.setSubject(i),n.setIssuer(i),n.setExtensions([{name:"basicConstraints",cA:!0},{name:"keyUsage",keyCertSign:!0,digitalSignature:!0,nonRepudiation:!0,keyEncipherment:!0,dataEncipherment:!0},{name:"extKeyUsage",serverAuth:!0,clientAuth:!0,codeSigning:!0,emailProtection:!0,timeStamping:!0},{name:"nsCertType",client:!0,server:!0,email:!0,objsign:!0,sslCA:!0,emailCA:!0,objCA:!0}]),n.sign(e),n};async function be(t,e){const r=t.map(e),n=await Promise.all(r),i=n.findIndex((t=>t));return t[i]}const Se=(0,i.kg)("libp2p:keychain:cms"),_e=new WeakMap;class Re{constructor(t,e){if(null==t)throw v(new Error("keychain is required"),m.ERR_KEYCHAIN_REQUIRED);this.keychain=t,_e.set(this,{dek:e})}async encrypt(t,e){if(!(e instanceof Uint8Array))throw v(new Error("Plain data must be a Uint8Array"),m.ERR_INVALID_PARAMETERS);const r=await this.keychain.findKeyByName(t),n=await this.keychain.getPrivateKey(t),i=_e.get(this);if(null==i)throw v(new Error("dek missing"),m.ERR_INVALID_PARAMETERS);const s=i.dek,o=we.pki.decryptRsaPrivateKey(n,s),a=await Ee(r,o),c=we.pkcs7.createEnvelopedData();c.addRecipient(a),c.content=we.util.createBuffer(e),c.encrypt();const u=we.asn1.toDer(c.toAsn1()).getBytes();return(0,te.m)(u,"ascii")}async decrypt(t){if(!(t instanceof Uint8Array))throw v(new Error("CMS data is required"),m.ERR_INVALID_PARAMETERS);let e;try{const r=we.util.createBuffer((0,ee.B)(t,"ascii")),n=we.asn1.fromDer(r);e=we.pkcs7.messageFromAsn1(n)}catch(u){throw Se.error(u),v(new Error("Invalid CMS"),m.ERR_INVALID_CMS)}const r=e.recipients.filter((t=>t.issuer.find((t=>"O"===t.shortName&&"ipfs"===t.value)))).filter((t=>t.issuer.find((t=>"CN"===t.shortName)))).map((t=>({recipient:t,keyId:t.issuer.find((t=>"CN"===t.shortName)).value}))),n=await be(r,(async t=>{try{const e=await this.keychain.findKeyById(t.keyId);if(null!=e)return!0}catch(u){return!1}return!1}));if(null==n){const t=r.map((t=>t.keyId));throw v(new Error(`Decryption needs one of the key(s): ${t.join(", ")}`),m.ERR_MISSING_KEYS,{missingKeys:t})}const i=await this.keychain.findKeyById(n.keyId);if(null==i)throw v(new Error("No key available to decrypto"),m.ERR_NO_KEY);const s=await this.keychain.getPrivateKey(i.name),o=_e.get(this);if(null==o)throw v(new Error("dek missing"),m.ERR_INVALID_PARAMETERS);const a=o.dek,c=we.pki.decryptRsaPrivateKey(s,a);return e.decrypt(n.recipient,c),(0,te.m)(e.content.getBytes(),"ascii")}}var Ie=r(6428),Ce=r(4812);const Ae=(0,i.kg)("libp2p:keychain"),Te="/pkcs8/",ke="/info/",Pe=new WeakMap,Ne={minKeyLength:14,minSaltLength:16,minIterationCount:1e3},Le={dek:{keyLength:64,iterationCount:1e4,salt:"you should override this value with a crypto secure random number",hash:"sha2-512"}};function De(t){return null!=t&&("string"===typeof t&&(t===me(t.trim())&&t.length>0))}async function Oe(){const t=200,e=1e3,r=Math.random()*(e-t)+t;await new Promise((t=>setTimeout(t,r)))}function Be(t){return new w.s(Te+t)}function xe(t){return new w.s(ke+t)}class Ue{constructor(t,e){if(this.components=t,this.init=H(Le,e),null!=this.init.pass&&this.init.pass?.length<20)throw new Error("pass must be least 20 characters");if(null!=this.init.dek?.keyLength&&this.init.dek.keyLength<Ne.minKeyLength)throw new Error(`dek.keyLength must be least ${Ne.minKeyLength} bytes`);if(null!=this.init.dek?.salt?.length&&this.init.dek.salt.length<Ne.minSaltLength)throw new Error(`dek.saltLength must be least ${Ne.minSaltLength} bytes`);if(null!=this.init.dek?.iterationCount&&this.init.dek.iterationCount<Ne.minIterationCount)throw new Error(`dek.iterationCount must be least ${Ne.minIterationCount}`);const r=null!=this.init.pass&&null!=this.init.dek?.salt?(0,Ce.nk)(this.init.pass,this.init.dek?.salt,this.init.dek?.iterationCount,this.init.dek?.keyLength,this.init.dek?.hash):"";Pe.set(this,{dek:r})}get cms(){const t=Pe.get(this);if(null==t)throw v(new Error("dek missing"),m.ERR_INVALID_PARAMETERS);const e=t.dek;return new Re(this,e)}static generateOptions(){const t=Object.assign({},Le),e=3*Math.ceil(Ne.minSaltLength/3);return t.dek.salt=(0,ee.B)((0,Ce.O6)(e),"base64"),t}static get options(){return Le}async createKey(t,e,r=2048){if(!De(t)||"self"===t)throw await Oe(),v(new Error("Invalid key name"),m.ERR_INVALID_KEY_NAME);if("string"!==typeof e)throw await Oe(),v(new Error("Invalid key type"),m.ERR_INVALID_KEY_TYPE);const n=Be(t),i=await this.components.getDatastore().has(n);if(i)throw await Oe(),v(new Error("Key name already exists"),m.ERR_KEY_ALREADY_EXISTS);switch(e.toLowerCase()){case"rsa":if(!Number.isSafeInteger(r)||r<2048)throw await Oe(),v(new Error("Invalid RSA key size"),m.ERR_INVALID_KEY_SIZE);break;default:break}let s;try{const i=await(0,Ie.generateKeyPair)(e,r),o=await i.id(),a=Pe.get(this);if(null==a)throw v(new Error("dek missing"),m.ERR_INVALID_PARAMETERS);const c=a.dek,u=await i.export(c);s={name:t,id:o};const l=this.components.getDatastore().batch();l.put(n,(0,te.m)(u)),l.put(xe(t),(0,te.m)(JSON.stringify(s))),await l.commit()}catch(o){throw await Oe(),o}return s}async listKeys(){const t={prefix:ke},e=[];for await(const r of this.components.getDatastore().query(t))e.push(JSON.parse((0,ee.B)(r.value)));return e}async findKeyById(t){try{const e=await this.listKeys();return e.find((e=>e.id===t))}catch(e){throw await Oe(),e}}async findKeyByName(t){if(!De(t))throw await Oe(),v(new Error(`Invalid key name '${t}'`),m.ERR_INVALID_KEY_NAME);const e=xe(t);try{const t=await this.components.getDatastore().get(e);return JSON.parse((0,ee.B)(t))}catch(r){throw await Oe(),Ae.error(r),v(new Error(`Key '${t}' does not exist.`),m.ERR_KEY_NOT_FOUND)}}async removeKey(t){if(!De(t)||"self"===t)throw await Oe(),v(new Error(`Invalid key name '${t}'`),m.ERR_INVALID_KEY_NAME);const e=Be(t),r=await this.findKeyByName(t),n=this.components.getDatastore().batch();return n.delete(e),n.delete(xe(t)),await n.commit(),r}async renameKey(t,e){if(!De(t)||"self"===t)throw await Oe(),v(new Error(`Invalid old key name '${t}'`),m.ERR_OLD_KEY_NAME_INVALID);if(!De(e)||"self"===e)throw await Oe(),v(new Error(`Invalid new key name '${e}'`),m.ERR_NEW_KEY_NAME_INVALID);const r=Be(t),n=Be(e),i=xe(t),s=xe(e),o=await this.components.getDatastore().has(n);if(o)throw await Oe(),v(new Error(`Key '${e}' already exists`),m.ERR_KEY_ALREADY_EXISTS);try{const t=await this.components.getDatastore().get(r),o=await this.components.getDatastore().get(i),a=JSON.parse((0,ee.B)(o));a.name=e;const c=this.components.getDatastore().batch();return c.put(n,t),c.put(s,(0,te.m)(JSON.stringify(a))),c.delete(r),c.delete(i),await c.commit(),a}catch(a){throw await Oe(),a}}async exportKey(t,e){if(!De(t))throw await Oe(),v(new Error(`Invalid key name '${t}'`),m.ERR_INVALID_KEY_NAME);if(null==e)throw await Oe(),v(new Error("Password is required"),m.ERR_PASSWORD_REQUIRED);const r=Be(t);try{const t=await this.components.getDatastore().get(r),n=(0,ee.B)(t),i=Pe.get(this);if(null==i)throw v(new Error("dek missing"),m.ERR_INVALID_PARAMETERS);const s=i.dek,o=await(0,Ie.importKey)(n,s);return await o.export(e)}catch(n){throw await Oe(),n}}async importKey(t,e,r){if(!De(t)||"self"===t)throw await Oe(),v(new Error(`Invalid key name '${t}'`),m.ERR_INVALID_KEY_NAME);if(null==e)throw await Oe(),v(new Error("PEM encoded key is required"),m.ERR_PEM_REQUIRED);const n=Be(t),i=await this.components.getDatastore().has(n);if(i)throw await Oe(),v(new Error(`Key '${t}' already exists`),m.ERR_KEY_ALREADY_EXISTS);let s,o;try{s=await(0,Ie.importKey)(e,r)}catch(u){throw await Oe(),v(new Error("Cannot read the key, most likely the password is wrong"),m.ERR_CANNOT_READ_KEY)}try{o=await s.id();const t=Pe.get(this);if(null==t)throw v(new Error("dek missing"),m.ERR_INVALID_PARAMETERS);const r=t.dek;e=await s.export(r)}catch(u){throw await Oe(),u}const a={name:t,id:o},c=this.components.getDatastore().batch();return c.put(n,(0,te.m)(e)),c.put(xe(t),(0,te.m)(JSON.stringify(a))),await c.commit(),a}async importPeer(t,e){try{if(!De(t))throw v(new Error(`Invalid key name '${t}'`),m.ERR_INVALID_KEY_NAME);if(null==e||null==e.privateKey)throw v(new Error("Peer.privKey is required"),m.ERR_MISSING_PRIVATE_KEY);const r=await(0,Ie.unmarshalPrivateKey)(e.privateKey),n=Be(t),i=await this.components.getDatastore().has(n);if(i)throw await Oe(),v(new Error(`Key '${t}' already exists`),m.ERR_KEY_ALREADY_EXISTS);const s=Pe.get(this);if(null==s)throw v(new Error("dek missing"),m.ERR_INVALID_PARAMETERS);const o=s.dek,a=await r.export(o),c={name:t,id:e.toString()},u=this.components.getDatastore().batch();return u.put(n,(0,te.m)(a)),u.put(xe(t),(0,te.m)(JSON.stringify(c))),await u.commit(),c}catch(r){throw await Oe(),r}}async getPrivateKey(t){if(!De(t))throw await Oe(),v(new Error(`Invalid key name '${t}'`),m.ERR_INVALID_KEY_NAME);try{const e=Be(t),r=await this.components.getDatastore().get(e);return(0,ee.B)(r)}catch(e){throw await Oe(),Ae.error(e),v(new Error(`Key '${t}' does not exist.`),m.ERR_KEY_NOT_FOUND)}}async rotateKeychainPass(t,e){if("string"!==typeof t)throw await Oe(),v(new Error(`Invalid old pass type '${typeof t}'`),m.ERR_INVALID_OLD_PASS_TYPE);if("string"!==typeof e)throw await Oe(),v(new Error(`Invalid new pass type '${typeof e}'`),m.ERR_INVALID_NEW_PASS_TYPE);if(e.length<20)throw await Oe(),v(new Error(`Invalid pass length ${e.length}`),m.ERR_INVALID_PASS_LENGTH);Ae("recreating keychain");const r=Pe.get(this);if(null==r)throw v(new Error("dek missing"),m.ERR_INVALID_PARAMETERS);const n=r.dek;this.init.pass=e;const i=null!=e&&null!=this.init.dek?.salt?(0,Ce.nk)(e,this.init.dek.salt,this.init.dek?.iterationCount,this.init.dek?.keyLength,this.init.dek?.hash):"";Pe.set(this,{dek:i});const s=await this.listKeys();for(const o of s){const t=await this.components.getDatastore().get(Be(o.name)),e=(0,ee.B)(t),r=await(0,Ie.importKey)(e,n),s=i.toString(),a=await r.export(s),c=this.components.getDatastore().batch(),u={name:o.name,id:o.id};c.put(Be(o.name),(0,te.m)(a)),c.put(xe(o.name),(0,te.m)(JSON.stringify(u))),await c.commit()}Ae("keychain reconstructed")}}var Me=r(8189),Ve=r(8694);class Ke{constructor(t){if("number"!==typeof t)throw new Error("must provide a timespan to the moving average constructor");if(t<=0)throw new Error("must provide a timespan > 0 to the moving average constructor");this.timespan=t,this.movingAverage=0,this.variance=0,this.deviation=0,this.forecast=0}alpha(t,e){return 1-Math.exp(-(t-e)/this.timespan)}push(t,e){if(null!=this.previousTime){const r=this.alpha(t,this.previousTime),n=e-this.movingAverage,i=r*n;this.movingAverage=r*e+(1-r)*this.movingAverage,this.variance=(1-r)*(this.variance+n*i),this.deviation=Math.sqrt(this.variance),this.forecast=this.movingAverage+r*n}else this.movingAverage=e;this.previousTime=t}}function Fe(t){return new Ke(t)}class je extends o{constructor(t){super(),this.enabled=t.enabled,this.queue=[],this.stats={dataReceived:0n,dataSent:0n},this.frequencyLastTime=Date.now(),this.frequencyAccumulators={},this.movingAverages={dataReceived:[],dataSent:[]},this.computeThrottleMaxQueueSize=t.computeThrottleMaxQueueSize,this.computeThrottleTimeout=t.computeThrottleTimeout,this._update=this._update.bind(this),this.movingAverageIntervals=t.movingAverageIntervals;for(let e=0;e<t.initialCounters.length;e++){const r=t.initialCounters[e];this.stats[r]=0n,this.movingAverages[r]=[];for(let t=0;t<this.movingAverageIntervals.length;t++){const e=this.movingAverageIntervals[t],n=this.movingAverages[r][e]=Fe(e);n.push(this.frequencyLastTime,0)}}}start(){this.enabled&&this.queue.length>0&&this._resetComputeTimeout()}stop(){null!=this.timeout&&(this.timeout.clear(),this.timeout=null)}getSnapshot(){return Object.assign({},this.stats)}getMovingAverages(){return Object.assign({},this.movingAverages)}push(t,e){this.queue.push([t,e,Date.now()]),this._resetComputeTimeout()}_resetComputeTimeout(){this.timeout=Q(this._update,this._nextTimeout())}_nextTimeout(){const t=this.queue.length/this.computeThrottleMaxQueueSize,e=Math.max(this.computeThrottleTimeout*(1-t),0);return e}_update(){if(this.timeout=null,this.queue.length>0){let t=["",0,0];for(t of this.queue)this._applyOp(t);this.queue=[],t.length>2&&""!==t[0]&&this._updateFrequency(t[2]),this.dispatchEvent(new c("update",{detail:this.stats}))}}_updateFrequency(t){const e=t-this.frequencyLastTime;this._updateFrequencyFor("dataReceived",e,t),this._updateFrequencyFor("dataSent",e,t),this.frequencyLastTime=t}_updateFrequencyFor(t,e,r){const n=this.frequencyAccumulators[t]??0;this.frequencyAccumulators[t]=0;const i=e??1,s=n/i*1e3;let o=this.movingAverages[t];null==o&&(o=this.movingAverages[t]=[]);const a=this.movingAverageIntervals;for(let c=0;c<a.length;c++){const t=a[c];let e=o[t];null==e&&(e=o[t]=Fe(t)),e.push(r,s)}}_applyOp(t){const e=t[0],r=t[1];if("number"!==typeof r)throw new Error("invalid increment number");let n;n=Object.prototype.hasOwnProperty.call(this.stats,e)?this.stats[e]:this.stats[e]=0n,this.stats[e]=n+BigInt(r),null==this.frequencyAccumulators[e]&&(this.frequencyAccumulators[e]=0),this.frequencyAccumulators[e]+=r}}const qe=["dataReceived","dataSent"],He={in:"dataReceived",out:"dataSent"};class Ge{constructor(t){this.enabled=t.enabled,this.statsInit={...t,initialCounters:qe},this.globalStats=new je(this.statsInit),this.peerStats=new Map,this.protocolStats=new Map,this.oldPeers=Ve(t.maxOldPeersRetention??ft.maxOldPeersRetention),this.running=!1,this._onMessage=this._onMessage.bind(this),this.systems=new Map}isStarted(){return this.running}async start(){this.enabled&&(this.running=!0)}async stop(){if(this.running){this.running=!1,this.globalStats.stop();for(const t of this.peerStats.values())t.stop();for(const t of this.protocolStats.values())t.stop()}}getGlobal(){return this.globalStats}getPeers(){return Array.from(this.peerStats.keys())}getComponentMetrics(){return this.systems}updateComponentMetric(t){const{system:e="libp2p",component:r,metric:n,value:i}=t;this.systems.has(e)||this.systems.set(e,new Map);const s=this.systems.get(e);if(null==s)throw new Error("Unknown metric system");s.has(r)||s.set(r,new Map);const o=s.get(r);if(null==o)throw new Error("Unknown metric component");o.set(n,i)}forPeer(t){const e=t.toString();return this.peerStats.get(e)??this.oldPeers.get(e)}getProtocols(){return Array.from(this.protocolStats.keys())}forProtocol(t){return this.protocolStats.get(t)}onPeerDisconnected(t){const e=t.toString(),r=this.peerStats.get(e);null!=r&&(r.stop(),this.peerStats.delete(e),this.oldPeers.set(e,r))}_onMessage(t){if(!this.running)return;const{remotePeer:e,protocol:r,direction:n,dataLength:i}=t,s=He[n];let o=this.forPeer(e);if(null==o){const t=new je(this.statsInit);this.peerStats.set(e.toString(),t),o=t}if(o.push(s,i),this.globalStats.push(s,i),null!=r){let t=this.forProtocol(r);if(null==t){const e=new je(this.statsInit);this.protocolStats.set(r,e),t=e}t.push(s,i)}}updatePlaceholder(t,e){if(!this.running)return;const r=t.toString(),n=this.peerStats.get(r)??this.oldPeers.get(r),i=e.toString(),s=this.peerStats.get(i)??this.oldPeers.get(i);let o=n;null!=s&&(o=ze(s,o),this.oldPeers.remove(i)),this.peerStats.delete(t.toString()),this.peerStats.set(i,o),o.start()}trackStream(t){const{stream:e,remotePeer:r,protocol:n}=t;if(!this.running)return e;const i=e.source;e.source=Me(i,(t=>this._onMessage({remotePeer:r,protocol:n,direction:"in",dataLength:t.length})));const s=e.sink;return e.sink=async t=>await(0,T.zG)(t,(t=>Me(t,(t=>{this._onMessage({remotePeer:r,protocol:n,direction:"out",dataLength:t.length})}))),s),e}}function ze(t,e){return t.stop(),e.stop(),t.queue=[...t.queue,...e.queue],t}async function $e(t){try{const e=await t;return{isFulfilled:!0,isRejected:!1,value:e}}catch(e){return{isFulfilled:!1,isRejected:!0,reason:e}}}function We(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ye(t,e,r){We(t,e),e.set(t,r)}function Qe(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}function Xe(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}function Je(t,e,r){var n=Xe(t,e,"set");return Qe(t,n,r),r}function Ze(t,e){return e.get?e.get.call(t):e.value}function tr(t,e){var r=Xe(t,e,"get");return Ze(t,r)}function er(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}let rr;class nr{constructor(t){er(this,"value",void 0),er(this,"next",void 0),this.value=t}}var ir=new WeakMap,sr=new WeakMap,or=new WeakMap;rr=Symbol.iterator;class ar{constructor(){Ye(this,ir,{writable:!0,value:void 0}),Ye(this,sr,{writable:!0,value:void 0}),Ye(this,or,{writable:!0,value:void 0}),this.clear()}enqueue(t){var e;const r=new nr(t);tr(this,ir)?(tr(this,sr).next=r,Je(this,sr,r)):(Je(this,ir,r),Je(this,sr,r)),Je(this,or,(e=tr(this,or),e++,e))}dequeue(){var t;const e=tr(this,ir);if(e)return Je(this,ir,tr(this,ir).next),Je(this,or,(t=tr(this,or),t--,t)),e.value}clear(){Je(this,ir,void 0),Je(this,sr,void 0),Je(this,or,0)}get size(){return tr(this,or)}*[rr](){let t=tr(this,ir);while(t)yield t.value,t=t.next}}function cr(t){if(!Number.isInteger(t)&&t!==Number.POSITIVE_INFINITY||!(t>0))throw new TypeError("Expected `concurrency` to be a number from 1 and up");const e=new ar;let r=0;const n=()=>{r--,e.size>0&&e.dequeue()()},i=async(t,e,i)=>{r++;const s=(async()=>t(...i))();e(s);try{await s}catch{}n()},s=(n,s,o)=>{e.enqueue(i.bind(void 0,n,s,o)),(async()=>{await Promise.resolve(),r<t&&e.size>0&&e.dequeue()()})()},o=(t,...e)=>new Promise((r=>{s(t,r,e)}));return Object.defineProperties(o,{activeCount:{get:()=>r},pendingCount:{get:()=>e.size},clearQueue:{value:()=>{e.clear()}}}),o}async function ur(t,e={}){const{concurrency:r=Number.POSITIVE_INFINITY}=e,n=cr(r);return Promise.all(t.map((t=>t&&"function"===typeof t.then?$e(t):$e("function"===typeof t?n((()=>t())):Promise.resolve(t)))))}const lr=(0,i.kg)("libp2p:transports");class hr extends o{constructor(t,e={}){super(),this.components=t,this.started=!1,this.transports=new Map,this.listeners=(0,X.s)({component:"transport-manager",metric:"listeners",metrics:this.components.getMetrics()}),this.faultTolerance=e.faultTolerance??dr.FATAL_ALL}add(t){const e=t[Symbol.toStringTag];if(null==e)throw v(new Error("Transport must have a valid tag"),m.ERR_INVALID_KEY);if(this.transports.has(e))throw v(new Error("There is already a transport with this tag"),m.ERR_DUPLICATE_TRANSPORT);lr("adding transport %s",e),this.transports.set(e,t),this.listeners.has(e)||this.listeners.set(e,[])}isStarted(){return this.started}async start(){const t=this.components.getAddressManager().getListenAddrs();await this.listen(t),this.started=!0}async stop(){const t=[];for(const[e,r]of this.listeners){lr("closing listeners for %s",e);while(r.length>0){const e=r.pop();null!=e&&t.push(e.close())}}await Promise.all(t),lr("all listeners closed");for(const e of this.listeners.keys())this.listeners.set(e,[]);this.started=!1}async dial(t,e){const r=this.transportForMultiaddr(t);if(null==r)throw v(new Error(`No transport available for address ${String(t)}`),m.ERR_TRANSPORT_UNAVAILABLE);try{return await r.dial(t,{...e,upgrader:this.components.getUpgrader()})}catch(n){throw null==n.code&&(n.code=m.ERR_TRANSPORT_DIAL_FAILED),n}}getAddrs(){let t=[];for(const e of this.listeners.values())for(const r of e)t=[...t,...r.getAddrs()];return t}getTransports(){return Array.of(...this.transports.values())}transportForMultiaddr(t){for(const e of this.transports.values()){const r=e.filter([t]);if(r.length>0)return e}}async listen(t){if(null==t||0===t.length)return void lr("no addresses were provided for listening, this node is dial only");const e=[];for(const[r,n]of this.transports.entries()){const i=n.filter(t),s=[];for(const t of i){lr("creating listener for %s on %s",r,t);const e=n.createListener({upgrader:this.components.getUpgrader()});let i=this.listeners.get(r);null==i&&(i=[],this.listeners.set(r,i)),i.push(e),e.addEventListener("listening",(()=>{this.dispatchEvent(new c("listener:listening",{detail:e}))})),e.addEventListener("close",(()=>{this.dispatchEvent(new c("listener:close",{detail:e}))})),s.push(e.listen(t))}if(0===s.length){e.push(r);continue}const o=await ur(s),a=o.find((t=>t.isFulfilled));if(null==a&&this.faultTolerance!==dr.NO_FATAL)throw v(new Error(`Transport (${r}) could not listen on any available address`),m.ERR_NO_VALID_ADDRESSES)}if(e.length===this.transports.size){const t=`no valid addresses were provided for transports [${e.join(", ")}]`;if(this.faultTolerance===dr.FATAL_ALL)throw v(new Error(t),m.ERR_NO_VALID_ADDRESSES);lr(`libp2p in dial mode only: ${t}`)}}async remove(t){lr("removing %s",t);for(const e of this.listeners.get(t)??[])await e.close();this.transports.delete(t),this.listeners.delete(t)}async removeAll(){const t=[];for(const e of this.transports.keys())t.push(this.remove(e));await Promise.all(t)}}var dr;(function(t){t[t["FATAL_ALL"]=0]="FATAL_ALL",t[t["NO_FATAL"]=1]="NO_FATAL"})(dr||(dr={}));var fr=r(9109);const pr=(0,te.m)("\n");function gr(t){const e=new fr.H(t,pr);return Vt.cv.single(e).slice()}function yr(t,e){t.push(gr(e).slice())}function mr(t,e){const r=new fr.H;for(const n of e)r.append(gr(n));t.push(r.slice())}async function wr(t,e){let r=1;const n={[Symbol.asyncIterator]:()=>n,next:async()=>await t.next(r)};let i=n;null!=e?.signal&&(i=(0,Lt.wJ)(n,e.signal));const s=t=>{r=t},o=await(0,T.zG)(i,Vt.Jx({onLength:s}),(async t=>await k(t)));if(null==o)throw v(new Error("no buffer returned"),"ERR_INVALID_MULTISTREAM_SELECT_MESSAGE");if(o[o.length-1]!==pr[0])throw v(new Error("missing newline"),"ERR_INVALID_MULTISTREAM_SELECT_MESSAGE");return o.slice(0,-1)}async function vr(t,e){const r=await wr(t,e);return(0,ee.B)(r)}const Er=(0,i.kg)("libp2p:mss:select");async function br(t,e,r,n){e=Array.isArray(e)?[...e]:[e];const{reader:i,writer:s,rest:o,stream:a}=(0,Kt.Y)(t),c=e.shift();if(null==c)throw new Error("At least one protocol must be specified");null!=r?(Er('select: write ["%s", "%s"]',r,c),mr(s,[(0,te.m)(r),(0,te.m)(c)])):(Er('select: write "%s"',c),yr(s,(0,te.m)(c)));let u=await vr(i,n);if(Er('select: read "%s"',u),u===r&&(u=await vr(i,n),Er('select: read "%s"',u)),u===c)return o(),{stream:a,protocol:c};for(const l of e){Er('select: write "%s"',l),yr(s,(0,te.m)(l));const t=await vr(i,n);if(Er('select: read "%s" for "%s"',t,l),t===l)return o(),{stream:a,protocol:l}}throw o(),v(new Error("protocol selection failed"),"ERR_UNSUPPORTED_PROTOCOL")}const Sr="/multistream/1.0.0",_r=(0,i.kg)("libp2p:mss:handle");async function Rr(t,e,r){e=Array.isArray(e)?e:[e];const{writer:n,reader:i,rest:s,stream:o}=(0,Kt.Y)(t);while(1){const t=await vr(i,r);if(_r('read "%s"',t),t!==Sr){if(e.includes(t))return yr(n,(0,te.m)(t)),_r('respond with "%s" for "%s"',t,t),s(),{stream:o,protocol:t};"ls"!==t?(yr(n,(0,te.m)("na")),_r('respond with "na" for "%s"',t)):(yr(n,new fr.H(...e.map((t=>gr((0,te.m)(t)))))),_r('respond with "%s" for %s',e,t))}else _r('respond with "%s" for "%s"',Sr,t),yr(n,(0,te.m)(Sr))}}var Ir=r(7018);const Cr=(0,i.kg)("libp2p:mss:ls");async function Ar(t,e){const{reader:r,writer:n,rest:i,stream:s}=(0,Kt.Y)(t);Cr('write "ls"'),yr(n,(0,te.m)("ls")),i();const o=await wr(r,e),a=(0,Ir.r)([o]),c=[];await(0,T.zG)(a,Vt.Jx(),(async t=>{for await(const e of t)c.push((0,ee.B)(e.slice(0,-1)))}));const u={stream:s,protocols:c};return u}class Tr{constructor(t){this.stream=t,this.shaken=!1}async _handshake(t){if(this.shaken)return;const{stream:e}=await br(this.stream,Sr,void 0,t);this.stream=e,this.shaken=!0}}class kr extends Tr{async select(t,e){return await br(this.stream,t,this.shaken?void 0:Sr,e)}async ls(t){await this._handshake(t);const e=await Ar(this.stream,t),{stream:r,protocols:n}=e;return this.stream=r,n}}class Pr extends Tr{async handle(t,e){return await Rr(this.stream,t,e)}}var Nr=r(8295);const Lr="OPEN",Dr="CLOSING",Or="CLOSED",Br=Symbol.for("@libp2p/connection");const xr=(0,i.kg)("libp2p:connection");class Ur{constructor(t){const{remoteAddr:e,remotePeer:r,newStream:n,close:i,getStreams:s,stat:o}=t;this.id=`${parseInt(String(1e9*Math.random())).toString(36)}${Date.now()}`,this.remoteAddr=e,this.remotePeer=r,this.stat={...o,status:Lr},this._newStream=n,this._close=i,this._getStreams=s,this.registry=new Map,this.tags=[],this._closing=!1}get[Symbol.toStringTag](){return"Connection"}get[Br](){return!0}get streams(){return this._getStreams()}async newStream(t,e){if(this.stat.status===Dr)throw v(new Error("the connection is being closed"),"ERR_CONNECTION_BEING_CLOSED");if(this.stat.status===Or)throw v(new Error("the connection is closed"),"ERR_CONNECTION_CLOSED");Array.isArray(t)||(t=[t]);const{stream:r,protocol:n}=await this._newStream(t,e);return this.addStream(r,{protocol:n,metadata:{}}),{stream:r,protocol:n}}addStream(t,e={}){this.registry.set(t.id,{protocol:e.protocol??"",metadata:e.metadata??{}})}removeStream(t){this.registry.delete(t)}async close(){if(this.stat.status!==Or&&!this._closing){this.stat.status=Dr;try{this.streams.forEach((t=>t.close()))}catch(t){xr.error(t)}this._closing=!0,await this._close(),this._closing=!1,this.stat.timeline.close=Date.now(),this.stat.status=Or}}}function Mr(t){return new Ur(t)}const Vr=(0,i.kg)("libp2p:upgrader");class Kr extends o{constructor(t,e){super(),this.components=t,this.connectionEncryption=new Map,e.connectionEncryption.forEach((t=>{this.connectionEncryption.set(t.protocol,t)})),this.muxers=new Map,e.muxers.forEach((t=>{this.muxers.set(t.protocol,t)}))}async upgradeInbound(t){let e,r,n,i,s,o,a;const c=this.components.getMetrics();if(await this.components.getConnectionGater().denyInboundConnection(t))throw v(new Error("The multiaddr connection is blocked by gater.acceptConnection"),m.ERR_CONNECTION_INTERCEPTED);if(null!=c){({setTarget:o,proxy:a}=Nr());const e=`${(1e9*Math.random()).toString(36)}${Date.now()}`;o({toString:()=>e}),t=c.trackStream({stream:t,remotePeer:a})}Vr("starting the inbound connection upgrade");let u=t;const l=this.components.getConnectionProtector();null!=l&&(Vr("protecting the inbound connection"),u=await l.protect(t));try{if(({conn:e,remotePeer:r,protocol:s}=await this._encryptInbound(u)),await this.components.getConnectionGater().denyInboundEncryptedConnection(r,{...u,...e}))throw v(new Error("The multiaddr connection is blocked by gater.acceptEncryptedConnection"),m.ERR_CONNECTION_INTERCEPTED);if(this.muxers.size>0){const t=await this._multiplexInbound({...u,...e},this.muxers);i=t.muxerFactory,n=t.stream}else n=e}catch(h){throw Vr.error("Failed to upgrade inbound connection",h),await t.close(h),h}if(await this.components.getConnectionGater().denyInboundUpgradedConnection(r,{...u,...e}))throw v(new Error("The multiaddr connection is blocked by gater.acceptEncryptedConnection"),m.ERR_CONNECTION_INTERCEPTED);return null!=c&&(c.updatePlaceholder(a,r),o(r)),Vr("Successfully upgraded inbound connection"),this._createConnection({cryptoProtocol:s,direction:"inbound",maConn:t,upgradedConn:n,muxerFactory:i,remotePeer:r})}async upgradeOutbound(t){const e=t.remoteAddr.getPeerId();if(null==e)throw v(new Error("outbound connection must have a peer id"),m.ERR_INVALID_MULTIADDR);const r=(0,B.jE)(e);if(await this.components.getConnectionGater().denyOutboundConnection(r,t))throw v(new Error("The multiaddr connection is blocked by connectionGater.denyOutboundConnection"),m.ERR_CONNECTION_INTERCEPTED);let n,i,s,o,a,c,u;const l=this.components.getMetrics();if(null!=l){({setTarget:c,proxy:u}=Nr());const e=`${(1e9*Math.random()).toString(36)}${Date.now()}`;c({toB58String:()=>e}),t=l.trackStream({stream:t,remotePeer:u})}Vr("Starting the outbound connection upgrade");let h=t;const d=this.components.getConnectionProtector();null!=d&&(h=await d.protect(t));try{if(({conn:n,remotePeer:i,protocol:o}=await this._encryptOutbound(h,r)),await this.components.getConnectionGater().denyOutboundEncryptedConnection(i,{...h,...n}))throw v(new Error("The multiaddr connection is blocked by gater.acceptEncryptedConnection"),m.ERR_CONNECTION_INTERCEPTED);if(this.muxers.size>0){const t=await this._multiplexOutbound({...h,...n},this.muxers);a=t.muxerFactory,s=t.stream}else s=n}catch(f){throw Vr.error("Failed to upgrade outbound connection",f),await t.close(f),f}if(await this.components.getConnectionGater().denyOutboundUpgradedConnection(i,{...h,...n}))throw v(new Error("The multiaddr connection is blocked by gater.acceptEncryptedConnection"),m.ERR_CONNECTION_INTERCEPTED);return null!=l&&(l.updatePlaceholder(u,i),c(i)),Vr("Successfully upgraded outbound connection"),this._createConnection({cryptoProtocol:o,direction:"outbound",maConn:t,upgradedConn:s,muxerFactory:a,remotePeer:i})}_createConnection(t){const{cryptoProtocol:e,direction:r,maConn:n,upgradedConn:i,remotePeer:s,muxerFactory:o}=t;let a,u,l;null!=o&&(a=o.createStreamMuxer(this.components,{onIncomingStream:t=>{null!=l&&Promise.resolve().then((async()=>{const e=new Pr(t),n=this.components.getRegistrar().getProtocols(),{stream:i,protocol:o}=await e.handle(n);Vr("%s: incoming stream opened on %s",r,o);const a=this.components.getMetrics();null!=a&&a.trackStream({stream:i,remotePeer:s,protocol:o}),null!=l&&(l.addStream(t,{protocol:o}),this._onStream({connection:l,stream:{...t,...i},protocol:o}))})).catch((e=>{Vr.error(e),null==t.timeline.close&&t.close()}))},onStreamEnd:t=>{l?.removeStream(t.id)}}),u=async(t,e={})=>{if(null==a)throw v(new Error("Stream is not multiplexed"),m.ERR_MUXER_UNAVAILABLE);Vr("%s: starting new stream on %s",r,t);const n=a.newStream(),i=new kr(n),o=this.components.getMetrics();try{let{stream:r,protocol:a}=await i.select(t,e);return null!=o&&(r=o.trackStream({stream:r,remotePeer:s,protocol:a})),{stream:{...n,...r},protocol:a}}catch(c){if(Vr.error("could not create new stream",c),null==n.timeline.close&&n.close(),null!=c.code)throw c;throw v(c,m.ERR_UNSUPPORTED_PROTOCOL)}},(0,T.zG)(i,a,i).catch(Vr.error));const h=n.timeline;n.timeline=new Proxy(h,{set:(...t)=>(null!=l&&"close"===t[1]&&null!=t[2]&&null==h.close&&(async()=>{try{"OPEN"===l.stat.status&&await l.close()}catch(t){Vr.error(t)}finally{this.dispatchEvent(new c("connectionEnd",{detail:l}))}})().catch((t=>{Vr.error(t)})),Reflect.set(...t))}),n.timeline.upgraded=Date.now();const d=()=>{throw v(new Error("connection is not multiplexed"),m.ERR_CONNECTION_NOT_MULTIPLEXED)};return l=Mr({remoteAddr:n.remoteAddr,remotePeer:s,stat:{status:"OPEN",direction:r,timeline:n.timeline,multiplexer:a?.protocol,encryption:e},newStream:u??d,getStreams:()=>null!=a?a.streams:d(),close:async()=>{await n.close(),null!=a&&await Promise.all(a.streams.map((async t=>{await t.close()})))}}),this.dispatchEvent(new c("connection",{detail:l})),l}_onStream(t){const{connection:e,stream:r,protocol:n}=t,i=this.components.getRegistrar().getHandler(n);i({connection:e,stream:r,protocol:n})}async _encryptInbound(t){const e=new Pr(t),r=Array.from(this.connectionEncryption.keys());Vr("handling inbound crypto protocol selection",r);try{const{stream:t,protocol:n}=await e.handle(r),i=this.connectionEncryption.get(n);if(null==i)throw new Error(`no crypto module found for ${n}`);return Vr("encrypting inbound connection..."),{...await i.secureInbound(this.components.getPeerId(),t),protocol:n}}catch(n){throw v(n,m.ERR_ENCRYPTION_FAILED)}}async _encryptOutbound(t,e){const r=new kr(t),n=Array.from(this.connectionEncryption.keys());Vr("selecting outbound crypto protocol",n);try{const{stream:t,protocol:i}=await r.select(n),s=this.connectionEncryption.get(i);if(null==s)throw new Error(`no crypto module found for ${i}`);return Vr("encrypting outbound connection to %p",e),{...await s.secureOutbound(this.components.getPeerId(),t,e),protocol:i}}catch(i){throw v(i,m.ERR_ENCRYPTION_FAILED)}}async _multiplexOutbound(t,e){const r=new kr(t),n=Array.from(e.keys());Vr("outbound selecting muxer %s",n);try{const{stream:t,protocol:i}=await r.select(n);Vr("%s selected as muxer protocol",i);const s=e.get(i);return{stream:t,muxerFactory:s}}catch(i){throw Vr.error("error multiplexing outbound stream",i),v(i,m.ERR_MUXER_UNAVAILABLE)}}async _multiplexInbound(t,e){const r=new Pr(t),n=Array.from(e.keys());Vr("inbound handling muxers %s",n);try{const{stream:t,protocol:i}=await r.handle(n),s=e.get(i);return{stream:t,muxerFactory:s}}catch(i){throw Vr.error("error multiplexing inbound stream",i),v(i,m.ERR_MUXER_UNAVAILABLE)}}}const Fr=Symbol.for("@libp2p/topology");function jr(t){return null!=t&&Boolean(t[Fr])}const qr=(0,i.kg)("libp2p:registrar");function Hr(t,e){for(const r of t)if(e.includes(r))return!0;return!1}class Gr{constructor(t){this.topologies=new Map,this.handlers=new Map,this.components=t,this._onDisconnect=this._onDisconnect.bind(this),this._onProtocolChange=this._onProtocolChange.bind(this),this.components.getConnectionManager().addEventListener("peer:disconnect",this._onDisconnect),this.components.getPeerStore().addEventListener("change:protocols",this._onProtocolChange)}getProtocols(){const t=new Set;for(const e of this.topologies.values())e.protocols.forEach((e=>t.add(e)));for(const e of this.handlers.keys())t.add(e);return Array.from(t).sort()}getHandler(t){const e=this.handlers.get(t);if(null==e)throw new Error(`No handler registered for protocol ${t}`);return e}getTopologies(t){const e=[];for(const{topology:r,protocols:n}of this.topologies.values())n.includes(t)&&e.push(r);return e}async handle(t,e){const r=Array.isArray(t)?t:[t];for(const n of r){if(this.handlers.has(n))throw v(new Error(`Handler already registered for protocol ${n}`),m.ERR_PROTOCOL_HANDLER_ALREADY_REGISTERED);this.handlers.set(n,e)}await this.components.getPeerStore().protoBook.add(this.components.getPeerId(),r)}async unhandle(t){const e=Array.isArray(t)?t:[t];e.forEach((t=>{this.handlers.delete(t)})),await this.components.getPeerStore().protoBook.remove(this.components.getPeerId(),e)}async register(t,e){if(!jr(e))throw qr.error("topology must be an instance of interfaces/topology"),v(new Error("topology must be an instance of interfaces/topology"),m.ERR_INVALID_PARAMETERS);const r=`${(1e9*Math.random()).toString(36)}${Date.now()}`;return this.topologies.set(r,{topology:e,protocols:Array.isArray(t)?t:[t]}),await e.setRegistrar(this),r}unregister(t){this.topologies.delete(t)}_onDisconnect(t){const e=t.detail;this.components.getPeerStore().protoBook.get(e.remotePeer).then((t=>{for(const{topology:r,protocols:n}of this.topologies.values())Hr(t,n)&&r.onDisconnect(e.remotePeer)})).catch((t=>{qr.error(t)}))}_onProtocolChange(t){const{peerId:e,protocols:r,oldProtocols:n}=t.detail,i=n.filter((t=>!r.includes(t))),s=r.filter((t=>!n.includes(t)));for(const{topology:o,protocols:a}of this.topologies.values())Hr(i,a)&&o.onDisconnect(e);for(const{topology:o,protocols:a}of this.topologies.values())if(Hr(s,a)){const t=this.components.getConnectionManager().getConnections(e)[0];if(null==t)continue;o.onConnect(e,t)}}}var zr;(function(t){t.codec=()=>(0,Nt.yw)({5:{name:"protocolVersion",codec:Nt.Z_,optional:!0},6:{name:"agentVersion",codec:Nt.Z_,optional:!0},1:{name:"publicKey",codec:Nt.aI,optional:!0},2:{name:"listenAddrs",codec:Nt.aI,repeats:!0},4:{name:"observedAddr",codec:Nt.aI,optional:!0},3:{name:"protocols",codec:Nt.Z_,repeats:!0},8:{name:"signedPeerRecord",codec:Nt.aI,optional:!0}}),t.encode=e=>(0,Nt.LE)(e,t.codec()),t.decode=e=>(0,Nt.C6)(e,t.codec())})(zr||(zr={}));var $r=r(5489),Wr=r(2611),Yr=r(4141);const Qr={ERR_SIGNATURE_NOT_VALID:"ERR_SIGNATURE_NOT_VALID"};var Xr;(function(t){t.codec=()=>(0,Nt.yw)({1:{name:"publicKey",codec:Nt.aI},2:{name:"payloadType",codec:Nt.aI},3:{name:"payload",codec:Nt.aI},5:{name:"signature",codec:Nt.aI}}),t.encode=e=>(0,Nt.LE)(e,t.codec()),t.decode=e=>(0,Nt.C6)(e,t.codec())})(Xr||(Xr={}));class Jr{constructor(t){const{peerId:e,payloadType:r,payload:n,signature:i}=t;this.peerId=e,this.payloadType=r,this.payload=n,this.signature=i}marshal(){if(null==this.peerId.publicKey)throw new Error("Missing public key");return null==this.marshaled&&(this.marshaled=Xr.encode({publicKey:this.peerId.publicKey,payloadType:this.payloadType,payload:this.payload,signature:this.signature})),this.marshaled}equals(t){return(0,Yr.f)(this.marshal(),t.marshal())}async validate(t){const e=Zr(t,this.payloadType,this.payload);if(null==this.peerId.publicKey)throw new Error("Missing public key");const r=(0,Ie.unmarshalPublicKey)(this.peerId.publicKey);return await r.verify(e,this.signature)}}Jr.createFromProtobuf=async t=>{const e=Xr.decode(t),r=await(0,B.y5)(e.publicKey);return new Jr({peerId:r,payloadType:e.payloadType,payload:e.payload,signature:e.signature})},Jr.seal=async(t,e)=>{const r=t.domain,n=t.codec,i=t.marshal(),s=Zr(r,n,i);if(null==e.privateKey)throw new Error("Missing private key");const o=await(0,Ie.unmarshalPrivateKey)(e.privateKey),a=await o.sign(s);return new Jr({peerId:e,payloadType:n,payload:i,signature:a})},Jr.openAndCertify=async(t,e)=>{const r=await Jr.createFromProtobuf(t),n=await r.validate(e);if(!n)throw v(new Error("envelope signature is not valid for the given domain"),Qr.ERR_SIGNATURE_NOT_VALID);return r};const Zr=(t,e,r)=>{const n=(0,te.m)(t),i=Wr.encode(n.byteLength),s=Wr.encode(e.length),o=Wr.encode(r.length);return(0,$r.z)([new Uint8Array(i),n,new Uint8Array(s),e,new Uint8Array(o),r])};function tn(t,e){const r=(t,e)=>t.toString().localeCompare(e.toString());return t.length===e.length&&e.sort(r)&&t.sort(r).every(((t,r)=>e[r].equals(t)))}var en;(function(t){let e;(function(t){t.codec=()=>(0,Nt.yw)({1:{name:"multiaddr",codec:Nt.aI}}),t.encode=e=>(0,Nt.LE)(e,t.codec()),t.decode=e=>(0,Nt.C6)(e,t.codec())})(e=t.AddressInfo||(t.AddressInfo={})),t.codec=()=>(0,Nt.yw)({1:{name:"peerId",codec:Nt.aI},2:{name:"seq",codec:Nt.H9},3:{name:"addresses",codec:t.AddressInfo.codec(),repeats:!0}}),t.encode=e=>(0,Nt.LE)(e,t.codec()),t.decode=e=>(0,Nt.C6)(e,t.codec())})(en||(en={}));const rn="libp2p-peer-record",nn=Uint8Array.from([3,1]);class sn{constructor(t){this.domain=sn.DOMAIN,this.codec=sn.CODEC;const{peerId:e,multiaddrs:r,seqNumber:n}=t;this.peerId=e,this.multiaddrs=r??[],this.seqNumber=n??BigInt(Date.now())}marshal(){return null==this.marshaled&&(this.marshaled=en.encode({peerId:this.peerId.toBytes(),seq:BigInt(this.seqNumber),addresses:this.multiaddrs.map((t=>({multiaddr:t.bytes})))})),this.marshaled}equals(t){return t instanceof sn&&(!!this.peerId.equals(t.peerId)&&(this.seqNumber===t.seqNumber&&!!tn(this.multiaddrs,t.multiaddrs)))}}sn.createFromProtobuf=t=>{const e=en.decode(t),r=(0,B.cv)(e.peerId),n=(e.addresses??[]).map((t=>new x.sc(t.multiaddr))),i=e.seq;return new sn({peerId:r,multiaddrs:n,seqNumber:i})},sn.DOMAIN=rn,sn.CODEC=nn;const on="0.0.0",an="libp2p",cn=`js-libp2p/${on}`,un="0.1.0",ln="id",hn="id/push",dn="1.0.0",fn="1.0.0",pn=(0,i.kg)("libp2p:identify"),gn=6e4,yn=8192;class mn{constructor(t,e){this.components=t,this.started=!1,this.init=e,this.handleMessage=this.handleMessage.bind(this),this.identifyProtocolStr=`/${e.protocolPrefix}/${ln}/${dn}`,this.identifyPushProtocolStr=`/${e.protocolPrefix}/${hn}/${fn}`,this.host={protocolVersion:`${e.protocolPrefix}/${un}`,...e.host},this.components.getConnectionManager().addEventListener("peer:connect",(t=>{const e=t.detail;this.identify(e).catch(pn.error)})),this.components.getPeerStore().addEventListener("change:multiaddrs",(t=>{const{peerId:e}=t.detail;this.components.getPeerId().equals(e)&&this.pushToPeerStore().catch((t=>pn.error(t)))})),this.components.getPeerStore().addEventListener("change:protocols",(t=>{const{peerId:e}=t.detail;this.components.getPeerId().equals(e)&&this.pushToPeerStore().catch((t=>pn.error(t)))}))}isStarted(){return this.started}async start(){this.started||(await this.components.getPeerStore().metadataBook.setValue(this.components.getPeerId(),"AgentVersion",(0,te.m)(this.host.agentVersion)),await this.components.getPeerStore().metadataBook.setValue(this.components.getPeerId(),"ProtocolVersion",(0,te.m)(this.host.protocolVersion)),await this.components.getRegistrar().handle([this.identifyProtocolStr,this.identifyPushProtocolStr],(t=>{this.handleMessage(t)?.catch((t=>{pn.error(t)}))})),this.started=!0)}async stop(){await this.components.getRegistrar().unhandle(this.identifyProtocolStr),await this.components.getRegistrar().unhandle(this.identifyPushProtocolStr),this.started=!1}async push(t){const e=await this.components.getPeerStore().addressBook.getRawEnvelope(this.components.getPeerId()),r=this.components.getAddressManager().getAddresses().map((t=>t.bytes)),n=await this.components.getPeerStore().protoBook.get(this.components.getPeerId()),i=t.map((async t=>{const i=new C.TimeoutController(this.init.timeout??gn);let s;try{const o=await t.newStream([this.identifyPushProtocolStr],{signal:i.signal});s=o.stream;const a=(0,Lt.D7)(s,i.signal);await(0,T.zG)([zr.encode({listenAddrs:r,signedPeerRecord:e,protocols:n})],Vt.cv(),a,d)}catch(o){pn.error("could not push identify update to peer",o)}finally{null!=s&&s.close(),i.clear()}}));await Promise.all(i)}async pushToPeerStore(){if(!this.isStarted())return;const t=[];for(const e of this.components.getConnectionManager().getConnections()){const r=e.remotePeer,n=await this.components.getPeerStore().get(r);n.protocols.includes(this.identifyPushProtocolStr)&&t.push(e)}await this.push(t)}async _identify(t,e={}){const{stream:r}=await t.newStream([this.identifyProtocolStr],e);let n,i=r,s=e.signal;null==s&&(n=new C.TimeoutController(this.init.timeout??gn),s=n.signal),i=(0,Lt.D7)(r,s);try{const t=await(0,T.zG)([],i,Vt.Jx({maxDataLength:this.init.maxIdentifyMessageSize??yn}),(async t=>await k(t)));if(null==t)throw v(new Error("No data could be retrieved"),m.ERR_CONNECTION_ENDED);try{return zr.decode(t)}catch(o){throw v(o,m.ERR_INVALID_MESSAGE)}}finally{null!=n&&n.clear(),r.close()}}async identify(t,e={}){const r=await this._identify(t,e),{publicKey:n,listenAddrs:i,protocols:s,observedAddr:o,signedPeerRecord:a,agentVersion:c,protocolVersion:u}=r;if(null==n)throw v(new Error("public key was missing from identify message"),m.ERR_MISSING_PUBLIC_KEY);const l=await(0,B.y5)(n);if(!t.remotePeer.equals(l))throw v(new Error("identified peer does not match the expected peer"),m.ERR_INVALID_PEER);if(this.components.getPeerId().equals(l))throw v(new Error("identified peer is our own peer id?"),m.ERR_INVALID_PEER);const h=mn.getCleanMultiaddr(o);if(null!=a){pn("received signed peer record from %p",l);try{const t=await Jr.openAndCertify(a,sn.DOMAIN);if(!t.peerId.equals(l))throw v(new Error("identified peer does not match the expected peer"),m.ERR_INVALID_PEER);if(await this.components.getPeerStore().addressBook.consumePeerRecord(t))return await this.components.getPeerStore().protoBook.set(l,s),null!=c&&await this.components.getPeerStore().metadataBook.setValue(l,"AgentVersion",(0,te.m)(c)),null!=u&&await this.components.getPeerStore().metadataBook.setValue(l,"ProtocolVersion",(0,te.m)(u)),void pn("identify completed for peer %p and protocols %o",l,s)}catch(d){pn("received invalid envelope, discard it and fallback to listenAddrs is available",d)}}else pn("no signed peer record received from %p",l);pn("falling back to legacy addresses from %p",l);try{await this.components.getPeerStore().addressBook.set(l,i.map((t=>new x.sc(t))))}catch(d){pn.error("received invalid addrs",d)}await this.components.getPeerStore().protoBook.set(l,s),null!=c&&await this.components.getPeerStore().metadataBook.setValue(l,"AgentVersion",(0,te.m)(c)),null!=u&&await this.components.getPeerStore().metadataBook.setValue(l,"ProtocolVersion",(0,te.m)(u)),pn("identify completed for peer %p and protocols %o",l,s),pn("received observed address of %s",h?.toString())}handleMessage(t){const{protocol:e}=t;switch(e){case this.identifyProtocolStr:return this._handleIdentify(t);case this.identifyPushProtocolStr:return this._handlePush(t);default:pn.error("cannot handle unknown protocol %s",e)}}async _handleIdentify(t){const{connection:e,stream:r}=t,n=new C.TimeoutController(this.init.timeout??gn);try{const t=this.components.getPeerId().publicKey??new Uint8Array(0),i=await this.components.getPeerStore().get(this.components.getPeerId()),s=this.components.getAddressManager().getAddresses().map((t=>t.decapsulateCode((0,x.a_)("p2p").code)));let o=i.peerRecordEnvelope;if(s.length>0&&null==o){const t=new sn({peerId:this.components.getPeerId(),multiaddrs:s}),e=await Jr.seal(t,this.components.getPeerId());await this.components.getPeerStore().addressBook.consumePeerRecord(e),o=e.marshal()}const a=zr.encode({protocolVersion:this.host.protocolVersion,agentVersion:this.host.agentVersion,publicKey:t,listenAddrs:s.map((t=>t.bytes)),signedPeerRecord:o,observedAddr:e.remoteAddr.bytes,protocols:i.protocols}),c=(0,Lt.D7)(r,n.signal);await(0,T.zG)([a],Vt.cv(),c,d)}catch(i){pn.error("could not respond to identify request",i)}finally{r.close(),n.clear()}}async _handlePush(t){const{connection:e,stream:r}=t,n=new C.TimeoutController(this.init.timeout??gn);let i;try{const t=(0,Lt.D7)(r,n.signal),e=await(0,T.zG)([],t,Vt.Jx({maxDataLength:this.init.maxIdentifyMessageSize??yn}),(async t=>await k(t)));null!=e&&(i=zr.decode(e))}catch(o){return pn.error("received invalid message",o)}finally{r.close(),n.clear()}if(null==i)return pn.error("received invalid message");const s=e.remotePeer;if(this.components.getPeerId().equals(s))pn("received push from ourselves?");else{if(pn("received push from %p",s),null!=i.signedPeerRecord){pn("received signedPeerRecord in push");try{const t=await Jr.openAndCertify(i.signedPeerRecord,sn.DOMAIN);if(await this.components.getPeerStore().addressBook.consumePeerRecord(t))return pn("consumed signedPeerRecord sent in push"),void await this.components.getPeerStore().protoBook.set(s,i.protocols);pn("failed to consume signedPeerRecord sent in push")}catch(o){pn("received invalid envelope, discard it and fallback to listenAddrs is available",o)}}else pn("did not receive signedPeerRecord in push");try{await this.components.getPeerStore().addressBook.set(s,i.listenAddrs.map((t=>new x.sc(t))))}catch(o){pn.error("received invalid addrs",o)}try{await this.components.getPeerStore().protoBook.set(s,i.protocols)}catch(o){pn.error("received invalid protocols",o)}pn("handled push from %p",s)}}static getCleanMultiaddr(t){if(null!=t&&t.length>0)try{return new x.sc(t)}catch{}}}var wn,vn;(function(t){t.codec=()=>(0,Nt.yw)({1:{name:"identifier",codec:Nt.Z_}}),t.encode=e=>(0,Nt.LE)(e,t.codec()),t.decode=e=>(0,Nt.C6)(e,t.codec())})(wn||(wn={})),function(t){let e,r;(function(t){t["OK"]="OK",t["NOT_FOUND"]="NOT_FOUND",t["ERROR"]="ERROR"})(e=t.StatusCode||(t.StatusCode={})),function(t){t[t["OK"]=0]="OK",t[t["NOT_FOUND"]=1]="NOT_FOUND",t[t["ERROR"]=2]="ERROR"}(r||(r={})),function(t){t.codec=()=>(0,Nt.Ji)(r)}(e=t.StatusCode||(t.StatusCode={})),t.codec=()=>(0,Nt.yw)({1:{name:"status",codec:t.StatusCode.codec()},2:{name:"data",codec:Nt.aI}}),t.encode=e=>(0,Nt.LE)(e,t.codec()),t.decode=e=>(0,Nt.C6)(e,t.codec())}(vn||(vn={}));const En="0.0.1",bn="fetch",Sn=(0,i.kg)("libp2p:fetch");class _n{constructor(t,e){this.started=!1,this.components=t,this.protocol=`/${e.protocolPrefix??"libp2p"}/${bn}/${En}`,this.lookupFunctions=new Map,this.handleMessage=this.handleMessage.bind(this)}async start(){await this.components.getRegistrar().handle(this.protocol,(t=>{this.handleMessage(t).catch((t=>{Sn.error(t)}))})),this.started=!0}async stop(){await this.components.getRegistrar().unhandle(this.protocol),this.started=!1}isStarted(){return this.started}async fetch(t,e,r={}){Sn("dialing %s to %p",this.protocol,t);const n=await this.components.getConnectionManager().openConnection(t,r),{stream:i}=await n.newStream([this.protocol],r);let s=i;null!=r.signal&&(s=(0,Lt.D7)(i,r.signal));const o=(0,Kt.Y)(s);o.write(Vt.cv.single(wn.encode({identifier:e})).slice());const a=vn.decode((await Vt.Jx.fromReader(o.reader).next()).value.slice());switch(a.status){case vn.StatusCode.OK:return a.data;case vn.StatusCode.NOT_FOUND:return null;case vn.StatusCode.ERROR:{const t=(new TextDecoder).decode(a.data);throw v(new Error("Error in fetch protocol response: "+t),m.ERR_INVALID_PARAMETERS)}default:throw v(new Error("Unknown response status"),m.ERR_INVALID_MESSAGE)}}async handleMessage(t){const{stream:e}=t,r=(0,Kt.Y)(e),n=wn.decode((await Vt.Jx.fromReader(r.reader).next()).value.slice());let i;const s=this._getLookupFunction(n.identifier);if(null!=s){const t=await s(n.identifier);i=null!=t?{status:vn.StatusCode.OK,data:t}:{status:vn.StatusCode.NOT_FOUND,data:new Uint8Array(0)}}else{const t=(new TextEncoder).encode("No lookup function registered for key: "+n.identifier);i={status:vn.StatusCode.ERROR,data:t}}r.write(Vt.cv.single(vn.encode(i)).slice())}_getLookupFunction(t){for(const e of this.lookupFunctions.keys())if(t.startsWith(e))return this.lookupFunctions.get(e)}registerLookupFunction(t,e){if(this.lookupFunctions.has(t))throw v(new Error("Fetch protocol handler for key prefix '"+t+"' already registered"),m.ERR_KEY_ALREADY_EXISTS);this.lookupFunctions.set(t,e)}unregisterLookupFunction(t,e){if(null!=e){const r=this.lookupFunctions.get(t);if(r!==e)return}this.lookupFunctions.delete(t)}}const Rn=32,In="1.0.0",Cn="ping",An=(0,i.kg)("libp2p:ping");class Tn{constructor(t,e){this.components=t,this.started=!1,this.protocol=`/${e.protocolPrefix}/${Cn}/${In}`}async start(){await this.components.getRegistrar().handle(this.protocol,this.handleMessage),this.started=!0}async stop(){await this.components.getRegistrar().unhandle(this.protocol),this.started=!1}isStarted(){return this.started}handleMessage(t){const{stream:e}=t;(0,T.zG)(e,e).catch((t=>{An.error(t)}))}async ping(t,e={}){An("dialing %s to %p",this.protocol,t);const r=await this.components.getConnectionManager().openConnection(t,e),{stream:n}=await r.newStream([this.protocol],e),i=Date.now(),s=(0,Ce.O6)(Rn);let o=n;null!=e.signal&&(o=(0,Lt.D7)(n,e.signal));try{const t=await(0,T.zG)([s],o,(async t=>await k(t))),e=Date.now();if(null==t||!(0,Yr.f)(s,t))throw v(new Error("Received wrong ping ack"),m.ERR_WRONG_PING_ACK);return e-i}finally{n.close()}}}async function kn(){throw new Error("Not supported in browsers")}var Pn=r(3336);function Nn(t){return/^127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(t)||/^::1$/.test(t)}function Ln(t){const{address:e}=t.nodeAddress();return Nn(e)}const Dn=(0,i.kg)("libp2p:nat"),On=7200;function Bn(t=1024,e=65535){return Math.floor(Math.random()*(e-t+1)+t)}class xn{constructor(t,e){if(this.components=t,this.started=!1,this.enabled=e.enabled,this.externalAddress=e.externalAddress,this.localAddress=e.localAddress,this.description=e.description??`${an}@${on} ${this.components.getPeerId().toString()}`,this.ttl=e.ttl??On,this.keepAlive=e.keepAlive??!0,this.gateway=e.gateway,this.ttl<On)throw v(new Error(`NatManager ttl should be at least ${On} seconds`),m.ERR_INVALID_PARAMETERS)}isStarted(){return this.started}start(){}afterStart(){Pn.isBrowser||!this.enabled||this.started||(this.started=!0,this._start().catch((t=>{Dn.error(t)})))}async _start(){const t=this.components.getTransportManager().getAddrs();for(const e of t){const{family:t,host:r,port:n,transport:i}=e.toOptions();if(!e.isThinWaistAddress()||"tcp"!==i)continue;if(Ln(e))continue;if(4!==t)continue;const s=await this._getClient(),o=this.externalAddress??await s.externalIp();if(ot(o))throw new Error(`${o} is private - please set config.nat.externalIp to an externally routable IP or ensure you are not behind a double NAT`);const a=Bn();Dn(`opening uPnP connection from ${o}:${a} to ${r}:${n}`),await s.map({publicPort:a,localPort:n,localAddress:this.localAddress,protocol:"TCP"===i.toUpperCase()?"TCP":"UDP"}),this.components.getAddressManager().addObservedAddr(x.sc.fromNodeAddress({family:4,address:o,port:a},i))}}async _getClient(){return null!=this.client||(this.client=await kn({description:this.description,ttl:this.ttl,keepAlive:this.keepAlive,gateway:this.gateway})),this.client}async stop(){if(!Pn.isBrowser&&null!=this.client)try{await this.client.close(),this.client=void 0}catch(t){Dn.error(t)}}}const Un=(0,i.kg)("libp2p:peer-record-updater");class Mn{constructor(t){this.components=t,this.started=!1,this.update=this.update.bind(this)}isStarted(){return this.started}async start(){this.started=!0,this.components.getTransportManager().addEventListener("listener:listening",this.update),this.components.getTransportManager().addEventListener("listener:close",this.update),this.components.getAddressManager().addEventListener("change:addresses",this.update)}async stop(){this.started=!1,this.components.getTransportManager().removeEventListener("listener:listening",this.update),this.components.getTransportManager().removeEventListener("listener:close",this.update),this.components.getAddressManager().removeEventListener("change:addresses",this.update)}update(){Promise.resolve().then((async()=>{const t=new sn({peerId:this.components.getPeerId(),multiaddrs:this.components.getAddressManager().getAddresses().map((t=>t.decapsulateCode((0,x.a_)("p2p").code)))}),e=await Jr.seal(t,this.components.getPeerId());await this.components.getPeerStore().addressBook.consumePeerRecord(e)})).catch((t=>{Un.error("Could not update self peer record: %o",t)}))}}class Vn{constructor(t){this.dht=t}async findPeer(t,e={}){for await(const r of this.dht.findPeer(t,e))if("FINAL_PEER"===r.name)return r.peer;throw v(new Error(y.NOT_FOUND),m.ERR_NOT_FOUND)}async*getClosestPeers(t,e={}){for await(const r of this.dht.getClosestPeers(t,e))"PEER_RESPONSE"===r.name&&(yield*r.closer)}}var Kn=r(1079);const Fn={ERR_INVALID_PARAMETERS:"ERR_INVALID_PARAMETERS",ERR_NOT_FOUND:"ERR_NOT_FOUND"},jn=(0,i.kg)("libp2p:peer-store:address-book"),qn="change:multiaddrs";async function Hn(){return!0}class Gn{constructor(t,e,r){this.dispatchEvent=t,this.store=e,this.addressFilter=r??Hn}async consumePeerRecord(t){jn.trace("consumePeerRecord await write lock");const e=await this.store.lock.writeLock();let r,n,i;jn.trace("consumePeerRecord got write lock");try{let o;try{o=sn.createFromProtobuf(t.payload)}catch(s){return jn.error("invalid peer record received"),!1}r=o.peerId;const a=o.multiaddrs;if(!r.equals(t.peerId))return jn("signing key does not match PeerId in the PeerRecord"),!1;if(null==a||0===a.length)return!1;if(await this.store.has(r)&&(n=await this.store.load(r),null!=n.peerRecordEnvelope)){const t=await Jr.createFromProtobuf(n.peerRecordEnvelope),e=sn.createFromProtobuf(t.payload);if(e.seqNumber>=o.seqNumber)return jn("sequence number was lower or equal to existing sequence number - stored: %d received: %d",e.seqNumber,o.seqNumber),!1}const c=await zn(r,a,this.addressFilter,!0);i=await this.store.patchOrCreate(r,{addresses:c,peerRecordEnvelope:t.marshal()}),jn("stored provided peer record for %p",o.peerId)}finally{jn.trace("consumePeerRecord release write lock"),e()}return this.dispatchEvent(new Kn.Aw(qn,{detail:{peerId:r,multiaddrs:i.addresses.map((({multiaddr:t})=>t)),oldMultiaddrs:null==n?[]:n.addresses.map((({multiaddr:t})=>t))}})),!0}async getRawEnvelope(t){jn.trace("getRawEnvelope await read lock");const e=await this.store.lock.readLock();jn.trace("getRawEnvelope got read lock");try{const r=await this.store.load(t);return r.peerRecordEnvelope}catch(r){if(r.code!==Fn.ERR_NOT_FOUND)throw r}finally{jn.trace("getRawEnvelope release read lock"),e()}}async getPeerRecord(t){const e=await this.getRawEnvelope(t);if(null!=e)return await Jr.createFromProtobuf(e)}async get(t){t=(0,B.vL)(t),jn.trace("get wait for read lock");const e=await this.store.lock.readLock();jn.trace("get got read lock");try{const r=await this.store.load(t);return r.addresses}catch(r){if(r.code!==Fn.ERR_NOT_FOUND)throw r}finally{jn.trace("get release read lock"),e()}return[]}async set(t,e){if(t=(0,B.vL)(t),!Array.isArray(e))throw jn.error("multiaddrs must be an array of Multiaddrs"),v(new Error("multiaddrs must be an array of Multiaddrs"),Fn.ERR_INVALID_PARAMETERS);jn.trace("set await write lock");const r=await this.store.lock.writeLock();jn.trace("set got write lock");let n,i,s=!1;try{const a=await zn(t,e,this.addressFilter);if(0===a.length)return;try{if(n=await this.store.load(t),s=!0,new Set([...a.map((({multiaddr:t})=>t.toString())),...n.addresses.map((({multiaddr:t})=>t.toString()))]).size===n.addresses.length&&a.length===n.addresses.length)return}catch(o){if(o.code!==Fn.ERR_NOT_FOUND)throw o}i=await this.store.patchOrCreate(t,{addresses:a}),jn("set multiaddrs for %p",t)}finally{jn.trace("set multiaddrs for %p",t),jn("set release write lock"),r()}this.dispatchEvent(new Kn.Aw(qn,{detail:{peerId:t,multiaddrs:i.addresses.map((t=>t.multiaddr)),oldMultiaddrs:null==n?[]:n.addresses.map((({multiaddr:t})=>t))}})),s||this.dispatchEvent(new Kn.Aw("peer",{detail:{id:t,multiaddrs:i.addresses.map((t=>t.multiaddr)),protocols:i.protocols}}))}async add(t,e){if(t=(0,B.vL)(t),!Array.isArray(e))throw jn.error("multiaddrs must be an array of Multiaddrs"),v(new Error("multiaddrs must be an array of Multiaddrs"),Fn.ERR_INVALID_PARAMETERS);jn.trace("add await write lock");const r=await this.store.lock.writeLock();let n,i,s;jn.trace("add got write lock");try{const a=await zn(t,e,this.addressFilter);if(0===a.length)return;try{if(i=await this.store.load(t),n=!0,new Set([...a.map((({multiaddr:t})=>t.toString())),...i.addresses.map((({multiaddr:t})=>t.toString()))]).size===i.addresses.length)return}catch(o){if(o.code!==Fn.ERR_NOT_FOUND)throw o}s=await this.store.mergeOrCreate(t,{addresses:a}),jn("added multiaddrs for %p",t)}finally{jn.trace("set release write lock"),r()}this.dispatchEvent(new Kn.Aw(qn,{detail:{peerId:t,multiaddrs:s.addresses.map((t=>t.multiaddr)),oldMultiaddrs:null==i?[]:i.addresses.map((({multiaddr:t})=>t))}})),!0===n&&this.dispatchEvent(new Kn.Aw("peer",{detail:{id:t,multiaddrs:s.addresses.map((t=>t.multiaddr)),protocols:s.protocols}}))}async delete(t){t=(0,B.vL)(t),jn.trace("delete await write lock");const e=await this.store.lock.writeLock();let r;jn.trace("delete got write lock");try{try{r=await this.store.load(t)}catch(n){if(n.code!==Fn.ERR_NOT_FOUND)throw n}await this.store.patchOrCreate(t,{addresses:[]})}finally{jn.trace("delete release write lock"),e()}null!=r&&this.dispatchEvent(new Kn.Aw(qn,{detail:{peerId:t,multiaddrs:[],oldMultiaddrs:null==r?[]:r.addresses.map((({multiaddr:t})=>t))}}))}}async function zn(t,e,r,n=!1){return await(0,T.zG)(e,(t=>Me(t,(t=>{if(!x.sc.isMultiaddr(t))throw jn.error("multiaddr must be an instance of Multiaddr"),v(new Error("multiaddr must be an instance of Multiaddr"),Fn.ERR_INVALID_PARAMETERS)}))),(e=>f(e,(async e=>await r(t,e)))),(t=>S(t,(t=>({multiaddr:new x.sc(t.toString()),isCertified:n})))),(async t=>await l(t)))}const $n=(0,i.kg)("libp2p:peer-store:key-book"),Wn="change:pubkey";class Yn{constructor(t,e){this.dispatchEvent=t,this.store=e}async set(t,e){if(t=(0,B.vL)(t),!(e instanceof Uint8Array))throw $n.error("publicKey must be an instance of Uint8Array to store data"),v(new Error("publicKey must be an instance of PublicKey"),Fn.ERR_INVALID_PARAMETERS);$n.trace("set await write lock");const r=await this.store.lock.writeLock();$n.trace("set got write lock");let n,i=!1;try{try{if(n=await this.store.load(t),null!=n.pubKey&&(0,Yr.f)(n.pubKey,e))return}catch(s){if(s.code!==Fn.ERR_NOT_FOUND)throw s}await this.store.patchOrCreate(t,{pubKey:e}),i=!0}finally{$n.trace("set release write lock"),r()}i&&this.dispatchEvent(new Kn.Aw(Wn,{detail:{peerId:t,publicKey:e,oldPublicKey:null==n?void 0:n.pubKey}}))}async get(t){t=(0,B.vL)(t),$n.trace("get await write lock");const e=await this.store.lock.readLock();$n.trace("get got write lock");try{const r=await this.store.load(t);return r.pubKey}catch(r){if(r.code!==Fn.ERR_NOT_FOUND)throw r}finally{$n("get release write lock"),e()}}async delete(t){t=(0,B.vL)(t),$n.trace("delete await write lock");const e=await this.store.lock.writeLock();let r;$n.trace("delete got write lock");try{try{r=await this.store.load(t)}catch(n){if(n.code!==Fn.ERR_NOT_FOUND)throw n}await this.store.patchOrCreate(t,{pubKey:void 0})}catch(n){if(n.code!==Fn.ERR_NOT_FOUND)throw n}finally{$n.trace("delete release write lock"),e()}this.dispatchEvent(new Kn.Aw(Wn,{detail:{peerId:t,publicKey:void 0,oldPublicKey:null==r?void 0:r.pubKey}}))}}const Qn=(0,i.kg)("libp2p:peer-store:metadata-book"),Xn="change:metadata";class Jn{constructor(t,e){this.dispatchEvent=t,this.store=e}async get(t){t=(0,B.vL)(t),Qn.trace("get await read lock");const e=await this.store.lock.readLock();Qn.trace("get got read lock");try{const r=await this.store.load(t);return r.metadata}catch(r){if(r.code!==Fn.ERR_NOT_FOUND)throw r}finally{Qn.trace("get release read lock"),e()}return new Map}async getValue(t,e){t=(0,B.vL)(t),Qn.trace("getValue await read lock");const r=await this.store.lock.readLock();Qn.trace("getValue got read lock");try{const n=await this.store.load(t);return n.metadata.get(e)}catch(n){if(n.code!==Fn.ERR_NOT_FOUND)throw n}finally{Qn.trace("getValue release write lock"),r()}}async set(t,e){if(t=(0,B.vL)(t),!(e instanceof Map))throw Qn.error("valid metadata must be provided to store data"),v(new Error("valid metadata must be provided"),Fn.ERR_INVALID_PARAMETERS);Qn.trace("set await write lock");const r=await this.store.lock.writeLock();let n;Qn.trace("set got write lock");try{try{n=await this.store.load(t)}catch(i){if(i.code!==Fn.ERR_NOT_FOUND)throw i}await this.store.mergeOrCreate(t,{metadata:e})}finally{Qn.trace("set release write lock"),r()}this.dispatchEvent(new Kn.Aw(Xn,{detail:{peerId:t,metadata:e,oldMetadata:null==n?new Map:n.metadata}}))}async setValue(t,e,r){if(t=(0,B.vL)(t),"string"!==typeof e||!(r instanceof Uint8Array))throw Qn.error("valid key and value must be provided to store data"),v(new Error("valid key and value must be provided"),Fn.ERR_INVALID_PARAMETERS);Qn.trace("setValue await write lock");const n=await this.store.lock.writeLock();let i,s;Qn.trace("setValue got write lock");try{try{i=await this.store.load(t);const n=i.metadata.get(e);if(null!=n&&(0,Yr.f)(r,n))return}catch(o){if(o.code!==Fn.ERR_NOT_FOUND)throw o}s=await this.store.mergeOrCreate(t,{metadata:new Map([[e,r]])})}finally{Qn.trace("setValue release write lock"),n()}this.dispatchEvent(new Kn.Aw(Xn,{detail:{peerId:t,metadata:s.metadata,oldMetadata:null==i?new Map:i.metadata}}))}async delete(t){t=(0,B.vL)(t),Qn.trace("delete await write lock");const e=await this.store.lock.writeLock();let r;Qn.trace("delete got write lock");try{try{r=await this.store.load(t)}catch(n){if(n.code!==Fn.ERR_NOT_FOUND)throw n}null!=r&&await this.store.patch(t,{metadata:new Map})}finally{Qn.trace("delete release write lock"),e()}null!=r&&this.dispatchEvent(new Kn.Aw(Xn,{detail:{peerId:t,metadata:new Map,oldMetadata:r.metadata}}))}async deleteValue(t,e){t=(0,B.vL)(t),Qn.trace("deleteValue await write lock");const r=await this.store.lock.writeLock();let n,i;Qn.trace("deleteValue got write lock");try{i=await this.store.load(t),n=i.metadata,n.delete(e),await this.store.patch(t,{metadata:n})}catch(s){if(s.code!==Fn.ERR_NOT_FOUND)throw s}finally{Qn.trace("deleteValue release write lock"),r()}null!=n&&this.dispatchEvent(new Kn.Aw(Xn,{detail:{peerId:t,metadata:n,oldMetadata:null==i?new Map:i.metadata}}))}}const Zn=(0,i.kg)("libp2p:peer-store:proto-book"),ti="change:protocols";class ei{constructor(t,e){this.dispatchEvent=t,this.store=e}async get(t){Zn.trace("get wait for read lock");const e=await this.store.lock.readLock();Zn.trace("get got read lock");try{const r=await this.store.load(t);return r.protocols}catch(r){if(r.code!==Fn.ERR_NOT_FOUND)throw r}finally{Zn.trace("get release read lock"),e()}return[]}async set(t,e){if(t=(0,B.vL)(t),!Array.isArray(e))throw Zn.error("protocols must be provided to store data"),v(new Error("protocols must be provided"),Fn.ERR_INVALID_PARAMETERS);Zn.trace("set await write lock");const r=await this.store.lock.writeLock();let n,i;Zn.trace("set got write lock");try{try{if(n=await this.store.load(t),new Set([...e]).size===n.protocols.length)return}catch(s){if(s.code!==Fn.ERR_NOT_FOUND)throw s}i=await this.store.patchOrCreate(t,{protocols:e}),Zn("stored provided protocols for %p",t)}finally{Zn.trace("set release write lock"),r()}this.dispatchEvent(new Kn.Aw(ti,{detail:{peerId:t,protocols:i.protocols,oldProtocols:null==n?[]:n.protocols}}))}async add(t,e){if(t=(0,B.vL)(t),!Array.isArray(e))throw Zn.error("protocols must be provided to store data"),v(new Error("protocols must be provided"),Fn.ERR_INVALID_PARAMETERS);Zn.trace("add await write lock");const r=await this.store.lock.writeLock();let n,i;Zn.trace("add got write lock");try{try{if(n=await this.store.load(t),new Set([...n.protocols,...e]).size===n.protocols.length)return}catch(s){if(s.code!==Fn.ERR_NOT_FOUND)throw s}i=await this.store.mergeOrCreate(t,{protocols:e}),Zn("added provided protocols for %p",t)}finally{Zn.trace("add release write lock"),r()}this.dispatchEvent(new Kn.Aw(ti,{detail:{peerId:t,protocols:i.protocols,oldProtocols:null==n?[]:n.protocols}}))}async remove(t,e){if(t=(0,B.vL)(t),!Array.isArray(e))throw Zn.error("protocols must be provided to store data"),v(new Error("protocols must be provided"),Fn.ERR_INVALID_PARAMETERS);Zn.trace("remove await write lock");const r=await this.store.lock.writeLock();let n,i;Zn.trace("remove got write lock");try{try{n=await this.store.load(t);const r=new Set(n.protocols);for(const t of e)r.delete(t);if(n.protocols.length===r.size)return;e=Array.from(r)}catch(s){if(s.code!==Fn.ERR_NOT_FOUND)throw s}i=await this.store.patchOrCreate(t,{protocols:e})}finally{Zn.trace("remove release write lock"),r()}this.dispatchEvent(new Kn.Aw(ti,{detail:{peerId:t,protocols:i.protocols,oldProtocols:null==n?[]:n.protocols}}))}async delete(t){t=(0,B.vL)(t),Zn.trace("delete await write lock");const e=await this.store.lock.writeLock();let r;Zn.trace("delete got write lock");try{try{r=await this.store.load(t)}catch(n){if(n.code!==Fn.ERR_NOT_FOUND)throw n}await this.store.patchOrCreate(t,{protocols:[]})}finally{Zn.trace("delete release write lock"),e()}null!=r&&this.dispatchEvent(new Kn.Aw(ti,{detail:{peerId:t,protocols:[],oldProtocols:r.protocols}}))}}var ri,ni,ii,si=r(2056);(function(t){t.codec=()=>(0,Nt.yw)({1:{name:"addresses",codec:ni.codec(),repeats:!0},2:{name:"protocols",codec:Nt.Z_,repeats:!0},3:{name:"metadata",codec:ii.codec(),repeats:!0},4:{name:"pubKey",codec:Nt.aI,optional:!0},5:{name:"peerRecordEnvelope",codec:Nt.aI,optional:!0}}),t.encode=e=>(0,Nt.LE)(e,t.codec()),t.decode=e=>(0,Nt.C6)(e,t.codec())})(ri||(ri={})),function(t){t.codec=()=>(0,Nt.yw)({1:{name:"multiaddr",codec:Nt.aI},2:{name:"isCertified",codec:Nt.Xg,optional:!0}}),t.encode=e=>(0,Nt.LE)(e,t.codec()),t.decode=e=>(0,Nt.C6)(e,t.codec())}(ni||(ni={})),function(t){t.codec=()=>(0,Nt.yw)({1:{name:"key",codec:Nt.Z_},2:{name:"value",codec:Nt.aI}}),t.encode=e=>(0,Nt.LE)(e,t.codec()),t.decode=e=>(0,Nt.C6)(e,t.codec())}(ii||(ii={}));var oi=r(1305),ai=r(8713),ci=r(691);const ui="lock:worker:request-read",li="lock:worker:release-read",hi="lock:master:grant-read",di="lock:worker:request-write",fi="lock:worker:release-write",pi="lock:master:grant-write",gi={},yi=t=>{t.addEventListener("message",(e=>{yi.dispatchEvent("message",t,e)})),null!=t.port&&t.port.addEventListener("message",(e=>{yi.dispatchEvent("message",t,e)}))};yi.addEventListener=(t,e)=>{null==gi[t]&&(gi[t]=[]),gi[t].push(e)},yi.removeEventListener=(t,e)=>{null!=gi[t]&&(gi[t]=gi[t].filter((t=>t===e)))},yi.dispatchEvent=function(t,e,r){null!=gi[t]&&gi[t].forEach((t=>t(e,r)))};var mi=yi;const wi=(t,e,r,n,i)=>(s,o)=>{if(o.data.type!==r)return;const a={type:o.data.type,name:o.data.name,identifier:o.data.identifier};t.dispatchEvent(new MessageEvent(e,{data:{name:a.name,handler:async()=>(s.postMessage({type:i,name:a.name,identifier:a.identifier}),await new Promise((t=>{const e=r=>{if(null==r||null==r.data)return;const i={type:r.data.type,name:r.data.name,identifier:r.data.identifier};i.type===n&&i.identifier===a.identifier&&(s.removeEventListener("message",e),t())};s.addEventListener("message",e)})))}}))},vi=(t,e,r,n)=>async()=>{const i=(0,ci.x0)();return globalThis.postMessage({type:e,identifier:i,name:t}),await new Promise((e=>{const s=o=>{if(null==o||null==o.data)return;const a={type:o.data.type,identifier:o.data.identifier};a.type===r&&a.identifier===i&&(globalThis.removeEventListener("message",s),e((()=>{globalThis.postMessage({type:n,identifier:i,name:t})})))};globalThis.addEventListener("message",s)}))},Ei={singleProcess:!1};var bi=t=>{t=Object.assign({},Ei,t);const e=Boolean(globalThis.document)||t.singleProcess;if(e){const t=new EventTarget;return mi.addEventListener("message",wi(t,"requestReadLock",ui,li,hi)),mi.addEventListener("message",wi(t,"requestWriteLock",di,fi,pi)),t}return{isWorker:!0,readLock:t=>vi(t,ui,hi,li),writeLock:t=>vi(t,di,pi,fi)}};const Si={};let _i;async function Ri(t,e){let r;const n=new Promise((t=>{r=t}));return t.add((async()=>await(0,ai.Z)((async()=>await new Promise((t=>{r((()=>{t()}))})))(),e.timeout))),await n}const Ii=(t,e)=>{if(!0===_i.isWorker)return{readLock:_i.readLock(t,e),writeLock:_i.writeLock(t,e)};const r=new oi.Z({concurrency:1});let n;return{async readLock(){if(null!=n)return await Ri(n,e);n=new oi.Z({concurrency:e.concurrency,autoStart:!1});const t=n,i=Ri(n,e);return r.add((async()=>(t.start(),await t.onIdle().then((()=>{n===t&&(n=null)}))))),await i},async writeLock(){return n=null,await Ri(r,e)}}},Ci={name:"lock",concurrency:1/0,timeout:846e5,global:globalThis,singleProcess:!1};function Ai(t){const e=Object.assign({},Ci,t);return null==_i&&(_i=bi(e),!0!==_i.isWorker&&(_i.addEventListener("requestReadLock",(t=>{null!=Si[t.data.name]&&Si[t.data.name].readLock().then((async e=>await t.data.handler().finally((()=>e()))))})),_i.addEventListener("requestWriteLock",(async t=>{null!=Si[t.data.name]&&Si[t.data.name].writeLock().then((async e=>await t.data.handler().finally((()=>e()))))})))),null==Si[e.name]&&(Si[e.name]=Ii(e.name,e)),Si[e.name]}const Ti=(0,i.kg)("libp2p:peer-store:store"),ki="/peers/";class Pi{constructor(t){this.datastore=t,this.lock=Ai({name:"peer-store",singleProcess:!0})}_peerIdToDatastoreKey(t){if(null==t.type)throw Ti.error("peerId must be an instance of peer-id to store data"),v(new Error("peerId must be an instance of peer-id"),Fn.ERR_INVALID_PARAMETERS);const e=t.toCID().toString();return new w.s(`${ki}${e}`)}async has(t){return await this.datastore.has(this._peerIdToDatastoreKey(t))}async delete(t){await this.datastore.delete(this._peerIdToDatastoreKey(t))}async load(t){const e=await this.datastore.get(this._peerIdToDatastoreKey(t)),r=ri.decode(e),n=new Map;for(const i of r.metadata)n.set(i.key,i.value);return{...r,id:t,addresses:r.addresses.map((({multiaddr:t,isCertified:e})=>({multiaddr:new x.sc(t),isCertified:e??!1}))),metadata:n,pubKey:r.pubKey??void 0,peerRecordEnvelope:r.peerRecordEnvelope??void 0}}async save(t){if(null!=t.pubKey&&null!=t.id.publicKey&&!(0,Yr.f)(t.pubKey,t.id.publicKey))throw Ti.error("peer publicKey bytes do not match peer id publicKey bytes"),v(new Error("publicKey bytes do not match peer id publicKey bytes"),Fn.ERR_INVALID_PARAMETERS);const e=new Set,r=t.addresses.filter((t=>!e.has(t.multiaddr.toString())&&(e.add(t.multiaddr.toString()),!0))).sort(((t,e)=>t.multiaddr.toString().localeCompare(e.multiaddr.toString()))).map((({multiaddr:t,isCertified:e})=>({multiaddr:t.bytes,isCertified:e}))),n=[];[...t.metadata.keys()].sort().forEach((e=>{const r=t.metadata.get(e);null!=r&&n.push({key:e,value:r})}));const i=ri.encode({addresses:r,protocols:t.protocols.sort(),pubKey:t.pubKey,metadata:n,peerRecordEnvelope:t.peerRecordEnvelope});return await this.datastore.put(this._peerIdToDatastoreKey(t.id),i),await this.load(t.id)}async patch(t,e){const r=await this.load(t);return await this._patch(t,e,r)}async patchOrCreate(t,e){let r;try{r=await this.load(t)}catch(n){if(n.code!==Fn.ERR_NOT_FOUND)throw n;r={id:t,addresses:[],protocols:[],metadata:new Map}}return await this._patch(t,e,r)}async _patch(t,e,r){return await this.save({...r,...e,id:t})}async merge(t,e){const r=await this.load(t);return await this._merge(t,e,r)}async mergeOrCreate(t,e){let r;try{r=await this.load(t)}catch(n){if(n.code!==Fn.ERR_NOT_FOUND)throw n;r={id:t,addresses:[],protocols:[],metadata:new Map}}return await this._merge(t,e,r)}async _merge(t,e,r){const n=new Map;return r.addresses.forEach((t=>{n.set(t.multiaddr.toString(),t.isCertified)})),(e.addresses??[]).forEach((t=>{const e=t.multiaddr.toString(),r=Boolean(n.get(e)),i=r||t.isCertified;n.set(e,i)})),await this.save({id:t,addresses:Array.from(n.entries()).map((([t,e])=>({multiaddr:new x.sc(t),isCertified:e}))),protocols:Array.from(new Set([...r.protocols??[],...e.protocols??[]])),metadata:new Map([...r.metadata?.entries()??[],...e.metadata?.entries()??[]]),pubKey:e.pubKey??(null!=r?r.pubKey:void 0),peerRecordEnvelope:e.peerRecordEnvelope??(null!=r?r.peerRecordEnvelope:void 0)})}async*all(){for await(const t of this.datastore.queryKeys({prefix:ki})){const e=t.toString().split("/")[2],r=si.base32.decode(e);yield this.load((0,B.cv)(r))}}}const Ni=(0,i.kg)("libp2p:peer-store");class Li extends Kn.vp{constructor(t,e={}){super(),this.components=t,this.store=new Pi(t.getDatastore()),this.addressBook=new Gn(this.dispatchEvent.bind(this),this.store,e.addressFilter??t.getConnectionGater().filterMultiaddrForPeer),this.keyBook=new Yn(this.dispatchEvent.bind(this),this.store),this.metadataBook=new Jn(this.dispatchEvent.bind(this),this.store),this.protoBook=new ei(this.dispatchEvent.bind(this),this.store)}async forEach(t){Ni.trace("getPeers await read lock");const e=await this.store.lock.readLock();Ni.trace("getPeers got read lock");try{for await(const e of this.store.all())e.id.equals(this.components.getPeerId())||t(e)}finally{Ni.trace("getPeers release read lock"),e()}}async all(){const t=[];return await this.forEach((e=>{t.push(e)})),t}async delete(t){Ni.trace("delete await write lock");const e=await this.store.lock.writeLock();Ni.trace("delete got write lock");try{await this.store.delete(t)}finally{Ni.trace("delete release write lock"),e()}}async get(t){Ni.trace("get await read lock");const e=await this.store.lock.readLock();Ni.trace("get got read lock");try{return await this.store.load(t)}finally{Ni.trace("get release read lock"),e()}}async has(t){Ni.trace("has await read lock");const e=await this.store.lock.readLock();Ni.trace("has got read lock");try{return await this.store.has(t)}finally{Ni.trace("has release read lock"),e()}}}class Di{constructor(t){this.dht=t}async provide(t){await d(this.dht.provide(t))}async*findProviders(t,e={}){for await(const r of this.dht.findProviders(t,e))"PROVIDER"===r.name&&(yield*r.providers)}async put(t,e,r){await d(this.dht.put(t,e,r))}async get(t,e){for await(const r of this.dht.get(t,e))if("VALUE"===r.name)return r.value;throw v(new Error("Not found"),"ERR_NOT_FOUND")}}const Oi=(0,i.kg)("libp2p:dialer:auto-dialer");class Bi{constructor(t,e){this.components=t,this.enabled=e.enabled,this.minConnections=e.minConnections,this.dialTimeout=e.dialTimeout}handle(t){const{detail:e}=t;if(!this.enabled)return;const r=this.components.getConnectionManager().getConnections(e.id);if(0===r.length){const t=this.minConnections??0,r=this.components.getConnectionManager().getConnections();if(t>r.length){Oi("auto-dialing discovered peer %p with timeout %d",e.id,this.dialTimeout);const t=new C.TimeoutController(this.dialTimeout);this.components.getConnectionManager().openConnection(e.id,{signal:t.signal}).catch((t=>{Oi.error("could not connect to discovered peer %p with %o",e.id,t)})).finally((()=>{t.clear()}))}}}}var xi=r(4108),Ui=r(5652),Mi=r(3061);const Vi=globalThis.fetch,Ki=globalThis.Headers;globalThis.Request,globalThis.Response;function Fi(t,e,r){return`${t}?name=${e}&type=${r}`}async function ji(t){const e=await Vi(t,{headers:new Ki({accept:"application/dns-json"})}),r=await e.json();return r}function qi(t,e){return`${e}_${t}`}const Hi=Object.assign(Ui("dns-over-http-resolver"),{error:Ui("dns-over-http-resolver:error")});class Gi{constructor(t={}){this._cache=new Mi({max:t?.maxCache??100}),this._TXTcache=new Mi({max:t?.maxCache??100}),this._servers=["https://cloudflare-dns.com/dns-query","https://dns.google/resolve"],this._request=t.request??ji}getServers(){return this._servers}_getShuffledServers(){const t=[...this._servers];for(let e=t.length-1;e>0;e--){const r=Math.floor(Math.random()*e),n=t[e];t[e]=t[r],t[r]=n}return t}setServers(t){this._servers=t}async resolve(t,e="A"){switch(e){case"A":return await this.resolve4(t);case"AAAA":return await this.resolve6(t);case"TXT":return await this.resolveTxt(t);default:throw new Error(`${e} is not supported`)}}async resolve4(t){const e="A",r=this._cache.get(qi(t,e));if(null!=r)return r;for(const i of this._getShuffledServers())try{const r=await this._request(Fi(i,t,e)),n=r.Answer.map((t=>t.data)),s=Math.min(...r.Answer.map((t=>t.TTL)));return this._cache.set(qi(t,e),n,{ttl:s}),n}catch(n){Hi.error(`${i} could not resolve ${t} record ${e}`)}throw new Error(`Could not resolve ${t} record ${e}`)}async resolve6(t){const e="AAAA",r=this._cache.get(qi(t,e));if(null!=r)return r;for(const i of this._getShuffledServers())try{const r=await this._request(Fi(i,t,e)),n=r.Answer.map((t=>t.data)),s=Math.min(...r.Answer.map((t=>t.TTL)));return this._cache.set(qi(t,e),n,{ttl:s}),n}catch(n){Hi.error(`${i} could not resolve ${t} record ${e}`)}throw new Error(`Could not resolve ${t} record ${e}`)}async resolveTxt(t){const e="TXT",r=this._TXTcache.get(qi(t,e));if(null!=r)return r;for(const i of this._getShuffledServers())try{const r=await this._request(Fi(i,t,e)),n=r.Answer.map((t=>[t.data.replace(/['"]+/g,"")])),s=Math.min(...r.Answer.map((t=>t.TTL)));return this._TXTcache.set(qi(t,e),n,{ttl:s}),n}catch(n){Hi.error(`${i} could not resolve ${t} record ${e}`)}throw new Error(`Could not resolve ${t} record ${e}`)}clearCache(){this._cache.clear(),this._TXTcache.clear()}}var zi=Gi,$i=zi;const{code:Wi}=(0,xi.Ev)("dnsaddr");async function Yi(t){const e=new $i,r=t.getPeerId(),[,n]=t.stringTuples().find((([t])=>t===Wi))??[];if(null==n)throw new Error("No hostname found in multiaddr");const i=await e.resolveTxt(`_dnsaddr.${n}`);let s=i.flat().map((t=>t.split("=")[1]));return null!=r&&(s=s.filter((t=>t.includes(r)))),s}const Qi={addresses:{listen:[],announce:[],noAnnounce:[],announceFilter:t=>t},connectionManager:{maxConnections:300,minConnections:50,autoDial:!0,autoDialInterval:1e4,maxParallelDials:lt,maxDialsPerPeer:ht,dialTimeout:ut,resolvers:{dnsaddr:Yi},addressSorter:ct},connectionGater:{},transportManager:{faultTolerance:dr.FATAL_ALL},metrics:{enabled:!1,computeThrottleMaxQueueSize:1e3,computeThrottleTimeout:2e3,movingAverageIntervals:[6e4,3e5,9e5],maxOldPeersRetention:50},peerRouting:{refreshManager:{enabled:!0,interval:6e5,bootDelay:1e4}},nat:{enabled:!0,ttl:7200,keepAlive:!0},relay:{enabled:!0,advertise:{bootDelay:oe,enabled:!1,ttl:ae},hop:{enabled:!1,active:!1},autoRelay:{enabled:!1,maxListeners:2}},identify:{protocolPrefix:"ipfs",host:{agentVersion:cn},timeout:3e4},ping:{protocolPrefix:"ipfs"},fetch:{protocolPrefix:"libp2p"}};function Xi(t){const e=H(Qi,t);if(null==e.transports||e.transports.length<1)throw v(new Error(y.ERR_TRANSPORTS_REQUIRED),m.ERR_TRANSPORTS_REQUIRED);if(null==e.connectionEncryption||0===e.connectionEncryption.length)throw v(new Error(y.CONN_ENCRYPTION_REQUIRED),m.CONN_ENCRYPTION_REQUIRED);if(null===e.connectionProtector&&null!=globalThis.process?.env?.LIBP2P_FORCE_PNET)throw v(new Error(y.ERR_PROTECTOR_REQUIRED),m.ERR_PROTECTOR_REQUIRED);return e}var Ji;(function(t){t.codec=()=>(0,Nt.yw)({1:{name:"id",codec:Nt.aI},2:{name:"pubKey",codec:Nt.aI,optional:!0},3:{name:"privKey",codec:Nt.aI,optional:!0}}),t.encode=e=>(0,Nt.LE)(e,t.codec()),t.decode=e=>(0,Nt.C6)(e,t.codec())})(Ji||(Ji={}));const Zi=async()=>{const t=await Ce.XP.generateKeyPair("Ed25519"),e=await ts(t);if("Ed25519"===e.type)return e;throw new Error(`Generated unexpected PeerId type "${e.type}"`)};async function ts(t){return await(0,B.y5)(Ce.XP.marshalPublicKey(t.public),Ce.XP.marshalPrivateKey(t))}const es=Symbol.for("@libp2p/peer-discovery");class rs extends o{get[es](){return!0}get[Symbol.toStringTag](){return"@libp2p/dummy-dht"}get wan(){throw v(new Error(y.DHT_DISABLED),m.DHT_DISABLED)}get lan(){throw v(new Error(y.DHT_DISABLED),m.DHT_DISABLED)}get(){throw v(new Error(y.DHT_DISABLED),m.DHT_DISABLED)}findProviders(){throw v(new Error(y.DHT_DISABLED),m.DHT_DISABLED)}findPeer(){throw v(new Error(y.DHT_DISABLED),m.DHT_DISABLED)}getClosestPeers(){throw v(new Error(y.DHT_DISABLED),m.DHT_DISABLED)}provide(){throw v(new Error(y.DHT_DISABLED),m.DHT_DISABLED)}put(){throw v(new Error(y.DHT_DISABLED),m.DHT_DISABLED)}async getMode(){throw v(new Error(y.DHT_DISABLED),m.DHT_DISABLED)}async setMode(){throw v(new Error(y.DHT_DISABLED),m.DHT_DISABLED)}async refreshRoutingTable(){throw v(new Error(y.DHT_DISABLED),m.DHT_DISABLED)}}class ns extends o{isStarted(){return!1}start(){}stop(){}get globalSignaturePolicy(){throw v(new Error(y.PUBSUB_DISABLED),m.ERR_PUBSUB_DISABLED)}get multicodecs(){throw v(new Error(y.PUBSUB_DISABLED),m.ERR_PUBSUB_DISABLED)}getPeers(){throw v(new Error(y.PUBSUB_DISABLED),m.ERR_PUBSUB_DISABLED)}getTopics(){throw v(new Error(y.PUBSUB_DISABLED),m.ERR_PUBSUB_DISABLED)}subscribe(){throw v(new Error(y.PUBSUB_DISABLED),m.ERR_PUBSUB_DISABLED)}unsubscribe(){throw v(new Error(y.PUBSUB_DISABLED),m.ERR_PUBSUB_DISABLED)}getSubscribers(){throw v(new Error(y.PUBSUB_DISABLED),m.ERR_PUBSUB_DISABLED)}async publish(){throw v(new Error(y.PUBSUB_DISABLED),m.ERR_PUBSUB_DISABLED)}}var is=r(5095);const ss=(0,i.kg)("libp2p");class os extends o{constructor(t){super(),this.initializables=[],this.started=!1,this.peerId=t.peerId,this.components=new Z({peerId:t.peerId,datastore:t.datastore??new b,connectionGater:{denyDialPeer:async()=>await Promise.resolve(!1),denyDialMultiaddr:async()=>await Promise.resolve(!1),denyInboundConnection:async()=>await Promise.resolve(!1),denyOutboundConnection:async()=>await Promise.resolve(!1),denyInboundEncryptedConnection:async()=>await Promise.resolve(!1),denyOutboundEncryptedConnection:async()=>await Promise.resolve(!1),denyInboundUpgradedConnection:async()=>await Promise.resolve(!1),denyOutboundUpgradedConnection:async()=>await Promise.resolve(!1),filterMultiaddrForPeer:async()=>await Promise.resolve(!0),...t.connectionGater}}),this.components.setPeerStore(new Li({addressFilter:this.components.getConnectionGater().filterMultiaddrForPeer,...t.peerStore})),this.services=[this.components],t.metrics.enabled&&(this.metrics=this.components.setMetrics(new Ge(t.metrics))),this.peerStore=this.components.getPeerStore(),this.peerStore.addEventListener("peer",(t=>{const{detail:e}=t;this.dispatchEvent(new c("peer:discovery",{detail:e}))})),null!=t.connectionProtector&&this.components.setConnectionProtector(t.connectionProtector),this.components.setUpgrader(new Kr(this.components,{connectionEncryption:(t.connectionEncryption??[]).map((t=>this.configureComponent(t))),muxers:(t.streamMuxers??[]).map((t=>this.configureComponent(t)))})),this.connectionManager=this.components.setConnectionManager(new It(t.connectionManager)),this.registrar=this.components.setRegistrar(new Gr(this.components)),this.components.setTransportManager(new hr(this.components,t.transportManager)),this.components.setAddressManager(new j(this.components,t.addresses)),this.configureComponent(new Mn(this.components)),this.configureComponent(new Tt(this.components,{enabled:t.connectionManager.autoDial,minConnections:t.connectionManager.minConnections,autoDialInterval:t.connectionManager.autoDialInterval}));const e=Ue.generateOptions();this.keychain=this.configureComponent(new Ue(this.components,{...e,...t.keychain})),this.services.push(new xn(this.components,t.nat)),t.transports.forEach((t=>{this.components.getTransportManager().add(this.configureComponent(t))})),null!=t.streamMuxers&&t.streamMuxers.length>0&&(this.identifyService=new mn(this.components,{...t.identify}),this.configureComponent(this.identifyService)),null!=t.dht?this.dht=this.components.setDHT(t.dht):this.dht=new rs,null!=t.pubsub?this.pubsub=this.components.setPubSub(t.pubsub):this.pubsub=new ns;const r=(t.peerRouters??[]).map((t=>this.configureComponent(t)));null!=t.dht&&(r.push(this.configureComponent(new Vn(this.dht))),this.dht.addEventListener("peer",(t=>{this.onDiscoveryPeer(t)}))),this.peerRouting=this.components.setPeerRouting(this.configureComponent(new D(this.components,{...t.peerRouting,routers:r})));const n=(t.contentRouters??[]).map((t=>this.configureComponent(t)));null!=t.dht&&n.push(this.configureComponent(new Di(this.dht))),this.contentRouting=this.components.setContentRouting(this.configureComponent(new O(this.components,{routers:n}))),t.relay.enabled&&(this.components.getTransportManager().add(this.configureComponent(new Zt)),this.configureComponent(new ye(this.components,{addressSorter:t.connectionManager.addressSorter,...t.relay}))),this.fetchService=this.configureComponent(new _n(this.components,{...t.fetch})),this.pingService=this.configureComponent(new Tn(this.components,{...t.ping}));const i=this.configureComponent(new Bi(this.components,{enabled:!1!==t.connectionManager.autoDial,minConnections:t.connectionManager.minConnections,dialTimeout:t.connectionManager.dialTimeout??3e4}));this.addEventListener("peer:discovery",(t=>{this.isStarted()&&i.handle(t)}));for(const s of t.peerDiscovery??[])this.configureComponent(s),s.addEventListener("peer",(t=>{this.onDiscoveryPeer(t)}))}configureComponent(t){return u(t)&&this.services.push(t),J(t)&&this.initializables.push(t),t}async start(){if(!this.started){this.started=!0,ss("libp2p is starting");try{this.initializables.forEach((t=>{t.init(this.components)})),await Promise.all(this.services.map((async t=>{null!=t.beforeStart&&await t.beforeStart()}))),await Promise.all(this.services.map((t=>t.start()))),await Promise.all(this.services.map((async t=>{null!=t.afterStart&&await t.afterStart()}))),ss("libp2p has started"),await this.components.getPeerStore().forEach((t=>{this.dispatchEvent(new c("peer:discovery",{detail:{id:t.id,multiaddrs:t.addresses.map((t=>t.multiaddr)),protocols:t.protocols}}))}))}catch(t){throw ss.error("An error occurred starting libp2p",t),await this.stop(),t}}}async stop(){this.started&&(ss("libp2p is stopping"),this.started=!1,await Promise.all(this.services.map((async t=>{null!=t.beforeStop&&await t.beforeStop()}))),await Promise.all(this.services.map((t=>t.stop()))),await Promise.all(this.services.map((async t=>{null!=t.afterStop&&await t.afterStop()}))),ss("libp2p has stopped"))}async loadKeychain(){if(null!=this.keychain)try{await this.keychain.findKeyByName("self")}catch(t){await this.keychain.importPeer("self",this.peerId)}}isStarted(){return this.started}getConnections(t){return this.components.getConnectionManager().getConnections(t)}getPeers(){const t=new is.fd;for(const e of this.components.getConnectionManager().getConnections())t.add(e.remotePeer);return Array.from(t)}async dial(t,e={}){const{id:r,multiaddrs:n}=K(t);return await this.components.getPeerStore().addressBook.add(r,n),await this.components.getConnectionManager().openConnection(r,e)}async dialProtocol(t,e,r={}){if(null==e)throw v(new Error("no protocols were provided to open a stream"),m.ERR_INVALID_PROTOCOLS_FOR_STREAM);if(e=Array.isArray(e)?e:[e],0===e.length)throw v(new Error("no protocols were provided to open a stream"),m.ERR_INVALID_PROTOCOLS_FOR_STREAM);const n=await this.dial(t,r);return await n.newStream(e,r)}getMultiaddrs(){return this.components.getAddressManager().getAddresses()}async hangUp(t){const{id:e}=K(t);await this.components.getConnectionManager().closeConnections(e)}async getPublicKey(t,e={}){if(ss("getPublicKey %p",t),null!=t.publicKey)return t.publicKey;const r=await this.peerStore.get(t);if(null!=r.pubKey)return r.pubKey;if(null==this.dht)throw v(new Error("Public key was not in the peer store and the DHT is not enabled"),m.ERR_NO_ROUTERS_AVAILABLE);const n=(0,$r.z)([(0,te.m)("/pk/"),t.multihash.digest]);for await(const i of this.dht.get(n,e))if("VALUE"===i.name){const e=(0,Ie.unmarshalPublicKey)(i.value);return await this.peerStore.keyBook.set(t,i.value),e.bytes}throw v(new Error(`Node not responding with its public key: ${t.toString()}`),m.ERR_INVALID_RECORD)}async fetch(t,e,r={}){const{id:n,multiaddrs:i}=K(t);return null!=i&&await this.components.getPeerStore().addressBook.add(n,i),await this.fetchService.fetch(n,e,r)}async ping(t,e={}){const{id:r,multiaddrs:n}=K(t);return n.length>0&&await this.components.getPeerStore().addressBook.add(r,n),await this.pingService.ping(r,e)}async handle(t,e){return await this.components.getRegistrar().handle(t,e)}async unhandle(t){return await this.components.getRegistrar().unhandle(t)}onDiscoveryPeer(t){const{detail:e}=t;e.id.toString()!==this.peerId.toString()?(e.multiaddrs.length>0&&this.components.getPeerStore().addressBook.add(e.id,e.multiaddrs).catch((t=>ss.error(t))),e.protocols.length>0&&this.components.getPeerStore().protoBook.set(e.id,e.protocols).catch((t=>ss.error(t))),this.dispatchEvent(new c("peer:discovery",{detail:e}))):ss.error(new Error(m.ERR_DISCOVERED_SELF))}}async function as(t){return null==t.peerId&&(t.peerId=await Zi()),new os(Xi(t))}async function cs(t){return await as(t)}},4711:function(t,e,r){"use strict";r.d(e,{kU:function(){return p},Dp:function(){return f},ET:function(){return m}});r(8675),r(3462),r(1703);function n(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(255!==r[o])throw new TypeError(s+" is ambiguous");r[o]=i}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function h(e){if(e instanceof Uint8Array||(ArrayBuffer.isView(e)?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):Array.isArray(e)&&(e=Uint8Array.from(e))),!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===e.length)return"";var r=0,n=0,i=0,s=e.length;while(i!==s&&0===e[i])i++,r++;var o=(s-i)*l+1>>>0,u=new Uint8Array(o);while(i!==s){for(var h=e[i],d=0,f=o-1;(0!==h||d<n)&&-1!==f;f--,d++)h+=256*u[f]>>>0,u[f]=h%a>>>0,h=h/a>>>0;if(0!==h)throw new Error("Non-zero carry");n=d,i++}var p=o-n;while(p!==o&&0===u[p])p++;for(var g=c.repeat(r);p<o;++p)g+=t.charAt(u[p]);return g}function d(t){if("string"!==typeof t)throw new TypeError("Expected String");if(0===t.length)return new Uint8Array;var e=0;if(" "!==t[e]){var n=0,i=0;while(t[e]===c)n++,e++;var s=(t.length-e)*u+1>>>0,o=new Uint8Array(s);while(t[e]){var l=r[t.charCodeAt(e)];if(255===l)return;for(var h=0,d=s-1;(0!==l||h<i)&&-1!==d;d--,h++)l+=a*o[d]>>>0,o[d]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");i=h,e++}if(" "!==t[e]){var f=s-i;while(f!==s&&0===o[f])f++;var p=new Uint8Array(n+(s-f)),g=n;while(f!==s)p[g++]=o[f++];return p}}}function f(t){var r=d(t);if(r)return r;throw new Error(`Non-${e} character`)}return{encode:h,decodeUnsafe:d,decode:f}}var i=n,s=i,o=s,a=r(3914);class c{constructor(t,e,r){this.name=t,this.prefix=e,this.baseEncode=r}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class u{constructor(t,e,r){this.name=t,this.prefix=e,this.baseDecode=r}decode(t){if("string"!==typeof t)throw Error("Can only multibase decode strings");switch(t[0]){case this.prefix:return this.baseDecode(t.slice(1));default:throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`)}}or(t){return h(this,t)}}class l{constructor(t){this.decoders=t}or(t){return h(this,t)}decode(t){const e=t[0],r=this.decoders[e];if(r)return r.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const h=(t,e)=>new l({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class d{constructor(t,e,r,n){this.name=t,this.prefix=e,this.baseEncode=r,this.baseDecode=n,this.encoder=new c(t,e,r),this.decoder=new u(t,e,n)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const f=({name:t,prefix:e,encode:r,decode:n})=>new d(t,e,r,n),p=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:i}=o(r,e);return f({prefix:t,name:e,encode:n,decode:t=>(0,a.oQ)(i(t))})},g=(t,e,r,n)=>{const i={};for(let l=0;l<e.length;++l)i[e[l]]=l;let s=t.length;while("="===t[s-1])--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,u=0;for(let l=0;l<s;++l){const e=i[t[l]];if(void 0===e)throw new SyntaxError(`Non-${n} character`);c=c<<r|e,a+=r,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},y=(t,e,r)=>{const n="="===e[e.length-1],i=(1<<r)-1;let s="",o=0,a=0;for(let c=0;c<t.length;++c){a=a<<8|t[c],o+=8;while(o>r)o-=r,s+=e[i&a>>o]}if(o&&(s+=e[i&a<<r-o]),n)while(s.length*r&7)s+="=";return s},m=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>f({prefix:e,name:t,encode(t){return y(t,n,r)},decode(e){return g(e,n,r,t)}})},2056:function(t,e,r){"use strict";r.r(e),r.d(e,{base32:function(){return i},base32hex:function(){return c},base32hexpad:function(){return l},base32hexpadupper:function(){return h},base32hexupper:function(){return u},base32pad:function(){return o},base32padupper:function(){return a},base32upper:function(){return s},base32z:function(){return d}});var n=r(4711);const i=(0,n.ET)({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),s=(0,n.ET)({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),o=(0,n.ET)({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),a=(0,n.ET)({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),c=(0,n.ET)({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),u=(0,n.ET)({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),l=(0,n.ET)({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),h=(0,n.ET)({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),d=(0,n.ET)({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5})},8334:function(t,e,r){"use strict";r.r(e),r.d(e,{base58btc:function(){return i},base58flickr:function(){return s}});var n=r(4711);const i=(0,n.kU)({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),s=(0,n.kU)({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"})},1058:function(t,e,r){"use strict";r.r(e),r.d(e,{base64:function(){return i},base64pad:function(){return s},base64url:function(){return o},base64urlpad:function(){return a}});var n=r(4711);const i=(0,n.ET)({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),s=(0,n.ET)({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),o=(0,n.ET)({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),a=(0,n.ET)({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6})},958:function(t,e,r){"use strict";r.d(e,{gh:function(){return x}});var n={};r.r(n),r.d(n,{identity:function(){return f}});var i={};r.r(i),r.d(i,{base2:function(){return p}});var s={};r.r(s),r.d(s,{base8:function(){return g}});var o={};r.r(o),r.d(o,{base10:function(){return y}});var a={};r.r(a),r.d(a,{base16:function(){return m},base16upper:function(){return w}});var c={};r.r(c),r.d(c,{base36:function(){return E},base36upper:function(){return b}});var u={};r.r(u),r.d(u,{code:function(){return A},decode:function(){return k},encode:function(){return T},name:function(){return C}});var l={};r.r(l),r.d(l,{code:function(){return D},decode:function(){return B},encode:function(){return O},name:function(){return L}});var h=r(4711),d=r(3914);const f=(0,h.Dp)({prefix:"\0",name:"identity",encode:t=>(0,d.BB)(t),decode:t=>(0,d.mL)(t)}),p=(0,h.ET)({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),g=(0,h.ET)({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),y=(0,h.kU)({prefix:"9",name:"base10",alphabet:"0123456789"}),m=(0,h.ET)({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),w=(0,h.ET)({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var v=r(2056);const E=(0,h.kU)({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),b=(0,h.kU)({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var S=r(8334),_=r(1058),R=r(1919),I=r(7041);const C="raw",A=85,T=t=>(0,d.oQ)(t),k=t=>(0,d.oQ)(t),P=new TextEncoder,N=new TextDecoder,L="json",D=512,O=t=>P.encode(JSON.stringify(t)),B=t=>JSON.parse(N.decode(t));r(9329),r(550),r(8212),r(5226);const x={...n,...i,...s,...o,...a,...v,...c,...S,..._}},3914:function(t,e,r){"use strict";r.d(e,{BB:function(){return o},fS:function(){return n},mL:function(){return s},oQ:function(){return i}});r(8675),r(3462),r(1703);new Uint8Array(0);const n=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0},i=t=>{if(t instanceof Uint8Array&&"Uint8Array"===t.constructor.name)return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},s=t=>(new TextEncoder).encode(t),o=t=>(new TextDecoder).decode(t)},9329:function(t,e,r){"use strict";r.d(e,{k:function(){return c}});r(1703),r(8675),r(3462);var n=r(550),i=r(5226),s=r(8334),o=r(2056),a=r(3914);class c{constructor(t,e,r,n){this.code=e,this.version=t,this.multihash=r,this.bytes=n,this.byteOffset=n.byteOffset,this.byteLength=n.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:m,byteLength:m,code:y,version:y,multihash:y,bytes:y,_baseCache:m,asCID:m})}toV0(){switch(this.version){case 0:return this;default:{const{code:t,multihash:e}=this;if(t!==d)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(e.code!==f)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return c.createV0(e)}}}toV1(){switch(this.version){case 0:{const{code:t,digest:e}=this.multihash,r=i.Ue(t,e);return c.createV1(this.code,r)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(t){return t&&this.code===t.code&&this.version===t.version&&i.fS(this.multihash,t.multihash)}toString(t){const{bytes:e,version:r,_baseCache:n}=this;switch(r){case 0:return l(e,n,t||s.base58btc.encoder);default:return h(e,n,t||o.base32.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(t){return v(/^0\.0/,E),!(!t||!t[g]&&t.asCID!==t)}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(t){if(t instanceof c)return t;if(null!=t&&t.asCID===t){const{version:e,code:r,multihash:n,bytes:i}=t;return new c(e,r,n,i||p(e,r,n.bytes))}if(null!=t&&!0===t[g]){const{version:e,multihash:r,code:n}=t,s=i.Jx(r);return c.create(e,n,s)}return null}static create(t,e,r){if("number"!==typeof e)throw new Error("String codecs are no longer supported");switch(t){case 0:if(e!==d)throw new Error(`Version 0 CID must use dag-pb (code: ${d}) block encoding`);return new c(t,e,r,r.bytes);case 1:{const n=p(t,e,r.bytes);return new c(t,e,r,n)}default:throw new Error("Invalid version")}}static createV0(t){return c.create(0,d,t)}static createV1(t,e){return c.create(1,t,e)}static decode(t){const[e,r]=c.decodeFirst(t);if(r.length)throw new Error("Incorrect length");return e}static decodeFirst(t){const e=c.inspectBytes(t),r=e.size-e.multihashSize,n=(0,a.oQ)(t.subarray(r,r+e.multihashSize));if(n.byteLength!==e.multihashSize)throw new Error("Incorrect length");const s=n.subarray(e.multihashSize-e.digestSize),o=new i.zZ(e.multihashCode,e.digestSize,s,n),u=0===e.version?c.createV0(o):c.createV1(e.codec,o);return[u,t.subarray(e.size)]}static inspectBytes(t){let e=0;const r=()=>{const[r,i]=n.Jx(t.subarray(e));return e+=i,r};let i=r(),s=d;if(18===i?(i=0,e=0):1===i&&(s=r()),0!==i&&1!==i)throw new RangeError(`Invalid CID version ${i}`);const o=e,a=r(),c=r(),u=e+c,l=u-o;return{version:i,codec:s,multihashCode:a,digestSize:c,multihashSize:l,size:u}}static parse(t,e){const[r,n]=u(t,e),i=c.decode(n);return i._baseCache.set(r,t),i}}const u=(t,e)=>{switch(t[0]){case"Q":{const r=e||s.base58btc;return[s.base58btc.prefix,r.decode(`${s.base58btc.prefix}${t}`)]}case s.base58btc.prefix:{const r=e||s.base58btc;return[s.base58btc.prefix,r.decode(t)]}case o.base32.prefix:{const r=e||o.base32;return[o.base32.prefix,r.decode(t)]}default:if(null==e)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}},l=(t,e,r)=>{const{prefix:n}=r;if(n!==s.base58btc.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);const i=e.get(n);if(null==i){const i=r.encode(t).slice(1);return e.set(n,i),i}return i},h=(t,e,r)=>{const{prefix:n}=r,i=e.get(n);if(null==i){const i=r.encode(t);return e.set(n,i),i}return i},d=112,f=18,p=(t,e,r)=>{const i=n.P$(t),s=i+n.P$(e),o=new Uint8Array(s+r.byteLength);return n.mL(t,o,0),n.mL(e,o,i),o.set(r,s),o},g=Symbol.for("@ipld/js-cid/CID"),y={writable:!1,configurable:!1,enumerable:!0},m={writable:!1,enumerable:!1,configurable:!1},w="0.0.0-dev",v=(t,e)=>{if(!t.test(w))throw new Error(e);console.warn(e)},E="CID.isCID(v) is deprecated and will be removed in the next major release.\nFollowing code pattern:\n\nif (CID.isCID(value)) {\n  doSomethingWithCID(value)\n}\n\nIs replaced with:\n\nconst cid = CID.asCID(value)\nif (cid) {\n  // Make sure to use cid instead of value\n  doSomethingWithCID(cid)\n}\n"},5226:function(t,e,r){"use strict";r.d(e,{Jx:function(){return o},Ue:function(){return s},fS:function(){return a},zZ:function(){return c}});r(8675),r(3462),r(1703);var n=r(3914),i=r(550);const s=(t,e)=>{const r=e.byteLength,n=i.P$(t),s=n+i.P$(r),o=new Uint8Array(s+r);return i.mL(t,o,0),i.mL(r,o,n),o.set(e,s),new c(t,r,e,o)},o=t=>{const e=(0,n.oQ)(t),[r,s]=i.Jx(e),[o,a]=i.Jx(e.subarray(s)),u=e.subarray(s+a);if(u.byteLength!==o)throw new Error("Incorrect length");return new c(r,o,u,e)},a=(t,e)=>t===e||t.code===e.code&&t.size===e.size&&(0,n.fS)(t.bytes,e.bytes);class c{constructor(t,e,r,n){this.code=t,this.size=e,this.digest=r,this.bytes=n}}},8212:function(t,e,r){"use strict";r.d(e,{D:function(){return i}});r(8675),r(3462),r(1703);var n=r(5226);const i=({name:t,code:e,encode:r})=>new s(t,e,r);class s{constructor(t,e,r){this.name=t,this.code=e,this.encode=r}digest(t){if(t instanceof Uint8Array){const e=this.encode(t);return e instanceof Uint8Array?n.Ue(this.code,e):e.then((t=>n.Ue(this.code,t)))}throw Error("Unknown type, must be binary type")}}},7041:function(t,e,r){"use strict";r.r(e),r.d(e,{identity:function(){return u}});var n=r(3914),i=r(5226);const s=0,o="identity",a=n.oQ,c=t=>i.Ue(s,a(t)),u={code:s,name:o,encode:a,digest:c}},1919:function(t,e,r){"use strict";r.r(e),r.d(e,{sha256:function(){return s},sha512:function(){return o}});r(8675),r(3462);var n=r(8212);const i=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),s=(0,n.D)({name:"sha2-256",code:18,encode:i("SHA-256")}),o=(0,n.D)({name:"sha2-512",code:19,encode:i("SHA-512")})},550:function(t,e,r){"use strict";r.d(e,{Jx:function(){return C},mL:function(){return A},P$:function(){return T}});r(1703);var n=c,i=128,s=127,o=~s,a=Math.pow(2,31);function c(t,e,r){e=e||[],r=r||0;var n=r;while(t>=a)e[r++]=255&t|i,t/=128;while(t&o)e[r++]=255&t|i,t>>>=7;return e[r]=0|t,c.bytes=r-n+1,e}var u=d,l=128,h=127;function d(t,e){var r,n=0,i=(e=e||0,0),s=e,o=t.length;do{if(s>=o)throw d.bytes=0,new RangeError("Could not decode varint");r=t[s++],n+=i<28?(r&h)<<i:(r&h)*Math.pow(2,i),i+=7}while(r>=l);return d.bytes=s-e,n}var f=Math.pow(2,7),p=Math.pow(2,14),g=Math.pow(2,21),y=Math.pow(2,28),m=Math.pow(2,35),w=Math.pow(2,42),v=Math.pow(2,49),E=Math.pow(2,56),b=Math.pow(2,63),S=function(t){return t<f?1:t<p?2:t<g?3:t<y?4:t<m?5:t<w?6:t<v?7:t<E?8:t<b?9:10},_={encode:n,decode:u,encodingLength:S},R=_,I=R;const C=t=>{const e=I.decode(t);return[e,I.decode.bytes]},A=(t,e,r=0)=>(I.encode(t,e,r),e),T=t=>I.encodingLength(t)},691:function(t,e,r){"use strict";r.d(e,{x0:function(){return n}});r(8675),r(3462);let n=(t=21)=>{let e="",r=crypto.getRandomValues(new Uint8Array(t));while(t--){let n=63&r[t];e+=n<36?n.toString(36):n<62?(n-26).toString(36).toUpperCase():n<63?"_":"-"}return e}},4622:function(t,e,r){"use strict";function n(){const t={};return t.promise=new Promise(((e,r)=>{t.resolve=e,t.reject=r})),t}r.d(e,{Z:function(){return n}})},1305:function(t,e,r){"use strict";r.d(e,{Z:function(){return j}});r(1703);var n=r(6856),i=r(8713);function s(t,e,r){let n=0,i=t.length;while(i>0){const s=Math.trunc(i/2);let o=n+s;r(t[o],e)<=0?(n=++o,i-=s+1):i=s}return n}var o,a=function(t,e,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(t):n?n.value:e.get(t)};class c{constructor(){o.set(this,[])}enqueue(t,e){e={priority:0,...e};const r={priority:e.priority,run:t};if(this.size&&a(this,o,"f")[this.size-1].priority>=e.priority)return void a(this,o,"f").push(r);const n=s(a(this,o,"f"),r,((t,e)=>e.priority-t.priority));a(this,o,"f").splice(n,0,r)}dequeue(){const t=a(this,o,"f").shift();return null===t||void 0===t?void 0:t.run}filter(t){return a(this,o,"f").filter((e=>e.priority===t.priority)).map((t=>t.run))}get size(){return a(this,o,"f").length}}o=new WeakMap;var u,l,h,d,f,p,g,y,m,w,v,E,b,S,_,R,I,C,A,T,k,P,N,L,D,O,B,x,U=function(t,e,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(t,r):i?i.value=r:e.set(t,r),r},M=function(t,e,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(t):n?n.value:e.get(t)};const V=()=>{},K=new i.W;class F extends Error{}class j extends n{constructor(t){var e,r,n,i;if(super(),u.add(this),l.set(this,void 0),h.set(this,void 0),d.set(this,0),f.set(this,void 0),p.set(this,void 0),g.set(this,0),y.set(this,void 0),m.set(this,void 0),w.set(this,void 0),v.set(this,void 0),E.set(this,0),b.set(this,void 0),S.set(this,void 0),_.set(this,V),R.set(this,V),I.set(this,void 0),C.set(this,void 0),t={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:c,...t},!("number"===typeof t.intervalCap&&t.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${null!==(r=null===(e=t.intervalCap)||void 0===e?void 0:e.toString())&&void 0!==r?r:""}\` (${typeof t.intervalCap})`);if(void 0===t.interval||!(Number.isFinite(t.interval)&&t.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${null!==(i=null===(n=t.interval)||void 0===n?void 0:n.toString())&&void 0!==i?i:""}\` (${typeof t.interval})`);U(this,l,t.carryoverConcurrencyCount,"f"),U(this,h,t.intervalCap===Number.POSITIVE_INFINITY||0===t.interval,"f"),U(this,f,t.intervalCap,"f"),U(this,p,t.interval,"f"),U(this,w,new t.queueClass,"f"),U(this,v,t.queueClass,"f"),this.concurrency=t.concurrency,U(this,I,t.timeout,"f"),U(this,C,!0===t.throwOnTimeout,"f"),U(this,S,!1===t.autoStart,"f")}get concurrency(){return M(this,b,"f")}set concurrency(t){if(!("number"===typeof t&&t>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${t}\` (${typeof t})`);U(this,b,t,"f"),M(this,u,"m",x).call(this)}async add(t,e={}){return new Promise(((r,n)=>{const s=async()=>{var s,o,a;U(this,E,(o=M(this,E,"f"),o++,o),"f"),U(this,d,(a=M(this,d,"f"),a++,a),"f");try{if(null===(s=e.signal)||void 0===s?void 0:s.aborted)return void n(new F("The task was aborted."));const o=void 0===M(this,I,"f")&&void 0===e.timeout?t({signal:e.signal}):(0,i.Z)(Promise.resolve(t({signal:e.signal})),void 0===e.timeout?M(this,I,"f"):e.timeout,(()=>{(void 0===e.throwOnTimeout?M(this,C,"f"):e.throwOnTimeout)&&n(K)})),a=await o;r(a),this.emit("completed",a)}catch(c){n(c),this.emit("error",c)}M(this,u,"m",k).call(this)};M(this,w,"f").enqueue(s,e),M(this,u,"m",D).call(this),this.emit("add")}))}async addAll(t,e){return Promise.all(t.map((async t=>this.add(t,e))))}start(){return M(this,S,"f")?(U(this,S,!1,"f"),M(this,u,"m",x).call(this),this):this}pause(){U(this,S,!0,"f")}clear(){U(this,w,new(M(this,v,"f")),"f")}async onEmpty(){if(0!==M(this,w,"f").size)return new Promise((t=>{const e=M(this,_,"f");U(this,_,(()=>{e(),t()}),"f")}))}async onSizeLessThan(t){if(!(M(this,w,"f").size<t))return new Promise((e=>{const r=()=>{M(this,w,"f").size<t&&(this.removeListener("next",r),e())};this.on("next",r)}))}async onIdle(){if(0!==M(this,E,"f")||0!==M(this,w,"f").size)return new Promise((t=>{const e=M(this,R,"f");U(this,R,(()=>{e(),t()}),"f")}))}get size(){return M(this,w,"f").size}sizeBy(t){return M(this,w,"f").filter(t).length}get pending(){return M(this,E,"f")}get isPaused(){return M(this,S,"f")}get timeout(){return M(this,I,"f")}set timeout(t){U(this,I,t,"f")}}l=new WeakMap,h=new WeakMap,d=new WeakMap,f=new WeakMap,p=new WeakMap,g=new WeakMap,y=new WeakMap,m=new WeakMap,w=new WeakMap,v=new WeakMap,E=new WeakMap,b=new WeakMap,S=new WeakMap,_=new WeakMap,R=new WeakMap,I=new WeakMap,C=new WeakMap,u=new WeakSet,A=function(){return M(this,h,"f")||M(this,d,"f")<M(this,f,"f")},T=function(){return M(this,E,"f")<M(this,b,"f")},k=function(){var t;U(this,E,(t=M(this,E,"f"),t--,t),"f"),M(this,u,"m",D).call(this),this.emit("next")},P=function(){M(this,_,"f").call(this),U(this,_,V,"f"),0===M(this,E,"f")&&(M(this,R,"f").call(this),U(this,R,V,"f"),this.emit("idle"))},N=function(){M(this,u,"m",B).call(this),M(this,u,"m",O).call(this),U(this,m,void 0,"f")},L=function(){const t=Date.now();if(void 0===M(this,y,"f")){const e=M(this,g,"f")-t;if(!(e<0))return void 0===M(this,m,"f")&&U(this,m,setTimeout((()=>{M(this,u,"m",N).call(this)}),e),"f"),!0;U(this,d,M(this,l,"f")?M(this,E,"f"):0,"f")}return!1},D=function(){if(0===M(this,w,"f").size)return M(this,y,"f")&&clearInterval(M(this,y,"f")),U(this,y,void 0,"f"),M(this,u,"m",P).call(this),!1;if(!M(this,S,"f")){const t=!M(this,u,"m",L).call(this);if(M(this,u,"a",A)&&M(this,u,"a",T)){const e=M(this,w,"f").dequeue();return!!e&&(this.emit("active"),e(),t&&M(this,u,"m",O).call(this),!0)}}return!1},O=function(){M(this,h,"f")||void 0!==M(this,y,"f")||(U(this,y,setInterval((()=>{M(this,u,"m",B).call(this)}),M(this,p,"f")),"f"),U(this,g,Date.now()+M(this,p,"f"),"f"))},B=function(){0===M(this,d,"f")&&0===M(this,E,"f")&&M(this,y,"f")&&(clearInterval(M(this,y,"f")),U(this,y,void 0,"f")),U(this,d,M(this,l,"f")?M(this,E,"f"):0,"f"),M(this,u,"m",x).call(this)},x=function(){while(M(this,u,"m",D).call(this));}},8713:function(t,e,r){"use strict";r.d(e,{W:function(){return n},Z:function(){return i}});r(1703);class n extends Error{constructor(t){super(t),this.name="TimeoutError"}}function i(t,e,r,i){let s;const o=new Promise(((o,a)=>{if("number"!==typeof e||1!==Math.sign(e))throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${e}\``);e!==Number.POSITIVE_INFINITY?(i={customTimers:{setTimeout:setTimeout,clearTimeout:clearTimeout},...i},s=i.customTimers.setTimeout.call(void 0,(()=>{if("function"===typeof r){try{o(r())}catch(c){a(c)}return}const i="string"===typeof r?r:`Promise timed out after ${e} milliseconds`,s=r instanceof Error?r:new n(i);"function"===typeof t.cancel&&t.cancel(),a(s)}),e),(async()=>{try{o(await t)}catch(e){a(e)}finally{i.customTimers.clearTimeout.call(void 0,s)}})()):o(t)}));return o.clear=()=>{clearTimeout(s),s=void 0},o}},1860:function(t,e,r){"use strict";r.d(e,{Xg:function(){return P},aI:function(){return O},C6:function(){return _},LE:function(){return R},Ji:function(){return M},LB:function(){return X},yw:function(){return st},Z_:function(){return _t},H9:function(){return Pt}});r(8675),r(3462);var n=r(9109);r(1703);function i(t){return t instanceof Uint8Array?{get(e){return t[e]},set(e,r){t[e]=r}}:{get(e){return t.get(e)},set(e,r){t.set(e,r)}}}const s=4294967296;class o{constructor(t=0,e=0){this.hi=t,this.lo=e}toBigInt(t){if(t)return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n);if(this.hi>>>31!==0){const t=1+~this.lo>>>0;let e=~this.hi>>>0;return 0===t&&(e=e+1>>>0),-(BigInt(t)+(BigInt(e)<<32n))}return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n)}zzDecode(){const t=-(1&this.lo),e=((this.lo>>>1|this.hi<<31)^t)>>>0,r=(this.hi>>>1^t)>>>0;return new o(r,e)}zzEncode(){const t=this.hi>>31,e=((this.hi<<1|this.lo>>>31)^t)>>>0,r=(this.lo<<1^t)>>>0;return new o(e,r)}toBytes(t,e=0){const r=i(t);while(this.hi>0)r.set(e++,127&this.lo|128),this.lo=(this.lo>>>7|this.hi<<25)>>>0,this.hi>>>=7;while(this.lo>127)r.set(e++,127&this.lo|128),this.lo=this.lo>>>7;r.set(e++,this.lo)}static fromBigInt(t){if(0n===t)return new o;const e=t<0;e&&(t=-t);let r=0|Number(t>>32n),n=0|Number(t-(BigInt(r)<<32n));return e&&(r=~r>>>0,n=~n>>>0,++n>s&&(n=0,++r>s&&(r=0))),new o(r,n)}static fromNumber(t){if(0===t)return new o;const e=t<0;e&&(t=-t);let r=t>>>0,n=(t-r)/4294967296>>>0;return e&&(n=~n>>>0,r=~r>>>0,++r>4294967295&&(r=0,++n>4294967295&&(n=0))),new o(n,r)}static fromBytes(t,e){const r=i(t),n=new o;let s=0;if(!(t.length-e>4)){for(;s<3;++s){if(e>=t.length)throw RangeError(`index out of range: ${e} > ${t.length}`);if(n.lo=(n.lo|(127&r.get(e))<<7*s)>>>0,r.get(e++)<128)return n}return n.lo=(n.lo|(127&r.get(e++))<<7*s)>>>0,n}for(;s<4;++s)if(n.lo=(n.lo|(127&r.get(e))<<7*s)>>>0,r.get(e++)<128)return n;if(n.lo=(n.lo|(127&r.get(e))<<28)>>>0,n.hi=(n.hi|(127&r.get(e))>>4)>>>0,r.get(e++)<128)return n;if(s=0,t.length-e>4){for(;s<5;++s)if(n.hi=(n.hi|(127&r.get(e))<<7*s+3)>>>0,r.get(e++)<128)return n}else for(;s<5;++s){if(e>=t.length)throw RangeError(`index out of range: ${e} > ${t.length}`);if(n.hi=(n.hi|(127&r.get(e))<<7*s+3)>>>0,r.get(e++)<128)return n}throw Error("invalid varint encoding")}}const a=128,c=127,u=~c,l=Math.pow(2,31),h=Math.pow(2,7),d=Math.pow(2,14),f=Math.pow(2,21),p=Math.pow(2,28),g=Math.pow(2,35),y=Math.pow(2,42),m=Math.pow(2,49),w=Math.pow(2,56),v=Math.pow(2,63),E={encodingLength(t){return t<h?1:t<d?2:t<f?3:t<p?4:t<g?5:t<y?6:t<m?7:t<w?8:t<v?9:10},encode(t,e){let r=0;const n=i(e);while(t>=l)n.set(r++,255&t|a),t/=128;while((t&u)>0)n.set(r++,255&t|a),t>>>=7;n.set(r,0|t)},decode(t,e=0){const r=i(t);let n=4294967295;if(n=(127&r.get(e))>>>0,r.get(e++)<128)return n;if(n=(n|(127&r.get(e))<<7)>>>0,r.get(e++)<128)return n;if(n=(n|(127&r.get(e))<<14)>>>0,r.get(e++)<128)return n;if(n=(n|(127&r.get(e))<<21)>>>0,r.get(e++)<128)return n;if(n=(n|(15&r.get(e))<<28)>>>0,r.get(e++)<128)return n;if((e+=5)>t.length)throw RangeError(`index out of range: ${e} > ${t.length}`);return n}},b={encodingLength(t){return t<0?10:E.encodingLength(t)},encode(t,e){if(t<0){let r=0;const n=i(e),s=o.fromNumber(t);while(s.hi>0)n.set(r++,127&s.lo|128),s.lo=(s.lo>>>7|s.hi<<25)>>>0,s.hi>>>=7;while(s.lo>127)n.set(r++,127&s.lo|128),s.lo=s.lo>>>7;n.set(r++,s.lo)}else E.encode(t,e)},decode(t,e=0){return 0|E.decode(t,e)}},S={encodingLength(t){return t=(t<<1^t>>31)>>>0,E.encodingLength(t)},encode(t,e,r=0){return t=(t<<1^t>>31)>>>0,E.encode(t,e)},decode(t,e=0){const r=E.decode(t,e);return r>>>1^-(1&r)|0}};function _(t,e){const r=new Uint8Array(E.encodingLength(t.length));return E.encode(t.length,r),e.decode(new n.H(r,t),0)}function R(t,e){const r=e.encode(t),n=E.encodingLength(E.decode(r));return r.slice(n)}var I;function C(t,e,r,n,i){return{name:t,type:e,encode:r,decode:n,encodingLength:i}}(function(t){t[t["VARINT"]=0]="VARINT",t[t["BIT64"]=1]="BIT64",t[t["LENGTH_DELIMITED"]=2]="LENGTH_DELIMITED",t[t["START_GROUP"]=3]="START_GROUP",t[t["END_GROUP"]=4]="END_GROUP",t[t["BIT32"]=5]="BIT32"})(I||(I={}));const A=function(){return 1},T=function(t){return Uint8Array.from([t?1:0])},k=function(t,e){return t.get(e)>0},P=C("bool",I.VARINT,T,k,A),N=function(t){const e=t.byteLength;return E.encodingLength(e)+e},L=function(t){const e=new Uint8Array(E.encodingLength(t.byteLength));return E.encode(t.byteLength,e),new n.H(e,t)},D=function(t,e){const r=E.decode(t,e);return e+=E.encodingLength(r),t.slice(e,e+r)},O=C("bytes",I.LENGTH_DELIMITED,L,D,N),B=function(){return 8},x=function(t){const e=new n.H(new Uint8Array(B(t)));return e.setFloat64(0,t,!0),e},U=function(t,e){return t.getFloat64(e,!0)};C("double",I.BIT64,x,U,B);function M(t){function e(e){if(null==t[e.toString()])throw new Error("Invalid enum value");return"number"===typeof e?e:t[e]}const r=function(t){return E.encodingLength(e(t))},n=function(t){const r=e(t),n=new Uint8Array(E.encodingLength(r));return E.encode(r,n),n},i=function(e,r){const n=E.decode(e,r),i=n.toString();if(null==t[i])throw new Error("Invalid enum value");return t[i]};return C("enum",I.VARINT,n,i,r)}const V=function(){return 4},K=function(t){const e=new n.H(new Uint8Array(V(t)));return e.setInt32(0,t,!0),e},F=function(t,e){return t.getInt32(e,!0)},j=(C("fixed32",I.BIT32,K,F,V),function(t){return 8}),q=function(t){const e=new n.H(new Uint8Array(j(t)));return e.setBigInt64(0,t,!0),e},H=function(t,e){return t.getBigInt64(e,!0)},G=(C("fixed64",I.BIT64,q,H,j),function(){return 4}),z=function(t){const e=new n.H(new Uint8Array(G(1)));return e.setFloat32(0,t,!0),e},$=function(t,e){return t.getFloat32(e,!0)},W=(C("float",I.BIT32,z,$,G),function(t){return b.encodingLength(t)}),Y=function(t){const e=new Uint8Array(W(t));return b.encode(t,e),e},Q=function(t,e){return b.decode(t,e)},X=C("int32",I.VARINT,Y,Q,W),J=0x7fn,Z={encodingLength(t){let e=0;for(;t>=0x80n;e++)t>>=7n;return e+1},encode(t,e){const r=i(e);let n=0;while(J<t)r.set(n++,128|Number(t&J)),t>>=7n;r.set(n,Number(t))},decode(t,e=0){return o.fromBytes(t,e).toBigInt(!0)}},tt={encodingLength(t){return t<0n?10:Z.encodingLength(t)},encode(t,e,r=0){if(!(t<0n))return Z.encode(t,e);o.fromBigInt(t).toBytes(e,r)},decode(t,e=0){return o.fromBytes(t,e).toBigInt(!1)}},et={encodingLength(t){return Z.encodingLength(t>=0?2n*t:-2n*t-1n)},encode(t,e,r=0){o.fromBigInt(t).zzEncode().toBytes(e,r)},decode(t,e=0){return o.fromBytes(t,e).zzDecode().toBigInt(!1)}},rt=function(t){return tt.encodingLength(t)},nt=function(t){const e=new Uint8Array(rt(t));return tt.encode(t,e),e},it=function(t,e){return 0n|tt.decode(t,e)};C("int64",I.VARINT,nt,it,rt);function st(t){const e=function(e){let r=0;for(const n of Object.values(t))r+=n.codec.encodingLength(e[n.name]);return E.encodingLength(r)+r},r=function(e){const r=new n.H;function i(t,e,n){if(null==t){if(!0===n.optional)return;throw new Error(`Non optional field "${n.name}" was ${null===t?"null":"undefined"}`)}const i=e<<3|n.codec.type,s=new Uint8Array(E.encodingLength(i));E.encode(i,s);const o=n.codec.encode(t);r.append(s),r.append(o)}for(const[n,o]of Object.entries(t)){const t=parseInt(n);if(!0===o.repeats){if(!Array.isArray(e[o.name]))throw new Error(`Repeating field "${o.name}" was not an array`);for(const r of e[o.name])i(r,t,o)}else i(e[o.name],t,o)}const s=new Uint8Array(E.encodingLength(r.length));return E.encode(r.length,s),new n.H(s,r)},i=function(e,r){const n=E.decode(e,r);r+=E.encodingLength(n);const i=r+n,s={};while(r<i){const n=E.decode(e,r);r+=E.encodingLength(n);const i=7&n,o=n>>3,a=t[o];let c=0;if(i===I.VARINT)if(null!=a){const t=a.codec.decode(e,r);c=a.codec.encodingLength(t)}else{const t=E.decode(e,r);c=E.encodingLength(t)}else if(i===I.BIT64)c=8;else if(i===I.LENGTH_DELIMITED){const t=E.decode(e,r);c=t+E.encodingLength(t)}else if(i===I.BIT32)c=4;else{if(i===I.START_GROUP)throw new Error("Unsupported wire type START_GROUP");if(i===I.END_GROUP)throw new Error("Unsupported wire type END_GROUP")}if(null!=a){const t=a.codec.decode(e,r);!0===a.repeats?(null==s[a.name]&&(s[a.name]=[]),s[a.name].push(t)):s[a.name]=t}r+=c}for(const o of Object.values(t))!0===o.repeats&&null==s[o.name]&&(s[o.name]=[]);return s};return C("message",I.LENGTH_DELIMITED,r,i,e)}const ot=function(){return 4},at=function(t){const e=new n.H(new Uint8Array(ot(t)));return e.setInt32(0,t,!0),e},ct=function(t,e){return t.getInt32(e,!0)},ut=(C("sfixed32",I.BIT32,at,ct,ot),function(){return 8}),lt=function(t){const e=new n.H(new Uint8Array(ut(t)));return e.setBigInt64(0,t,!0),e},ht=function(t,e){return t.getBigInt64(e,!0)},dt=(C("sfixed64",I.BIT64,lt,ht,ut),function(t){return S.encodingLength(t)}),ft=function(t){const e=new Uint8Array(dt(t));return S.encode(t,e),e},pt=function(t,e){return S.decode(t,e)},gt=(C("sint32",I.VARINT,ft,pt,dt),function(t){return et.encodingLength(t)}),yt=function(t){const e=new Uint8Array(gt(t));return et.encode(t,e),e},mt=function(t,e){return et.decode(t,e)};C("sint64",I.VARINT,yt,mt,gt);var wt=r(2259),vt=r(6523);const Et=function(t){const e=(0,wt.m)(t).byteLength;return E.encodingLength(e)+e},bt=function(t){const e=(0,wt.m)(t),r=new Uint8Array(E.encodingLength(e.byteLength));return E.encode(e.length,r),new n.H(r,e)},St=function(t,e){const r=E.decode(t,e);return e+=E.encodingLength(r),(0,vt.B)(t.slice(e,e+r))},_t=C("string",I.LENGTH_DELIMITED,bt,St,Et),Rt=function(t){return E.encodingLength(t)},It=function(t){const e=new Uint8Array(Rt(t));return E.encode(t,e),e},Ct=function(t,e){return E.decode(t,e)},At=(C("uint32",I.VARINT,It,Ct,Rt),function(t){return Z.encodingLength(t)}),Tt=function(t){const e=new Uint8Array(Z.encodingLength(t));return Z.encode(t,e),e},kt=function(t,e){return Z.decode(t,e)},Pt=C("uint64",I.VARINT,Tt,kt,At)},9109:function(t,e,r){"use strict";r.d(e,{H:function(){return a}});r(1703),r(8675),r(3462);var n=r(6861);const i=Symbol.for("@achingbrain/uint8arraylist");function s(t,e,r){if(null==e||e<0||e>=r)throw new RangeError("index is out of bounds");let n=0;for(const i of t){const t=n+i.byteLength;if(e<t)return{buf:i,index:e-n};n=t}throw new RangeError("index is out of bounds")}function o(t){return Boolean(t?.[i])}class a{constructor(...t){Object.defineProperty(this,i,{value:!0}),this.bufs=[],this.length=0,this.appendAll(t)}*[Symbol.iterator](){yield*this.bufs}get byteLength(){return this.length}append(...t){this.appendAll(t)}appendAll(t){let e=0;for(const r of t)if(r instanceof Uint8Array)e+=r.byteLength,this.bufs.push(r);else{if(!o(r))throw new Error("Could not append value, must be an Uint8Array or a Uint8ArrayList");e+=r.length,this.bufs=this.bufs.concat(r.bufs)}this.length+=e}get(t){const e=s(this.bufs,t,this.length);return e.buf[e.index]}set(t,e){const r=s(this.bufs,t,this.length);r.buf[r.index]=e}write(t,e=0){if(t instanceof Uint8Array)for(let r=0;r<t.length;r++)this.set(e+r,t[r]);else{if(!o(t))throw new Error("Could not write value, must be an Uint8Array or a Uint8ArrayList");for(let r=0;r<t.length;r++)this.set(e+r,t.get(r))}}consume(t){if(t=Math.trunc(t),!(Number.isNaN(t)||t<=0))while(this.bufs.length>0){if(!(t>=this.bufs[0].byteLength)){this.bufs[0]=this.bufs[0].subarray(t),this.length-=t;break}t-=this.bufs[0].byteLength,this.length-=this.bufs[0].byteLength,this.bufs.shift()}}slice(t,e){const{bufs:r,length:i}=this._subList(t,e);return(0,n.zo)(r,i)}subarray(t,e){const{bufs:r}=this._subList(t,e),n=new a;return n.appendAll(r),n}_subList(t,e){if(null==t&&null==e)return{bufs:this.bufs,length:this.length};if(t=t??0,e=e??(this.length>0?this.length:0),t<0||e>this.length)throw new RangeError("index out of bounds");if(t===e)return{bufs:[],length:0};const r=[];let n=0;for(const i of this.bufs){const s=n,o=s+i.byteLength,a=t>=s&&t<o,c=e>s&&e<=o,u=t<s&&e>=o;let l,h;if(n=o,a&&(l=t-s,h=i.byteLength),c&&(h=e-s,null==l&&(l=0)),u&&(l=0,h=i.byteLength),null!=l&&null!=h&&r.push(i.subarray(l,h)),c)break}return{bufs:r,length:e-t}}getInt8(t){const e=this.slice(t,t+1),r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.getInt8(0)}setInt8(t,e){const r=new Uint8Array(1),n=new DataView(r.buffer,r.byteOffset,r.byteLength);n.setInt8(0,e),this.write(r,t)}getInt16(t,e){const r=this.slice(t,t+2),n=new DataView(r.buffer,r.byteOffset,r.byteLength);return n.getInt16(0,e)}setInt16(t,e,r){const n=new Uint8Array(2),i=new DataView(n.buffer,n.byteOffset,n.byteLength);i.setInt16(0,e,r),this.write(n,t)}getInt32(t,e){const r=this.slice(t,t+4),n=new DataView(r.buffer,r.byteOffset,r.byteLength);return n.getInt32(0,e)}setInt32(t,e,r){const n=new Uint8Array(4),i=new DataView(n.buffer,n.byteOffset,n.byteLength);i.setInt32(0,e,r),this.write(n,t)}getBigInt64(t,e){const r=this.slice(t,t+8),n=new DataView(r.buffer,r.byteOffset,r.byteLength);return n.getBigInt64(0,e)}setBigInt64(t,e,r){const n=new Uint8Array(8),i=new DataView(n.buffer,n.byteOffset,n.byteLength);i.setBigInt64(0,e,r),this.write(n,t)}getUint8(t){const e=this.slice(t,t+1),r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.getUint8(0)}setUint8(t,e){const r=new Uint8Array(1),n=new DataView(r.buffer,r.byteOffset,r.byteLength);n.setUint8(0,e),this.write(r,t)}getUint16(t,e){const r=this.slice(t,t+2),n=new DataView(r.buffer,r.byteOffset,r.byteLength);return n.getUint16(0,e)}setUint16(t,e,r){const n=new Uint8Array(2),i=new DataView(n.buffer,n.byteOffset,n.byteLength);i.setUint16(0,e,r),this.write(n,t)}getUint32(t,e){const r=this.slice(t,t+4),n=new DataView(r.buffer,r.byteOffset,r.byteLength);return n.getUint32(0,e)}setUint32(t,e,r){const n=new Uint8Array(4),i=new DataView(n.buffer,n.byteOffset,n.byteLength);i.setUint32(0,e,r),this.write(n,t)}getBigUint64(t,e){const r=this.slice(t,t+8),n=new DataView(r.buffer,r.byteOffset,r.byteLength);return n.getBigUint64(0,e)}setBigUint64(t,e,r){const n=new Uint8Array(8),i=new DataView(n.buffer,n.byteOffset,n.byteLength);i.setBigUint64(0,e,r),this.write(n,t)}getFloat32(t,e){const r=this.slice(t,t+4),n=new DataView(r.buffer,r.byteOffset,r.byteLength);return n.getFloat32(0,e)}setFloat32(t,e,r){const n=new Uint8Array(4),i=new DataView(n.buffer,n.byteOffset,n.byteLength);i.setFloat32(0,e,r),this.write(n,t)}getFloat64(t,e){const r=this.slice(t,t+8),n=new DataView(r.buffer,r.byteOffset,r.byteLength);return n.getFloat64(0,e)}setFloat64(t,e,r){const n=new Uint8Array(8),i=new DataView(n.buffer,n.byteOffset,n.byteLength);i.setFloat64(0,e,r),this.write(n,t)}}},5489:function(t,e,r){"use strict";r.d(e,{z:function(){return n}});r(8675),r(3462);function n(t,e){e||(e=t.reduce(((t,e)=>t+e.length),0));const r=new Uint8Array(e);let n=0;for(const i of t)r.set(i,n),n+=i.length;return r}},4141:function(t,e,r){"use strict";function n(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}r.d(e,{f:function(){return n}})},2259:function(t,e,r){"use strict";r.d(e,{m:function(){return i}});r(1703);var n=r(2884);function i(t,e="utf8"){const r=n.Z[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return r.decoder.decode(`${r.prefix}${t}`)}},6861:function(t,e,r){"use strict";r.d(e,{BB:function(){return o.B},fS:function(){return i.f},mL:function(){return s.m},zo:function(){return n.z}});var n=r(5489),i=r(4141),s=r(2259),o=r(6523);r(9082)},6523:function(t,e,r){"use strict";r.d(e,{B:function(){return i}});r(1703);var n=r(2884);function i(t,e="utf8"){const r=n.Z[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return r.encoder.encode(t).substring(1)}},2884:function(t,e,r){"use strict";r(8675),r(3462);var n=r(958);function i(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const s=i("utf8","u",(t=>{const e=new TextDecoder("utf8");return"u"+e.decode(t)}),(t=>{const e=new TextEncoder;return e.encode(t.substring(1))})),o=i("ascii","a",(t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e}),(t=>{t=t.substring(1);const e=new Uint8Array(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e})),a={utf8:s,"utf-8":s,hex:n.gh.base16,latin1:o,ascii:o,binary:o,...n.gh};e["Z"]=a},9082:function(t,e,r){"use strict";r.d(e,{d:function(){return n}});r(1703),r(8675),r(3462);function n(t,e){if(t.length!==e.length)throw new Error("Inputs should have the same length");const r=new Uint8Array(t.length);for(let n=0;n<t.length;n++)r[n]=t[n]^e[n];return r}}}]);
//# sourceMappingURL=chunk-vendors.3c712c51.js.map